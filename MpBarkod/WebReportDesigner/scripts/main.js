!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(a,b){function s(e){var t=e.length,r=n.type(e);return"function"===r||n.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e}function x(e,t,r){if(n.isFunction(t))return n.grep(e,function(e,n){return!!t.call(e,n,e)!==r});if(t.nodeType)return n.grep(e,function(e){return e===t!==r});if("string"==typeof t){if(w.test(t))return n.filter(t,e,r);t=n.filter(t,e)}return n.grep(e,function(e){return g.call(t,e)>=0!==r})}function D(e,t){while((e=e[t])&&1!==e.nodeType);return e}function G(e){var t=F[e]={};return n.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}function P(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(O,"-$1").toLowerCase(),r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:N.test(r)?n.parseJSON(r):r}catch(s){}M.set(e,t,r)}else r=void 0;return r}function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(e){}}function jb(e,t){return n.nodeName(e,"table")&&n.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function kb(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function lb(e){var t=gb.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function mb(e,t){for(var n=0,r=e.length;r>n;n++)L.set(e[n],"globalEval",!t||L.get(t[n],"globalEval"))}function nb(e,t){var r,i,s,o,u,a,f,l;if(1===t.nodeType){if(L.hasData(e)&&(o=L.access(e),u=L.set(t,o),l=o.events)){delete u.handle,u.events={};for(s in l)for(r=0,i=l[s].length;i>r;r++)n.event.add(t,s,l[s][r])}M.hasData(e)&&(a=M.access(e),f=n.extend({},a),M.set(t,f))}}function ob(e,t){var r=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&n.nodeName(e,t)?n.merge([e],r):r}function pb(e,t){var n=t.nodeName.toLowerCase();"input"===n&&T.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function sb(e,t){var r,i=n(t.createElement(e)).appendTo(t.body),s=a.getDefaultComputedStyle&&(r=a.getDefaultComputedStyle(i[0]))?r.display:n.css(i[0],"display");return i.detach(),s}function tb(e){var t=l,r=rb[e];return r||(r=sb(e,t),"none"!==r&&r||(qb=(qb||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=qb[0].contentDocument,t.write(),t.close(),r=sb(e,t),qb.detach()),rb[e]=r),r}function xb(e,t,r){var i,s,o,u,a=e.style;return r=r||wb(e),r&&(u=r.getPropertyValue(t)||r[t]),r&&(""!==u||n.contains(e.ownerDocument,e)||(u=n.style(e,t)),vb.test(u)&&ub.test(t)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=u,u=r.width,a.width=i,a.minWidth=s,a.maxWidth=o)),void 0!==u?u+"":u}function yb(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function Fb(e,t){if(t in e)return t;var n=t[0].toUpperCase()+t.slice(1),r=t,i=Eb.length;while(i--)if(t=Eb[i]+n,t in e)return t;return r}function Gb(e,t,n){var r=Ab.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Hb(e,t,r,i,s){for(var o=r===(i?"border":"content")?4:"width"===t?1:0,u=0;4>o;o+=2)"margin"===r&&(u+=n.css(e,r+R[o],!0,s)),i?("content"===r&&(u-=n.css(e,"padding"+R[o],!0,s)),"margin"!==r&&(u-=n.css(e,"border"+R[o]+"Width",!0,s))):(u+=n.css(e,"padding"+R[o],!0,s),"padding"!==r&&(u+=n.css(e,"border"+R[o]+"Width",!0,s)));return u}function Ib(e,t,r){var i=!0,s="width"===t?e.offsetWidth:e.offsetHeight,o=wb(e),u="border-box"===n.css(e,"boxSizing",!1,o);if(0>=s||null==s){if(s=xb(e,t,o),(0>s||null==s)&&(s=e.style[t]),vb.test(s))return s;i=u&&(k.boxSizingReliable()||s===e.style[t]),s=parseFloat(s)||0}return s+Hb(e,t,r||(u?"border":"content"),i,o)+"px"}function Jb(e,t){for(var r,i,s,o=[],u=0,a=e.length;a>u;u++)i=e[u],i.style&&(o[u]=L.get(i,"olddisplay"),r=i.style.display,t?(o[u]||"none"!==r||(i.style.display=""),""===i.style.display&&S(i)&&(o[u]=L.access(i,"olddisplay",tb(i.nodeName)))):(s=S(i),"none"===r&&s||L.set(i,"olddisplay",s?r:n.css(i,"display"))));for(u=0;a>u;u++)i=e[u],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[u]||"":"none"));return e}function Kb(e,t,n,r,i){return new Kb.prototype.init(e,t,n,r,i)}function Sb(){return setTimeout(function(){Lb=void 0}),Lb=n.now()}function Tb(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=R[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function Ub(e,t,n){for(var r,i=(Rb[t]||[]).concat(Rb["*"]),s=0,o=i.length;o>s;s++)if(r=i[s].call(n,t,e))return r}function Vb(e,t,r){var i,s,o,u,a,f,l,c,h=this,p={},d=e.style,v=e.nodeType&&S(e),m=L.get(e,"fxshow");r.queue||(a=n._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,f=a.empty.fire,a.empty.fire=function(){a.unqueued||f()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,n.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[d.overflow,d.overflowX,d.overflowY],l=n.css(e,"display"),c="none"===l?L.get(e,"olddisplay")||tb(e.nodeName):l,"inline"===c&&"none"===n.css(e,"float")&&(d.display="inline-block")),r.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=r.overflow[0],d.overflowX=r.overflow[1],d.overflowY=r.overflow[2]}));for(i in t)if(s=t[i],Nb.exec(s)){if(delete t[i],o=o||"toggle"===s,s===(v?"hide":"show")){if("show"!==s||!m||void 0===m[i])continue;v=!0}p[i]=m&&m[i]||n.style(e,i)}else l=void 0;if(n.isEmptyObject(p))"inline"===("none"===l?tb(e.nodeName):l)&&(d.display=l);else{m?"hidden"in m&&(v=m.hidden):m=L.access(e,"fxshow",{}),o&&(m.hidden=!v),v?n(e).show():h.done(function(){n(e).hide()}),h.done(function(){var t;L.remove(e,"fxshow");for(t in p)n.style(e,t,p[t])});for(i in p)u=Ub(v?m[i]:0,i,h),i in m||(m[i]=u.start,v&&(u.end=u.start,u.start="width"===i||"height"===i?1:0))}}function Wb(e,t){var r,i,s,o,u;for(r in e)if(i=n.camelCase(r),s=t[i],o=e[r],n.isArray(o)&&(s=o[1],o=e[r]=o[0]),r!==i&&(e[i]=o,delete e[r]),u=n.cssHooks[i],u&&"expand"in u){o=u.expand(o),delete e[i];for(r in o)r in e||(e[r]=o[r],t[r]=s)}else t[i]=s}function Xb(e,t,r){var i,s,o=0,u=Qb.length,a=n.Deferred().always(function(){delete f.elem}),f=function(){if(s)return!1;for(var t=Lb||Sb(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,i=1-r,o=0,u=l.tweens.length;u>o;o++)l.tweens[o].run(i);return a.notifyWith(e,[l,i,n]),1>i&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:n.extend({},t),opts:n.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:Lb||Sb(),duration:r.duration,tweens:[],createTween:function(t,r){var i=n.Tween(e,l.opts,t,r,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,r=t?l.tweens.length:0;if(s)return this;for(s=!0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(Wb(c,l.opts.specialEasing);u>o;o++)if(i=Qb[o].call(l,e,c,l.opts))return i;return n.map(c,Ub,l),n.isFunction(l.opts.start)&&l.opts.start.call(e,l),n.fx.timer(n.extend(f,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function qc(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,s=0,o=t.toLowerCase().match(E)||[];if(n.isFunction(r))while(i=o[s++])"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function rc(e,t,r,i){function u(l){var h;return s[l]=!0,n.each(e[l]||[],function(e,n){var a=n(t,r,i);return"string"!=typeof a||o||s[a]?o?!(h=a):void 0:(t.dataTypes.unshift(a),u(a),!1)}),h}var s={},o=e===mc;return u(t.dataTypes[0])||!s["*"]&&u("*")}function sc(e,t){var r,i,s=n.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((s[r]?e:i||(i={}))[r]=t[r]);return i&&n.extend(!0,e,i),e}function tc(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while("*"===a[0])a.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){a.unshift(i);break}if(a[0]in n)s=a[0];else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}o||(o=i)}s=s||o}return s?(s!==a[0]&&a.unshift(s),n[s]):void 0}function uc(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function Ac(e,t,r,i){var s;if(n.isArray(t))n.each(t,function(t,n){r||wc.test(e)?i(e,n):Ac(e+"["+("object"==typeof n?t:"")+"]",n,r,i)});else if(r||"object"!==n.type(t))i(e,t);else for(s in t)Ac(e+"["+s+"]",t[s],r,i)}function Jc(e){return n.isWindow(e)?e:9===e.nodeType&&e.defaultView}var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.3",n=function(e,t){return new n.fn.init(e,t)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(e,t){return t.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:d.call(this)},pushStack:function(e){var t=n.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return n.each(this,e,t)},map:function(e){return this.pushStack(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var e,t,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[a]||{},a++),"object"==typeof u||n.isFunction(u)||(u={}),a===f&&(u=this,a--);f>a;a++)if(null!=(e=arguments[a]))for(t in e)r=u[t],i=e[t],u!==i&&(l&&i&&(n.isPlainObject(i)||(s=n.isArray(i)))?(s?(s=!1,o=r&&n.isArray(r)?r:[]):o=r&&n.isPlainObject(r)?r:{},u[t]=n.extend(l,o,i)):void 0!==i&&(u[t]=i));return u},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===n.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!n.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==n.type(e)||e.nodeType||n.isWindow(e)?!1:e.constructor&&!j.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[i.call(e)]||"object":typeof e},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(e){return e.replace(p,"ms-").replace(q,r)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,u=s(e);if(n){if(u){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(u){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(o,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(s(Object(e))?n.merge(r,"string"==typeof e?[e]:e):f.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:g.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],s=0,o=e.length,u=!n;o>s;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(t,n,r){var i,o=0,u=t.length,a=s(t),f=[];if(a)for(;u>o;o++)i=n(t[o],o,r),null!=i&&f.push(i);else for(o in t)i=n(t[o],o,r),null!=i&&f.push(i);return e.apply([],f)},guid:1,proxy:function(e,t){var r,i,s;return"string"==typeof t&&(r=e[t],t=e,e=r),n.isFunction(e)?(i=d.call(arguments,2),s=function(){return e.apply(t||this,i.concat(d.call(arguments)))},s.guid=e.guid=e.guid||n.guid++,s):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){h["[object "+t+"]"]=t.toLowerCase()});var t=function(e){function ot(e,t,r,i){var s,u,f,l,c,d,g,y,S,x;if((t?t.ownerDocument||t:E)!==p&&h(t),t=t||p,r=r||[],l=t.nodeType,"string"!=typeof e||!e||1!==l&&9!==l&&11!==l)return r;if(!i&&v){if(11!==l&&(s=Z.exec(e)))if(f=s[1]){if(9===l){if(u=t.getElementById(f),!u||!u.parentNode)return r;if(u.id===f)return r.push(u),r}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&b(t,u)&&u.id===f)return r.push(u),r}else{if(s[2])return D.apply(r,t.getElementsByTagName(e)),r;if((f=s[3])&&n.getElementsByClassName)return D.apply(r,t.getElementsByClassName(f)),r}if(n.qsa&&(!m||!m.test(e))){if(y=g=w,S=t,x=1!==l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){d=o(e),(g=t.getAttribute("id"))?y=g.replace(tt,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",c=d.length;while(c--)d[c]=y+gt(d[c]);S=et.test(e)&&vt(t.parentNode)||t,x=d.join(",")}if(x)try{return D.apply(r,S.querySelectorAll(x)),r}catch(T){}finally{g||t.removeAttribute("id")}}}return a(e.replace(z,"$1"),t,r,i)}function ut(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function at(e){return e[w]=!0,e}function ft(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function ct(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||L)-(~e.sourceIndex||L);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function dt(e){return at(function(t){return t=+t,at(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function vt(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function mt(){}function gt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,i=n&&"parentNode"===r,s=x++;return t.first?function(t,n,s){while(t=t[r])if(1===t.nodeType||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[S,s];if(o){while(t=t[r])if((1===t.nodeType||i)&&e(t,n,o))return!0}else while(t=t[r])if(1===t.nodeType||i){if(a=t[w]||(t[w]={}),(u=a[r])&&u[0]===S&&u[1]===s)return f[2]=u[2];if(a[r]=f,f[2]=e(t,n,o))return!0}}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n){for(var r=0,i=t.length;i>r;r++)ot(e,t[r],n);return n}function Et(e,t,n,r,i){for(var s,o=[],u=0,a=e.length,f=null!=t;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function St(e,t,n,r,i,s){return r&&!r[w]&&(r=St(r)),i&&!i[w]&&(i=St(i,s)),at(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:Et(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=Et(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?H(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=Et(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):D.apply(o,g)})}function xt(e){for(var t,n,i,s=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],a=o?1:0,l=yt(function(e){return e===t},u,!0),c=yt(function(e){return H(t,e)>-1},u,!0),h=[function(e,n,r){var i=!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r));return t=null,i}];s>a;a++)if(n=r.relative[e[a].type])h=[yt(bt(h),n)];else{if(n=r.filter[e[a].type].apply(null,e[a].matches),n[w]){for(i=++a;s>i;i++)if(r.relative[e[i].type])break;return St(a>1&&bt(h),a>1&&gt(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(z,"$1"),n,i>a&&xt(e.slice(a,i)),s>i&&xt(e=e.slice(i)),s>i&&gt(e))}h.push(n)}return bt(h)}function Tt(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,u,a,l){var c,h,d,v=0,m="0",g=s&&[],y=[],b=f,w=s||i&&r.find.TAG("*",l),E=S+=null==b?1:Math.random()||.1,x=w.length;for(l&&(f=o!==p&&o);m!==x&&null!=(c=w[m]);m++){if(i&&c){h=0;while(d=e[h++])if(d(c,o,u)){a.push(c);break}l&&(S=E)}n&&((c=!d&&c)&&v--,s&&g.push(c))}if(v+=m,n&&m!==v){h=0;while(d=t[h++])d(g,y,o,u);if(s){if(v>0)while(m--)g[m]||y[m]||(y[m]=M.call(a));y=Et(y)}D.apply(a,y),l&&!s&&y.length>0&&v+t.length>1&&ot.uniqueSort(a)}return l&&(S=E,f=b),g};return n?at(s):s}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w="sizzle"+1*new Date,E=e.document,S=0,x=0,T=ut(),N=ut(),C=ut(),k=function(e,t){return e===t&&(c=!0),0},L=1<<31,A={}.hasOwnProperty,O=[],M=O.pop,_=O.push,D=O.push,P=O.slice,H=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",I=F.replace("w","w#"),q="\\["+j+"*("+F+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+j+"*\\]",R=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",U=new RegExp(j+"+","g"),z=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),W=new RegExp("^"+j+"*,"+j+"*"),X=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),V=new RegExp("="+j+"*([^\\]'\"]*?)"+j+"*\\]","g"),$=new RegExp(R),J=new RegExp("^"+I+"$"),K={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F.replace("w","w*")+")"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/[+~]/,tt=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),rt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},it=function(){h()};try{D.apply(O=P.call(E.childNodes),E.childNodes),O[E.childNodes.length].nodeType}catch(st){D={apply:O.length?function(e,t){_.apply(e,P.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=ot.support={},s=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},h=ot.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:E;return o!==p&&9===o.nodeType&&o.documentElement?(p=o,d=o.documentElement,i=o.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",it,!1):i.attachEvent&&i.attachEvent("onunload",it)),v=!s(o),n.attributes=ft(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ft(function(e){return e.appendChild(o.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(o.getElementsByClassName),n.getById=ft(function(e){return d.appendChild(e).id=w,!o.getElementsByName||!o.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&v){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){return v?t.getElementsByClassName(e):void 0},g=[],m=[],(n.qsa=Y.test(o.querySelectorAll))&&(ft(function(e){d.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+j+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]")}),ft(function(e){var t=o.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+j+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Y.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ft(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",R)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Y.test(d.compareDocumentPosition),b=t||Y.test(d.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===o||e.ownerDocument===E&&b(E,e)?-1:t===o||t.ownerDocument===E&&b(E,t)?1:l?H(l,e)-H(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,i=e.parentNode,s=t.parentNode,u=[e],a=[t];if(!i||!s)return e===o?-1:t===o?1:i?-1:s?1:l?H(l,e)-H(l,t):0;if(i===s)return ct(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)a.unshift(n);while(u[r]===a[r])r++;return r?ct(u[r],a[r]):u[r]===E?-1:a[r]===E?1:0},o):p},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),t=t.replace(V,"='$1']"),!(!n.matchesSelector||!v||g&&g.test(t)||m&&m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return ot(t,p,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},ot.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var i=r.attrHandle[t.toLowerCase()],s=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):void 0;return void 0!==s?s:n.attributes||!v?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},ot.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,r=[],i=0,s=0;if(c=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(k),c){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return l=null,e},i=ot.getText=function(e){var t,n="",r=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===s||4===s)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},r=ot.selectors={cacheLength:50,createPseudo:at,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(nt,rt),e[3]=(e[3]||e[4]||e[5]||"").replace(nt,rt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(nt,rt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(U," ")+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[w]||(c[w]={}))[e]=[S,h]),c===t))break;return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=H(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:at(function(e){var t=[],n=[],r=u(e.replace(z,"$1"));return r[w]?at(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return e=e.replace(nt,rt),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:at(function(e){return J.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(nt,rt).toLowerCase(),function(t){var n;do if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:dt(function(){return[0]}),last:dt(function(e,t){return[t-1]}),eq:dt(function(e,t,n){return[0>n?n+t:n]}),even:dt(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:dt(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:dt(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:dt(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ht(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pt(t);return mt.prototype=r.filters=r.pseudos,r.setFilters=new mt,o=ot.tokenize=function(e,t){var n,i,s,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){(!n||(i=W.exec(u)))&&(i&&(u=u.slice(i[0].length)||u),a.push(s=[])),n=!1,(i=X.exec(u))&&(n=i.shift(),s.push({value:n,type:i[0].replace(z," ")}),u=u.slice(n.length));for(o in r.filter)!(i=K[o].exec(u))||f[o]&&!(i=f[o](i))||(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)},u=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=o(e)),n=t.length;while(n--)s=xt(t[n]),s[w]?r.push(s):i.push(s);s=C(e,Tt(i,r)),s.selector=e}return s},a=ot.select=function(e,t,i,s){var a,f,l,c,h,p="function"==typeof e&&e,d=!s&&o(e=p.selector||e);if(i=i||[],1===d.length){if(f=d[0]=d[0].slice(0),f.length>2&&"ID"===(l=f[0]).type&&n.getById&&9===t.nodeType&&v&&r.relative[f[1].type]){if(t=(r.find.ID(l.matches[0].replace(nt,rt),t)||[])[0],!t)return i;p&&(t=t.parentNode),e=e.slice(f.shift().value.length)}a=K.needsContext.test(e)?0:f.length;while(a--){if(l=f[a],r.relative[c=l.type])break;if((h=r.find[c])&&(s=h(l.matches[0].replace(nt,rt),et.test(f[0].type)&&vt(t.parentNode)||t))){if(f.splice(a,1),e=s.length&&gt(f),!e)return D.apply(i,s),i;break}}}return(p||u(e,d))(s,t,!v,i,et.test(e)&&vt(t.parentNode)||t),i},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!c,h(),n.sortDetached=ft(function(e){return 1&e.compareDocumentPosition(p.createElement("div"))}),ft(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||lt("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ft(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||lt("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),ft(function(e){return null==e.getAttribute("disabled")})||lt(B,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),ot}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;n.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?n.find.matchesSelector(i,e)?[i]:[]:n.find.matches(e,n.grep(t,function(e){return 1===e.nodeType}))},n.fn.extend({find:function(e){var t,r=this.length,i=[],s=this;if("string"!=typeof e)return this.pushStack(n(e).filter(function(){for(t=0;r>t;t++)if(n.contains(s[t],this))return!0}));for(t=0;r>t;t++)n.find(e,s[t],i);return i=this.pushStack(r>1?n.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(x(this,e||[],!1))},not:function(e){return this.pushStack(x(this,e||[],!0))},is:function(e){return!!x(this,"string"==typeof e&&u.test(e)?n(e):e||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(e,t){var r,i;if(!e)return this;if("string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:z.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||y).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof n?t[0]:t,n.merge(this,n.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:l,!0)),v.test(r[1])&&n.isPlainObject(t))for(r in t)n.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=l.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=l,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):n.isFunction(e)?"undefined"!=typeof y.ready?y.ready(e):e(n):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),n.makeArray(e,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(e,t,r){var i=[],s=void 0!==r;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(s&&n(e).is(r))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),n.fn.extend({has:function(e){var t=n(e,this),r=t.length;return this.filter(function(){for(var e=0;r>e;e++)if(n.contains(this,t[e]))return!0})},closest:function(e,t){for(var r,i=0,s=this.length,o=[],a=u.test(e)||"string"!=typeof e?n(e,t||this.context):0;s>i;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(a?a.index(r)>-1:1===r.nodeType&&n.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?n.unique(o):o)},index:function(e){return e?"string"==typeof e?g.call(n(e),this[0]):g.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(n.unique(n.merge(this.get(),n(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),n.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return n.dir(e,"parentNode")},parentsUntil:function(e,t,r){return n.dir(e,"parentNode",r)},next:function(e){return D(e,"nextSibling")},prev:function(e){return D(e,"previousSibling")},nextAll:function(e){return n.dir(e,"nextSibling")},prevAll:function(e){return n.dir(e,"previousSibling")},nextUntil:function(e,t,r){return n.dir(e,"nextSibling",r)},prevUntil:function(e,t,r){return n.dir(e,"previousSibling",r)},siblings:function(e){return n.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return n.sibling(e.firstChild)},contents:function(e){return e.contentDocument||n.merge([],e.childNodes)}},function(e,t){n.fn[e]=function(r,i){var s=n.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(s=n.filter(i,s)),this.length>1&&(C[e]||n.unique(s),B.test(e)&&s.reverse()),this.pushStack(s)}});var E=/\S+/g,F={};n.Callbacks=function(e){e="string"==typeof e?F[e]||G(e):n.extend({},e);var t,r,i,s,o,u,a=[],f=!e.once&&[],l=function(n){for(t=e.memory&&n,r=!0,u=s||0,s=0,o=a.length,i=!0;a&&o>u;u++)if(a[u].apply(n[0],n[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):t?a=[]:c.disable())},c={add:function(){if(a){var r=a.length;!function u(t){n.each(t,function(t,r){var i=n.type(r);"function"===i?e.unique&&c.has(r)||a.push(r):r&&r.length&&"string"!==i&&u(r)})}(arguments),i?o=a.length:t&&(s=r,l(t))}return this},remove:function(){return a&&n.each(arguments,function(e,t){var r;while((r=n.inArray(t,a,r))>-1)a.splice(r,1),i&&(o>=r&&o--,u>=r&&u--)}),this},has:function(e){return e?n.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],o=0,this},disable:function(){return a=f=t=void 0,this},disabled:function(){return!a},lock:function(){return f=void 0,t||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return!a||r&&!f||(t=t||[],t=[e,t.slice?t.slice():t],i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},n.extend({Deferred:function(e){var t=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],r="pending",i={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return n.Deferred(function(r){n.each(t,function(t,o){var u=n.isFunction(e[t])&&e[t];s[o[1]](function(){var e=u&&u.apply(this,arguments);e&&n.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[o[0]+"With"](this===i?r.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?n.extend(e,i):i}},s={};return i.pipe=i.then,n.each(t,function(e,n){var o=n[2],u=n[3];i[n[1]]=o.add,u&&o.add(function(){r=u},t[1^e][2].disable,t[2][2].lock),s[n[0]]=function(){return s[n[0]+"With"](this===s?i:this,arguments),this},s[n[0]+"With"]=o.fireWith}),i.promise(s),e&&e.call(s,s),s},when:function(e){var t=0,r=d.call(arguments),i=r.length,s=1!==i||e&&n.isFunction(e.promise)?i:0,o=1===s?e:n.Deferred(),u=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===a?o.notifyWith(t,n):--s||o.resolveWith(t,n)}},a,f,l;if(i>1)for(a=new Array(i),f=new Array(i),l=new Array(i);i>t;t++)r[t]&&n.isFunction(r[t].promise)?r[t].promise().done(u(t,l,r)).fail(o.reject).progress(u(t,f,a)):--s;return s||o.resolveWith(l,r),o.promise()}});var H;n.fn.ready=function(e){return n.ready.promise().done(e),this},n.extend({isReady:!1,readyWait:1,holdReady:function(e){e?n.readyWait++:n.ready(!0)},ready:function(e){(e===!0?--n.readyWait:n.isReady)||(n.isReady=!0,e!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}}),n.ready.promise=function(e){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(e)},n.ready.promise();var J=n.access=function(e,t,r,i,s,o,u){var a=0,f=e.length,l=null==r;if("object"===n.type(r)){s=!0;for(a in r)n.access(e,t,a,r[a],!0,o,u)}else if(void 0!==i&&(s=!0,n.isFunction(i)||(u=!0),l&&(u?(t.call(e,i),t=null):(l=t,t=function(e,t,r){return l.call(n(e),r)})),t))for(;f>a;a++)t(e[a],r,u?i:i.call(e[a],a,t(e[a],r)));return s?e:l?t.call(e):f?t(e[0],r):o};n.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(e){if(!K.accepts(e))return 0;var t={},r=e[this.expando];if(!r){r=K.uid++;try{t[this.expando]={value:r},Object.defineProperties(e,t)}catch(i){t[this.expando]=r,n.extend(e,t)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,t,r){var i,s=this.key(e),o=this.cache[s];if("string"==typeof t)o[t]=r;else if(n.isEmptyObject(o))n.extend(this.cache[s],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,r){var i;return void 0===t||t&&"string"==typeof t&&void 0===r?(i=this.get(e,t),void 0!==i?i:this.get(e,n.camelCase(t))):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i,s,o=this.key(e),u=this.cache[o];if(void 0===t)this.cache[o]={};else{n.isArray(t)?i=t.concat(t.map(n.camelCase)):(s=n.camelCase(t),t in u?i=[t,s]:(i=s,i=i in u?[i]:i.match(E)||[])),r=i.length;while(r--)delete u[i[r]]}},hasData:function(e){return!n.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;n.extend({hasData:function(e){return M.hasData(e)||L.hasData(e)},data:function(e,t,n){return M.access(e,t,n)},removeData:function(e,t){M.remove(e,t)},_data:function(e,t,n){return L.access(e,t,n)},_removeData:function(e,t){L.remove(e,t)}}),n.fn.extend({data:function(e,t){var r,i,s,o=this[0],u=o&&o.attributes;if(void 0===e){if(this.length&&(s=M.get(o),1===o.nodeType&&!L.get(o,"hasDataAttrs"))){r=u.length;while(r--)u[r]&&(i=u[r].name,0===i.indexOf("data-")&&(i=n.camelCase(i.slice(5)),P(o,i,s[i])));L.set(o,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each(function(){M.set(this,e)}):J(this,function(t){var r,i=n.camelCase(e);if(o&&void 0===t){if(r=M.get(o,e),void 0!==r)return r;if(r=M.get(o,i),void 0!==r)return r;if(r=P(o,i,void 0),void 0!==r)return r}else this.each(function(){var n=M.get(this,i);M.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&M.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){M.remove(this,e)})}}),n.extend({queue:function(e,t,r){var i;return e?(t=(t||"fx")+"queue",i=L.get(e,t),r&&(!i||n.isArray(r)?i=L.access(e,t,n.makeArray(r)):i.push(r)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var r=n.queue(e,t),i=r.length,s=r.shift(),o=n._queueHooks(e,t),u=function(){n.dequeue(e,t)};"inprogress"===s&&(s=r.shift(),i--),s&&("fx"===t&&r.unshift("inprogress"),delete o.stop,s.call(e,u,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return L.get(e,r)||L.access(e,r,{empty:n.Callbacks("once memory").add(function(){L.remove(e,[t+"queue",r])})})}}),n.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?n.queue(this[0],e):void 0===t?this:this.each(function(){var r=n.queue(this,e,t);n._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&n.dequeue(this,e)})},dequeue:function(e){return this.each(function(){n.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,s=n.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(u--)r=L.get(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(t)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(e,t){return e=t||e,"none"===n.css(e,"display")||!n.contains(e.ownerDocument,e)},T=/^(?:checkbox|radio)$/i;!function(){var e=l.createDocumentFragment(),t=e.appendChild(l.createElement("div")),n=l.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),k.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;n.event={global:{},add:function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=L.get(e);if(g){r.handler&&(o=r,r=o.handler,s=o.selector),r.guid||(r.guid=n.guid++),(f=g.events)||(f=g.events={}),(u=g.handle)||(u=g.handle=function(t){return typeof n!==U&&n.event.triggered!==t.type?n.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(E)||[""],l=t.length;while(l--)a=Y.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d&&(h=n.event.special[d]||{},d=(s?h.delegateType:h.bindType)||d,h=n.event.special[d]||{},c=n.extend({type:d,origType:m,data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&n.expr.match.needsContext.test(s),namespace:v.join(".")},o),(p=f[d])||(p=f[d]=[],p.delegateCount=0,h.setup&&h.setup.call(e,i,v,u)!==!1||e.addEventListener&&e.addEventListener(d,u,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),s?p.splice(p.delegateCount++,0,c):p.push(c),n.event.global[d]=!0)}},remove:function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=L.hasData(e)&&L.get(e);if(g&&(f=g.events)){t=(t||"").match(E)||[""],l=t.length;while(l--)if(a=Y.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d){h=n.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,p=f[d]||[],a=a[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=p.length;while(o--)c=p[o],!s&&m!==c.origType||r&&r.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,h.remove&&h.remove.call(e,c));u&&!p.length&&(h.teardown&&h.teardown.call(e,v,g.handle)!==!1||n.removeEvent(e,d,g.handle),delete f[d])}else for(d in f)n.event.remove(e,d+t[l],r,i,!0);n.isEmptyObject(f)&&(delete g.handle,L.remove(e,"events"))}},trigger:function(e,t,r,i){var s,o,u,f,c,h,p,d=[r||l],v=j.call(e,"type")?e.type:e,m=j.call(e,"namespace")?e.namespace.split("."):[];if(o=u=r=r||l,3!==r.nodeType&&8!==r.nodeType&&!X.test(v+n.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),c=v.indexOf(":")<0&&"on"+v,e=e[n.expando]?e:new n.Event(v,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=m.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:n.makeArray(t,[e]),p=n.event.special[v]||{},i||!p.trigger||p.trigger.apply(r,t)!==!1)){if(!i&&!p.noBubble&&!n.isWindow(r)){for(f=p.delegateType||v,X.test(f+v)||(o=o.parentNode);o;o=o.parentNode)d.push(o),u=o;u===(r.ownerDocument||l)&&d.push(u.defaultView||u.parentWindow||a)}s=0;while((o=d[s++])&&!e.isPropagationStopped())e.type=s>1?f:p.bindType||v,h=(L.get(o,"events")||{})[e.type]&&L.get(o,"handle"),h&&h.apply(o,t),h=c&&o[c],h&&h.apply&&n.acceptData(o)&&(e.result=h.apply(o,t),e.result===!1&&e.preventDefault());return e.type=v,i||e.isDefaultPrevented()||p._default&&p._default.apply(d.pop(),t)!==!1||!n.acceptData(r)||c&&n.isFunction(r[v])&&!n.isWindow(r)&&(u=r[c],u&&(r[c]=null),n.event.triggered=v,r[v](),n.event.triggered=void 0,u&&(r[c]=u)),e.result}},dispatch:function(e){e=n.event.fix(e);var t,r,i,s,o,u=[],a=d.call(arguments),f=(L.get(this,"events")||{})[e.type]||[],l=n.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=n.event.handlers.call(this,e,f),t=0;while((s=u[t++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,r=0;while((o=s.handlers[r++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((n.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,i,s,o,u=[],a=t.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!==this;f=f.parentNode||this)if(f.disabled!==!0||"click"!==e.type){for(i=[],r=0;a>r;r++)o=t[r],s=o.selector+" ",void 0===i[s]&&(i[s]=o.needsContext?n(s,this).index(f)>=0:n.find(s,this,null,[f]).length),i[s]&&i.push(o);i.length&&u.push({elem:f,handlers:i})}return a<t.length&&u.push({elem:this,handlers:t.slice(a)}),u},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||l,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[n.expando])return e;var t,r,i,s=e.type,o=e,u=this.fixHooks[s];u||(this.fixHooks[s]=u=W.test(s)?this.mouseHooks:V.test(s)?this.keyHooks:{}),i=u.props?this.props.concat(u.props):this.props,e=new n.Event(o),t=i.length;while(t--)r=i[t],e[r]=o[r];return e.target||(e.target=l),3===e.target.nodeType&&(e.target=e.target.parentNode),u.filter?u.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return n.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,i){var s=n.extend(new n.Event,r,{type:e,isSimulated:!0,originalEvent:{}});i?n.event.trigger(s,null,t):n.event.dispatch.call(t,s),s.isDefaultPrevented()&&r.preventDefault()}},n.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},n.Event=function(e,t){return this instanceof n.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?Z:$):this.type=e,t&&n.extend(this,t),this.timeStamp=e&&e.timeStamp||n.now(),void (this[n.expando]=!0)):new n.Event(e,t)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Z,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Z,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Z,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){n.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=this,s=e.relatedTarget,o=e.handleObj;return(!s||s!==i&&!n.contains(i,s))&&(e.type=o.origType,r=o.handler.apply(this,arguments),e.type=t),r}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){n.event.simulate(t,e.target,n.event.fix(e),!0)};n.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=L.access(n,t);i||n.addEventListener(e,r,!0),L.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=L.access(n,t)-1;i?L.access(n,t,i):(n.removeEventListener(e,r,!0),L.remove(n,t))}}}),n.fn.extend({on:function(e,t,r,i,s){var o,u;if("object"==typeof e){"string"!=typeof t&&(r=r||t,t=void 0);for(u in e)this.on(u,t,r,e[u],s);return this}if(null==r&&null==i?(i=t,r=t=void 0):null==i&&("string"==typeof t?(i=r,r=void 0):(i=r,r=t,t=void 0)),i===!1)i=$;else if(!i)return this;return 1===s&&(o=i,i=function(e){return n().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=n.guid++)),this.each(function(){n.event.add(this,e,i,r,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,n(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return(t===!1||"function"==typeof t)&&(r=t,t=void 0),r===!1&&(r=$),this.each(function(){n.event.remove(this,e,r,t)})},trigger:function(e,t){return this.each(function(){n.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];return r?n.event.trigger(e,t,r,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td,n.extend({clone:function(e,t,r){var i,s,o,u,a=e.cloneNode(!0),f=n.contains(e.ownerDocument,e);if(!(k.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||n.isXMLDoc(e)))for(u=ob(a),o=ob(e),i=0,s=o.length;s>i;i++)pb(o[i],u[i]);if(t)if(r)for(o=o||ob(e),u=u||ob(a),i=0,s=o.length;s>i;i++)nb(o[i],u[i]);else nb(e,a);return u=ob(a,"script"),u.length>0&&mb(u,!f&&ob(e,"script")),a},buildFragment:function(e,t,r,i){for(var s,o,u,a,f,l,c=t.createDocumentFragment(),h=[],p=0,d=e.length;d>p;p++)if(s=e[p],s||0===s)if("object"===n.type(s))n.merge(h,s.nodeType?[s]:s);else if(cb.test(s)){o=o||c.appendChild(t.createElement("div")),u=(bb.exec(s)||["",""])[1].toLowerCase(),a=ib[u]||ib._default,o.innerHTML=a[1]+s.replace(ab,"<$1></$2>")+a[2],l=a[0];while(l--)o=o.lastChild;n.merge(h,o.childNodes),o=c.firstChild,o.textContent=""}else h.push(t.createTextNode(s));c.textContent="",p=0;while(s=h[p++])if((!i||-1===n.inArray(s,i))&&(f=n.contains(s.ownerDocument,s),o=ob(c.appendChild(s),"script"),f&&mb(o),r)){l=0;while(s=o[l++])fb.test(s.type||"")&&r.push(s)}return c},cleanData:function(e){for(var t,r,i,s,o=n.event.special,u=0;void 0!==(r=e[u]);u++){if(n.acceptData(r)&&(s=r[L.expando],s&&(t=L.cache[s]))){if(t.events)for(i in t.events)o[i]?n.event.remove(r,i):n.removeEvent(r,i,t.handle);L.cache[s]&&delete L.cache[s]}delete M.cache[r[M.expando]]}}}),n.fn.extend({text:function(e){return J(this,function(e){return void 0===e?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=jb(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=jb(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var r,i=e?n.filter(e,this):this,s=0;null!=(r=i[s]);s++)t||1!==r.nodeType||n.cleanData(ob(r)),r.parentNode&&(t&&n.contains(r.ownerDocument,r)&&mb(ob(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(n.cleanData(ob(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return n.clone(this,e,t)})},html:function(e){return J(this,function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!db.test(e)&&!ib[(bb.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ab,"<$1></$2>");try{for(;i>r;r++)t=this[r]||{},1===t.nodeType&&(n.cleanData(ob(t,!1)),t.innerHTML=e);t=0}catch(s){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,n.cleanData(ob(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(t,r){t=e.apply([],t);var i,s,o,u,a,f,l=0,c=this.length,h=this,p=c-1,d=t[0],v=n.isFunction(d);if(v||c>1&&"string"==typeof d&&!k.checkClone&&eb.test(d))return this.each(function(e){var n=h.eq(e);v&&(t[0]=d.call(this,e,n.html())),n.domManip(t,r)});if(c&&(i=n.buildFragment(t,this[0].ownerDocument,!1,this),s=i.firstChild,1===i.childNodes.length&&(i=s),s)){for(o=n.map(ob(i,"script"),kb),u=o.length;c>l;l++)a=i,l!==p&&(a=n.clone(a,!0,!0),u&&n.merge(o,ob(a,"script"))),r.call(this[l],a,l);if(u)for(f=o[o.length-1].ownerDocument,n.map(o,lb),l=0;u>l;l++)a=o[l],fb.test(a.type||"")&&!L.access(a,"globalEval")&&n.contains(f,a)&&(a.src?n._evalUrl&&n._evalUrl(a.src):n.globalEval(a.textContent.replace(hb,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){n.fn[e]=function(e){for(var r,i=[],s=n(e),o=s.length-1,u=0;o>=u;u++)r=u===o?this:this.clone(!0),n(s[u])[t](r),f.apply(i,r.get());return this.pushStack(i)}});var qb,rb={},ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):a.getComputedStyle(e,null)};!function(){var e,t,r=l.documentElement,i=l.createElement("div"),s=l.createElement("div");if(s.style){s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===s.style.backgroundClip,i.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",i.appendChild(s);function o(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(i);var n=a.getComputedStyle(s,null);e="1%"!==n.top,t="4px"===n.width,r.removeChild(i)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return o(),e},boxSizingReliable:function(){return null==t&&o(),t},reliableMarginRight:function(){var e,t=s.appendChild(l.createElement("div"));return t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",r.appendChild(i),e=!parseFloat(a.getComputedStyle(t,null).marginRight),r.removeChild(i),s.removeChild(t),e}})}}(),n.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:"0",fontWeight:"400"},Eb=["Webkit","O","Moz","ms"];n.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=xb(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,u,a=n.camelCase(t),f=e.style;return t=n.cssProps[a]||(n.cssProps[a]=Fb(f,a)),u=n.cssHooks[t]||n.cssHooks[a],void 0===r?u&&"get"in u&&void 0!==(s=u.get(e,!1,i))?s:f[t]:(o=typeof r,"string"===o&&(s=Bb.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(n.css(e,t)),o="number"),null!=r&&r===r&&("number"!==o||n.cssNumber[a]||(r+="px"),k.clearCloneStyle||""!==r||0!==t.indexOf("background")||(f[t]="inherit"),u&&"set"in u&&void 0===(r=u.set(e,r,i))||(f[t]=r)),void 0)}},css:function(e,t,r,i){var s,o,u,a=n.camelCase(t);return t=n.cssProps[a]||(n.cssProps[a]=Fb(e.style,a)),u=n.cssHooks[t]||n.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,r)),void 0===s&&(s=xb(e,t,i)),"normal"===s&&t in Db&&(s=Db[t]),""===r||r?(o=parseFloat(s),r===!0||n.isNumeric(o)?o||0:s):s}}),n.each(["height","width"],function(e,t){n.cssHooks[t]={get:function(e,r,i){return r?zb.test(n.css(e,"display"))&&0===e.offsetWidth?n.swap(e,Cb,function(){return Ib(e,t,i)}):Ib(e,t,i):void 0},set:function(e,r,i){var s=i&&wb(e);return Gb(e,r,i?Hb(e,t,i,"border-box"===n.css(e,"boxSizing",!1,s),s):0)}}}),n.cssHooks.marginRight=yb(k.reliableMarginRight,function(e,t){return t?n.swap(e,{display:"inline-block"},xb,[e,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(e,t){n.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+R[r]+t]=s[r]||s[r-2]||s[0];return i}},ub.test(e)||(n.cssHooks[e+t].set=Gb)}),n.fn.extend({css:function(e,t){return J(this,function(e,t,r){var i,s,o={},u=0;if(n.isArray(t)){for(i=wb(e),s=t.length;s>u;u++)o[t[u]]=n.css(e,t[u],!1,i);return o}return void 0!==r?n.style(e,t,r):n.css(e,t)},e,t,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}}),n.Tween=Kb,Kb.prototype={constructor:Kb,init:function(e,t,r,i,s,o){this.elem=e,this.prop=r,this.easing=s||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(n.cssNumber[r]?"":"px")},cur:function(){var e=Kb.propHooks[this.prop];return e&&e.get?e.get(this):Kb.propHooks._default.get(this)},run:function(e){var t,r=Kb.propHooks[this.prop];return this.pos=t=this.options.duration?n.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=n.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){n.fx.step[e.prop]?n.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[n.cssProps[e.prop]]||n.cssHooks[e.prop])?n.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},n.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},n.fx=Kb.prototype.init,n.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(e,t){var r=this.createTween(e,t),i=r.cur(),s=Ob.exec(t),o=s&&s[3]||(n.cssNumber[e]?"":"px"),u=(n.cssNumber[e]||"px"!==o&&+i)&&Ob.exec(n.css(r.elem,e)),a=1,f=20;if(u&&u[3]!==o){o=o||u[3],s=s||[],u=+i||1;do a=a||".5",u/=a,n.style(r.elem,e,u+o);while(a!==(a=r.cur()/i)&&1!==a&&--f)}return s&&(u=r.start=+u||+i||0,r.unit=o,r.end=s[1]?u+(s[1]+1)*s[2]:+s[2]),r}]};n.Animation=n.extend(Xb,{tweener:function(e,t){n.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var r,i=0,s=e.length;s>i;i++)r=e[i],Rb[r]=Rb[r]||[],Rb[r].unshift(t)},prefilter:function(e,t){t?Qb.unshift(e):Qb.push(e)}}),n.speed=function(e,t,r){var i=e&&"object"==typeof e?n.extend({},e):{complete:r||!r&&t||n.isFunction(e)&&e,duration:e,easing:r&&t||t&&!n.isFunction(t)&&t};return i.duration=n.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in n.fx.speeds?n.fx.speeds[i.duration]:n.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){n.isFunction(i.old)&&i.old.call(this),i.queue&&n.dequeue(this,i.queue)},i},n.fn.extend({fadeTo:function(e,t,n,r){return this.filter(S).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,r,i){var s=n.isEmptyObject(e),o=n.speed(t,r,i),u=function(){var t=Xb(this,n.extend({},e),o);(s||L.get(this,"finish"))&&t.stop(!0)};return u.finish=u,s||o.queue===!1?this.each(u):this.queue(o.queue,u)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,s=null!=e&&e+"queueHooks",o=n.timers,u=L.get(this);if(s)u[s]&&u[s].stop&&i(u[s]);else for(s in u)u[s]&&u[s].stop&&Pb.test(s)&&i(u[s]);for(s=o.length;s--;)o[s].elem!==this||null!=e&&o[s].queue!==e||(o[s].anim.stop(r),t=!1,o.splice(s,1));(t||!r)&&n.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,r=L.get(this),i=r[e+"queue"],s=r[e+"queueHooks"],o=n.timers,u=i?i.length:0;for(r.finish=!0,n.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;u>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish})}}),n.each(["toggle","show","hide"],function(e,t){var r=n.fn[t];n.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(Tb(t,!0),e,n,i)}}),n.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){n.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),n.timers=[],n.fx.tick=function(){var e,t=0,r=n.timers;for(Lb=n.now();t<r.length;t++)e=r[t],e()||r[t]!==e||r.splice(t--,1);r.length||n.fx.stop(),Lb=void 0},n.fx.timer=function(e){n.timers.push(e),e()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Mb||(Mb=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Mb),Mb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(e,t){return e=n.fx?n.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=l.createElement("input"),t=l.createElement("select"),n=t.appendChild(l.createElement("option"));e.type="checkbox",k.checkOn=""!==e.value,k.optSelected=n.selected,t.disabled=!0,k.optDisabled=!n.disabled,e=l.createElement("input"),e.value="t",e.type="radio",k.radioValue="t"===e.value}();var Yb,Zb,$b=n.expr.attrHandle;n.fn.extend({attr:function(e,t){return J(this,n.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){n.removeAttr(this,e)})}}),n.extend({attr:function(e,t,r){var i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===U?n.prop(e,t,r):(1===o&&n.isXMLDoc(e)||(t=t.toLowerCase(),i=n.attrHooks[t]||(n.expr.match.bool.test(t)?Zb:Yb)),void 0===r?i&&"get"in i&&null!==(s=i.get(e,t))?s:(s=n.find.attr(e,t),null==s?void 0:s):null!==r?i&&"set"in i&&void 0!==(s=i.set(e,r,t))?s:(e.setAttribute(t,r+""),r):void n.removeAttr(e,t))},removeAttr:function(e,t){var r,i,s=0,o=t&&t.match(E);if(o&&1===e.nodeType)while(r=o[s++])i=n.propFix[r]||r,n.expr.match.bool.test(r)&&(e[i]=!1),e.removeAttribute(r)},attrHooks:{type:{set:function(e,t){if(!k.radioValue&&"radio"===t&&n.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}}}),Zb={set:function(e,t,r){return t===!1?n.removeAttr(e,r):e.setAttribute(r,r),r}},n.each(n.expr.match.bool.source.match(/\w+/g),function(e,t){var r=$b[t]||n.find.attr;$b[t]=function(e,t,n){var i,s;return n||(s=$b[t],$b[t]=i,i=null!=r(e,t,n)?t.toLowerCase():null,$b[t]=s),i}});var _b=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(e,t){return J(this,n.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[n.propFix[e]||e]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return o=1!==u||!n.isXMLDoc(e),o&&(t=n.propFix[t]||t,s=n.propHooks[t]),void 0!==r?s&&"set"in s&&void 0!==(i=s.set(e,r,t))?i:e[t]=r:s&&"get"in s&&null!==(i=s.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||_b.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;n.fn.extend({addClass:function(e){var t,r,i,s,o,u,a="string"==typeof e&&e,f=0,l=this.length;if(n.isFunction(e))return this.each(function(t){n(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];l>f;f++)if(r=this[f],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(ac," "):" ")){o=0;while(s=t[o++])i.indexOf(" "+s+" ")<0&&(i+=s+" ");u=n.trim(i),r.className!==u&&(r.className=u)}return this},removeClass:function(e){var t,r,i,s,o,u,a=0===arguments.length||"string"==typeof e&&e,f=0,l=this.length;if(n.isFunction(e))return this.each(function(t){n(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];l>f;f++)if(r=this[f],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(ac," "):"")){o=0;while(s=t[o++])while(i.indexOf(" "+s+" ")>=0)i=i.replace(" "+s+" "," ");u=e?n.trim(i):"",r.className!==u&&(r.className=u)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):this.each(n.isFunction(e)?function(r){n(this).toggleClass(e.call(this,r,this.className,t),t)}:function(){if("string"===r){var t,i=0,s=n(this),o=e.match(E)||[];while(t=o[i++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else(r===U||"boolean"===r)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||e===!1?"":L.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ac," ").indexOf(t)>=0)return!0;return!1}});var bc=/\r/g;n.fn.extend({val:function(e){var t,r,i,s=this[0];if(arguments.length)return i=n.isFunction(e),this.each(function(r){var s;1===this.nodeType&&(s=i?e.call(this,r,n(this).val()):e,null==s?s="":"number"==typeof s?s+="":n.isArray(s)&&(s=n.map(s,function(e){return null==e?"":e+""})),t=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))});if(s)return t=n.valHooks[s.type]||n.valHooks[s.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(r=t.get(s,"value"))?r:(r=s.value,"string"==typeof r?r.replace(bc,""):null==r?"":r)}}),n.extend({valHooks:{option:{get:function(e){var t=n.find.attr(e,"value");return null!=t?t:n.trim(n.text(e))}},select:{get:function(e){for(var t,r,i=e.options,s=e.selectedIndex,o="select-one"===e.type||0>s,u=o?null:[],a=o?s+1:i.length,f=0>s?a:o?s:0;a>f;f++)if(r=i[f],!(!r.selected&&f!==s||(k.optDisabled?r.disabled:null!==r.getAttribute("disabled"))||r.parentNode.disabled&&n.nodeName(r.parentNode,"optgroup"))){if(t=n(r).val(),o)return t;u.push(t)}return u},set:function(e,t){var r,i,s=e.options,o=n.makeArray(t),u=s.length;while(u--)i=s[u],(i.selected=n.inArray(i.value,o)>=0)&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(e,t){return n.isArray(t)?e.checked=n.inArray(n(e).val(),t)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){n.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),n.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var cc=n.now(),dc=/\?/;n.parseJSON=function(e){return JSON.parse(e+"")},n.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{r=new DOMParser,t=r.parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+e),t};var ec=/#.*$/,fc=/([?&])_=[^&]*/,gc=/^(.*?):[ \t]*([^\r\n]*)$/gm,hc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ic=/^(?:GET|HEAD)$/,jc=/^\/\//,kc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lc={},mc={},nc="*/".concat("*"),oc=a.location.href,pc=kc.exec(oc.toLowerCase())||[];n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:oc,type:"GET",isLocal:hc.test(pc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?sc(sc(e,n.ajaxSettings),t):sc(n.ajaxSettings,e)},ajaxPrefilter:qc(lc),ajaxTransport:qc(mc),ajax:function(e,t){function T(e,t,o,a){var l,g,y,w,E,x=t;2!==b&&(b=2,u&&clearTimeout(u),r=void 0,s=a||"",S.readyState=e>0?4:0,l=e>=200&&300>e||304===e,o&&(w=tc(c,S,o)),w=uc(c,w,S,l),l?(c.ifModified&&(E=S.getResponseHeader("Last-Modified"),E&&(n.lastModified[i]=E),E=S.getResponseHeader("etag"),E&&(n.etag[i]=E)),204===e||"HEAD"===c.type?x="nocontent":304===e?x="notmodified":(x=w.state,g=w.data,y=w.error,l=!y)):(y=x,(e||!x)&&(x="error",0>e&&(e=0))),S.status=e,S.statusText=(t||x)+"",l?d.resolveWith(h,[g,x,S]):d.rejectWith(h,[S,x,y]),S.statusCode(m),m=void 0,f&&p.trigger(l?"ajaxSuccess":"ajaxError",[S,c,l?g:y]),v.fireWith(h,[S,x]),f&&(p.trigger("ajaxComplete",[S,c]),--n.active||n.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,s,o,u,a,f,l,c=n.ajaxSetup({},t),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?n(h):n.event,d=n.Deferred(),v=n.Callbacks("once memory"),m=c.statusCode||{},g={},y={},b=0,w="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!o){o={};while(t=gc.exec(s))o[t[1].toLowerCase()]=t[2]}t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||w;return r&&r.abort(t),T(0,t),this}};if(d.promise(S).complete=v.add,S.success=S.done,S.error=S.fail,c.url=((e||c.url||oc)+"").replace(ec,"").replace(jc,pc[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=n.trim(c.dataType||"*").toLowerCase().match(E)||[""],null==c.crossDomain&&(a=kc.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===pc[1]&&a[2]===pc[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(pc[3]||("http:"===pc[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=n.param(c.data,c.traditional)),rc(lc,c,t,S),2===b)return S;f=n.event&&c.global,f&&0===n.active++&&n.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!ic.test(c.type),i=c.url,c.hasContent||(c.data&&(i=c.url+=(dc.test(i)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=fc.test(i)?i.replace(fc,"$1_="+cc++):i+(dc.test(i)?"&":"?")+"_="+cc++)),c.ifModified&&(n.lastModified[i]&&S.setRequestHeader("If-Modified-Since",n.lastModified[i]),n.etag[i]&&S.setRequestHeader("If-None-Match",n.etag[i])),(c.data&&c.hasContent&&c.contentType!==!1||t.contentType)&&S.setRequestHeader("Content-Type",c.contentType),S.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+nc+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)S.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,S,c)!==!1&&2!==b){w="abort";for(l in{success:1,error:1,complete:1})S[l](c[l]);if(r=rc(mc,c,t,S)){S.readyState=1,f&&p.trigger("ajaxSend",[S,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){S.abort("timeout")},c.timeout));try{b=1,r.send(g,T)}catch(x){if(!(2>b))throw x;T(-1,x)}}else T(-1,"No Transport");return S}return S.abort()},getJSON:function(e,t,r){return n.get(e,t,r,"json")},getScript:function(e,t){return n.get(e,void 0,t,"script")}}),n.each(["get","post"],function(e,t){n[t]=function(e,r,i,s){return n.isFunction(r)&&(s=s||i,i=r,r=void 0),n.ajax({url:e,type:t,dataType:s,data:r,success:i})}}),n._evalUrl=function(e){return n.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(e){var t;return n.isFunction(e)?this.each(function(t){n(this).wrapAll(e.call(this,t))}):(this[0]&&(t=n(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(n.isFunction(e)?function(t){n(this).wrapInner(e.call(this,t))}:function(){var t=n(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=n.isFunction(e);return this.each(function(r){n(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},n.expr.filters.visible=function(e){return!n.expr.filters.hidden(e)};var vc=/%20/g,wc=/\[\]$/,xc=/\r?\n/g,yc=/^(?:submit|button|image|reset|file)$/i,zc=/^(?:input|select|textarea|keygen)/i;n.param=function(e,t){var r,i=[],s=function(e,t){t=n.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(e)||e.jquery&&!n.isPlainObject(e))n.each(e,function(){s(this.name,this.value)});else for(r in e)Ac(r,e[r],t,s);return i.join("&").replace(vc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=n.prop(this,"elements");return e?n.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!n(this).is(":disabled")&&zc.test(this.nodeName)&&!yc.test(e)&&(this.checked||!T.test(e))}).map(function(e,t){var r=n(this).val();return null==r?null:n.isArray(r)?n.map(r,function(e){return{name:t.name,value:e.replace(xc,"\r\n")}}):{name:t.name,value:r.replace(xc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Bc=0,Cc={},Dc={0:200,1223:204},Ec=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var e in Cc)Cc[e]()}),k.cors=!!Ec&&"withCredentials"in Ec,k.ajax=Ec=!!Ec,n.ajaxTransport(function(e){var t;return k.cors||Ec&&!e.crossDomain?{send:function(n,r){var i,s=e.xhr(),o=++Bc;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)s.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete Cc[o],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?r(s.status,s.statusText):r(Dc[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=Cc[o]=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return n.globalEval(e),e}}}),n.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),n.ajaxTransport("script",function(e){if(e.crossDomain){var t,r;return{send:function(i,s){t=n("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&s("error"===e.type?404:200,e.type)}),l.head.appendChild(t[0])},abort:function(){r&&r()}}}});var Fc=[],Gc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Fc.pop()||n.expando+"_"+cc++;return this[e]=!0,e}}),n.ajaxPrefilter("json jsonp",function(e,t,r){var i,s,o,u=e.jsonp!==!1&&(Gc.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gc.test(e.data)&&"data");return u||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=n.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,u?e[u]=e[u].replace(Gc,"$1"+i):e.jsonp!==!1&&(e.url+=(dc.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||n.error(i+" was not called"),o[0]},e.dataTypes[0]="json",s=a[i],a[i]=function(){o=arguments},r.always(function(){a[i]=s,e[i]&&(e.jsonpCallback=t.jsonpCallback,Fc.push(i)),o&&n.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),n.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||l;var i=v.exec(e),s=!r&&[];return i?[t.createElement(i[1])]:(i=n.buildFragment([e],t,s),s&&s.length&&n(s).remove(),n.merge([],i.childNodes))};var Hc=n.fn.load;n.fn.load=function(e,t,r){if("string"!=typeof e&&Hc)return Hc.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=n.trim(e.slice(a)),e=e.slice(0,a)),n.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(s="POST"),u.length>0&&n.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){o=arguments,u.html(i?n("<div>").append(n.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,o||[e.responseText,t,e])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){n.fn[t]=function(e){return this.on(t,e)}}),n.expr.filters.animated=function(e){return n.grep(n.timers,function(t){return e===t.elem}).length};var Ic=a.document.documentElement;n.offset={setOffset:function(e,t,r){var i,s,o,u,a,f,l,c=n.css(e,"position"),h=n(e),p={};"static"===c&&(e.style.position="relative"),a=h.offset(),o=n.css(e,"top"),f=n.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+f).indexOf("auto")>-1,l?(i=h.position(),u=i.top,s=i.left):(u=parseFloat(o)||0,s=parseFloat(f)||0),n.isFunction(t)&&(t=t.call(e,r,a)),null!=t.top&&(p.top=t.top-a.top+u),null!=t.left&&(p.left=t.left-a.left+s),"using"in t?t.using.call(e,p):h.css(p)}},n.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){n.offset.setOffset(this,e,t)});var t,r,i=this[0],s={top:0,left:0},o=i&&i.ownerDocument;if(o)return t=o.documentElement,n.contains(t,i)?(typeof i.getBoundingClientRect!==U&&(s=i.getBoundingClientRect()),r=Jc(o),{top:s.top+r.pageYOffset-t.clientTop,left:s.left+r.pageXOffset-t.clientLeft}):s},position:function(){if(this[0]){var e,t,r=this[0],i={top:0,left:0};return"fixed"===n.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),n.nodeName(e[0],"html")||(i=e.offset()),i.top+=n.css(e[0],"borderTopWidth",!0),i.left+=n.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-n.css(r,"marginTop",!0),left:t.left-i.left-n.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||Ic;while(e&&!n.nodeName(e,"html")&&"static"===n.css(e,"position"))e=e.offsetParent;return e||Ic})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r="pageYOffset"===t;n.fn[e]=function(n){return J(this,function(e,n,i){var s=Jc(e);return void 0===i?s?s[t]:e[n]:void (s?s.scrollTo(r?a.pageXOffset:i,r?i:a.pageYOffset):e[n]=i)},e,n,arguments.length,null)}}),n.each(["top","left"],function(e,t){n.cssHooks[t]=yb(k.pixelPosition,function(e,r){return r?(r=xb(e,t),vb.test(r)?n(e).position()[t]+"px":r):void 0})}),n.each({Height:"height",Width:"width"},function(e,t){n.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,i){n.fn[i]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(i===!0||s===!0?"margin":"border");return J(this,function(t,r,i){var s;return n.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?n.css(t,r,u):n.style(t,r,i,u)},t,o?i:void 0,o,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kc=a.jQuery,Lc=a.$;return n.noConflict=function(e){return a.$===n&&(a.$=Lc),e&&a.jQuery===n&&(a.jQuery=Kc),n},typeof b===U&&(a.jQuery=a.$=n),n}),define("jquery-private",["jquery"],function(e){return e.noConflict(!0)}),define("baseUtils",["jquery"],function(e){function r(e,t,n,r){return e.setAttributeNS(r||null,t,n)}function i(e,t,n){return e.getAttributeNS(n||null,t)}function s(e,t,n){for(var i in t){if(!t.hasOwnProperty(i))continue;r(e,i,t[i],n)}}function o(e){var t=o.cache[e];return t||(t=document.createElement("input"),t.setAttribute("type",e),t=t.type,o.cache[e]=t),t===e}var t="http://www.w3.org/2000/svg",n="http://www.w3.org/1999/xlink";return o.cache={},Array.prototype.pushOn=function(e,t){return this.splice(e,0,t)},Array.prototype.removeByNumber=function(e,t){var n=this.slice((t||e)+1||this.length);return this.length=e<0?this.length+e:e,this.push.apply(this,n)},Array.prototype.removeByValue=function(e){for(var t=0;t<this.length;t+=1)if(this[t]===e)return this.removeByNumber(t);return!1},String.prototype.fromASCIICode=function(){return this.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(t)})},String.prototype.toASCIICode=function(){return this.replace(/(\n|\r|\t+)/g,function(e,t){return"&#"+t.charCodeAt()+";"})},String.prototype.splice=function(e,t,n){return this.slice(0,e)+n+this.slice(e+Math.abs(t))},String.prototype.width=function(t){var n,r;return t=t||{},t={"font-size":t["font-size"]||"12px","font-family":t["font-family"]||"Arial","font-weight":t["font-weight"]||"100"},n=e("<div>"+this+"</div>"),n.css({position:"absolute","float":"left","white-space":"nowrap",visibility:"hidden","font-size":t["font-size"],"font-family":t["font-family"],"font-weight":t["font-weight"]}).appendTo(e("body")),r=n.width(),n.remove(),r},Array.prototype.removeDoubleValue=function(){var e=[],t=0;for(;t<this.length;t+=1)e.indexOf(this[t])===-1&&e.push(this[t]);return e},{object:function(e,t){var n=Object.create(e,{_super:{value:e}});return t&&this.extend(n,t),n.init&&n.init(),n},extend:function(e,t,n){var r;e=e||{};for(r in t)n&&typeof t[r]=="object"&&t[r].constructor!==Array?e[r]=this.extend(e[r],t[r],n):e[r]=t[r];return e},attr:function(){var e=arguments;if(e.length===2){if(typeof e[1]=="string")return i.apply(this,e);if(typeof e[1]=="object")return s.apply(this,e)}else if(e.length===3)return r.apply(this,e);throw new Error("something went wrong")},xAttr:function(){var e=[].slice.call(arguments);if(e.length===2){e.push(n);if(typeof e[1]=="string")return i.apply(this,e);if(typeof e[1]=="object")return s.apply(this,e)}else if(e.length===3)return e.push(n),r.apply(this,e);throw new Error("something went wrong")},addClass:function(e,t){if(e.classList)e.classList.add(t);else{var n=new RegExp("(^|\\s)"+t+"(\\s|$)","g"),r=this.attr(e,"class");if(n.test(r))return;r=((r||"")+" "+t).replace(/\s+/g," ").replace(/(^ | $)/g,""),this.attr(e,"class",r)}return e},removeClass:function(e,t){var n,r;return e.classList?e.classList.remove(t):(n=new RegExp("(^|\\s)"+t+"(\\s|$)","g"),r=this.attr(e,"class"),r=r.replace(n,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,""),this.attr(e,"class",r)),e},createNS:function(e,n){e=document.createElementNS(t,e);if(n&&typeof n=="object")for(var r in n){if(!n.hasOwnProperty(r))continue;this.attr(e,r,n[r])}return e},readURL:function(e,t){var n;e.files&&e.files[0]&&(n=new FileReader,typeof t=="function"&&(n.onload=t),n.readAsDataURL(e.files[0]))},isFloat:function(e){return e===+e&&e!==(e|0)},isInteger:function(e){return e===+e&&e===(e|0)},convertVal:function(t){return t==="true"?!0:t==="false"?!1:e.isNumeric(t)?parseFloat(t,10)||t:t},escapeHTML:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},isAvailable:o,reverseEscapeHTML:function(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'")},getUrlParameter:function(e){var t=window.location.search.substring(1),n=t.split("&"),r,i=0,s=n.length;for(;i<s;i+=1){r=n[i].split("=");if(r[0]===e)return r[1]}},isMobile:function(){return/iphone|android|webos|blackberry|ipad|ipod|iemobile|opera mini/i.test(navigator.userAgent)?!0:!1}(),guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})}}}),define("config-data",[],function(){return{"root-id":"fr-designer",getReportByUUIDFrom:"../FastReport.Export.axd?getReport=",saveReportByUUIDTo:"../FastReport.Export.axd?putReport=",makePreviewByUUID:"../FastReport.Export.axd?makePreview=","locales-path":"locales/#{locale}.js","templates-path":"views/#{name}.tmpl.html","images-path":"images/#{image}","scale-mobile":.6,scale:1,net:9.45,hotkeyProhibited:!1,dasharrays:{DashDot:"9, 2, 2, 2",Dot:"2, 2",Solid:"",Dash:"9, 3",DashDotDot:"9, 2, 2, 2, 2, 2"},"font-names":["Arial","Calibri","Cambria","Cambria Math","Candara","Comic Sans MS","Consolas","Constantia","Corbel","Courier New","Franklin Gothic","Gabriola","Georgia","Impact","Lucida Console","Lucida Sans Unicode","Microsoft Sans Serif","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Symbol","Sylfaen","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","Webdings","Wingbings","Droid Sans Mono","Ubuntu Mono"],brackets:"[,]","components-sort-order":["TextObject","PictureObject","ShapeObject","LineObject","SubreportObject","TableObject","MatrixObject","BarcodeObject","RichObject","CheckBoxObject","MSChartObject","SparklineObject","CellularTextObject","MapObject","LinearGauge","SimpleGauge"],"bands-sort-order":["ReportTitleBand","ReportSummaryBand","PageHeaderBand","PageFooterBand","ColumnHeaderBand","ColumnFooterBand","DataHeaderBand","DataBand","DataFooterBand","GroupHeaderBand","GroupFooterBand","ChildBand","OverlayBand"],"band-indent-top":9.448,"band-indent-opacity":.3,minComponentWidthForResizingElements:40,minComponentHeightForResizingElements:40,rectButtonWidth:15,rectButtonHeight:15,rectButtonOpacity:.6,rectButtonFill:"rgb(183, 36, 29)",circleButtonWidth:6,circleButtonHeight:6,circleButtonRadius:5,"circleButtonWidth-mobile":12,"circleButtonHeight-mobile":12,"circleButtonRadius-mobile":10,circleButtonFill:"rgb(183, 36, 29)",circleButtonOpacity:.6,resizingBandBlockWidth:100,resizingBandBlockHeight:15,polylineStroke:"rgb(183, 36, 29)",polylineStrokeWidth:"1px",selectedPolylineStrokeWidth:"2.5px",polylineFill:"none",polylineWidth:4,lineMovingScope:30,"default-band-separator-color":"#C0C0C0","selected-band-separator-color":"#2B579A","show-properties":!1,"show-events":!1,"show-rt":!1,"show-data":!1,fadeout:150,"default-tab-menu":"home",notifications:"default","notifications-mobile":"default"}}),define("config",["config-data","baseUtils"],function(e,t){return{set:function(t,n){var r=0,i,s=e;t=t.split(":");for(i=t.length-1;r<=i;r+=1)s[t[r]]||(s[t[r]]={}),t[r+1]||(s[t[r]]=n),s=s[t[r]];return this},get:function(n,r){var i=0,s,o,u=e;if(t.isMobile){o=(n+"-mobile").split(":"),n=n.split(":");for(s=n.length-1;i<=s;i+=1){if(!u[o[i]]&&!u[n[i]])return u[n[i]];u=u[o[i]]||u[n[i]]}}else{n=n.split(":");for(s=n.length-1;i<=s;i+=1){if(!u[n[i]])return u[n[i]];u=u[n[i]]}}if(r)for(i in r)u=u.replace(new RegExp("#{"+i+"}","g"),r[i]);return u}}}),define("l10n",["jquery","config"],function(e,t){function o(n){return t.set("locale",n),e.ajax({url:t.get("locales-path",{locale:n}),success:function(e){console.info(n+" translation file was loaded"),i[s]=JSON.parse(e),r.resolve()},error:function(){console.error("file was not loaded")},dataType:"text"})}var n="en",r=e.Deferred(),i={},s=/[a-z]{2}/.exec(navigator.language);return i[s]={},o(s).fail(function(){o(n).fail(function(){r.resolve()})}),{tr:function(e){return i[s][e]!==undefined?i[s][e]:e},isReady:function(){return r.promise()}}}),function(e,t,n){function r(e,t){t&&t.onError&&t.onError(e)===!1||(this.name="JsRender Error",this.message=e||"JsRender error")}function i(e,t){var n;e=e||{};for(n in t)e[n]=t[n];return e}function s(e,t,n){return(!nt.rTag||arguments.length)&&(O=e?e.charAt(0):O,M=e?e.charAt(1):M,_=t?t.charAt(0):_,D=t?t.charAt(1):D,P=n||P,e="\\"+O+"(\\"+P+")?\\"+M,t="\\"+_+"\\"+D,L="(?:(?:(\\w+(?=[\\/\\s\\"+_+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+_+"]|\\"+_+"(?!\\"+D+"))*?)",nt.rTag=L+")",L=new RegExp(e+L+"(\\/)?|(?:\\/(\\w+)))"+t,"g"),A=new RegExp("<.*>|([^\\\\]|^)[{}]|"+e+".*"+t)),[O,M,_,D,P]}function o(e,t){t||(t=e,e=n);var r,i,s,o,u=this,a=!t||t==="root";if(e){if(o=u.type===t?u:n,!o)if(r=u.views,u._.useKey){for(i in r)if(o=r[i].get(e,t))break}else for(i=0,s=r.length;!o&&i<s;i++)o=r[i].get(e,t)}else if(a)while(u.parent.parent)o=u=u.parent;else while(u&&!o)o=u.type===t?u:n,u=u.parent;return o}function u(){var e=this.get("item");return e?e.index:n}function a(e){var t,r=this,s=(r.ctx||{})[e];return s=s===n?r.getRsc("helpers",e):s,s&&typeof s=="function"&&(t=function(){return s.apply(r,arguments)},i(t,s)),t||s}function f(e,t,r){var i,s,o,u=+r===r&&r,a=t.linkCtx;return u&&(r=(u=t.tmpl.bnds[u-1])(t.data,t,G)),o=r.args[0],(e||u)&&(s=a&&a.tag||{_:{inline:!a},tagName:e+":",flow:!0,_is:"tag"},s._.bnd=u,a&&(a.tag=s,s.linkCtx=a,r.ctx=T(r.ctx,a.view.ctx)),s.tagCtx=r,r.view=t,s.ctx=r.ctx||{},delete r.ctx,t._.tag=s,e=e!=="true"&&e,e&&((i=t.getRsc("converters",e))||b("Unknown converter: {{"+e+":"))&&(s.depends=i.depends,o=i.apply(s,r.args)),o=u&&t._.onRender?t._.onRender(o,t,u):o,t._.tag=n),o}function l(e,t){for(var r=this,i=G[e],s=i&&i[t];s===n&&r;)i=r.tmpl[e],s=i&&i[t],r=r.parent;return s}function c(e,t,r,s){var o,u,a,f,l,c,h,p,d,v,m,g,w,E,S="",x=+s===s&&s,N=t.linkCtx||0,C=t.ctx,k=r||t.tmpl,L=t._;for(e._is==="tag"&&(u=e,e=u.tagName),x&&(s=(g=k.bnds[x-1])(t.data,t,G)),h=s.length,u=u||N.tag,c=0;c<h;c++)d=s[c],m=d.tmpl,m=d.content=m&&k.tmpls[m-1],r=d.props.tmpl,c||r&&u||(w=t.getRsc("tags",e)||b("Unknown tag: {{"+e+"}}")),r=r||(u?u._def:w).template||m,r=""+r===r?t.getRsc("templates",r)||Y(r):r,i(d,{tmpl:r,render:y,index:c,view:t,ctx:T(d.ctx,C)}),u||(w._ctr?(u=new w._ctr,E=!!u.init,u.attr=u.attr||w.attr||n):u={render:w.render},u._={inline:!N},N&&(N.attr=u.attr=N.attr||u.attr,N.tag=u,u.linkCtx=N),(u._.bnd=g||N)&&(u._.arrVws={}),u.tagName=e,u.parent=l=C&&C.tag,u._is="tag",u._def=w),L.tag=u,d.tag=u,u.tagCtxs=s,u.flow||(v=d.ctx=d.ctx||{},a=u.parents=v.parentTags=C&&T(v.parentTags,C.parentTags)||{},l&&(a[l.tagName]=l),v.tag=u);for(u.rendering={},c=0;c<h;c++)d=u.tagCtx=s[c],u.ctx=d.ctx,!c&&E&&(u.init(d,N,u.ctx),E=n),(o=u.render)&&(p=o.apply(u,d.args)),S+=p!==n?p:d.tmpl?d.render():"";return delete u.rendering,u.tagCtx=u.tagCtxs[0],u.ctx=u.tagCtx.ctx,u._.inline&&(f=u.attr)&&f!=="html"&&(S=f==="text"?Z.html(S):""),x&&t._.onRender?t._.onRender(S,t,x):S}function h(e,t,r,i,s,f,c,h){var p,d,v,m=t==="array",g={key:0,useKey:m?0:1,id:""+V++,onRender:h,bnds:{}},y={data:i,tmpl:s,content:c,views:m?[]:{},parent:r,ctx:e,type:t,get:o,getIndex:u,getRsc:l,hlp:a,_:g,_is:"view"};return r&&(p=r.views,d=r._,d.useKey?(p[g.key="_"+d.useKey++]=y,v=d.tag,g.bnd=m&&(!v||!!v._.bnd&&v)):p.splice(g.key=y.index=f!==n?f:p.length,0,y),y.ctx=e||r.ctx),y}function p(e){var t,n,r,i,s;for(t in Q)if(i=Q[t],(s=i.compile)&&(n=e[t+"s"]))for(r in n)n[r]=s(r,n[r],e,t,i)}function d(e,t,n){var r,i;return typeof t=="function"?t={depends:t.depends,render:t}:((i=t.template)&&(t.template=""+i===i?Y[i]||Y(i):i),t.init!==!1&&(r=t._ctr=function(){},(r.prototype=t).constructor=r)),n&&(t._parentTmpl=n),t}function v(r,i,s,o,u,a){function f(n){if(""+n===n||n.nodeType>0){try{c=n.nodeType>0?n:!A.test(n)&&t&&t(e.document).find(n)[0]}catch(i){}return c&&(n=c.getAttribute(J),r=r||n,n=Y[n],n||(r=r||"_"+X++,c.setAttribute(J,r),n=Y[r]=v(r,c.innerHTML,s,o,u,a))),n}}var l,c;return i=i||"",l=f(i),a=a||(i.markup?i:{}),a.tmplName=r,s&&(a._parentTmpl=s),!l&&i.markup&&(l=f(i.markup))&&l.fn&&(l.debug!==i.debug||l.allowCode!==i.allowCode)&&(l=l.markup),l!==n?(r&&!s&&(K[r]=function(){return i.render.apply(i,arguments)}),l.fn||i.fn?l.fn&&(i=r&&r!==l.tmplName?T(a,l):l):(i=m(l,a),E(l,i)),p(a),i):void 0}function m(e,t){var n,r=rt.wrapMap||{},s=i({markup:e,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:y},t);return t.htmlTag||(n=U.exec(e),s.htmlTag=n?n[1].toLowerCase():""),n=r[s.htmlTag],n&&n!==r.div&&(s.markup=C.trim(s.markup),s._elCnt=!0),s}function g(e,t){function r(s,o,u){var a,f,l,c;if(s&&""+s!==s&&!s.nodeType&&!s.markup){for(l in s)r(l,s[l],o);return G}return o===n&&(o=s,s=n),s&&""+s!==s&&(u=o,o=s,s=n),c=u?u[i]=u[i]||{}:r,f=t.compile,(a=nt.onBeforeStoreItem)&&(f=a(c,s,o,f)||f),s?o===null?delete c[s]:c[s]=f?o=f(s,o,u,e,t):o:o=f(n,o),o&&(o._is=e),(a=nt.onStoreItem)&&a(c,s,o,f),o}var i=e+"s";G[i]=r,Q[e]=t}function y(e,t,r,i,s,o){var u,a,f,l,c,p,d,v,m,g,y,w,E,S=this,x=!S.attr||S.attr==="html",N="";if(i===!0&&(d=!0,i=0),S.tag?(v=S,S=S.tag,g=S._,w=S.tagName,E=v.tmpl,t=T(t,S.ctx),m=v.content,v.props.link===!1&&(t=t||{},t.link=!1),r=r||v.view,e=e===n?r:e):E=S.jquery&&(S[0]||b('Unknown template: "'+S.selector+'"'))||S,E&&(!r&&e&&e._is==="view"&&(r=e),r&&(m=m||r.content,o=o||r._.onRender,e===r&&(e=r.data,s=!0),t=T(t,r.ctx)),r&&r.data!==n||((t=t||{}).root=e),E.fn||(E=Y[E]||Y(E)),E)){if(o=(t&&t.link)!==!1&&x&&o,y=o,o===!0&&(y=n,o=r._.onRender),C.isArray(e)&&!s)for(l=d?r:i!==n&&r||h(t,"array",r,e,E,i,m,o),u=0,a=e.length;u<a;u++)f=e[u],c=h(t,"item",l,f,E,(i||0)+u,m,o),p=E.fn(f,c,G),N+=l._.onRender?l._.onRender(p,c):p;else l=d?r:h(t,w||"data",r,e,E,i,m,o),g&&!S.flow&&(l.tag=S),N+=E.fn(e,l,G);return y?y(N,l):N}return""}function b(e){throw new G.sub.Error(e)}function w(e){b("Syntax error\n"+e)}function E(e,t,n,r){function i(t){t-=l,t&&h.push(e.substr(l,t).replace(j,"\\n"))}function s(t){t&&w('Unmatched or missing tag: "{{/'+t+'}}" in template:\n'+e)}function o(o,f,d,v,m,g,y,b,E,S,T,N){g&&(m=":",v="html"),S=S||n;var C,k,L=f&&[],A="",O="",M="",_=!S&&!m&&!y;d=d||m,i(N),l=N+o.length,b?a&&h.push(["*","\n"+E.replace(F,"$1")+"\n"]):d?(d==="else"&&(R.test(E)&&w('for "{{else if expr}}" use "{{else expr}}"'),L=p[6],p[7]=e.substring(p[7],N),p=c.pop(),h=p[3],_=!0),E&&(E=E.replace(j," "),A=x(E,L,t).replace(q,function(e,t,n){return t?M+=n+",":O+=n+",",""})),O=O.slice(0,-1),A=A.slice(0,-1),C=O&&O.indexOf("noerror:true")+1&&O||"",u=[d,v||!!r||"",A,_&&[],'params:"'+E+'",props:{'+O+"}"+(M?",ctx:{"+M.slice(0,-1)+"}":""),C,L||0],h.push(u),_&&(c.push(p),p=u,p[7]=l)):T&&(k=p[0],s(T!==k&&k!=="else"&&T),p[7]=e.substring(p[7],N),p=c.pop()),s(!p&&T),h=p[3]}var u,a=t&&t.allowCode,f=[],l=0,c=[],h=f,p=[,,,f];return e=e.replace(I,"\\$&"),s(c[0]&&c[0][3].pop()[0]),e.replace(L,o),i(e.length),(l=f[f.length-1])&&s(""+l!==l&&+l[7]===l[7]&&l[0]),S(f,n?e:t,n)}function S(e,n,r){var i,s,o,u,a,f,l,c,h,p,d,v,g,y,b,E,x,T,N,C,k,L,A,O,M,_=0,D="",P="",H={},B=e.length;for(""+n===n?(b=r?'data-link="'+n.replace(j," ").slice(1,-1)+'"':n,n=0):(b=n.tmplName||"unnamed",n.allowCode&&(H.allowCode=!0),n.debug&&(H.debug=!0),v=n.bnds,y=n.tmpls),i=0;i<B;i++)if(s=e[i],""+s===s)D+='\nret+="'+s+'";';else if(o=s[0],o==="*")D+=""+s[1];else{if(u=s[1],a=s[2],T=s[3],f=s[4],P=s[5],N=s[7],(L=o==="else")||(_=0,v&&(g=s[6])&&(_=v.push(g))),(A=o===":")?(u&&(o=u==="html"?">":u+o),P&&(O="prm"+i,P="try{var "+O+"=["+a+"][0];}catch(e){"+O+'="";}\n',a=O)):(T&&(E=m(N,H),E.tmplName=b+"/"+o,S(T,E),y.push(E)),L||(x=o,k=D,D=""),C=e[i+1],C=C&&C[0]==="else"),f+=",args:["+a+"]}",A&&g||u&&o!==">"){if(M=new Function("data,view,j,u"," // "+b+" "+_+" "+o+"\n"+P+"return {"+f+";"),M.paths=g,M._ctxs=o,r)return M;d=1}if(D+=A?"\n"+(g?"":P)+(r?"return ":"ret+=")+(d?(d=0,p=!0,'c("'+u+'",view,'+(g?(v[_-1]=M,_):"{"+f)+");"):o===">"?(c=!0,"h("+a+");"):(h=!0,"(v="+a+")!="+(r?"=":"")+'u?v:"";')):(l=!0,"{tmpl:"+(T?y.length:"0")+","+f+","),x&&!C){if(D="["+D.slice(0,-1)+"]",(r||g)&&(D=new Function("data,view,j,u"," // "+b+" "+_+" "+x+"\nreturn "+D+";"),g&&((v[_-1]=D).paths=g),D._ctxs=o,r))return D;D=k+'\nret+=t("'+x+'",view,this,'+(_||D)+");",g=0,x=0}}D="// "+b+"\nvar j=j||"+(t?"jQuery.":"js")+"views"+(h?",v":"")+(l?",t=j._tag":"")+(p?",c=j._cnvt":"")+(c?",h=j.converters.html":"")+(r?";\n":',ret="";\n')+(rt.tryCatch?"try{\n":"")+(H.debug?"debugger;":"")+D+(r?"\n":"\nreturn ret;\n")+(rt.tryCatch?"\n}catch(e){return j._err(e);}":"");try{D=new Function("data,view,j,u",D)}catch(F){w("Compiled template code:\n\n"+D,F)}return n&&(n.fn=D),D}function x(e,t,n){function r(r,h,p,d,v,m,g,y,b,S,T,N,C,k,L,A,P,B,j){function F(e,n,r,i,o,u,a){if(n&&(t&&!s&&t.push(d),n!==".")){var f=(r?'view.hlp("'+r+'")':i?"view":"data")+(a?(o?"."+o:r?"":i?"":"."+n)+(u||""):(a=r?"":i?o||"":n,""));return f+=a?"."+a:"",f.slice(0,9)==="view.data"?f.slice(5):f}return e}var I;if(v=v||"",p=p||h||T,d=d||y,b=b||A||"",!m)return t&&L&&(I=a[f],j.length-2>B-I&&(I=j.slice(I,B+1),L=M+":"+I+_,L=o[L]=o[L]||E(O+L+D,n,!0),L.paths||x(I,L.paths=[],n),t.push({_jsvOb:L}))),c?(c=!N,c?r:'"'):l?(l=!C,l?r:'"'):(p?(f++,a[f]=B++,p):"")+(P?f?"":i?(i=s=!1,"\b"):",":g?(f&&w(e),i=d,s=d.charAt(0)==="~","\b"+d+":"):d?d.split("^").join(".").replace(H,F)+(b?(u[++f]=!0,d.charAt(0)!=="."&&(a[f]=B),b):v):v?v:k?(u[f--]=!1,k)+(b?(u[++f]=!0,b):""):S?(u[f]||w(e),","):h?"":(c=N,l=C,'"'));w(e)}var i,s,o=n.links,u={},a={0:-1},f=0,l=!1,c=!1;return(e+" ").replace(B,r)}function T(e,t){return e&&e!==t?t?i(i({},t),e):e:t&&i({},t)}function N(e){return $[e]||($[e]="&#"+e.charCodeAt(0)+";")}if((!t||!t.views)&&!e.jsviews){var C,k,L,A,O="{",M="{",_="}",D="}",P="^",H=/^(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,B=/(\()(?=\s*\()|(?:([([])\s*)?(?:([#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^)|[)\]])([([]?))|(\s+)/g,j=/\s*\n/g,F=/\\(['"])/g,I=/['"\\]/g,q=/\x08(~)?([^\x08]+)\x08/g,R=/^if\s/,U=/<(\w+)[>\s]/,z=/[\x00`><"'&]/g,W=z,X=0,V=0,$={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},J="data-jsv-tmpl",K={},Q={template:{compile:v},tag:{compile:d},helper:{},converter:{}},G={jsviews:"v1.0.0-beta",render:K,settings:{delimiters:s,debugMode:!0,tryCatch:!0},sub:{View:h,Error:r,tmplFn:E,parse:x,extend:i,error:b,syntaxError:w},_cnvt:f,_tag:c,_err:function(e){return rt.debugMode?"Error: "+(e.message||e)+". ":""}};(r.prototype=new Error).constructor=r,u.depends=function(){return[this.get("item"),"index"]};for(k in Q)g(k,Q[k]);var Y=G.templates,Z=G.converters,et=G.helpers,tt=G.tags,nt=G.sub,rt=G.settings;t?(C=t,C.fn.render=y):(C=e.jsviews={},C.isArray=Array&&Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}),C.render=K,C.views=G,C.templates=Y=G.templates,tt({"else":function(){},"if":{render:function(e){var t=this;return t.rendering.done||!e&&(arguments.length||!t.tagCtx.index)?"":(t.rendering.done=!0,t.selected=t.tagCtx.index,t.tagCtx.render())},onUpdate:function(e,t,n){for(var r,i,s=0;(r=this.tagCtxs[s])&&r.args.length;s++)if(r=r.args[0],i=!r!=!n[s].args[0],!!r||i)return i;return!1},flow:!0},"for":{render:function(e){var t=this,r=t.tagCtx,i=!arguments.length,s="",o=i||0;return t.rendering.done||(i?s=n:e!==n&&(s+=r.render(e),o+=C.isArray(e)?e.length:1),(t.rendering.done=o)&&(t.selected=r.index)),s},onArrayChange:function(e,t){var n,r=this,i=t.change;if(this.tagCtxs[1]&&(i==="insert"&&e.target.length===t.items.length||i==="remove"&&!e.target.length||i==="refresh"&&!t.oldItems.length!=!e.target.length))this.refresh();else for(n in r._.arrVws)n=r._.arrVws[n],n.data===e.target&&n._.onArrayChange.apply(n,arguments);e.done=!0},flow:!0},include:{flow:!0},"*":{render:function(e){return e},flow:!0}}),Z({html:function(e){return e!=n?String(e).replace(W,N):""},attr:function(e){return e!=n?String(e).replace(z,N):e===null?null:""},url:function(e){return e!=n?encodeURI(String(e)):e===null?null:""}}),s()}}(this,this.jQuery),define("jsrender",function(){}),define("utils",["jquery","baseUtils","config","l10n","jsrender"],function(e,t,n,r){var i=t;return i.getModules=function(t){var n=require.s.contexts._.defined,r,i={},s;return t?(r=e.grep(Object.keys(n),function(e){return e.search(t)>-1?n[e]:null}),e.each(r,function(){s=this.split("/"),s.length===2&&(i[s[s.length-1]]=n[this])}),i):n},i.nearPoint=function(e){var t=n.get("net");return[Math.round(Math.abs(e[0]||0)/t)*t,Math.round(Math.abs(e[1]||0)/t)*t]},i.intersect=function(e,t){return(e.x>=t.x&&e.x<=t.x1||e.x1>=t.x&&e.x1<=t.x1)&&(e.y>=t.y&&e.y<=t.y1||e.y1>=t.y&&e.y1<=t.y1)||(t.x>=e.x&&t.x<=e.x1||t.x1>=e.x&&t.x1<=e.x1)&&(t.y>=e.y&&t.y<=e.y1||t.y1>=e.y&&t.y1<=e.y1)||(e.x>=t.x&&e.x<=t.x1||e.x1>=t.x&&e.x1<=t.x1)&&(t.y>=e.y&&t.y<=e.y1||t.y1>=e.y&&t.y1<=e.y1)||(t.x>=e.x&&t.x<=e.x1||t.x1>=e.x&&t.x1<=e.x1)&&(e.y>=t.y&&e.y<=t.y1||e.y1>=t.y&&e.y1<=t.y1)},i.arraysEqual=function(e,t){if(!e||e.constructor!==Array||!t||t.constructor!==Array)return!1;if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0},function(){function t(e){var t=/\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d\.]+)\s*/,n=!1;return e==="transparent"?n=!0:(e=e.match(t),e&&e[4]&&Number(e[4])===0&&(n=!0)),n}function n(e){var t=(+e).toString(16);return t.length===1?"0"+t:t}function r(e,t,r){return"#"+n(e)+n(t)+n(r)}function s(e){return{get:function(t){var n=getComputedStyle(t).getPropertyValue(e);return n?i.getHex(n):null},set:function(t,n){var i,s=/\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*/;s.test(n)&&(i=n.match(s),i=i.slice(1),i.length===3&&(n=r.apply(null,i)),n=n),t.style[e]=n}}}i.getHex=function(n){var i,s;return n?t(n)?"#ffffff":(i=/rgb\(?\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)?$/,s=e("<div></div>").appendTo(require("head").$reusable).css("fill",n),n=getComputedStyle(s[0]).getPropertyValue("fill"),s.remove(),i.test(n)?(n=n.match(i).slice(1),r.apply(null,n)):n):!1},e.cssHooks.fill=s("fill"),e.cssHooks.stroke=s("stroke")}(),function(){var t=jQuery&&jQuery.views||e&&e.views||window.jsviews&&window.jsviews.views,s={},o=function(e){return n.get("templates-path",{name:e})};i.lazyGetTemplate=function(n){var r=e.Deferred(),i,s;if(t.templates[n])r.resolve(t.templates[n]);else{i=document.getElementById(n);if(i)return t.templates(n,i),r.resolve(t.templates[n]);s=o(n),e.get(s).done(function(e){console.info("template "+s+" is loaded"),t.templates(n,e),r.resolve(t.templates[n])}).fail(function(){r.reject()})}return r.promise()},i.render=function(n,r){var i=e.Deferred();return e.when(this.lazyGetTemplate(n)).done(function(){i.resolve(e(t.templates[n].render(r)),r)}),i.promise()},t.helpers({trans:function(){return r.tr.apply(this,arguments)},getFields:function(t){var n=[];return e.each(t,function(e,t){n.push({key:e,value:t})}),n},getConfig:function(){return n},isFunction:function(t){return e.isFunction(t)},isEmptyObject:function(t){return e.isEmptyObject(t)},isPlainObject:function(t){return e.isPlainObject(t)},getvar:function(e){return s[e]},merge:function(e,t){var n=[];return e&&(n=n.concat(e)),t&&(n=n.concat(t)),n},isAvailable:function(e){return i.isAvailable(e)}}),t.tags({debug:function(e){console.log(e)},setvar:function(e,t){return t?s[e]=t:s[e]=this.tagCtx.render(),""}})}(),i}),define("baseController",[],function(){return{create:function(e){var t=function(){this.init.apply(this,arguments)};return t.prototype.init=function(){},t.include=function(e){var t;if(typeof e!="object"&&e.constructor!==Object)return!1;for(t in e){if(!e.hasOwnProperty(t))continue;this.prototype[t]=e[t]}return this},e&&t.include(e),t}}}),define("baseEvents",["jquery"],function(e){var t={};return{clear:function(){return t={},this},bind:function(e,n){(t[e]||(t[e]=[])).push(n)},unbind:function(e){delete t[e]},trigger:function(n){var r,i=0,s,o=[].slice.call(arguments).slice(1),u,a,f=[];if(!(r=t[n]))return this;for(s=r.length;i<s;i+=1)u=r[i].apply(this,o),u!==undefined&&f.push(u);if(f.length)return a=e.Deferred(),e.when.apply(null,f).done(function(){a.resolve.apply(a,arguments)}),a.promise()}}}),define("spinner",["jquery"],function(e){return{show:function(){var t=e.Deferred();return require("head").$node.css("cursor","wait"),e(".preload-blanket").fadeIn(300,function(){t.resolve()}),t.promise()},hide:function(){var t=e.Deferred();return require("head").$node.css("cursor",""),e(".preload-blanket").fadeOut(300,function(){t.resolve()}),t.promise()}}}),define("queue",[],function(){var e=50,t=[],n=t.length;return{prev:function(){return n===0?null:(n-=1,t[n])},next:function(){if(n===t.length)return null;var e=t[n];return n+=1,e},push:function(r){t=t.slice(0,n),t.push(r),t.length>e&&t.shift(),n=t.length},clear:function(){t.length=0,n=t.length},canUndo:function(){return n>0&&t.length>0},canRedo:function(){return n<t.length}}}),define("UIRes",["jquery","config","utils","baseEvents"],function(e,t,n,r){var i={buttonRect:function(){var r="d-button-rect",i=e(n.createNS("g",{id:r})),s=e(n.createNS("rect"));return s.css({opacity:t.get("rectButtonOpacity"),fill:t.get("rectButtonFill")}),s.attr({width:t.get("rectButtonWidth"),height:t.get("rectButtonHeight")}),i.append(s),i},resizingBand:function(){var r="d-resizing-band",i=2,s=1,o=5,u="#666666",a=0,f=0,l=t.get("resizingBandBlockWidth"),c=e(n.createNS("g",{id:r})),h;for(;i>0;i-=1)h=e(n.createNS("line")),h.attr({x1:f,y1:i*o,x2:l,y2:i*o}).css({stroke:u,"stroke-width":s,"stroke-dasharray":"3, 2"}),f+=a,l-=a,c.append(h);return c},buttonCircle:function(){var r="d-button-circle",i=e(n.createNS("g",{id:r})),s=e(n.createNS("circle"));return s.attr({cx:t.get("circleButtonWidth"),cy:t.get("circleButtonHeight")}),s.attr("r",t.get("circleButtonRadius")),s.css({opacity:t.get("circleButtonOpacity"),fill:t.get("circleButtonFill")}),i.append(s),i},net:function(){var r=t.get("net"),i="d-net",s,o;return s=e(n.createNS("pattern",{id:i,patternUnits:"userSpaceOnUse",width:r,height:r})),o=e(n.createNS("line",{x1:0,y1:0,x2:r,y2:0,stroke:"gray","stroke-width":1,fill:"none",style:"stroke-dasharray: 1, "+(r-1)+";"})),s.append(o),s},barcodeSprite:function(){var r,i;return r=e(n.createNS("pattern",{id:"d-barcode-sprite",patternUnits:"userSpaceOnUse",width:2764,height:116})),i=e(n.createNS("image",{x:0,y:0,width:r.attr("width"),height:r.attr("height")})),n.xAttr(i[0],"xlink:href",t.get("images-path",{image:"barcode-sprite.png"})),r.append(i),r},tooltip:function(){var t=e("<div>");return t.addClass("d-tooltip"),t},contextMenu:function(t,n){var s=e("<div>"),o,u,a=0,f;if(!n||!n.length)return;f=n.length,s.addClass("d-cm"),t&&(u=e("<div>"),u.addClass("d-cm-item d-cm-title"),u.text(t),s.append(u));for(;a<f;a+=1){if(n[a].type==="separator"){s.append('<hr class="d-cm-separator"/>');continue}o=e("<div>"),o.addClass("d-cm-item"),o.addClass("d-cm-"+n[a].type),n[a].curVal&&o.addClass("d-cm-checked"),n[a].disabled&&o.addClass("disabled"),o.text(n[a].name),o.data("item",n[a]),s.append(o)}return s.on("mousedown",function(t){var n=e(t.target),o,u=n.data("item"),a;return u&&n.is(":not(.disabled)")&&(u.closeAfter&&r.trigger("remove-context-menus"),u.type==="checkbox"?(u.curVal=!u.curVal,n[u.curVal?"addClass":"removeClass"]("d-cm-checked"),u.onChange&&u.onChange(u)):u.type==="list"?(o=n.data("cm"),o?(o.remove(),n.data("cm",null)):(o=i.contextMenu(null,typeof u.items=="function"?u.items(u):u.items),a=n[0].getBoundingClientRect(),o.css({left:a.left+a.width,top:a.top}),n.data("cm",o),s.after(o))):u.type==="default"&&u.onClick&&u.onClick(u)),!1}),s},popup:function(r){return n.render("popup",{title:r}).done(function(n){n.on("click",".close",function(){n.fadeOut(t.get("fadeout"),function(){e(this).remove()})})})}};return function(){var t=n.createNS("defs");return e(t).append(i.buttonRect(),i.resizingBand(),i.buttonCircle(),i.net(),i.barcodeSprite()),{defs:t,createButtonRect:i.buttonRect,createResizingBand:i.resizingBand,createButtonCircle:i.buttonCircle,createNet:i.net,createBarcodeSprite:i.barcodeSprite,createTooltip:i.tooltip,createContextMenu:i.contextMenu,createPopup:i.popup}}}),define("baseEntity",["jquery","utils","queue","baseEvents"],function(e,t,n,r){function o(e,t,r){function i(){this[e].apply(this,arguments),this.render&&this.render(),this.activate&&this.activate()}n.push({context:this,undo:function(){typeof this.beforeUndo=="function"&&this.beforeUndo(),typeof this.beforeUndoRedo=="function"&&this.beforeUndoRedo(),i.apply(this,arguments),typeof this.afterUndo=="function"&&this.afterUndo(),typeof this.afterUndoRedo=="function"&&this.afterUndoRedo()},redo:function(){typeof this.beforeRedo=="function"&&this.beforeRedo(),typeof this.beforeUndoRedo=="function"&&this.beforeUndoRedo(),i.apply(this,arguments),typeof this.afterRedo=="function"&&this.afterRedo(),typeof this.afterUndoRedo=="function"&&this.afterUndoRedo()},undoData:[t,this[e](t)],redoData:[t,r]})}var i=null,s;return s=t.object({},{init:function(){},attributes:{},properties:{},defaultValues:{Left:0,Top:0,"Border.Color":"#000","Border.Width":1,"Border.Style":"Solid","Border.Lines":"None","Border.Shadow":!1,"Border.ShadowColor":"#000","Border.ShadowWidth":4,Cursor:"Default",EvenStyle:"",EvenStylePriority:"UseFill","Fill.Color":"transparent","Fill.Hatch":!1,"Fill.Blend":0,Restrictions:[],FirstRowStartsNewPage:!1,KeepChild:!1,ResetPageNumber:!1,StartNewPage:!1,AutoSize:!1,Exportable:!0,Printable:!0,PrintOnBottom:!1,ShiftMode:"Always",PrintOn:["FirstPage","LastPage","OddPages","EvenPages","RepeatedBand","SinglePage"],RepeatOnEveryPage:!1,Visible:!0,Anchor:["Top","Left"],"Padding.All":-1,Brackets:"[,]"},createObject:function(e,n){return n=n||{},n.attributes={},n.properties={},n.defaultValues={},t.object(e||this,n)},clone:function(){var t=this._super.create&&this._super.create(this.type);return!t&&typeof this.constructor=="function"&&(t=Object.create(this.constructor.prototype),t=this.constructor.apply(t,arguments)||t),t&&(e.each(this.properties,function(e,n){e!=="Name"&&t.prop(e,n)}),e.each(this.attributes,function(e,n){t.attr(e,n)})),t},attr:function(e,t,n){var r;if(typeof e=="string")return t===undefined?this.attributes[e]!==undefined?this.attributes[e]:this._super.attr&&this._super.attr(e):(this.attributes[e]!==t&&(this.touch(),n&&o.call(this,"attr",e,t),this.attributes[e]=t),t);if(typeof e=="object")for(r in e){if(!e.hasOwnProperty(r))continue;this.attr(r,e[r])}return},prop:function(e,n,r){var i,u;if(typeof e=="string")return u=this.defaultValues[e]!==undefined?this.defaultValues[e]:s.defaultValues[e],n===undefined?this.properties[e]!==undefined?this.properties[e]:u!==undefined?u:this._super.prop&&this._super.prop(e):(this.properties[e]!==n&&(this.touch(),r&&o.call(this,"prop",e,n),u&&(u===n||t.arraysEqual(u,n))?this.deleteProp(e):this.properties[e]=n),n);if(typeof e=="object")for(i in e){if(!e.hasOwnProperty(i))continue;this.prop(i,e[i])}return},onChangeCM:function(e,t){var n;if(!e.prop)return;n=e.curVal,e.val&&(n=n?e.val:""),t?t[e.prop]=n:this.prop(e.prop,n)},deleteAttr:function(e){return this.touch(),delete this.attributes[e]},deleteProp:function(e){return this.touch(),delete this.properties[e]},eachProp:function(n){e.each(this.properties,function(e,r){if(r!==undefined&&r!==""&&r!==null&&r.length!==0)return t.isFloat(r)&&(r=r.toFixed(2)),n.call(this,e,r)})},counter:function(){var e={};return{incr:function(t){return e[t]||(e[t]=0),++e[t]},clear:function(){e={}}}}(),names:function(){var e={};return{save:function(t,n,r){return r?(e[t]=n,!0):e[t]?!1:(e[t]=n,!0)},remove:function(t){return delete e[t],!0}}}(),fillMap:function(){},fillProps:function(n){var r;return e.each(n[0].attributes,function(e,n){r=t.convertVal(n.value),n.name==="Name"&&this.names.save(r,this,!0),this.prop(n.name,r)}.bind(this)),this},state:function(){var t=["normal","in_move"],n={};return e.each(t,function(){n[this]=[]}),{set:function(t){var r=this;return r.attr("state",t),e.each(n,function(){this.removeByValue(r)}),n[t].push(r),r},get:function(e){return n[e]}}}(),formName:function(e){var t=(this.prop("Name")||this.type)+this.counter.incr(e||this.type);return this.names.save(t,this)?t:this.formName.apply(this,arguments)},applyForBorder:function(t,n){var r=this.prop("Border.Lines")||"";r=r.split(/,[\s]?/),r.removeByValue(""),e.inArray("All",r)!==-1&&(r.removeByValue("All"),r.push("Left"),r.push("Top"),r.push("Right"),r.push("Bottom")),r.removeByValue("None"),t==="None"?r=["None"]:!n&&e.inArray(t,r)!==-1?(r.removeByValue(t),r.length||(r=["None"])):t==="All"?r=["All"]:(r.push(t),r=r.removeDoubleValue(),e.inArray("Left",r)!==-1&&e.inArray("Top",r)!==-1&&e.inArray("Right",r)!==-1&&e.inArray("Bottom",r)!==-1&&(r=["All"])),this.prop("Border.Lines",r.join(", "),!0)},canHaveProp:function(e){var t=this.fieldMap&&this.fieldMap.origin||[],n=0,r=t.length,i;for(;n<r;n+=1){i=t[n].prop||t[n];if(i===e)return!0}return!1},render:function(){},mouseStart:function(){},resizingStart:function(){},resizing:function(){},resizingEnd:function(){},movingStart:function(){},moving:function(){},movingEnd:function(){},creatingComponentOver:function(){},deleteComponentOver:function(){},creatingComponentEnd:function(){},rightClick:function(){},mouseover:function(){},mouseout:function(){},afterAlign:function(){},afterDrop:function(){},remove:function(){return!this.prop("Restrictions")||this.prop("Restrictions")!=="DontDelete"&&e.inArray("DontDelete",this.prop("Restrictions"))===-1?(this===i&&s.deactivate(),!0):!1},touch:function(){this.touched=!0},activate:function(){i=this},deactivate:function(){i=null},getSelected:function(){return i},canMove:function(){var t=this.attr("movable");if(t||t===undefined)t=this.prop("Restrictions")!=="DontMove"&&e.inArray("DontMove",this.prop("Restrictions"))===-1;return t},canResizeX:function(){var t=this.attr("resizableX");if(t||t===undefined)t=this.prop("Restrictions")!=="DontResize"&&e.inArray("DontResize",this.prop("Restrictions"))===-1;return t},canResizeY:function(){var t=this.attr("resizableY");if(t||t===undefined)t=this.prop("Restrictions")!=="DontResize"&&e.inArray("DontResize",this.prop("Restrictions"))===-1;return t},canModify:function(){return this.prop("Restrictions")!=="DontModify"&&e.inArray("DontModify",this.prop("Restrictions"))===-1},canEdit:function(){return this.prop("Restrictions")!=="DontEdit"&&e.inArray("DontEdit",this.prop("Restrictions"))===-1},canDelete:function(){return this.prop("Restrictions")!=="DontDelete"&&e.inArray("DontDelete",this.prop("Restrictions"))===-1},hasHiddenProperties:function(){return this.prop("Restrictions")==="HideAllProperties"||e.inArray("HideAllProperties",this.prop("Restrictions"))!==-1},isBand:function(){return!1},isComponent:function(){return!1},isPage:function(){return!1},isReport:function(){return!1},isConnection:function(){return!1},isDataSource:function(){return!1},canHaveChildren:function(){return!1},selfTree:null,statusTree:1,selectedInTree:null,buildHTMLTreeBlock:function(t){var n={$main:e("<li>"),$expand:e("<div>"),$icon:e("<div>"),$content:e("<div>"),$container:e("<ul>")};return n.$main.addClass("rt-node"),n.$expand.addClass("rt-expand icon-leaf"),n.$icon.addClass("rt-icon"),n.$content.addClass("rt-content"),n.$container.addClass("rt-container"),n.$main.append(n.$expand,n.$icon,n.$content,n.$container),t&&t.icon&&n.$icon.addClass(t.icon),n},selectInTree:function(e){var t;return s.selectedInTree&&s.selectedInTree.removeClass("selected"),!e||!e.selfTree?!1:(s.selectedInTree=e.selfTree.$content,s.selectedInTree.addClass("selected"),t=s.selectedInTree.parents(".rt-page").data("entity"),t&&r.trigger("show-page",t),this)},rebuildTree:function(){var e;return this.selfTree?(e=this.selfTree.$main,this.selfTree=null,this.buildTree(),e.replaceWith(this.selfTree.$main),this.selfTree.$main):this.buildTree()},buildTree:function(){return this.selfTree=this.selfTree||s.buildHTMLTreeBlock({icon:this.attr("icon")||this.constructor.icon}),this.statusTree=s.statusTree,this.selfTree.$main.data("entity",this),this.selfTree.$main},putInTree:function(e){if(!this.selfTree)return!1;e.find(this.selfTree.$container).length&&e.replaceWith(this.selfTree.$main),this.selfTree.$container.find(e).length||this.selfTree.$container.append(e),e.show(),this.updateTreeView()},removeFromTree:function(e){e.hide(),this.updateTreeView()},updateTreeView:function(){if(!this.selfTree)return!1;this.selfTree.$content.text(this),this.selfTree.$container.children().length?this.statusTree?this.selfTree.$expand.addClass("icon-exp_minus").removeClass("icon-leaf"):this.selfTree.$expand.addClass("icon-exp_plus").removeClass("icon-leaf"):this.selfTree.$expand.removeClass("icon-exp_minus icon-exp_plus").addClass("icon-leaf")},toXML:function(t){var n=e((t.ownerDocument||t).createElement(this.type)),r;this.eachProp(function(e,t){n.attr(e,t)}),this.prop("Border.Lines")==="None"&&n.removeAttr("Border.Lines").removeAttr("Border.Color").removeAttr("Border.Width").removeAttr("Border.Style"),this.prop("Border.Shadow")===!1&&n.removeAttr("Border.Shadow").removeAttr("Border.ShadowWidth").removeAttr("Border.ShadowColor"),this.prop("Fill.Color")==="transparent"&&n.removeAttr("Fill.Color");if(this.prop("Padding.Top")||this.prop("Padding.Right")||this.prop("Padding.Bottom")||this.prop("Padding.Left"))r=(this.prop("Padding.Left")||0)+", "+(this.prop("Padding.Top")||0)+", "+(this.prop("Padding.Right")||0)+", "+(this.prop("Padding.Bottom")||0),n.removeAttr("Padding.Left").removeAttr("Padding.Top").removeAttr("Padding.Right").removeAttr("Padding.Bottom"),n.attr("Padding",r),n.removeAttr("Padding.All");return n[0]},toString:function(){return this.prop("Name")}}),s}),define("baseCollection",["jquery","utils"],function(e,t){return t.object({},{container:null,entities:[],create:function(e){var n=t.object(this);return n.entities=[],n.container=e||null,n},all:function(){return e.grep(this.entities,function(e){return e&&!e.attr("removed")})},allWithChildren:function(){var e=[];return this.everyEntity(function(t){t&&!t.attr("removed")&&e.push(t)}),e},eachEntity:function(e,t){var n=this.entities,r=0,i;t||(n=this.all()),i=n.length;for(;r<i;r+=1)if(e.call(this,n[r],r)===!1)break;return this},everyEntity:function(){return this.eachEntity.apply(this,arguments)},count:function(){return this.all().length},add:function(t){if(!t)return;return t.collection&&t.collection!==this&&t.collection.remove(t),t.collection=this,e.inArray(t,this.entities)===-1&&this.entities.push(t),this},find:function(e){var t;return this.everyEntity(function(n,r){if(n._id===e)return t=[n,r],!1}),t},findEntity:function(){var e=this.find.apply(this,arguments);return e&&e[0]},findAmongChildren:function(e){var t;return this.eachEntity(function(n,r){if(n._id===e)return t=[n,r],!1}),t},findBy:function(e){var t=[];return this.everyEntity(function(n){for(var r in e){if(!e.hasOwnProperty(r))continue;if(n[r]!==e[r]&&n.attributes[r]!==e[r]&&n.properties[r]!==e[r])return}t.push(n)}),t},findOneBy:function(){return this.findBy.apply(this,arguments)[0]},findAmongChildrenBy:function(e){var t=[];return this.eachEntity(function(n){for(var r in e){if(!e.hasOwnProperty(r))continue;if(n[r]!==e[r]&&n.attributes[r]!==e[r]&&n.properties[r]!==e[r])return}t.push(n)}),t},findOneAmongChildrenBy:function(){return this.findAmongChildrenBy.apply(this,arguments)[0]},findAmongAll:function(e){var t=[];return this.everyEntity(function(n){for(var r in e){if(!e.hasOwnProperty(r))continue;if(n[r]!==e[r]&&n.attributes[r]!==e[r]&&n.properties[r]!==e[r])return}t.push(n)},!0),t},findOneAmongAll:function(){return this.findAmongAll.apply(this,arguments)[0]},first:function(){return this.all()[0]||null},last:function(){var e=this.all();return e[e.length-1]},after:function(e,t){var n=!1;return this.everyEntity(function(r){if(e._id===r._id){n=!0;return}n&&t.call(r,r)}),this},remove:function(e){if(!e)return;return this.entities.removeByValue(e),this},clear:function(){return this.entities.length=0,this},isEmpty:function(){return!this.entities.length},getMainCollection:function(){return this.mainCollection||this.container.collection.mainCollection}})}),define("StateMachine",[],function(){var e=function(){};return e.prototype.add=function(e){var t=this,n=this._callbacks||(this._callbacks=[]);return n.push(e),e.active=function(){for(var e=0,r=n.length;e<r;e+=1)this===n[e]?(this.activate(),this._super._super.activate.apply(this,arguments),t.current=this):n[e].deactivate();return this},e},e.prototype.remove=function(e){this._callbacks.removeByValue(e)},e.prototype.clear=function(){return this._callbacks?this._callbacks.length=0:this._callbacks=[],this},e.prototype.all=function(){return this._callbacks||[]},e}),define("base/Container",["jquery","config","utils","baseEntity"],function(e,t,n,r){return n.object(r,{render:function(e){var n=e||0,r=t.get("band-indent-top");return this.attr("removed")&&(this.attr("removed",!1),this.$g.show(),this.collection.container.putInTree(this.buildTree())),this.bands.eachEntity(function(e){e.balance(),e.setPosition(e.prop("Left"),n),n+=e.prop("Height")+r+e.bands.getCommonHeight()}.bind(this)),this},remove:function(){return this._super._super._super.remove.call(this)?(this.deactivate(),this.attr("removed",!0),this.$g&&this.$g.hide(),this.collection.container.removeFromTree(this.selfTree.$main),!0):!1},addBand:function(e,t){var n;if(this.isPage())n=this;else{if(!this.isBand())return!1;n=this.collection.mainCollection.container}return!e||e.canBeAdded&&e.canBeAdded(this)===!1?!1:(e.bands.initMainCollection(n.bands),e.renderContainer(),this.put(e,t),e)},addBands:function(){var e=0,t=arguments.length,n=function(e){this.addBand(e)}.bind(this);for(;e<t;e+=1)n(arguments[e]);return this.render(),this},put:function(e,t){this.$bands.append(e.$g),e._parent=this,e.attr("margin",this.attr("margin")),e.attr("padding",this.attr("padding")),e.prop("Width",this.prop("Width")||this.attr("Width")),this.bands.add(e,t),this.putInTree(e.buildTree())}})}),define("bandCollection",["jquery","config","utils","baseCollection"],function(e,t,n,r){return n.object(r,{initMainCollection:function(e){return this.mainCollection=e,this},everyEntity:function(e){var t=this.all(),n=t.length,r=0;for(;r<n;r+=1)if(e.call(this,t[r],r)===!1||t[r].bands.count()&&t[r].bands.everyEntity(e)===!1)return!1;return this},getCommonHeight:function(){var e=0,n=t.get("band-indent-top");return this.everyEntity(function(t){e+=t.prop("Height")+n}),e},getHeightTo:function(e,n){var r=0,i=t.get("band-indent-top");return this.mainCollection.everyEntity(function(t){if(e._id===t._id)return!1;r+=t.prop("Height")+i}),(n||0)+r},updateThreshold:function(){return this.mainCollection.everyEntity(function(e){e.updateThreshold()}),this},componentsIn:function(e,t){var r=[],i,s,o,u,a;return this.everyEntity(function(f){f.components.eachEntity(function(l){i=f.prop("Top"),s=l.prop("Left"),o=l.prop("Top")+i,u=l.attr("right"),a=l.attr("bottom")+i,n.intersect({x:e[0],y:t[0],x1:e[1],y1:t[1]},{x:s,y:o,x1:u,y1:a})&&r.push(l)})}),r},add:function(e,t){e.collection&&e.collection.remove(e),e.collection=this,t>-1?this.entities.pushOn(t,e):this.entities.push(e),this.entities.removeDoubleValue();var n=0,r=this.entities,i=r.length,s=[],o=[],u=[],a=function(e,t){return e.attr("pos")<t.attr("pos")?-1:e.attr("pos")>t.attr("pos")?1:0};for(;n<i;n+=1){if(!r[n])continue;t=r[n].attr("pos");if(!t)continue;t<=30?s.push(r[n]):t>=40?u.push(r[n]):o.push(r[n])}return s.sort(a),u.sort(a),o.sort(a),this.entities=s.concat(o,u).removeDoubleValue(),this},findInsideCoord:function(e){var t=null;return this.everyEntity(function(n){if(!(e[0]>=n.prop("Left")&&e[1]>=n.prop("Top")))return!1;t=n}),t},remove:function(t){if(!t)return;return e.each(t.bands.entities,function(){this.bands.remove(this)}),this.entities.removeByValue(t),this},clear:function(){return this.everyEntity(function(e){e.$g.remove()}),this.entities.length=0,this},getSelectedComponents:function(){return e(".component.selected",this.container.$workspace).map(function(){return this.component.attr("removed")?null:this.component})},getSelectedBand:function(){var t=e(".band.selected",this.container.$workspace).map(function(){return this.band.attr("removed")?null:this.band});return t[0]}})}),define("units",["jquery","utils"],function(e,t){var n={cm:"Centimeters",mm:"Millimeters","in":"Inches",hi:"Hundredths of inch"},r="cm",i={cm:{toUnit:function(e){return e*2.54/96},toPixels:function(e){return e*96/2.54}},mm:{toUnit:function(e){return e*2.54/9.6},toPixels:function(e){return e*9.6/2.54}},hi:{toUnit:function(e){return+e},toPixels:function(e){return+e}},"in":{toUnit:function(e){return e/96},toPixels:function(e){return e*96}}};return{all:function(){return t.extend({},n)},setCurrent:function(e){r=e||r},getCurrent:function(){return r},toPx:function(t,n){return e.isNumeric(t)?i[n||r].toPixels(t).toFixed(2):null},toUnit:function(t,n){return e.isNumeric(t)?i[n||r].toUnit(t).toFixed(2):null}}}),define("properties/base",["jquery","utils"],function(e,t){function i(e,t){var n=[],r;for(r in e){if(!e.hasOwnProperty(r))continue;n.push(s(e[r],t))}return n}function s(n,r){var i,s={},o=n,u,f,l={};if(e.isPlainObject(n))n=t.extend({},n),o=n.prop,i=a(n.prop),delete n.prop,s=n;else{if(typeof n!="string")return null;i=a(n)}return e.each(i,function(t,n){if(t===0){u=e.extend(!0,{},r[n]),l[n]=u,f=l[n];return}u&&(u=u[n]||u.fields&&u.fields[n]),f.fields={},f.fields[n]=u,f.fields[n]||(i[t+1]?f.fields[n]={label:n,fields:{}}:f.fields[n]={type:"text",label:n}),f=f.fields[n]}),t.extend(f,s,!0),f.origin=o,l}function o(n){var r=[],i=[],s,o,u;for(s in n){if(!n.hasOwnProperty(s))continue;for(o in n[s]){if(!n[s].hasOwnProperty(o))continue;u=e.inArray(o,i),u!==-1?t.extend(r[u],n[s][o],!0):(i.push(o),r.push(n[s][o]))}}return r}function u(e,t){for(var n in t){if(!t.hasOwnProperty(n))continue;e.removeByValue(t[n])}return e}function a(e){return e.split(":").filter(function(e){return/^[\s]*$/.test(e)?!1:e})}function f(){}var n=Array.prototype.push,r={f:function(e,t){var r=new f;return r.raw=i(e,t),n.apply(r,o(r.raw)),r.origin=[].concat(e),r.data=t,r}};return f.prototype=Object.create(Array.prototype),f.prototype.append=function(t){this.length=0,n.apply(this,r.f(e.merge(this.origin||[],t),this.data))},f.prototype.remove=function(e){this.length=0,n.apply(this,r.f(u(this.origin,e),this.data))},f.prototype.rebuild=function(t,i){this.origin=u(e.merge(this.origin||[],t),i),this.length=0,n.apply(this,r.f(this.origin,this.data))},r}),define("data/dataTypes",["jquery"],function(e){var t=[{dataType:"System.Boolean",icon:"icon-228",label:"Boolean"},{dataType:"System.Byte",icon:"icon-224",label:"Byte"},{dataType:"System.Char",icon:"icon-223",label:"Char"},{dataType:"System.DateTime",icon:"icon-227",label:"DateTime"},{dataType:"System.Decimal",icon:"icon-226",label:"Decimal"},{dataType:"System.Double",icon:"icon-225",label:"Double"},{dataType:"System.Int16",icon:"icon-224",label:"Int16"},{dataType:"System.Int32",icon:"icon-224",label:"Int32"},{dataType:"System.Int64",icon:"icon-224",label:"Int64"},{dataType:"System.SByte",icon:"icon-224",label:"SByte"},{dataType:"System.Single",icon:"icon-225",label:"Single"},{dataType:"System.String",icon:"icon-223",label:"String"},{dataType:"System.TimeSpan",icon:"icon-227",label:"TimeSpan"},{dataType:"System.UInt16",icon:"icon-224",label:"UInt16"},{dataType:"System.UInt32",icon:"icon-224",label:"UInt32"},{dataType:"System.UInt64",icon:"icon-224",label:"UInt64"},{dataType:"System.Byte[]",icon:"icon-229",label:"Byte[]"}];return{get:function(n){return e.grep(t,function(e){return e.dataType===n})[0]},getByName:function(n){return e.grep(t,function(e){return e.label===n})[0]},all:function(){return t}}}),define("facProperties",["jquery","config","utils","properties/base","baseEvents","data/dataTypes","units"],function(e,t,n,r,i,s,o){var u=t.get("dasharrays"),a=function(){return{attrs:{min:0,step:function(){return o.toUnit(t.get("net"))}},afterSetValue:function(){var e=this.collection&&this.collection.container;e&&i.trigger("balance-band",e)}}},f=function(){return{attrs:{min:0,step:function(){return o.toUnit(t.get("net"))}}}},l=function(e){e=e||"";var n={label:"Font",fields:{}},r=e+"Font.Name",i=e+"Font.Size",s=e+"Font.Bold",o=e+"Font.Italic",u=e+"Font.Strikeout",a=e+"Font.Underline";return n.fields[r]={type:"select",label:"Name",collection:t.get("font-names"),defaultValue:"Arial"},n.fields[i]={type:"number",label:"Size",defaultValue:10,getValue:function(){return parseInt(this.attr(i),10)}},n.fields[s]={type:"checkbox",label:"Bold",defaultValue:!1},n.fields[o]={type:"checkbox",label:"Italic",defaultValue:!1},n.fields[u]={type:"checkbox",label:"Strikeout",defaultValue:!1},n.fields[a]={type:"checkbox",label:"Underline",defaultValue:!1},n},c={Appearance:{label:"Appearance",fields:{Angle:{label:"Angle",type:"number"},Border:{label:"Border",fields:{"Border.Color":{label:"Color",type:"color"},"Border.Width":{label:"Width",type:"number"},"Border.Style":{label:"Style",type:"select",collection:u},BottomLine:{label:"BottomLine",fields:{"Border.BottomLine.Color":{label:"Color",type:"color"},"Border.BottomLine.Style":{label:"Style",type:"select",collection:u},"Border.BottomLine.Width":{label:"Width",type:"number",defaultValue:1}}},LeftLine:{label:"LeftLine",fields:{"Border.LeftLine.Color":{label:"Color",type:"color"},"Border.LeftLine.Style":{label:"Style",type:"select",collection:u},"Border.LeftLine.Width":{label:"Width",type:"number",defaultValue:1}}},RightLine:{label:"RightLine",fields:{"Border.RightLine.Color":{label:"Color",type:"color"},"Border.RightLine.Style":{label:"Style",type:"select",collection:u},"Border.RightLine.Width":{label:"Width",type:"number",defaultValue:1}}},TopLine:{label:"TopLine",fields:{"Border.TopLine.Color":{label:"Color",type:"color"},"Border.TopLine.Style":{label:"Style",type:"select",collection:u},"Border.TopLine.Width":{label:"Width",type:"number",defaultValue:1}}},"Border.Shadow":{label:"Shadow",type:"checkbox"},"Border.ShadowColor":{label:"ShadowColor",type:"color"},"Border.ShadowWidth":{label:"ShadowWidth",type:"number"}}},Cursor:{label:"Cursor",type:"select",collection:["Default","IBeam","No","SizeAll","SizeNESW","Arrow","AppStarting","Cross"]},Curve:{label:"Curve",type:"number"},EvenStyle:{label:"EvenStyle",type:"text"},EvenStylePriority:{label:"EvenStylePriority",type:"select",collection:["UseFill","UseAll"]},Fill:{label:"Fill",fields:{"Fill.Blend":{type:"number",label:"Blend",attrs:{min:0,max:1,step:.1}},"Fill.Color":{type:"color",label:"Color"},"Fill.Hatch":{type:"checkbox",label:"Hatch"}}},FirstTabOffset:{label:"FirstTabOffset",type:"number"},Font:l(),FontWidthRatio:{label:"FontWidthRatio",type:"number"},HorzAlign:{type:"select",label:"HorzAlign",collection:["Left","Center","Right","Justify"]},HoverStyle:{type:"text",label:"HoverStyle"},Tile:{type:"checkbox",label:"Tile"},Transparency:{type:"number",label:"Transparency",attrs:{min:0,max:1,step:.1}},TransparentColor:{type:"color",label:"TransparentColor"},LineHeight:{type:"unit",label:"LineHeight"},ParagraphOffset:{type:"unit",label:"ParagraphOffset"},Pointer:{label:"Pointer",fields:{"Pointer.BorderColor":{label:"BorderColor",type:"color"},"Pointer.Color":{label:"Color",type:"color"}}},Inverted:{label:"Inverted",type:"checkbox"},Scale:{label:"Scale",fields:{FirstSubScale:{label:"FirstSubScale",fields:{"Scale.FirstSubScale.Enabled":{type:"checkbox",label:"Enabled"},"Scale.FirstSubScale.ShowCaption":{type:"checkbox",label:"ShowCaption"}}},SecondSubScale:{label:"SecondSubScale",fields:{"Scale.SecondSubScale.Enabled":{type:"checkbox",label:"Enabled"},"Scale.SecondSubScale.ShowCaption":{type:"checkbox",label:"ShowCaption"}}},Font:l("Scale."),MajorTicks:{label:"MajorTicks",fields:{"Scale.MajorTicks.Color":{label:"Color",type:"color"},"Scale.MajorTicks.Width":{label:"Width",type:"number"}}},MinorTicks:{label:"MinorTicks",fields:{"Scale.MinorTicks.Color":{label:"Color",type:"color"},"Scale.MinorTicks.Width":{label:"Width",type:"number"}}}}},Style:{type:"text",label:"Style"},TabWidth:{type:"number",label:"TabWidth"},TextFill:{label:"TextFill",fields:{"TextFill.Color":{type:"color",label:"Color"}}},Underlines:{label:"Underlines",type:"checkbox"},VertAlign:{label:"VertAlign",type:"select",collection:["Top","Center","Bottom"]},Columns:{label:"Columns",fields:{"Columns.Count":{label:"Count",extraLabel:"Columns count",type:"number",attrs:{min:0}},"Columns.Layout":{label:"Layout",type:"select",collection:["AcrossThenDown","DownThenAcross"]},"Columns.MinRowCount":{label:"MinRowCount",type:"number"},"Columns.Position":{label:"Position",type:"number"},"Columns.Width":{label:"Width",extraLabel:"Columns width",type:"unit",attrs:{min:0}}}},Watermark:{label:"Watermark",fields:{"Watermark.Enabled":{label:"Enabled",type:"checkbox"},"Watermark.Font":l("Watermark."),"Watermark.Image":{label:"Image",type:"file"},"Watermark.ImageSize":{label:"ImageSize",type:"select",collection:["Normal","Center","Stretch","Zoom","Tile"]},"Watermark.ImageTransparency":{label:"ImageTransparency",type:"number",attrs:{min:0,max:1,step:.1}},"Watermark.ShowImageOnTop":{label:"ShowImageOnTop",type:"checkbox"},"Watermark.ShowTextOnTop":{label:"ShowTextOnTop",type:"checkbox"},"Watermark.Text":{label:"Text",type:"text"},"Watermark.TextFill":{label:"TextFill",fields:{"Watermark.TextFill.Color":{type:"color",label:"Color"}}},"Watermark.TextRotation":{label:"TextRotation",type:"select",collection:["Horizontal","Vertical","ForwardDiagonal","BackwardDiagonal"]}}}}},Build:{label:"Build",fields:{}},Behavior:{label:"Behavior",fields:{BackPage:{type:"checkbox",label:"BackPage"},MirrorMargins:{type:"checkbox",label:"MirrorMargins"},PrintOnPreviousPage:{type:"checkbox",label:"PrintOnPreviousPage"},FirstRowStartsNewPage:{type:"checkbox",label:"FirstRowStartsNewPage"},Layout:{label:"Layout",type:"select",collection:["AcrossThenDown","DownThenAcross","Wrapped"]},KeepChild:{type:"checkbox",label:"KeepChild"},KeepDetail:{type:"checkbox",label:"KeepDetail"},KeepTogether:{type:"checkbox",label:"KeepTogether"},KeepWithData:{type:"checkbox",label:"KeepWithData"},ResetPageNumber:{type:"checkbox",label:"ResetPageNumber"},StartNewPage:{type:"checkbox",label:"StartNewPage"},StartOnOddPage:{type:"checkbox",label:"StartOnOddPage"},TitleBeforeHeader:{type:"checkbox",label:"TitleBeforeHeader"},AutoShrink:{type:"select",label:"AutoShrink",collection:["None","FontSize","FontWidth"]},AutoShrinkMinSize:{type:"number",label:"AutoShrinkMinSize"},AutoSize:{type:"checkbox",label:"AutoSize"},AutoWidth:{type:"checkbox",label:"AutoWidth"},BreakTo:{type:"select",label:"BreakTo",collection:["None"]},CanBreak:{type:"checkbox",label:"CanBreak"},CanGrow:{type:"checkbox",label:"CanGrow"},CanShrink:{type:"checkbox",label:"CanShrink"},CompleteToNRows:{type:"number",label:"CompleteToNRows"},FillUnusedSpace:{type:"checkbox",label:"FillUnusedSpace"},HideIfNoData:{type:"checkbox",label:"HideIfNoData"},ShowText:{type:"checkbox",label:"ShowText"},Clip:{type:"checkbox",label:"Clip"},Duplicates:{label:"Duplicates",type:"select",collection:["Show","Hide","Clear","Merge"]},CollectChildRows:{label:"CollectChildRows",type:"checkbox"},Exportable:{type:"checkbox",label:"Exportable"},GrowToBottom:{type:"checkbox",label:"GrowToBottom"},HideValue:{type:"text",label:"HideValue"},HideZeros:{type:"checkbox",label:"HideZeros"},HtmlTags:{type:"checkbox",label:"HtmlTags"},NullValue:{type:"text",label:"NullValue"},Printable:{type:"checkbox",label:"Printable"},PrintOn:{type:"select",label:"PrintOn",multiple:!0,collection:["FirstPage","LastPage","OddPages","EvenPages","RepeatedBand","SinglePage"]},PrintIfDatasourceEmpty:{type:"checkbox",label:"PrintIfDatasourceEmpty"},PrintIfDetailEmpty:{type:"checkbox",label:"PrintIfDetailEmpty"},PrintOnBottom:{type:"checkbox",label:"PrintOnBottom"},PrintOnParent:{type:"checkbox",label:"PrintOnParent"},RepeatOnEveryPage:{type:"checkbox",label:"RepeatOnEveryPage"},ProcessAt:{type:"select",label:"ProcessAt",collection:["Default","ReportFinished","ReportPageFinished","PageFinished","ColumnFinished","DataFinished","GroupFinished","Custom"]},RightToLeft:{type:"checkbox",label:"RightToLeft"},ShiftMode:{label:"ShiftMode",type:"select",collection:["Never","Always","WhenOverlapped"]},Trimming:{label:"Trimming",type:"select",collection:["None","Character","Word","EllipsisCharacter","EllipsisWord","EllipsisPath"]},Visible:{type:"checkbox",label:"Visible"},WordWrap:{type:"checkbox",label:"WordWrap"},Wysiwyg:{type:"checkbox",label:"Wysiwyg"},SortOrder:{type:"select",collection:["None","Ascending","Descending"],label:"SortOrder"},ShowErrorImage:{type:"checkbox",label:"ShowErrorImage"},SizeMode:{type:"select",label:"SizeMode",collection:["Normal","StretchImage","AutoSize","CenterImage","Zoom"]}}},Email:{label:"Email",fields:{EmailSettings:{label:"EmailSettings",fields:{"EmailSettings.Message":{label:"Message",type:"text"},"EmailSettings.Recipients":{label:"Recipients",type:"textarea"},"EmailSettings.Subject":{label:"Subject",type:"text"}}}}},Engine:{label:"Engine",fields:{ConvertNulls:{label:"ConvertNulls",type:"checkbox"},DoublePass:{label:"DoublePass",type:"checkbox"},InitialPageNumber:{label:"InitialPageNumber",type:"number"},UseFillCache:{label:"UseFillCache",type:"checkbox"}}},Misc:{label:"Mics",fields:{ReportPage:{label:"ReportPage",type:"select",collection:[]},Description:{label:"Description",type:"text"},AutoFillDataSet:{label:"AutoFillDataSet",type:"checkbox"},Compressed:{label:"Compressed",type:"checkbox"},MaxPages:{label:"MaxPages",type:"number"},SmoothGraphics:{label:"SmoothGraphics",type:"checkbox"},TextQuality:{label:"TextQuality",type:"select",collection:["Default","Regular","ClearType","AntiAlias"]},ForceLoadData:{label:"ForceLoadData",type:"checkbox"}}},Data:{label:"Data",fields:{Calculated:{label:"Calculated",type:"checkbox"},DataSource:{type:"select",label:"DataSource",collection:function(){var t=require("currentReport"),n=t.dataSources.allWithChildren(),r=t.connections;return r.everyEntity(function(t){n=e.merge(n,t.dataSources.allWithChildren())}),n.unshift("None"),n},setValue:function(){arguments[1]==="None"?this.deleteProp("DataSource"):this.prop("DataSource",arguments[1])}},DataType:{label:"DataType",type:"select",collection:function(){return s.all()},setValue:function(){this.prop("DataType",s.getByName(arguments[1])),i.trigger("update-data-panel")}},Expression:{type:"text",label:"Expression",expression:!0},Filter:{type:"text",label:"Filter",expression:!0},MaxRows:{type:"number",label:"MaxRows",attrs:{min:0}},Relation:{label:"Relation",type:"select"},RowCount:{label:"RowCount",type:"number"},AllowExpressions:{type:"checkbox",label:"AllowExpressions"},Brackets:{type:"text",label:"Brackets",isValid:function(t){return/^[\(\[]{1}[,]{1}[\)\]]{1}$/.test(e.trim(t))}},OutlineExpression:{type:"text",label:"OutlineExpression"},Format:{type:"text",label:"Format"},Highlight:{type:"text",label:"Highlight"},NoDataText:{type:"text",label:"NoDataText"},Text:{type:"text",label:"Text",expression:!0},Condition:{type:"text",label:"Condition",expression:!0},DataColumn:{type:"text",label:"DataColumn"},Image:{type:"file",label:"Image"},ImageLocation:{type:"url",label:"ImageLocation"},SelectCommand:{type:"text",label:"SelectCommand"},StoreData:{type:"checkbox",label:"StoreData"},TableName:{type:"text",label:"TableName"}}},Design:{label:"Design",fields:{BindableControl:{label:"BindableControl",type:"select",collection:["Text","Rich","Picture","CheckBox","Custom"],afterSetValue:function(){this.updateBindableControl(),i.trigger("update-data-panel")}},CustomBindableControl:{type:"text",label:"CustomBindableControl"},Format:{label:"Format",type:"select",collection:["Auto","General","Number","Currency","Date","Time","Percent","Boolean"]},ReportInfo:{label:"ReportInfo",fields:{"ReportInfo.Author":{label:"Author",type:"text"},"ReportInfo.Created":{label:"Created",type:"datetime"},"ReportInfo.CreatorVersion":{label:"CreatorVersion",type:"text"},"ReportInfo.Description":{label:"Description",type:"textarea"},"ReportInfo.Modified":{label:"Modified",type:"datetime"},"ReportInfo.Name":{label:"Name",type:"text"},"ReportInfo.Picture":{label:"Picture",type:"file"},"ReportInfo.PreviewPictureRatio":{label:"PreviewPictureRatio",type:"number",attrs:{min:.05,step:.1}},"ReportInfo.SavePreviewPicture":{label:"SavePreviewPicture",type:"checkbox"},"ReportInfo.Version":{label:"Version",type:"text"}}},StoreInResources:{label:"StoreInResources",type:"checkbox"},Name:{label:"(Name)",extraLabel:"Name",type:"text",afterSetValue:function(){i.trigger("update-info"),this.updateTreeView(),i.trigger("update-data-panel")}},Alias:{label:"Alias",type:"text",getValue:function(e,t){return this.prop(e)||this.prop("Name")},setValue:function(e,t){t===this.prop("Name")?this.prop(e,""):this.prop(e,t),typeof this.updateView=="function"&&this.updateView(),i.trigger("update-data-panel")}},Restrictions:{label:"Restrictions",type:"select",multiple:!0,collection:["DontMove","DontResize","DontModify","DontEdit","DontDelete","HideAllProperties"],afterSetValue:function(){this.hasHiddenProperties()?this.fieldMap=[]:this.canModify()?this.fillMap():this.fieldMap=require("facProperties").factory(["Design:Restrictions"]),i.trigger("update-properties-panel",this)}},ExtraDesignWidth:{label:"ExtraDesignWidth",type:"checkbox"}}},Layout:{label:"Layout",fields:{Anchor:{label:"Anchor",type:"select",multiple:!0,collection:["Top","Left","Right","Bottom"]},Maximum:{label:"Maximum",type:"number",setValue:function(e,t){t>this.prop("Minimum")?(this.prop(e,t),this.prop("Value")>t&&(this.prop("Value",this.prop("Minimum")),i.trigger("update-properties-panel",this))):i.trigger("update-properties-panel",this)}},Minimum:{label:"Minimum",type:"number",setValue:function(e,t,n){t<this.prop("Maximum")?(this.prop(e,t),this.prop("Value")<t&&(this.prop("Value",t),i.trigger("update-properties-panel",this))):i.trigger("update-properties-panel",this)}},Value:{label:"Value",type:"number",setValue:function(e,t){t>=this.prop("Minimum")&&t<=this.prop("Maximum")?this.prop(e,t):i.trigger("update-properties-panel",this)}},Dock:{label:"Dock",type:"select",collection:["None","Top","Left","Fill","Right","Bottom"]},Height:n.extend(a(),{label:"Height",type:"unit"}),Left:n.extend(f(),{label:"Left",type:"unit"}),Padding:{label:"Padding",fields:{"Padding.All":{type:"number",label:"All",afterSetValue:function(e,t){this.prop({"Padding.Top":t,"Padding.Right":t,"Padding.Bottom":t,"Padding.Left":t}),i.trigger("update-properties-panel",this)}},"Padding.Bottom":{type:"number",label:"Bottom"},"Padding.Left":{type:"number",label:"Left"},"Padding.Right":{type:"number",label:"Right"},"Padding.Top":{type:"number",label:"Top"}}},Top:n.extend(a(),{type:"unit",label:"Top"}),Width:n.extend(f(),{type:"unit",label:"Width"}),MaxHeight:{type:"unit",label:"MaxHeight",attrs:{min:0}},MaxWidth:{type:"unit",label:"MaxWidth",attrs:{min:0}},MinHeight:{type:"unit",label:"MinHeight",attrs:{min:0}},MinWidth:{type:"unit",label:"MinWidth",attrs:{min:0}}}},Paper:{label:"Paper",fields:{BottomMargin:{type:"unit",label:"BottomMargin",attrs:{min:0}},Landscape:{type:"checkbox",label:"Landscape"},LeftMargin:{type:"unit",label:"LeftMargin",attrs:{min:0}},PaperHeight:{type:"unit",label:"PaperHeight",attrs:{min:0,step:.1}},PaperWidth:{type:"unit",label:"PaperWidth",attrs:{min:0,step:.1}},RawPaperSize:{type:"text",label:"RawPaperSize"},RightMargin:{type:"unit",label:"RightMargin",attrs:{min:0}},TopMargin:{type:"unit",label:"TopMargin",attrs:{min:0}}}},Print:{label:"Print",fields:{Duplex:{type:"text",label:"Duplex"},FirstPageSource:{type:"number",label:"FirstPageSource"},OtherPagesSource:{type:"number",label:"OtherPagesSource"},PrintSettings:{label:"PrintSettings",fields:{"PrintSettings.Collate":{label:"Collate",type:"checkbox"},"PrintSettings.Copies":{label:"Copies",type:"number"},"PrintSettings.CopyNames":{label:"CopyNames",type:"textarea"},"PrintSettings.Duplex":{label:"Duplex",type:"select",collection:["Default","Simplex","Vertical","Horizontal"]},"PrintSettings.PageNumbers":{label:"PageNumbers",type:"text"},"PrintSettings.PageRange":{label:"PageRange",type:"select",collection:["All","Current","PageNumbers"]},"PrintSettings.PagesOnSheet":{label:"PagesOnSheet",type:"select",collection:["One","Two","Four","Eight"]},"PrintSettings.PaperSource":{label:"PaperSource",type:"number"},"PrintSettings.Printer":{label:"Printer",type:"select",collection:["Default"]},"PrintSettings.PrintMode":{label:"PrintMode",type:"select",collection:["Default","Split","Scale"]},"PrintSettings.PrintOnSheetHeight":{label:"PrintOnSheetHeight",type:"number"},"PrintSettings.PrintOnSheetRawPaperSize":{label:"PrintOnSheetRawPaperSize",type:"number"},"PrintSettings.PrintOnSheetWidth":{label:"PrintOnSheetWidth",type:"number"},"PrintSettings.PrintPages":{label:"PrintPages",type:"select",collection:["All","Odd","Even"]},"PrintSettings.PrintToFile":{label:"PrintToFile",type:"checkbox"},"PrintSettings.PrintToFileName":{label:"PrintToFileName",type:"text"},"PrintSettings.Reverse":{label:"Reverse",type:"checkbox"},"PrintSettings.SavePrinterWithReport":{label:"SavePrinterWithReport",type:"checkbox"},"PrintSettings.ShowDialog":{label:"ShowDialog",type:"checkbox"}}}}},Hierarchy:{label:"Hierarchy",fields:{IdColumn:{type:"select",label:"IdColumn"},Indent:{type:"unit",label:"Indent"},ParentIdColumn:{type:"select",label:"ParentIdColumn"}}},Navigation:{label:"Navigation",fields:{Bookmark:{label:"Bookmark",type:"text"},Hyperlink:{label:"Hyperlink",fields:{DetailPageName:{type:"select",label:"DetailPageName",collection:["None"]},DetailReportName:{type:"file",label:"DetailReportName"},Expression:{type:"text",label:"Expression",expression:!0},Kind:{type:"select",label:"Kind",collection:["URL","PageNumber","Bookmark","DetailReport","DetailPage","Custom"]},ReportParameter:{type:"select",label:"ReportParameter",collection:[]},Value:{type:"text",label:"Value"},ValueSeparator:{type:"text",label:"ValueSeparator"}}}}},Script:{label:"Script",fields:{ReferencedAssemblies:{label:"ReferencedAssemblies",type:"textarea",attrs:{disabled:!0}},ScriptLanguage:{label:"ScriptLanguage",type:"select",collection:["CSharp","Vb"],afterSetValue:function(e,t){require("currentReport").code.setMode(t)}}}}};return n.object(r,{factory:function(e){return this.f(e,c)}})}),define("facEvents",["jquery","utils","properties/base"],function(e,t,n){var r={Build:{label:"Build",fields:{FinishReportEvent:{label:"FinishReport",type:"event",eventName:"FinishReport",eventStatement:"private void %event%(object sender, EventArgs e)"},StartReportEvent:{label:"StartReport",type:"event",eventName:"StartReport",eventStatement:"private void %event%(object sender, EventArgs e)"},FinishPageEvent:{label:"FinishPage",type:"event",eventName:"FinishPage",eventStatement:"private void %event%(object sender, EventArgs e)"},ManualBuildEvent:{label:"ManualBuild",type:"event",eventName:"ManualBuild",eventStatement:"private void %event%(object sender, EventArgs e)"},StartPageEvent:{label:"StartPage",type:"event",eventName:"StartPage",eventStatement:"private void %event%(object sender, EventArgs e)"},AfterDataEvent:{label:"AfterData",type:"event",eventName:"AfterData",eventStatement:"private void %event%(object sender, EventArgs e)"},AfterLayoutEvent:{label:"AfterLayout",type:"event",eventName:"AfterLayout",eventStatement:"private void %event%(object sender, EventArgs e)"},AfterPrintEvent:{label:"AfterPrint",type:"event",eventName:"AfterPrint",eventStatement:"private void %event%(object sender, EventArgs e)"},BeforeLayoutEvent:{label:"BeforeLayout",type:"event",eventName:"BeforeLayout",eventStatement:"private void %event%(object sender, EventArgs e)"},BeforePrintEvent:{label:"BeforePrint",type:"event",eventName:"BeforePrint",eventStatement:"private void %event%(object sender, EventArgs e)"}}},Preview:{label:"Preview",fields:{ClickEvent:{label:"Click",type:"event",eventName:"Click",eventStatement:"private void %event%(object sender, EventArgs e)"},MouseDownEvent:{label:"MouseDown",type:"event",eventName:"MouseDown",eventStatement:"private void %event%(object sender, EventArgs e)"},MouseEnterEvent:{label:"MouseEnter",type:"event",eventName:"MouseEnter",eventStatement:"private void %event%(object sender, EventArgs e)"},MouseLeaveEvent:{label:"MouseLeave",type:"event",eventName:"MouseLeave",eventStatement:"private void %event%(object sender, EventArgs e)"},MouseMoveEvent:{label:"MouseMove",type:"event",eventName:"MouseMove",eventStatement:"private void %event%(object sender, EventArgs e)"},MouseUpEvent:{label:"MouseUp",type:"event",eventName:"MouseUp",eventStatement:"private void %event%(object sender, EventArgs e)"}}}};return t.object(n,{factory:function(e){return this.f(e,r)}})}),define("base/Page",["jquery","config","utils","baseEvents","StateMachine","base/Container","bandCollection","units","facProperties","facEvents"],function(e,t,n,r,i,s,o,u,a,f){return n.object(s,{SM:new i,create:function(){return this.createObject(this,{init:function(){this.SM.add(this),this._id="page"+n.guid(),this.buffer=null,this.unparsed=[],this.attr({title:"Report",info:"Report info",icon:"icon-000","b-icon":"icon-004"}),this.attr({isHidden:!0,activated:!1,removed:!1,Height:100,padding:18.89,margin:n.isMobile?50:100,borderLines:[4,2]}),this.defaultValues={"Columns.Count":1,"Columns.Position":0,"Columns.Width":718.11,"Watermark.Enabled":!1,"Watermark.Image":"","Watermark.ImageSize":"Zoom","Watermark.ImageTransparency":0,"Watermark.ShowImageOnTop":!1,"Watermark.ShowTextOnTop":!0,"Watermark.Text":"","Watermark.TextFill.Color":"#CCC","Watermark.TextRotation":"ForwardDiagonal","Fill.Color":"#fff",Landscape:!1,PaperWidth:793.8,PaperHeight:1122.51,LeftMargin:37.8,RightMargin:37.8,TopMargin:37.8,BottomMargin:37.8,RawPaperSize:0,FirstPageSource:7,OtherPagesSource:7,TitleBeforeHeader:!0},this.prop({Name:"Page"}),this.g=this.workspace=n.createNS("g",{"class":"page"}),this.$g=this.$workspace=e(this.g),this.$workspace.hide(),this.bands=n.createNS("g"),this.$bands=e(this.bands),this.$g.data("page",this),this.$g.append(this.$bands),this.bands=o.create(this),this.bands.initMainCollection(this.bands),this.fieldMap=a.factory(["Appearance:Border:Border.Shadow","Appearance:Border:Border.ShadowColor","Appearance:Border:Border.ShadowWidth",{prop:"Appearance:Columns:Columns.Count",afterSetValue:function(){this.prop("Columns.Width",this.attr("Width")/this.prop("Columns.Count")),this.update(),r.trigger("update-properties-panel",this)},attrs:{min:1},defaultValue:1},"Appearance:Columns:Columns.Position",{prop:"Appearance:Columns:Columns.Width",afterSetValue:this.update,getValue:function(){return this.prop("Columns.Width")||this.attr("Width")}},"Appearance:Fill:Fill.Color","Appearance:Watermark","Behavior:BackPage","Behavior:MirrorMargins","Behavior:PrintOnPreviousPage","Behavior:ResetPageNumber","Behavior:StartOnOddPage","Behavior:TitleBeforeHeader","Behavior:Visible","Data:OutlineExpression","Design:Name","Design:ExtraDesignWidth","Paper:BottomMargin",{prop:"Paper:Landscape",setValue:function(e,t){var n,i;this.prop(e)!==t&&(this.prop(e,t),n=this.prop("PaperWidth"),i=this.prop("PaperHeight"),this.prop("PaperWidth",i),this.prop("PaperHeight",n),this.update(),r.trigger("update-properties-panel",this))}},{prop:"Paper:LeftMargin",afterSetValue:this.update},{prop:"Paper:PaperWidth",afterSetValue:this.update},"Paper:PaperHeight","Paper:RawPaperSize",{prop:"Paper:RightMargin",afterSetValue:this.update},"Paper:TopMargin","Print:Duplex","Print:FirstPageSource","Print:OtherPagesSource"]),this.eventMap=f.factory(["Build:FinishPageEvent","Build:ManualBuildEvent","Build:StartPageEvent"]),this.attr=function(e,t){var n=this._super.attr.apply(this,arguments);return t!==undefined&&(e==="margin"||e==="padding"?this.update():e==="Width"?this.update():e==="Height"&&this.setHeight()),n},this.mainFields=[["Design:Name"],["Paper:PaperWidth","Paper:PaperHeight"]]}})},init:function(){this.type="ReportPage",this.report=null},update:function(){this.attributes.Width=this.prop("PaperWidth")-this.prop("LeftMargin")-this.prop("RightMargin"),this.attr("Width")<0&&(this.attributes.Width=0),this.updateSize(),this.bands.everyEntity(function(e){e.attr({margin:this.attr("margin"),padding:this.attr("padding")}),e.prop("Width",this.attr("Width"))}.bind(this)),this.render()},setWidth:function(){var e=(this.attr("Width")+this.attr("margin")+this.attr("padding")*2)*this.report.attr("data-scale"),t=n.attr(this.report.workspace,"viewBox").split(" ");t[2]=e/this.report.attr("data-scale"),n.attr(this.report.workspace,"viewBox",t.join(" ")),this.showLines(),n.attr(this.report.workspace,"width",e)},setHeight:function(){var e=(this.attr("Height")+this.attr("padding")*2)*this.report.attr("data-scale"),t=n.attr(this.report.workspace,"viewBox").split(" ");t[3]=e/this.report.attr("data-scale"),n.attr(this.report.workspace,"viewBox",t.join(" ")),this.showLines(),n.attr(this.report.workspace,"height",e)},updateSize:function(){this.setWidth(),this.setHeight()},balance:function(){this.attr("Height",this.bands.getCommonHeight())},show:function(){this.$workspace.show(),this.attr("isHidden",!1),this.attr("removed",!1),this.report.pages.current=this,this.attr("activated",!0),this.balance(),this.update()},hide:function(){this.$workspace.hide(),this.attr("isHidden",!0),this.attr("activated",!1)},activate:function(){var e=this.bands.getSelectedBand();return this.attr("isHidden")&&this.show(),e&&e.deactivate(),this},deactivate:function(){return this.attr("isHidden")||this.hide(),this},clear:function(){return this.bands.clear(),this},showLines:function(){var t=this.attr("borderLines"),r=this.attr("padding"),i=this.attr("margin");if(!t||!e.isArray(t))return!1;var s=[{x1:i+r,y1:r,x2:this.attr("Width")+r+i,y2:r},{x1:this.attr("Width")+r+i,y1:r,x2:this.attr("Width")+r+i,y2:this.attr("Height")+r}],o=this.$g,u=e("> line",o);return e.each(s,function(r,i){var s=u[r]||n.createNS("line");n.attr(s,{x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2}),t.length===2&&n.attr(s,"style","stroke-dasharray: "+t[0]+", "+t[1]+";"),o.prepend(e(s))}),this},render:function(){return this.$workspace.css("fill","transparent"),n.attr(this.g,"transform","translate(0, 0)"),this._super._super.render.call(this,this.attr("padding")),this.balance(),this},canHaveChildren:function(){return!0},isPage:function(){return!0},fillProps:function(e){return this._super._super.fillProps.apply(this,arguments),e.attr("PaperWidth")&&this.prop("PaperWidth",parseFloat(u.toPx(e.attr("PaperWidth"),"mm"),10)),e.attr("PaperHeight")&&this.prop("PaperHeight",parseFloat(u.toPx(e.attr("PaperHeight"),"mm"),10)),e.attr("LeftMargin")&&this.prop("LeftMargin",parseFloat(u.toPx(e.attr("LeftMargin"),"mm"),10)),e.attr("RightMargin")&&this.prop("RightMargin",parseFloat(u.toPx(e.attr("RightMargin"),"mm"),10)),e.attr("TopMargin")&&this.prop("TopMargin",parseFloat(u.toPx(e.attr("TopMargin"),"mm"),10)),e.attr("BottomMargin")&&this.prop("BottomMargin",parseFloat(u.toPx(e.attr("BottomMargin"),"mm"),10)),e.attr("Columns.Width")&&this.prop("Columns.Width",parseFloat(u.toPx(e.attr("Columns.Width"),"mm"),10)),e.attr("Watermark.Image")&&this.prop("Watermark.Image","data:image/png;base64,"+e.attr("Watermark.Image")),this},toXML:function(){var t=e(this._super._super.toXML.apply(this,arguments));return t.attr("PaperWidth")&&t.attr("PaperWidth",parseInt(u.toUnit(t.attr("PaperWidth"),"mm"),10)),t.attr("PaperHeight")&&t.attr("PaperHeight",parseInt(u.toUnit(t.attr("PaperHeight"),"mm"),10)),t.attr("RightMargin")&&t.attr("RightMargin",parseInt(u.toUnit(t.attr("RightMargin"),"mm"),10)),t.attr("LeftMargin")&&t.attr("LeftMargin",parseInt(u.toUnit(t.attr("LeftMargin"),"mm"),10)),t.attr("TopMargin")&&t.attr("TopMargin",parseInt(u.toUnit(t.attr("TopMargin"),"mm"),10)),t.attr("BottomMargin")&&t.attr("BottomMargin",parseInt(u.toUnit(t.attr("BottomMargin"),"mm"),10)),t.attr("Columns.Width")&&t.attr("Columns.Width",parseInt(u.toUnit(t.attr("Columns.Width"),"mm"),10)),t.attr("Watermark.Image")&&t.attr("Watermark.Image",t.attr("Watermark.Image").replace(/^([\w:\/;]+base64,){1}/,"")),this.bands.eachEntity(function(e){var n=e.toXML(t[0]);n&&t.append(n)}),e.each(this.unparsed,function(){t.append(this)}),t[0]},buildTree:function(){return this._super._super.buildTree.call(this),this.bands.eachEntity(function(e){this.putInTree(e.buildTree())}.bind(this)),this.updateTreeView(),this.selfTree.$main.addClass("rt-page"),this.selfTree.$main}})}),define("dataSourceCollection",["jquery","utils","baseCollection"],function(e,t,n){return t.object(n,{everyEntity:function(e){var t=this.all(),n=t.length,r=0;for(;r<n;r+=1)if(e.call(this,t[r],r)===!1||t[r].dataSources.count()&&t[r].dataSources.everyEntity(e)===!1)return!1;return this},pullByView:function(e){var t;if(e===undefined)throw new Error("view must be defined");return t=e.match(/^\[([^.]+)./),t&&t[1]?this.container.dataSources.findOneAmongAll({Name:t[1]}):null},findBy:function(e){var t=[];return this.everyEntity(function(n){for(var r in e){if(!e.hasOwnProperty(r))continue;if(n[r]!==e[r]&&n.attr(r)!==e[r])return}t.push(n)}),t},remove:function(t){if(!t)return;return e.each(t.dataSources.entities,function(){this.dataSources.remove(this)}),this.entities.removeByValue(t),this}})}),define("data/Connection",["jquery","utils","baseEntity","dataSourceCollection","facProperties"],function(e,t,n,r,i){return t.object(n,{create:function(e){var n=this.createObject(this);return n._id="conn"+t.guid(),n.icon="icon-053",n.type=e,n.dataSources=r.create(n),n.defaultValues={CommandTimeout:30,ConnectionStringExpression:"",LoginPrompt:!1},n.prop({Name:"Connection"}),n.fieldMap=i.factory(["Data:CommandTimeout","Data:ConnectionString","Data:ConnectionStringExpression","Data:LoginPrompt","Design:Name","Design:Alias","Design:Restrictions"]),n.mainFields=[["Design:Name"]],n},isConnection:function(){return!0},remove:function(){this.attr("removed",!0)},toXML:function(t){var n=e(t.ownerDocument.createElement(this.type)),r;return this.eachProp(function(e,t){t!==undefined&&t!==""&&n.attr(e,t)}),e.each(this.dataSources.all(),function(){r=this.toXML(n[0]),r&&n.append(r)}),n[0]}})}),define("data/dataItem",["jquery","utils","baseEntity","data/dataTypes"],function(e,t,n,r){return t.object(n,{remove:function(){this.attr("removed",!0)},getView:function(){var e=this.collection.container,t="",n=require("currentReport");while(e)e._id!==n._id&&!e.isConnection()&&(t=(e.prop("Alias")||e.prop("Name"))+"."+t),e=e.collection&&e.collection.container;return t=t[t.length-1]==="."&&t.substr(0,t.length-1)||t,t},updateView:function(){var e=this.getView();e?e=e+"."+(this.prop("Alias")||this.prop("Name")):e=this.prop("Alias")||this.prop("Name"),this.attr("view",e)},fillProps:function(e){return n.fillProps.apply(this,arguments),e.attr("DataType")&&this.prop("DataType",r.get(e.attr("DataType"))),this},toXML:function(t,n){var r=e(t.ownerDocument.createElement(n)),i=this.prop("DataType");return this.deleteProp("DataType"),this.eachProp(function(e,t){t!==undefined&&t!==""&&r.attr(e,t)}),r.attr("DataType",i.dataType),this.prop("DataType",i),r[0]}})}),define("data/column",["utils","baseEvents","data/dataItem","data/dataTypes","facProperties"],function(e,t,n,r,i){return e.object(n,{create:function(){var n=e.object(this);return n.properties={},n.attributes={},n._id="tds_column"+e.guid(),n.defaultValues={Calculated:!1,BindableControl:"Text"},n.prop({Name:"Column",DataType:r.get("System.Int32")}),n.fieldMap=i.factory(["Data:Calculated","Data:DataType","Data:Expression",{prop:"Design:Name",afterSetValue:function(){this.updateView(),t.trigger("update-data-panel")}},"Design:Alias","Design:BindableControl","Design:CustomBindableControl","Design:Format","Design:Restrictions"]),n.mainFields=[["Design:Name","Data:DataType"],["Design:BindableControl"]],n.updateBindableControl(),n},updateBindableControl:function(){this.bindableControl=(this.prop("BindableControl")||"Text")+"Object"},toXML:function(e){return this._super._super.toXML.call(this,e,"Column")}})}),define("data/DataSource",["jquery","utils","baseEntity","baseCollection","dataSourceCollection","data/column","data/dataTypes","facProperties"],function(e,t,n,r,i,s,o,u){var a={"default":["Data:Parameters","Data:SelectCommand","Data:StoreData","Data:TableName","Design:Name","Design:Alias","Design:Restrictions","Misc:ForceLoadData"],BusinessObjectDataSource:["Design:Name","Design:Alias","Design:Restrictions","Misc:ForceLoadData"]};return t.object(n,{create:function(e){var n=this.createObject(this);return n._id="tds"+t.guid(),n.icon="icon-tds",n.type=e,n.dataSources=i.create(n),n.columns=r.create(n),n.defaultValues={ForceLoadData:!1,StoreData:!1},n.prop({Name:"DataSource",DataType:o.get("System.Int32")}),n.fieldMap=u.factory(a[e]||a["default"]),n.mainFields=[["Design:Name"]],n.unparsed=[],n},isDataSource:function(){return!0},remove:function(){this.attr("removed",!0)},createColumn:function(){var e=s.create();return this.columns.add(e),e.updateView(),e},removeColumn:function(e){e.remove()},updateView:function(){this.columns.eachEntity(function(e){e.updateView()}),this.dataSources.eachEntity(function(e){e.updateView()})},toXML:function(t){var n=e(t.ownerDocument.createElement(this.type)),r=this.prop("DataType");return this.deleteProp("DataType"),this.eachProp(function(e,t){t!==undefined&&t!==""&&n.attr(e,t)}),r&&(n.attr("DataType",r.dataType||r),this.prop("DataType",r)),this.columns.count()>0&&this.columns.eachEntity(function(e){var t=e.toXML(n[0]);t&&n.append(t)}),e.each(this.dataSources.all(),function(){var e=this.toXML(n[0]);e&&n.append(e)}),e.each(this.unparsed,function(){n.append(this)}),n[0]}})}),define("parameterCollection",["jquery","utils","baseCollection"],function(e,t,n){return t.object(n,{everyEntity:function(e){var t=this.all(),n=t.length,r=0;for(;r<n;r+=1)if(e.call(this,t[r],r)===!1||t[r].parameters.count()&&t[r].parameters.everyEntity(e)===!1)return!1;return this},findBy:function(e){var t=[];return this.everyEntity(function(n){for(var r in e){if(!e.hasOwnProperty(r))continue;if(n[r]!==e[r]&&n.attr(r)!==e[r])return}t.push(n)}),t},remove:function(t){if(!t)return;return e.each(t.parameters.entities,function(){this.parameters.remove(this)}),this.entities.removeByValue(t),this}})}),define("data/parameter",["jquery","utils","baseEvents","data/dataItem","data/dataTypes","parameterCollection","facProperties"],function(e,t,n,r,i,s,o){return t.object(r,{create:function(){var e=this.createObject(this);return e._id="parameter"+t.guid(),e.parameters=s.create(e),e.defaultValues={Expression:""},e.prop({Name:"Parameter",DataType:i.get("System.String")}),e.fieldMap=o.factory(["Data:DataType","Data:Expression",{prop:"Design:Name",afterSetValue:function(){this.updateView(),n.trigger("update-data-panel")}},"Misc:Description"]),e.mainFields=[["Design:Name"],["Data:DataType"]],e.bindableControl="TextObject",e},createName:function(){this.prop("Name",this.formName())},toXML:function(t){var n=e(this._super._super.toXML.call(this,t,"Parameter"));return this.parameters.count()>0&&this.parameters.eachEntity(function(e){var t=e.toXML(n[0]);t&&n.append(t)}),n[0]}})}),define("data/systemVariables",["jquery","utils","baseEntity","data/dataTypes","facProperties"],function(e,t,n,r,i){function s(){var e={},t=i.factory(["Data:DataType","Design:Name"]),n=[["Design:Name"],["Data:DataType"]];return e.Date={init:function(){this.prop({Name:"Date",DataType:r.get("System.DateTime")}),this.attr("view","Date")},bindableControl:"TextObject",fieldMap:t,mainFields:n},e.Page={init:function(){this.prop({Name:"Page",DataType:r.get("System.Char")}),this.attr("view","Page")},bindableControl:"TextObject",fieldMap:t,mainFields:n},e.TotalPages={init:function(){this.prop({Name:"TotalPages",DataType:r.get("System.Int32")}),this.attr("view","TotalPages")},bindableControl:"TextObject",fieldMap:t,mainFields:n},e.PageN={init:function(){this.prop({Name:"PageN",DataType:r.get("System.String")}),this.attr("view","PageN")},bindableControl:"TextObject",fieldMap:t,mainFields:n},e.PageNofM={init:function(){this.prop({Name:"PageNofM",DataType:r.get("System.String")}),this.attr("view","PageNofM")},bindableControl:"TextObject",fieldMap:t,mainFields:n},e["Row#"]={init:function(){this.prop({Name:"Row#",DataType:r.get("System.Int32")}),this.attr("view","Row#")},bindableControl:"TextObject",fieldMap:t,mainFields:n},e["AbsRow#"]={init:function(){this.prop({Name:"AbsRow#",DataType:r.get("System.Int32")}),this.attr("view","AbsRow#")},bindableControl:"TextObject",fieldMap:t,mainFields:n},e["Page#"]={init:function(){this.prop({Name:"Page#",DataType:r.get("System.Int32")}),this.attr("view","Page#")},bindableControl:"TextObject",fieldMap:t,mainFields:n},e["TotalPages#"]={init:function(){this.prop({Name:"TotalPages#",DataType:r.get("System.Int32")}),this.attr("view","TotalPages#")},bindableControl:"TextObject",fieldMap:t,mainFields:n},e["CopyName#"]={init:function(){this.prop({Name:"CopyName#",DataType:r.get("System.String")}),this.attr("view","CopyName#")},bindableControl:"TextObject",fieldMap:t,mainFields:n},e.HierarchyLevel={init:function(){this.prop({Name:"HierarchyLevel",DataType:r.get("System.Int32")}),this.attr("view","HierarchyLevel")},bindableControl:"TextObject",fieldMap:t,mainFields:n},e["HierarchyRow#"]={init:function(){this.prop({Name:"HierarchyRow#",DataType:r.get("System.String")}),this.attr("view","HierarchyRow#")},bindableControl:"TextObject",fieldMap:t,mainFields:n},e}return t.object(n,{entities:[],create:function(){var t=n.createObject(this);return t.attr("icon","icon-060"),e.each(s(),function(){t.add(n.createObject(t,this))}),t},add:function(){var t=this.entities,n=[].slice.call(arguments);e.each(n,function(){t.push(this)})},get:function(t){return e.grep(this.entities,function(e){return e.prop("Name")===t})[0]}})}),define("data/Functions",[],function(){return function(){this.bindableControl="TextObject",this.icon="icon-052",this.entities={Mathematical:{label:"Mathematical",icon:"icon-066",fields:{Abs:{label:"Abs",icon:"icon-066",fields:{"Abs(sbyte)":{label:"Abs(sbyte)","interface":"sbyte Abs(sbyte value)",icon:"icon-224",view:"Abs()",bindableControl:"TextObject"},"Abs(short)":{label:"Abs(short)","interface":"short Abs(short value)",icon:"icon-224",view:"Abs()",bindableControl:"TextObject"},"Abs(int)":{label:"Abs(int)","interface":"int Abs(int value)",icon:"icon-224",view:"Abs()",bindableControl:"TextObject"},"Abs(long)":{label:"Abs(long)","interface":"long Abs(long value)",icon:"icon-224",view:"Abs()",bindableControl:"TextObject"},"Abs(float)":{label:"Abs(float)","interface":"float Abs(float value)",icon:"icon-225",view:"Abs()",bindableControl:"TextObject"},"Abs(double)":{label:"Abs(double)","interface":"double Abs(double value)",icon:"icon-225",view:"Abs()",bindableControl:"TextObject"},"Abs(decimal)":{label:"Abs(decimal)","interface":"decimal Abs(decimal value)",icon:"icon-226",view:"Abs()",bindableControl:"TextObject"}}},Acos:{label:"Acos","interface":"double Acos(double d)",icon:"icon-225",view:"Acos()",bindableControl:"TextObject"},Asin:{label:"Asin","interface":"double Asin(double d)",icon:"icon-225",view:"Asin()",bindableControl:"TextObject"},Atan:{label:"Atan","interface":"double Atan(double d)",icon:"icon-225",view:"Atan()",bindableControl:"TextObject"},Ceiling:{label:"Ceiling",icon:"icon-066",fields:{"Ceiling(double)":{label:"Ceiling(double)","interface":"double Ceiling(double a)",icon:"icon-225",view:"Ceiling()",bindableControl:"TextObject"},"Ceiling(decimal)":{label:"Ceiling(decimal)","interface":"decimal Ceiling(decimal d)",icon:"icon-226",view:"Ceiling()",bindableControl:"TextObject"}}},Cos:{label:"Cos","interface":"double Cos(double d)",icon:"icon-225",view:"Cos()",bindableControl:"TextObject"},Exp:{label:"Exp","interface":"double Exp(double d)",icon:"icon-225",view:"Exp()",bindableControl:"TextObject"},Floor:{label:"Floor",icon:"icon-066",fields:{"Floor(double)":{label:"Floor(double)","interface":"double Floor(double d)",icon:"icon-225",view:"Floor()",bindableControl:"TextObject"},"Floor(decimal)":{label:"Floor(decimal)","interface":"decimal Floor(decimal d)",icon:"icon-226",view:"Floor()",bindableControl:"TextObject"}}},Log:{label:"Log","interface":"double Log(double d)",icon:"icon-225",view:"Log()",bindableControl:"TextObject"},Maximum:{label:"Maximum",icon:"icon-066",fields:{"Maximum(int, int)":{label:"Maximum(int, int)","interface":"int Maximum(int val1, int val2)",icon:"icon-224",view:"Maximum(,)",bindableControl:"TextObject"},"Maximum(long, long)":{label:"Maximum(long, long)","interface":"long Maximum(long val1, long val2)",icon:"icon-224",view:"Maximum(,)",bindableControl:"TextObject"},"Maximum(float, float)":{label:"Maximum(float, float)","interface":"float Maximum(float val1, float val2)",icon:"icon-225",view:"Maximum(,)",bindableControl:"TextObject"},"Maximum(double, double)":{label:"Maximum(double, double)","interface":"double Maximum(double val1, double val2)",icon:"icon-225",view:"Maximum(,)",bindableControl:"TextObject"},"Maximum(decimal, decimal)":{label:"Maximum(decimal, decimal)","interface":"decimal Maximum(decimal val1, decimal val2)",icon:"icon-226",view:"Maximum(,)",bindableControl:"TextObject"}}},Minimum:{label:"Minimum",icon:"icon-066",fields:{"Minimum(int, int)":{label:"Minimum(int, int)","interface":"int Minimum(int val1, int val2)",icon:"icon-224",view:"Minumum(,)",bindableControl:"TextObject"},"Minimum(long, long)":{label:"Minimum(long, long)","interface":"long Minimum(long val1, long val2)",icon:"icon-224",view:"Minumum(,)",bindableControl:"TextObject"},"Minimum(float, float)":{label:"Minimum(float, float)","interface":"float Minimum(float val1, float val2)",icon:"icon-225",view:"Minumum(,)",bindableControl:"TextObject"},"Minimum(double, double)":{label:"Minimum(double, double)","interface":"double Minimum(double val1, double val2)",icon:"icon-225",view:"Minumum(,)",bindableControl:"TextObject"},"Minimum(decimal, decimal)":{label:"Minimum(decimal, decimal)","interface":"decimal Minimum(decimal val1, decimal val2)",icon:"icon-226",view:"Minumum(,)",bindableControl:"TextObject"}}},Round:{label:"Round",icon:"icon-066",fields:{"Round(double)":{label:"Round(double)","interface":"double Round(double a)",icon:"icon-225",view:"Round()",bindableControl:"TextObject"},"Round(decimal)":{label:"Round(decimal)","interface":"decimal Round(decimal d)",icon:"icon-226",view:"Round()",bindableControl:"TextObject"},"Round(double, int)":{label:"Round(double, int)","interface":"double Round(double value, int digits)",icon:"icon-225",view:"Round(,)",bindableControl:"TextObject"},"Round(decimal, int)":{label:"Round(decimal, int)","interface":"decimal Round(decimal d, int decimals)",icon:"icon-226",view:"Round(,)",bindableControl:"TextObject"}}},Sin:{label:"Sin","interface":"double Sin(double a)",icon:"icon-225",view:"Sin()",bindableControl:"TextObject"},Sqrt:{label:"Sqrt","interface":"double Sqrt(double d)",icon:"icon-225",view:"Sqrt()",bindableControl:"TextObject"},Tan:{label:"Tan","interface":"double Tan(double a)",icon:"icon-225",view:"Tan()",bindableControl:"TextObject"},Truncate:{label:"Truncate",icon:"icon-066",fields:{"Truncate(double)":{label:"Truncate(double)","interface":"double Truncate(double d)",icon:"icon-225",view:"Truncate()",bindableControl:"TextObject"},"Truncate(decimal)":{label:"Truncate(decimal)","interface":"decimal Truncate(decimal d)",icon:"icon-226",view:"Truncate()",bindableControl:"TextObject"}}}}},Text:{label:"Text",icon:"icon-066",fields:{Asc:{label:"Asc","interface":"int Asc(char c)",icon:"icon-224",view:"Asc()",bindableControl:"TextObject"},Chr:{label:"Chr","interface":"char Chr(int i)",icon:"icon-223",view:"Chr()",bindableControl:"TextObject"},Insert:{label:"Insert","interface":"string Insert(string s, int startIndex, string value)",icon:"icon-223",view:"Insert(,,)",bindableControl:"TextObject"},Length:{label:"Length","interface":"int Length(string s)",icon:"icon-224",view:"Length()",bindableControl:"TextObject"},LowerCase:{label:"LowerCase","interface":"string LowerCase(string s)",icon:"icon-223",view:"LowerCase()",bindableControl:"TextObject"},PadLeft:{label:"PadLeft",icon:"icon-066",fields:{"PadLeft(string, int)":{label:"PadLeft(string, int)","interface":"string PadLeft(string s, int totalWidth)",icon:"icon-223",view:"PadLeft(,)",bindableControl:"TextObject"},"PadLeft(string, int, char)":{label:"PadLeft(string, int, char)","interface":"string PadLeft(string s, int totalWidth, string paddingChar)",icon:"icon-223",view:"PadLeft(,,)",bindableControl:"TextObject"}}},PadRight:{label:"PadRight",icon:"icon-066",fields:{"PadRight(string, int)":{label:"PadRight(string, int)","interface":"string PadRight(string s, int totalWidth)",icon:"icon-223",view:"PadRight(,)",bindableControl:"TextObject"},"PadRight(string, int, char)":{label:"PadRight(string, int, char)","interface":"string PadRight(string s, int totalWidth, string paddingChar)",icon:"icon-223",view:"PadRight(,,)",bindableControl:"TextObject"}}},Remove:{label:"Remove",icon:"icon-066",fields:{"Remove(string, int)":{label:"Remove(string, int)","interface":"string Remove(string s, int startIndex)",icon:"icon-223",view:"Remove(,)",bindableControl:"TextObject"},"Remove(string, int, int)":{label:"Remove(string, int, int)","interface":"string Remove(string s, int startIndex, int count)",icon:"icon-223",view:"Remove(,,)",bindableControl:"TextObject"}}},Replace:{label:"Replace","interface":"string Replace(string s, string oldValue, string newValue)",icon:"icon-223",view:"Replace(,,)",bindableControl:"TextObject"},Substring:{label:"Substring",icon:"icon-066",fields:{"Substring(string, int)":{label:"Substring(string, int)","interface":"string Substring(string s, int startIndex)",icon:"icon-223",view:"Substring(,)",bindableControl:"TextObject"},"Substring(string, int, int)":{label:"Substring(string, int, int)","interface":"string Substring(string s, int startIndex, int length)",icon:"icon-223",view:"Substring(,,)",bindableControl:"TextObject"}}},TitleCase:{label:"TitleCase","interface":"string TitleCase(string s)",icon:"icon-223",view:"TitleCase()",bindableControl:"TextObject"},Trim:{label:"Trim","interface":"string Trim(string s)",icon:"icon-223",view:"Trim()",bindableControl:"TextObject"},UpperCase:{label:"UpperCase","interface":"string UpperCase(string s)",icon:"icon-223",view:"UpperCase()",bindableControl:"TextObject"}}},"Date & Time":{label:"Date & Time",icon:"icon-066",fields:{AddDays:{label:"AddDays","interface":"DateTime AddDays(DateTime date, double value)",icon:"icon-227",view:"AddDays(,)",bindableControl:"TextObject"},AddHours:{label:"AddHours","interface":"DateTime AddHours(DateTime date, double value)",icon:"icon-227",view:"AddHours(,)",bindableControl:"TextObject"},AddMinutes:{label:"AddMinutes","interface":"DateTime AddMinutes(DateTime date, double value)",icon:"icon-227",view:"AddMinutes(,)",bindableControl:"TextObject"},AddMonths:{label:"AddMonths","interface":"DateTime AddMonths(DateTime date, int value)",icon:"icon-227",view:"AddMonths(,)",bindableControl:"TextObject"},AddSeconds:{label:"AddSeconds","interface":"DateTime AddSeconds(DateTime date, double value)",icon:"icon-227",view:"AddSeconds(,)",bindableControl:"TextObject"},AddYears:{label:"AddYears","interface":"DateTime AddYears(DateTime date, int value)",icon:"icon-227",view:"AddYears(,)",bindableControl:"TextObject"},DateDiff:{label:"DateDiff","interface":"TimeSpan DateDiff(DateTime date1, DateTime date2)",icon:"icon-227",view:"DateDiff(,)",bindableControl:"TextObject"},DateSerial:{label:"DateSerial","interface":"DateTime DateSerial(int year, int month, int day)",icon:"icon-227",view:"DateSerial(,)",bindableControl:"TextObject"},Day:{label:"Day","interface":"int Day(DateTime date)",icon:"icon-224",view:"Day()",bindableControl:"TextObject"},DayOfWeek:{label:"DayOfWeek","interface":"string DayOfWeek(DateTime date)",icon:"icon-223",view:"DayOfWeek()",bindableControl:"TextObject"},DayOfYear:{label:"DayOfYear","interface":"int DayOfYear(DateTime date)",icon:"icon-224",view:"DayOfYear()",bindableControl:"TextObject"},DaysInMonth:{label:"DaysInMonth","interface":"int DaysInMonth(int year, int month)",icon:"icon-224",view:"DaysInMonth(,)",bindableControl:"TextObject"},Hour:{label:"Hour","interface":"int Hour(DateTime date)",icon:"icon-224",view:"Hour()",bindableControl:"TextObject"},Minute:{label:"Minute","interface":"int Minute(DateTime date)",icon:"icon-224",view:"Minute()",bindableControl:"TextObject"},Month:{label:"Month","interface":"int Month(DateTime date)",icon:"icon-224",view:"Month()",bindableControl:"TextObject"},MonthName:{label:"MonthName","interface":"string MonthName(int month)",icon:"icon-223",view:"MonthName()",bindableControl:"TextObject"},Second:{label:"Second","interface":"int Second(DateTime date)",icon:"icon-224",view:"Second()",bindableControl:"TextObject"},WeekOfYear:{label:"WeekOfYear","interface":"int WeekOfYear(DateTime date)",icon:"icon-224",view:"WeekOfYear()",bindableControl:"TextObject"},Year:{label:"Year","interface":"int Year(DateTime date)",icon:"icon-224",view:"Year()",bindableControl:"TextObject"}}},Formatting:{label:"Formatting",icon:"icon-066",fields:{Format:{label:"Format","interface":"string Format(string format, params object[] args)",icon:"icon-223",view:"Format(,)",bindableControl:"TextObject"},FormatCurrency:{label:"FormatCurrency",icon:"icon-066",fields:{"FormatCurrency(object)":{label:"FormatCurrency(object)","interface":"string FormatCurrency(object value)",icon:"icon-223",view:"FormatCurrency()",bindableControl:"TextObject"},"FormatCurrency(object, int)":{label:"FormatCurrency(object, int)","interface":"string FormatCurrency(object value, int decimalDigits)",icon:"icon-223",view:"FormatCurrency(,)",bindableControl:"TextObject"}}},FormatDateTime:{label:"FormatDateTime",icon:"icon-066",fields:{"FormatDateTime(DateTime)":{label:"FormatDateTime(DateTime)","interface":"string FormatDateTime(DateTime value)",icon:"icon-223",view:"FormatDateTime()",bindableControl:"TextObject"},"FormatDateTime(DateTime, string)":{label:"FormatDateTime(DateTime, string)","interface":"string FormatDateTime(DateTime value, string format)",icon:"icon-223",view:"FormatDateTime(,)",bindableControl:"TextObject"}}},FormatNumber:{label:"FormatNumber",icon:"icon-066",fields:{"FormatNumber(object)":{label:"FormatNumber(object)","interface":"string FormatNumber(object value)",icon:"icon-223",view:"FormatNumber()",bindableControl:"TextObject"},"FormatNumber(object, int)":{label:"FormatNumber(object, int)","interface":"string FormatNumber(object value, int decimalDigits)",icon:"icon-223",view:"FormatNumber(,)",bindableControl:"TextObject"}}},FormatPercent:{label:"FormatPercent",icon:"icon-066",fields:{"FormatPercent(object)":{label:"FormatPercent(object)","interface":"string FormatPercent(object value)",icon:"icon-223",view:"FormatPercent()",bindableControl:"TextObject"},"FormatPercent(object, int)":{label:"FormatPercent(object, int)","interface":"string FormatPercent(object value, int decimalDigits)",icon:"icon-223",view:"FormatPercent(,)",bindableControl:"TextObject"}}}}},Conversion:{label:"Conversion",icon:"icon-066",fields:{ToBoolean:{label:"ToBoolean","interface":"bool ToBoolean(object value)",icon:"icon-228",view:"ToBoolean()",bindableControl:"TextObject"},ToByte:{label:"ToByte","interface":"byte ToByte(object value)",icon:"icon-224",view:"ToByte()",bindableControl:"TextObject"},ToChar:{label:"ToChar","interface":"char ToChar(object value)",icon:"icon-223",view:"ToChar(,)",bindableControl:"TextObject"},ToDateTime:{label:"ToDateTime","interface":"DateTime ToDateTime(object value)",icon:"icon-227",view:"ToDateTime()",bindableControl:"TextObject"},ToDecimal:{label:"ToDecimal","interface":"decimal ToDecimal(object value)",icon:"icon-226",view:"ToDecimal()",bindableControl:"TextObject"},ToDouble:{label:"ToDouble","interface":"double ToDouble(object value)",icon:"icon-225",view:"ToDouble()",bindableControl:"TextObject"},ToInt32:{label:"ToInt32","interface":"int ToInt32(object value)",icon:"icon-224",view:"ToInt32()",bindableControl:"TextObject"},ToRoman:{label:"ToRoman","interface":"string ToRoman(object value)",icon:"icon-223",view:"ToRoman()",bindableControl:"TextObject"},ToSingle:{label:"ToSingle","interface":"float ToSingle(object value)",icon:"icon-224",view:"ToSingle()",bindableControl:"TextObject"},ToString:{label:"ToString","interface":"string ToString(object value)",icon:"icon-223",view:"ToString()",bindableControl:"TextObject"},ToWords:{label:"ToWords",icon:"icon-066",fields:{"ToWords(object)":{label:"ToWords(object)","interface":"string ToWords(object value)",icon:"icon-223",view:"ToWords()",bindableControl:"TextObject"},"ToWords(object, string)":{label:"ToWords(object, string)","interface":"string ToWords(object value, string currencyName)",icon:"icon-223",view:"ToWords(,)",bindableControl:"TextObject"},"ToWords(object, string, string)":{label:"ToWords(object, string, string)","interface":"string ToWords(object value, string one, string many)",icon:"icon-223",view:"ToWords(,,)",bindableControl:"TextObject"}}},ToWordsEnGb:{label:"ToWordsEnGb",icon:"icon-066",fields:{"ToWordsEnGb(object)":{label:"ToWordsEnGb(object)","interface":"string ToWordsEnGb(object value)",icon:"icon-223",view:"ToWordsEnGb()",bindableControl:"TextObject"},"ToWordsEnGb(object, string)":{label:"ToWordsEnGb(object, string)","interface":"string ToWordsEnGb(object value, string currencyName)",icon:"icon-223",view:"ToWordsEnGb(,)",bindableControl:"TextObject"},"ToWordsEnGb(object, string, string)":{label:"ToWordsEnGb(object, string, string)","interface":"string ToWordsEnGb(object value, string one, string many)",icon:"icon-223",view:"ToWordsEnGb(,,)",bindableControl:"TextObject"}}},ToWordsEs:{label:"ToWordsEs",icon:"icon-066",fields:{"ToWordsEs(object)":{label:"ToWordsEs(object)","interface":"string ToWordsEs(object value)",icon:"icon-223",view:"ToWordsEs()",bindableControl:"TextObject"},"ToWordsEs(object, string)":{label:"ToWordsEs(object, string)","interface":"string ToWordsEs(object value, string currencyName)",icon:"icon-223",view:"ToWordsEs(,)",bindableControl:"TextObject"},"ToWordsEs(object, string, string)":{label:"ToWordsEs(object, string, string)","interface":"string ToWordsEs(object value, string one, string many)",icon:"icon-223",view:"ToWordsEs(,,)",bindableControl:"TextObject"}}},ToWordsRu:{label:"ToWordsRu",icon:"icon-066",fields:{"ToWordsRu(object)":{label:"ToWordsRu(object)","interface":"string ToWordsRu(object value)",icon:"icon-223",view:"ToWordsRu()",bindableControl:"TextObject"},"ToWordsRu(object, string)":{label:"ToWordsRu(object, string)","interface":"string ToWordsRu(object value, string currencyName)",icon:"icon-223",view:"ToWordsRu(,)",bindableControl:"TextObject"},"ToWordsRu(object, string, string)":{label:"ToWordsRu(object, string, string)","interface":"string ToWordsRu(object value, string one, string many)",icon:"icon-223",view:"ToWordsRu(,,)",bindableControl:"TextObject"}}}}},"Program Flow":{label:"Program Flow",icon:"icon-066",fields:{Choose:{label:"Choose","interface":"object Choose(double index, params object[] choice)",icon:"icon-224",view:"Choose(,)",bindableControl:"TextObject"},IIf:{label:"IIf","interface":"object IIf(bool expression, object truePart, object falsePart)",icon:"icon-224",view:"IIf(,,)",bindableControl:"TextObject"},Switch:{label:"Switch","interface":"object Switch(params object[] expression)",icon:"icon-224",view:"Switch()",bindableControl:"TextObject"},IsNull:{label:"IsNull","interface":"bool IsNull(string name)",icon:"icon-228",view:"IsNull()",bindableControl:"TextObject"}}}}}}),function(e){if(typeof exports=="object"&&typeof module=="object")module.exports=e();else{if(typeof define=="function"&&define.amd)return define("cm/lib/codemirror",[],e);this.CodeMirror=e()}}(function(){function S(e,t){if(!(this instanceof S))return new S(e,t);this.options=t=t||{},Ro(fi,t,!1),B(t);var n=t.value;typeof n=="string"&&(n=new Hs(n,t.mode)),this.doc=n;var s=this.display=new x(e,n);s.wrapper.CodeMirror=this,_(this),O(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),t.autofocus&&!d&&tr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new Mo},r&&i<11&&setTimeout(Uo(er,this,!0),20),ir(this),uu();var o=this;jn(this,function(){o.curOp.forceUpdate=!0,Is(o,n),t.autofocus&&!d||eu()==s.input?setTimeout(Uo(Pr,o),20):Hr(o);for(var e in li)li.hasOwnProperty(e)&&li[e](o,t[e],hi);U(o);for(var r=0;r<mi.length;++r)mi[r](o)})}function x(e,t){var n=this,o=n.input=Ko("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");s?o.style.width="1000px":o.setAttribute("wrap","off"),p&&(o.style.border="1px solid black"),o.setAttribute("autocorrect","off"),o.setAttribute("autocapitalize","off"),o.setAttribute("spellcheck","false"),n.inputDiv=Ko("div",[o],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=Ko("div",[Ko("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=Ko("div",[Ko("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=Ko("div",null,"CodeMirror-scrollbar-filler"),n.gutterFiller=Ko("div",null,"CodeMirror-gutter-filler"),n.lineDiv=Ko("div",null,"CodeMirror-code"),n.selectionDiv=Ko("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=Ko("div",null,"CodeMirror-cursors"),n.measure=Ko("div",null,"CodeMirror-measure"),n.lineMeasure=Ko("div",null,"CodeMirror-measure"),n.lineSpace=Ko("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none"),n.mover=Ko("div",[Ko("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=Ko("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=Ko("div",null,null,"position: absolute; height: "+Co+"px; width: 1px;"),n.gutters=Ko("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=Ko("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=Ko("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),r&&i<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),p&&(o.style.width="0px"),s||(n.scroller.draggable=!0),l&&(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"),r&&i<8&&(n.scrollbarH.style.minHeight=n.scrollbarV.style.minWidth="18px"),e.appendChild?e.appendChild(n.wrapper):e(n.wrapper),n.viewFrom=n.viewTo=t.first,n.view=[],n.externalMeasured=null,n.viewOffset=0,n.lastSizeC=0,n.updateLineNumbers=null,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new Mo,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null}function T(e){e.doc.mode=S.getMode(e.options,e.doc.modeOption),N(e)}function N(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,Vt(e,100),e.state.modeGen++,e.curOp&&zn(e)}function C(e){e.options.lineWrapping?(ru(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth=""):(nu(e.display.wrapper,"CodeMirror-wrap"),H(e)),L(e),zn(e),hn(e),setTimeout(function(){I(e)},100)}function k(e){var t=Tn(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/Nn(e.display)-3);return function(i){if(is(e.doc,i))return 0;var s=0;if(i.widgets)for(var o=0;o<i.widgets.length;o++)i.widgets[o].height&&(s+=i.widgets[o].height);return n?s+(Math.ceil(i.text.length/r)||1)*t:s+t}}function L(e){var t=e.doc,n=k(e);t.iter(function(e){var t=n(e);t!=e.height&&zs(e,t)})}function A(e){var t=Ei[e.options.keyMap],n=t.style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(n?" cm-keymap-"+n:"")}function O(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),hn(e)}function M(e){_(e),zn(e),setTimeout(function(){R(e)},20)}function _(e){var t=e.display.gutters,n=e.options.gutters;Go(t);for(var r=0;r<n.length;++r){var i=n[r],s=t.appendChild(Ko("div",null,"CodeMirror-gutter "+i));i=="CodeMirror-linenumbers"&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",D(e)}function D(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px",e.display.scrollbarH.style.left=e.options.fixedGutter?t+"px":0}function P(e){if(e.height==0)return 0;var t=e.text.length,n,r=e;while(n=Gi(r)){var i=n.find(0,!0);r=i.from.line,t+=i.from.ch-i.to.ch}r=e;while(n=Yi(r)){var i=n.find(0,!0);t-=r.text.length-i.from.ch,r=i.to.line,t+=r.text.length-i.to.ch}return t}function H(e){var t=e.display,n=e.doc;t.maxLine=qs(n,n.first),t.maxLineLength=P(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=P(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function B(e){var t=Fo(e.gutters,"CodeMirror-linenumbers");t==-1&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function j(e){return e.display.scroller.clientHeight-e.display.wrapper.clientHeight<Co-3}function F(e){var t=e.display.scroller;return{clientHeight:t.clientHeight,barHeight:e.display.scrollbarV.clientHeight,scrollWidth:t.scrollWidth,clientWidth:t.clientWidth,hScrollbarTakesSpace:j(e),barWidth:e.display.scrollbarH.clientWidth,docHeight:Math.round(e.doc.height+Gt(e.display))}}function I(e,t){t||(t=F(e));var n=e.display,r=cu(n.measure),i=t.docHeight+Co,s=t.scrollWidth>t.clientWidth;s&&t.scrollWidth<=t.clientWidth+1&&r>0&&!t.hScrollbarTakesSpace&&(s=!1);var o=i>t.clientHeight;o?(n.scrollbarV.style.display="block",n.scrollbarV.style.bottom=s?r+"px":"0",n.scrollbarV.firstChild.style.height=Math.max(0,i-t.clientHeight+(t.barHeight||n.scrollbarV.clientHeight))+"px"):(n.scrollbarV.style.display="",n.scrollbarV.firstChild.style.height="0"),s?(n.scrollbarH.style.display="block",n.scrollbarH.style.right=o?r+"px":"0",n.scrollbarH.firstChild.style.width=t.scrollWidth-t.clientWidth+(t.barWidth||n.scrollbarH.clientWidth)+"px"):(n.scrollbarH.style.display="",n.scrollbarH.firstChild.style.width="0"),s&&o?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=n.scrollbarFiller.style.width=r+"px"):n.scrollbarFiller.style.display="",s&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r+"px",n.gutterFiller.style.width=n.gutters.offsetWidth+"px"):n.gutterFiller.style.display="";if(!e.state.checkedOverlayScrollbar&&t.clientHeight>0){if(r===0){var u=v&&!c?"12px":"18px";n.scrollbarV.style.minWidth=n.scrollbarH.style.minHeight=u;var a=function(t){po(t)!=n.scrollbarV&&po(t)!=n.scrollbarH&&Fn(e,ar)(t)};mo(n.scrollbarV,"mousedown",a),mo(n.scrollbarH,"mousedown",a)}e.state.checkedOverlayScrollbar=!0}}function q(e,t,n){var r=n&&n.top!=null?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Qt(e));var i=n&&n.bottom!=null?n.bottom:r+e.wrapper.clientHeight,s=Xs(t,r),o=Xs(t,i);if(n&&n.ensure){var u=n.ensure.from.line,a=n.ensure.to.line;if(u<s)return{from:u,to:Xs(t,Vs(qs(t,u))+e.wrapper.clientHeight)};if(Math.min(a,t.lastLine())>=o)return{from:Xs(t,Vs(qs(t,a))-e.wrapper.clientHeight),to:a}}return{from:s,to:Math.max(o,s+1)}}function R(e){var t=e.display,n=t.view;if(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))return;var r=W(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,s=r+"px";for(var o=0;o<n.length;o++)if(!n[o].hidden){e.options.fixedGutter&&n[o].gutter&&(n[o].gutter.style.left=s);var u=n[o].alignable;if(u)for(var a=0;a<u.length;a++)u[a].style.left=s}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}function U(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=z(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(Ko("div",[Ko("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=i.firstChild.offsetWidth,o=i.offsetWidth-s;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(s,r.lineGutter.offsetWidth-o),r.lineNumWidth=r.lineNumInnerWidth+o,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",D(e),!0}return!1}function z(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function W(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function X(e,t,n){var r=e.display;this.viewport=t,this.visible=q(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.oldViewFrom=r.viewFrom,this.oldViewTo=r.viewTo,this.oldScrollerWidth=r.scroller.clientWidth,this.force=n,this.dims=Z(e)}function V(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return Xn(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(n.updateLineNumbers==null||n.updateLineNumbers>=n.viewTo)&&Kn(e)==0)return!1;U(e)&&(Xn(e),t.dims=Z(e));var i=r.first+r.size,s=Math.max(t.visible.from-e.options.viewportMargin,r.first),o=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<s&&s-n.viewFrom<20&&(s=Math.max(r.first,n.viewFrom)),n.viewTo>o&&n.viewTo-o<20&&(o=Math.min(i,n.viewTo)),E&&(s=ns(e.doc,s),o=rs(e.doc,o));var u=s!=n.viewFrom||o!=n.viewTo||n.lastSizeC!=t.wrapperHeight;Jn(e,s,o),n.viewOffset=Vs(qs(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var a=Kn(e);if(!u&&a==0&&!t.force&&(n.updateLineNumbers==null||n.updateLineNumbers>=n.viewTo))return!1;var f=eu();return a>4&&(n.lineDiv.style.display="none"),et(e,n.updateLineNumbers,t.dims),a>4&&(n.lineDiv.style.display=""),f&&eu()!=f&&f.offsetHeight&&f.focus(),Go(n.cursorDiv),Go(n.selectionDiv),u&&(n.lastSizeC=t.wrapperHeight,Vt(e,400)),n.updateLineNumbers=null,!0}function $(e,t){var n=t.force,r=t.viewport;for(var i=!0;;i=!1){if(i&&e.options.lineWrapping&&t.oldScrollerWidth!=e.display.scroller.clientWidth)n=!0;else{n=!1,r&&r.top!=null&&(r={top:Math.min(e.doc.height+Gt(e.display)-Co-e.display.scroller.clientHeight,r.top)}),t.visible=q(e.display,e.doc,r);if(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break}if(!V(e,t))break;G(e);var s=F(e);Ut(e),K(e,s),I(e,s)}wo(e,"update",e),(e.display.viewFrom!=t.oldViewFrom||e.display.viewTo!=t.oldViewTo)&&wo(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo)}function J(e,t){var n=new X(e,t);if(V(e,n)){G(e),$(e,n);var r=F(e);Ut(e),K(e,r),I(e,r)}}function K(e,t){e.display.sizer.style.minHeight=e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=Math.max(t.docHeight,t.clientHeight-Co)+"px"}function Q(e,t){e.display.sizer.offsetWidth+e.display.gutters.offsetWidth<e.display.scroller.clientWidth-1&&(e.display.sizer.style.minHeight=e.display.heightForcer.style.top="0px",e.display.gutters.style.height=t.docHeight+"px")}function G(e){var t=e.display,n=t.lineDiv.offsetTop;for(var s=0;s<t.view.length;s++){var o=t.view[s],u;if(o.hidden)continue;if(r&&i<8){var a=o.node.offsetTop+o.node.offsetHeight;u=a-n,n=a}else{var f=o.node.getBoundingClientRect();u=f.bottom-f.top}var l=o.line.height-u;u<2&&(u=Tn(t));if(l>.001||l<-0.001){zs(o.line,u),Y(o.line);if(o.rest)for(var c=0;c<o.rest.length;c++)Y(o.rest[c])}}}function Y(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function Z(e){var t=e.display,n={},r={};for(var i=t.gutters.firstChild,s=0;i;i=i.nextSibling,++s)n[e.options.gutters[s]]=i.offsetLeft,r[e.options.gutters[s]]=i.offsetWidth;return{fixedPos:W(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function et(e,t,n){function a(t){var n=t.nextSibling;return s&&v&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}var r=e.display,i=e.options.lineNumbers,o=r.lineDiv,u=o.firstChild,f=r.view,l=r.viewFrom;for(var c=0;c<f.length;c++){var h=f[c];if(!h.hidden)if(!h.node){var p=ft(e,h,l,n);o.insertBefore(p,u)}else{while(u!=h.node)u=a(u);var d=i&&t!=null&&t<=l&&h.lineNumber;h.changes&&(Fo(h.changes,"gutter")>-1&&(d=!1),tt(e,h,l,n)),d&&(Go(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(z(e.options,l)))),u=h.node.nextSibling}l+=h.size}while(u)u=a(u)}function tt(e,t,n,r){for(var i=0;i<t.changes.length;i++){var s=t.changes[i];s=="text"?st(e,t):s=="gutter"?ut(e,t,n,r):s=="class"?ot(t):s=="widget"&&at(t,r)}t.changes=null}function nt(e){return e.node==e.text&&(e.node=Ko("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),r&&i<8&&(e.node.style.zIndex=2)),e.node}function rt(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;t&&(t+=" CodeMirror-linebackground");if(e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var n=nt(e);e.background=n.insertBefore(Ko("div",null,t),n.firstChild)}}function it(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):xs(e,t)}function st(e,t){var n=t.text.className,r=it(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,ot(t)):n&&(t.text.className=n)}function ot(e){rt(e),e.line.wrapClass?nt(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function ut(e,t,n,r){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var i=t.line.gutterMarkers;if(e.options.lineNumbers||i){var s=nt(t),o=t.gutter=s.insertBefore(Ko("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px"),t.text);e.options.lineNumbers&&(!i||!i["CodeMirror-linenumbers"])&&(t.lineNumber=o.appendChild(Ko("div",z(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px")));if(i)for(var u=0;u<e.options.gutters.length;++u){var a=e.options.gutters[u],f=i.hasOwnProperty(a)&&i[a];f&&o.appendChild(Ko("div",[f],"CodeMirror-gutter-elt","left: "+r.gutterLeft[a]+"px; width: "+r.gutterWidth[a]+"px"))}}}function at(e,t){e.alignable&&(e.alignable=null);for(var n=e.node.firstChild,r;n;n=r){var r=n.nextSibling;n.className=="CodeMirror-linewidget"&&e.node.removeChild(n)}lt(e,t)}function ft(e,t,n,r){var i=it(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),ot(t),ut(e,t,n,r),lt(t,r),t.node}function lt(e,t){ct(e.line,e,t,!0);if(e.rest)for(var n=0;n<e.rest.length;n++)ct(e.rest[n],e,t,!1)}function ct(e,t,n,r){if(!e.widgets)return;var i=nt(t);for(var s=0,o=e.widgets;s<o.length;++s){var u=o[s],a=Ko("div",[u.node],"CodeMirror-linewidget");u.handleMouseEvents||(a.ignoreEvents=!0),ht(u,a,t,n),r&&u.above?i.insertBefore(a,t.gutter||t.text):i.appendChild(a),wo(u,"redraw")}}function ht(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function vt(e){return pt(e.line,e.ch)}function mt(e,t){return dt(e,t)<0?t:e}function gt(e,t){return dt(e,t)<0?e:t}function yt(e,t){this.ranges=e,this.primIndex=t}function bt(e,t){this.anchor=e,this.head=t}function wt(e,t){var n=e[t];e.sort(function(e,t){return dt(e.from(),t.from())}),t=Fo(e,n);for(var r=1;r<e.length;r++){var i=e[r],s=e[r-1];if(dt(s.to(),i.from())>=0){var o=gt(s.from(),i.from()),u=mt(s.to(),i.to()),a=s.empty()?i.from()==i.head:s.from()==s.head;r<=t&&--t,e.splice(--r,2,new bt(a?u:o,a?o:u))}}return new yt(e,t)}function Et(e,t){return new yt([new bt(e,t||e)],0)}function St(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function xt(e,t){if(t.line<e.first)return pt(e.first,0);var n=e.first+e.size-1;return t.line>n?pt(n,qs(e,n).text.length):Tt(t,qs(e,t.line).text.length)}function Tt(e,t){var n=e.ch;return n==null||n>t?pt(e.line,t):n<0?pt(e.line,0):e}function Nt(e,t){return t>=e.first&&t<e.first+e.size}function Ct(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=xt(e,t[r]);return n}function kt(e,t,n,r){if(e.cm&&e.cm.display.shift||e.extend){var i=t.anchor;if(r){var s=dt(n,i)<0;s!=dt(r,i)<0?(i=n,n=r):s!=dt(n,r)<0&&(n=r)}return new bt(i,n)}return new bt(r||n,n)}function Lt(e,t,n,r){Pt(e,new yt([kt(e,e.sel.primary(),t,n)],0),r)}function At(e,t,n){for(var r=[],i=0;i<e.sel.ranges.length;i++)r[i]=kt(e,e.sel.ranges[i],t[i],null);var s=wt(r,e.sel.primIndex);Pt(e,s,n)}function Ot(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,Pt(e,wt(i,e.sel.primIndex),r)}function Mt(e,t,n,r){Pt(e,Et(t,n),r)}function _t(e,t){var n={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new bt(xt(e,t[n].anchor),xt(e,t[n].head))}};return yo(e,"beforeSelectionChange",e,n),e.cm&&yo(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?wt(n.ranges,n.ranges.length-1):t}function Dt(e,t,n){var r=e.history.done,i=Bo(r);i&&i.ranges?(r[r.length-1]=t,Ht(e,t,n)):Pt(e,t,n)}function Pt(e,t,n){Ht(e,t,n),eo(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Ht(e,t,n){if(To(e,"beforeSelectionChange")||e.cm&&To(e.cm,"beforeSelectionChange"))t=_t(e,t);var r=n&&n.bias||(dt(t.primary().head,e.sel.primary().head)<0?-1:1);Bt(e,Ft(e,t,r,!0)),(!n||n.scroll!==!1)&&e.cm&&ni(e.cm)}function Bt(e,t){if(t.equals(e.sel))return;e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,xo(e.cm)),wo(e,"cursorActivity",e)}function jt(e){Bt(e,Ft(e,e.sel,null,!1),Lo)}function Ft(e,t,n,r){var i;for(var s=0;s<t.ranges.length;s++){var o=t.ranges[s],u=It(e,o.anchor,n,r),a=It(e,o.head,n,r);if(i||u!=o.anchor||a!=o.head)i||(i=t.ranges.slice(0,s)),i[s]=new bt(u,a)}return i?wt(i,t.primIndex):t}function It(e,t,n,r){var i=!1,s=t,o=n||1;e.cantEdit=!1;e:for(;;){var u=qs(e,s.line);if(u.markedSpans)for(var a=0;a<u.markedSpans.length;++a){var f=u.markedSpans[a],l=f.marker;if((f.from==null||(l.inclusiveLeft?f.from<=s.ch:f.from<s.ch))&&(f.to==null||(l.inclusiveRight?f.to>=s.ch:f.to>s.ch))){if(r){yo(l,"beforeCursorEnter");if(l.explicitlyCleared){if(!u.markedSpans)break;--a;continue}}if(!l.atomic)continue;var c=l.find(o<0?-1:1);if(dt(c,s)==0){c.ch+=o,c.ch<0?c.line>e.first?c=xt(e,pt(c.line-1)):c=null:c.ch>u.text.length&&(c.line<e.first+e.size-1?c=pt(c.line+1,0):c=null);if(!c){if(i)return r?(e.cantEdit=!0,pt(e.first,0)):It(e,t,n,!0);i=!0,c=t,o=-o}}s=c;continue e}}return s}}function qt(e){var t=e.display,n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),s=r.selection=document.createDocumentFragment();for(var o=0;o<n.sel.ranges.length;o++){var u=n.sel.ranges[o],a=u.empty();(a||e.options.showCursorWhenSelecting)&&zt(e,u,i),a||Wt(e,u,s)}if(e.options.moveInputWithCursor){var f=yn(e,n.sel.primary().head,"div"),l=t.wrapper.getBoundingClientRect(),c=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,f.top+c.top-l.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,f.left+c.left-l.left))}return r}function Rt(e,t){Yo(e.display.cursorDiv,t.cursors),Yo(e.display.selectionDiv,t.selection),t.teTop!=null&&(e.display.inputDiv.style.top=t.teTop+"px",e.display.inputDiv.style.left=t.teLeft+"px")}function Ut(e){Rt(e,qt(e))}function zt(e,t,n){var r=yn(e,t.head,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(Ko("div"," ","CodeMirror-cursor"));i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px";if(r.other){var s=n.appendChild(Ko("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));s.style.display="",s.style.left=r.other.left+"px",s.style.top=r.other.top+"px",s.style.height=(r.other.bottom-r.other.top)*.85+"px"}}function Wt(e,t,n){function f(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),s.appendChild(Ko("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(n==null?a-e:n)+"px; height: "+(r-t)+"px"))}function l(t,n,r){function h(n,r){return gn(e,pt(t,n),"div",s,r)}var s=qs(i,t),o=s.text.length,l,c;return Su($s(s),n||0,r==null?o:r,function(e,t,i){var s=h(e,"left"),p,d,v;if(e==t)p=s,d=v=s.left;else{p=h(t-1,"right");if(i=="rtl"){var m=s;s=p,p=m}d=s.left,v=p.right}n==null&&e==0&&(d=u),p.top-s.top>3&&(f(d,s.top,null,s.bottom),d=u,s.bottom<p.top&&f(d,s.bottom,null,p.top)),r==null&&t==o&&(v=a);if(!l||s.top<l.top||s.top==l.top&&s.left<l.left)l=s;if(!c||p.bottom>c.bottom||p.bottom==c.bottom&&p.right>c.right)c=p;d<u+1&&(d=u),f(d,p.top,v-d,p.bottom)}),{start:l,end:c}}var r=e.display,i=e.doc,s=document.createDocumentFragment(),o=Yt(e.display),u=o.left,a=r.lineSpace.offsetWidth-o.right,c=t.from(),h=t.to();if(c.line==h.line)l(c.line,c.ch,h.ch);else{var p=qs(i,c.line),d=qs(i,h.line),v=es(p)==es(d),m=l(c.line,c.ch,v?p.text.length+1:null).end,g=l(h.line,v?0:null,h.ch).start;v&&(m.top<g.top-2?(f(m.right,m.top,null,m.bottom),f(u,g.top,g.left,g.bottom)):f(m.right,m.top,g.left-m.right,m.bottom)),m.bottom<g.top&&f(u,m.bottom,null,g.top)}n.appendChild(s)}function Xt(e){if(!e.state.focused)return;var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}function Vt(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,Uo($t,e))}function $t(e){var t=e.doc;t.frontier<t.first&&(t.frontier=t.first);if(t.frontier>=e.display.viewTo)return;var n=+(new Date)+e.options.workTime,r=yi(t.mode,Kt(e,t.frontier)),i=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(s){if(t.frontier>=e.display.viewFrom){var o=s.styles,u=gs(e,s,r,!0);s.styles=u.styles;var a=s.styleClasses,f=u.classes;f?s.styleClasses=f:a&&(s.styleClasses=null);var l=!o||o.length!=s.styles.length||a!=f&&(!a||!f||a.bgClass!=f.bgClass||a.textClass!=f.textClass);for(var c=0;!l&&c<o.length;++c)l=o[c]!=s.styles[c];l&&i.push(t.frontier),s.stateAfter=yi(t.mode,r)}else bs(e,s.text,r),s.stateAfter=t.frontier%5==0?yi(t.mode,r):null;++t.frontier;if(+(new Date)>n)return Vt(e,e.options.workDelay),!0}),i.length&&jn(e,function(){for(var t=0;t<i.length;t++)Wn(e,i[t],"text")})}function Jt(e,t,n){var r,i,s=e.doc,o=n?-1:t-(e.doc.mode.innerMode?1e3:100);for(var u=t;u>o;--u){if(u<=s.first)return s.first;var a=qs(s,u-1);if(a.stateAfter&&(!n||u<=s.frontier))return u;var f=_o(a.text,null,e.options.tabSize);if(i==null||r>f)i=u-1,r=f}return i}function Kt(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return!0;var s=Jt(e,t,n),o=s>r.first&&qs(r,s-1).stateAfter;return o?o=yi(r.mode,o):o=bi(r.mode),r.iter(s,t,function(n){bs(e,n.text,o);var u=s==t-1||s%5==0||s>=i.viewFrom&&s<i.viewTo;n.stateAfter=u?yi(r.mode,o):null,++s}),n&&(r.frontier=s),o}function Qt(e){return e.lineSpace.offsetTop}function Gt(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Yt(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=Yo(e.measure,Ko("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return!isNaN(r.left)&&!isNaN(r.right)&&(e.cachedPaddingH=r),r}function Zt(e,t,n){var r=e.options.lineWrapping,i=r&&e.display.scroller.clientWidth;if(!t.measure.heights||r&&t.measure.width!=i){var s=t.measure.heights=[];if(r){t.measure.width=i;var o=t.text.firstChild.getClientRects();for(var u=0;u<o.length-1;u++){var a=o[u],f=o[u+1];Math.abs(a.bottom-f.bottom)>2&&s.push((a.bottom+f.top)/2-n.top)}}s.push(n.bottom-n.top)}}function en(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var r=0;r<e.rest.length;r++)if(Ws(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function tn(e,t){t=es(t);var n=Ws(t),r=e.display.externalMeasured=new Rn(e.doc,t,n);r.lineN=n;var i=r.built=xs(e,r);return r.text=i.pre,Yo(e.display.lineMeasure,i.pre),r}function nn(e,t,n,r){return on(e,sn(e,t),n,r)}function rn(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Vn(e,t)];var n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size)return n}function sn(e,t){var n=Ws(t),r=rn(e,n);r&&!r.text?r=null:r&&r.changes&&tt(e,r,n,Z(e)),r||(r=tn(e,t));var i=en(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function on(e,t,n,r,i){t.before&&(n=-1);var s=n+(r||""),o;return t.cache.hasOwnProperty(s)?o=t.cache[s]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Zt(e,t.view,t.rect),t.hasHeights=!0),o=an(e,t,n,r),o.bogus||(t.cache[s]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}function an(e,t,n,s){var o=t.map,u,a,f,l;for(var c=0;c<o.length;c+=3){var h=o[c],p=o[c+1];if(n<h)a=0,f=1,l="left";else if(n<p)a=n-h,f=a+1;else if(c==o.length-3||n==p&&o[c+3]>n)f=p-h,a=f-1,n>=p&&(l="right");if(a!=null){u=o[c+2],h==p&&s==(u.insertLeft?"left":"right")&&(l=s);if(s=="left"&&a==0)while(c&&o[c-2]==o[c-3]&&o[c-1].insertLeft)u=o[(c-=3)+2],l="left";if(s=="right"&&a==p-h)while(c<o.length-3&&o[c+3]==o[c+4]&&!o[c+5].insertLeft)u=o[(c+=3)+2],l="right";break}}var d;if(u.nodeType==3){for(var c=0;c<4;c++){while(a&&Jo(t.line.text.charAt(h+a)))--a;while(h+f<p&&Jo(t.line.text.charAt(h+f)))++f;if(r&&i<9&&a==0&&f==p-h)d=u.parentNode.getBoundingClientRect();else if(r&&e.options.lineWrapping){var v=Qo(u,a,f).getClientRects();v.length?d=v[s=="right"?v.length-1:0]:d=un}else d=Qo(u,a,f).getBoundingClientRect()||un;if(d.left||d.right||a==0)break;f=a,a-=1,l="right"}r&&i<11&&(d=fn(e.display.measure,d))}else{a>0&&(l=s="right");var v;e.options.lineWrapping&&(v=u.getClientRects()).length>1?d=v[s=="right"?v.length-1:0]:d=u.getBoundingClientRect()}if(r&&i<9&&!a&&(!d||!d.left&&!d.right)){var m=u.parentNode.getClientRects()[0];m?d={left:m.left,right:m.left+Nn(e.display),top:m.top,bottom:m.bottom}:d=un}var g=d.top-t.rect.top,y=d.bottom-t.rect.top,b=(g+y)/2,w=t.view.measure.heights;for(var c=0;c<w.length-1;c++)if(b<w[c])break;var E=c?w[c-1]:0,S=w[c],x={left:(l=="right"?d.right:d.left)-t.rect.left,right:(l=="left"?d.left:d.right)-t.rect.left,top:E,bottom:S};return!d.left&&!d.right&&(x.bogus=!0),e.options.singleCursorHeightPerLine||(x.rtop=g,x.rbottom=y),x}function fn(e,t){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!wu(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}function ln(e){if(e.measure){e.measure.cache={},e.measure.heights=null;if(e.rest)for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}}function cn(e){e.display.externalMeasure=null,Go(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)ln(e.display.view[t])}function hn(e){cn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function pn(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function dn(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function vn(e,t,n,r){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var s=as(t.widgets[i]);n.top+=s,n.bottom+=s}if(r=="line")return n;r||(r="local");var o=Vs(t);r=="local"?o+=Qt(e.display):o-=e.display.viewOffset;if(r=="page"||r=="window"){var u=e.display.lineSpace.getBoundingClientRect();o+=u.top+(r=="window"?0:dn());var a=u.left+(r=="window"?0:pn());n.left+=a,n.right+=a}return n.top+=o,n.bottom+=o,n}function mn(e,t,n){if(n=="div")return t;var r=t.left,i=t.top;if(n=="page")r-=pn(),i-=dn();else if(n=="local"||!n){var s=e.display.sizer.getBoundingClientRect();r+=s.left,i+=s.top}var o=e.display.lineSpace.getBoundingClientRect();return{left:r-o.left,top:i-o.top}}function gn(e,t,n,r,i){return r||(r=qs(e.doc,t.line)),vn(e,r,nn(e,r,t.ch,i),n)}function yn(e,t,n,r,i,s){function o(t,o){var u=on(e,i,t,o?"right":"left",s);return o?u.left=u.right:u.right=u.left,vn(e,r,u,n)}function u(e,t){var n=a[t],r=n.level%2;return e==xu(n)&&t&&n.level<a[t-1].level?(n=a[--t],e=Tu(n)-(n.level%2?0:1),r=!0):e==Tu(n)&&t<a.length-1&&n.level<a[t+1].level&&(n=a[++t],e=xu(n)-n.level%2,r=!1),r&&e==n.to&&e>n.from?o(e-1):o(e,r)}r=r||qs(e.doc,t.line),i||(i=sn(e,r));var a=$s(r),f=t.ch;if(!a)return o(f);var l=_u(a,f),c=u(f,l);return Mu!=null&&(c.other=u(f,Mu)),c}function bn(e,t){var n=0,t=xt(e.doc,t);e.options.lineWrapping||(n=Nn(e.display)*t.ch);var r=qs(e.doc,t.line),i=Vs(r)+Qt(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function wn(e,t,n,r){var i=pt(e,t);return i.xRel=r,n&&(i.outside=!0),i}function En(e,t,n){var r=e.doc;n+=e.display.viewOffset;if(n<0)return wn(r.first,0,!0,-1);var i=Xs(r,n),s=r.first+r.size-1;if(i>s)return wn(r.first+r.size-1,qs(r,s).text.length,!0,1);t<0&&(t=0);var o=qs(r,i);for(;;){var u=Sn(e,o,i,t,n),a=Yi(o),f=a&&a.find(0,!0);if(!a||!(u.ch>f.from.ch||u.ch==f.from.ch&&u.xRel>0))return u;i=Ws(o=f.to.line)}}function Sn(e,t,n,r,i){function f(r){var i=yn(e,pt(n,r),"line",t,a);return o=!0,s>i.bottom?i.left-u:s<i.top?i.left+u:(o=!1,i.left)}var s=i-Vs(t),o=!1,u=2*e.display.wrapper.clientWidth,a=sn(e,t),l=$s(t),c=t.text.length,h=Nu(t),p=Cu(t),d=f(h),v=o,m=f(p),g=o;if(r>m)return wn(n,p,g,1);for(;;){if(l?p==h||p==Pu(t,h,1):p-h<=1){var y=r<d||r-d<=m-r?h:p,b=r-(y==h?d:m);while(Jo(t.text.charAt(y)))++y;var w=wn(n,y,y==h?v:g,b<-1?-1:b>1?1:0);return w}var E=Math.ceil(c/2),S=h+E;if(l){S=h;for(var x=0;x<E;++x)S=Pu(t,S,1)}var T=f(S);if(T>r){p=S,m=T;if(g=o)m+=1e3;c=E}else h=S,d=T,v=o,c-=E}}function Tn(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(xn==null){xn=Ko("pre");for(var t=0;t<49;++t)xn.appendChild(document.createTextNode("x")),xn.appendChild(Ko("br"));xn.appendChild(document.createTextNode("x"))}Yo(e.measure,xn);var n=xn.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),Go(e.measure),n||1}function Nn(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=Ko("span","xxxxxxxxxx"),n=Ko("pre",[t]);Yo(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function Ln(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++kn},Cn?Cn.ops.push(e.curOp):e.curOp.ownsGroup=Cn={ops:[e.curOp],delayedCallbacks:[]}}function An(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n]();for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)while(i.cursorActivityCalled<i.cursorActivityHandlers.length)i.cursorActivityHandlers[i.cursorActivityCalled++](i.cm)}}while(n<t.length)}function On(e){var t=e.curOp,n=t.ownsGroup;if(!n)return;try{An(n)}finally{Cn=null;for(var r=0;r<n.ops.length;r++)n.ops[r].cm.curOp=null;Mn(n)}}function Mn(e){var t=e.ops;for(var n=0;n<t.length;n++)_n(t[n]);for(var n=0;n<t.length;n++)Dn(t[n]);for(var n=0;n<t.length;n++)Pn(t[n]);for(var n=0;n<t.length;n++)Hn(t[n]);for(var n=0;n<t.length;n++)Bn(t[n])}function _n(e){var t=e.cm,n=t.display;e.updateMaxLine&&H(t),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new X(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Dn(e){e.updatedDisplay=e.mustUpdate&&V(e.cm,e.update)}function Pn(e){var t=e.cm,n=t.display;e.updatedDisplay&&G(t),e.barMeasure=F(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=nn(t,n.maxLine,n.maxLine.text.length).left+3,e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo+Co-n.scroller.clientWidth));if(e.updatedDisplay||e.selectionChanged)e.newSelectionNodes=qt(t)}function Hn(e){var t=e.cm;e.adjustWidthTo!=null&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&wr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.newSelectionNodes&&Rt(t,e.newSelectionNodes),e.updatedDisplay&&K(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&I(t,e.barMeasure),e.selectionChanged&&Xt(t),t.state.focused&&e.updateInput&&er(t,e.typing)}function Bn(e){var t=e.cm,n=t.display,r=t.doc;e.adjustWidthTo!=null&&Math.abs(e.barMeasure.scrollWidth-t.display.scroller.scrollWidth)>1&&I(t),e.updatedDisplay&&$(t,e.update),n.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(n.wheelStartX=n.wheelStartY=null);if(e.scrollTop!=null&&(n.scroller.scrollTop!=e.scrollTop||e.forceScroll)){var i=Math.max(0,Math.min(n.scroller.scrollHeight-n.scroller.clientHeight,e.scrollTop));n.scroller.scrollTop=n.scrollbarV.scrollTop=r.scrollTop=i}if(e.scrollLeft!=null&&(n.scroller.scrollLeft!=e.scrollLeft||e.forceScroll)){var o=Math.max(0,Math.min(n.scroller.scrollWidth-n.scroller.clientWidth,e.scrollLeft));n.scroller.scrollLeft=n.scrollbarH.scrollLeft=r.scrollLeft=o,R(t)}if(e.scrollToPos){var u=Yr(t,xt(r,e.scrollToPos.from),xt(r,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&Gr(t,u)}var a=e.maybeHiddenMarkers,f=e.maybeUnhiddenMarkers;if(a)for(var l=0;l<a.length;++l)a[l].lines.length||yo(a[l],"hide");if(f)for(var l=0;l<f.length;++l)f[l].lines.length&&yo(f[l],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.updatedDisplay&&s&&(t.options.lineWrapping&&Q(t,e.barMeasure),e.barMeasure.scrollWidth>e.barMeasure.clientWidth&&e.barMeasure.scrollWidth<e.barMeasure.clientWidth+1&&!j(t)&&I(t)),e.changeObjs&&yo(t,"changes",t,e.changeObjs)}function jn(e,t){if(e.curOp)return t();Ln(e);try{return t()}finally{On(e)}}function Fn(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Ln(e);try{return t.apply(e,arguments)}finally{On(e)}}}function In(e){return function(){if(this.curOp)return e.apply(this,arguments);Ln(this);try{return e.apply(this,arguments)}finally{On(this)}}}function qn(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Ln(t);try{return e.apply(this,arguments)}finally{On(t)}}}function Rn(e,t,n){this.line=t,this.rest=ts(t),this.size=this.rest?Ws(Bo(this.rest))-n+1:1,this.node=this.text=null,this.hidden=is(e,t)}function Un(e,t,n){var r=[],i;for(var s=t;s<n;s=i){var o=new Rn(e.doc,qs(e.doc,s),s);i=s+o.size,r.push(o)}return r}function zn(e,t,n,r){t==null&&(t=e.doc.first),n==null&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;r&&n<i.viewTo&&(i.updateLineNumbers==null||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0;if(t>=i.viewTo)E&&ns(e.doc,t)<i.viewTo&&Xn(e);else if(n<=i.viewFrom)E&&rs(e.doc,n+r)>i.viewFrom?Xn(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)Xn(e);else if(t<=i.viewFrom){var s=$n(e,n,n+r,1);s?(i.view=i.view.slice(s.index),i.viewFrom=s.lineN,i.viewTo+=r):Xn(e)}else if(n>=i.viewTo){var s=$n(e,t,t,-1);s?(i.view=i.view.slice(0,s.index),i.viewTo=s.lineN):Xn(e)}else{var o=$n(e,t,t,-1),u=$n(e,n,n+r,1);o&&u?(i.view=i.view.slice(0,o.index).concat(Un(e,o.lineN,u.lineN)).concat(i.view.slice(u.index)),i.viewTo+=r):Xn(e)}var a=i.externalMeasured;a&&(n<a.lineN?a.lineN+=r:t<a.lineN+a.size&&(i.externalMeasured=null))}function Wn(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null);if(t<r.viewFrom||t>=r.viewTo)return;var s=r.view[Vn(e,t)];if(s.node==null)return;var o=s.changes||(s.changes=[]);Fo(o,n)==-1&&o.push(n)}function Xn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Vn(e,t){if(t>=e.display.viewTo)return null;t-=e.display.viewFrom;if(t<0)return null;var n=e.display.view;for(var r=0;r<n.length;r++){t-=n[r].size;if(t<0)return r}}function $n(e,t,n,r){var i=Vn(e,t),s,o=e.display.view;if(!E||n==e.doc.first+e.doc.size)return{index:i,lineN:n};for(var u=0,a=e.display.viewFrom;u<i;u++)a+=o[u].size;if(a!=t){if(r>0){if(i==o.length-1)return null;s=a+o[i].size-t,i++}else s=a-t;t+=s,n+=s}while(ns(e.doc,n)!=n){if(i==(r<0?0:o.length-1))return null;n+=r*o[i-(r<0?1:0)].size,i+=r}return{index:i,lineN:n}}function Jn(e,t,n){var r=e.display,i=r.view;i.length==0||t>=r.viewTo||n<=r.viewFrom?(r.view=Un(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=Un(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(Vn(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(Un(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,Vn(e,n)))),r.viewTo=n}function Kn(e){var t=e.display.view,n=0;for(var r=0;r<t.length;r++){var i=t[r];!i.hidden&&(!i.node||i.changes)&&++n}return n}function Qn(e){if(e.display.pollingFast)return;e.display.poll.set(e.options.pollInterval,function(){Zn(e),e.state.focused&&Qn(e)})}function Gn(e){function n(){var r=Zn(e);!r&&!t?(t=!0,e.display.poll.set(60,n)):(e.display.pollingFast=!1,Qn(e))}var t=!1;e.display.pollingFast=!0,e.display.poll.set(20,n)}function Zn(e){var t=e.display.input,n=e.display.prevInput,s=e.doc;if(!e.state.focused||gu(t)&&!n||rr(e)||e.options.disableInput)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var o=t.value;if(o==n&&!e.somethingSelected())return!1;if(r&&i>=9&&e.display.inputHasSelection===o||v&&/[\uf700-\uf7ff]/.test(o))return er(e),!1;var u=!e.curOp;u&&Ln(e),e.display.shift=!1,o.charCodeAt(0)==8203&&s.sel==e.display.selForContextMenu&&!n&&(n="​");var a=0,f=Math.min(n.length,o.length);while(a<f&&n.charCodeAt(a)==o.charCodeAt(a))++a;var l=o.slice(a),c=mu(l),h=null;e.state.pasteIncoming&&s.sel.ranges.length>1&&(Yn&&Yn.join("\n")==l?h=s.sel.ranges.length%Yn.length==0&&Io(Yn,mu):c.length==s.sel.ranges.length&&(h=Io(c,function(e){return[e]})));for(var p=s.sel.ranges.length-1;p>=0;p--){var d=s.sel.ranges[p],m=d.from(),g=d.to();a<n.length?m=pt(m.line,m.ch-(n.length-a)):e.state.overwrite&&d.empty()&&!e.state.pasteIncoming&&(g=pt(g.line,Math.min(qs(s,g.line).text.length,g.ch+Bo(c).length)));var y=e.curOp.updateInput,b={from:m,to:g,text:h?h[p%h.length]:c,origin:e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input"};Wr(e.doc,b),wo(e,"inputRead",e,b);if(l&&!e.state.pasteIncoming&&e.options.electricChars&&e.options.smartIndent&&d.head.ch<100&&(!p||s.sel.ranges[p-1].head.line!=d.head.line)){var w=e.getModeAt(d.head),E=Fr(b);if(w.electricChars){for(var S=0;S<w.electricChars.length;S++)if(l.indexOf(w.electricChars.charAt(S))>-1){ii(e,E.line,"smart");break}}else w.electricInput&&w.electricInput.test(qs(s,E.line).text.slice(0,E.ch))&&ii(e,E.line,"smart")}}return ni(e),e.curOp.updateInput=y,e.curOp.typing=!0,o.length>1e3||o.indexOf("\n")>-1?t.value=e.display.prevInput="":e.display.prevInput=o,u&&On(e),e.state.pasteIncoming=e.state.cutIncoming=!1,!0}function er(e,t){var n,s,o=e.doc;if(e.somethingSelected()){e.display.prevInput="";var u=o.sel.primary();n=yu&&(u.to().line-u.from().line>100||(s=e.getSelection()).length>1e3);var a=n?"-":s||e.getSelection();e.display.input.value=a,e.state.focused&&jo(e.display.input),r&&i>=9&&(e.display.inputHasSelection=a)}else t||(e.display.prevInput=e.display.input.value="",r&&i>=9&&(e.display.inputHasSelection=null));e.display.inaccurateSelection=n}function tr(e){e.options.readOnly!="nocursor"&&(!d||eu()!=e.display.input)&&e.display.input.focus()}function nr(e){e.state.focused||(tr(e),Pr(e))}function rr(e){return e.options.readOnly||e.doc.cantEdit}function ir(e){function n(){e.state.focused&&setTimeout(Uo(tr,e),0)}function o(t){So(e,t)||ho(t)}function u(n){if(e.somethingSelected())Yn=e.getSelections(),t.inaccurateSelection&&(t.prevInput="",t.inaccurateSelection=!1,t.input.value=Yn.join("\n"),jo(t.input));else{var r=[],i=[];for(var s=0;s<e.doc.sel.ranges.length;s++){var o=e.doc.sel.ranges[s].head.line,u={anchor:pt(o,0),head:pt(o+1,0)};i.push(u),r.push(e.getRange(u.anchor,u.head))}n.type=="cut"?e.setSelections(i,null,Lo):(t.prevInput="",t.input.value=r.join("\n"),jo(t.input)),Yn=r}n.type=="cut"&&(e.state.cutIncoming=!0)}var t=e.display;mo(t.scroller,"mousedown",Fn(e,ar)),r&&i<11?mo(t.scroller,"dblclick",Fn(e,function(t){if(So(e,t))return;var n=ur(e,t);if(!n||vr(e,t)||or(e.display,t))return;fo(t);var r=e.findWordAt(n);Lt(e.doc,r.anchor,r.head)})):mo(t.scroller,"dblclick",function(t){So(e,t)||fo(t)}),mo(t.lineSpace,"selectstart",function(e){or(t,e)||fo(e)}),b||mo(t.scroller,"contextmenu",function(t){Br(e,t)}),mo(t.scroller,"scroll",function(){t.scroller.clientHeight&&(br(e,t.scroller.scrollTop),wr(e,t.scroller.scrollLeft,!0),yo(e,"scroll",e))}),mo(t.scrollbarV,"scroll",function(){t.scroller.clientHeight&&br(e,t.scrollbarV.scrollTop)}),mo(t.scrollbarH,"scroll",function(){t.scroller.clientHeight&&wr(e,t.scrollbarH.scrollLeft)}),mo(t.scroller,"mousewheel",function(t){xr(e,t)}),mo(t.scroller,"DOMMouseScroll",function(t){xr(e,t)}),mo(t.scrollbarH,"mousedown",n),mo(t.scrollbarV,"mousedown",n),mo(t.wrapper,"scroll",function(){t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),mo(t.input,"keyup",function(t){_r.call(e,t)}),mo(t.input,"input",function(){r&&i>=9&&e.display.inputHasSelection&&(e.display.inputHasSelection=null),Gn(e)}),mo(t.input,"keydown",Fn(e,Or)),mo(t.input,"keypress",Fn(e,Dr)),mo(t.input,"focus",Uo(Pr,e)),mo(t.input,"blur",Uo(Hr,e)),e.options.dragDrop&&(mo(t.scroller,"dragstart",function(t){yr(e,t)}),mo(t.scroller,"dragenter",o),mo(t.scroller,"dragover",o),mo(t.scroller,"drop",Fn(e,gr))),mo(t.scroller,"paste",function(n){if(or(t,n))return;e.state.pasteIncoming=!0,tr(e),Gn(e)}),mo(t.input,"paste",function(){if(s&&!e.state.fakedLastChar&&!(new Date-e.state.lastMiddleDown<200)){var n=t.input.selectionStart,r=t.input.selectionEnd;t.input.value+="$",t.input.selectionEnd=r,t.input.selectionStart=n,e.state.fakedLastChar=!0}e.state.pasteIncoming=!0,Gn(e)}),mo(t.input,"cut",u),mo(t.input,"copy",u),l&&mo(t.sizer,"mouseup",function(){eu()==t.input&&t.input.blur(),tr(e)})}function sr(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,e.setSize()}function or(e,t){for(var n=po(t);n!=e.wrapper;n=n.parentNode)if(!n||n.ignoreEvents||n.parentNode==e.sizer&&n!=e.mover)return!0}function ur(e,t,n,r){var i=e.display;if(!n){var s=po(t);if(s==i.scrollbarH||s==i.scrollbarV||s==i.scrollbarFiller||s==i.gutterFiller)return null}var o,u,a=i.lineSpace.getBoundingClientRect();try{o=t.clientX-a.left,u=t.clientY-a.top}catch(t){return null}var f=En(e,o,u),l;if(r&&f.xRel==1&&(l=qs(e.doc,f.line).text).length==f.ch){var c=_o(l,l.length,e.options.tabSize)-l.length;f=pt(f.line,Math.max(0,Math.round((o-Yt(e.display).left)/Nn(e.display))-c))}return f}function ar(e){if(So(this,e))return;var t=this,n=t.display;n.shift=e.shiftKey;if(or(n,e)){s||(n.scroller.draggable=!1,setTimeout(function(){n.scroller.draggable=!0},100));return}if(vr(t,e))return;var r=ur(t,e);window.focus();switch(vo(e)){case 1:r?cr(t,e,r):po(e)==n.scroller&&fo(e);break;case 2:s&&(t.state.lastMiddleDown=+(new Date)),r&&Lt(t.doc,r),setTimeout(Uo(tr,t),20),fo(e);break;case 3:b&&Br(t,e)}}function cr(e,t,n){setTimeout(Uo(nr,e),0);var r=+(new Date),i;lr&&lr.time>r-400&&dt(lr.pos,n)==0?i="triple":fr&&fr.time>r-400&&dt(fr.pos,n)==0?(i="double",lr={time:r,pos:n}):(i="single",fr={time:r,pos:n});var s=e.doc.sel,o=v?t.metaKey:t.ctrlKey;e.options.dragDrop&&fu&&!rr(e)&&i=="single"&&s.contains(n)>-1&&s.somethingSelected()?hr(e,t,n,o):pr(e,t,n,i,o)}function hr(e,t,n,o){var u=e.display,a=Fn(e,function(f){s&&(u.scroller.draggable=!1),e.state.draggingText=!1,go(document,"mouseup",a),go(u.scroller,"drop",a),Math.abs(t.clientX-f.clientX)+Math.abs(t.clientY-f.clientY)<10&&(fo(f),o||Lt(e.doc,n),tr(e),r&&i==9&&setTimeout(function(){document.body.focus(),tr(e)},20))});s&&(u.scroller.draggable=!0),e.state.draggingText=a,u.scroller.dragDrop&&u.scroller.dragDrop(),mo(document,"mouseup",a),mo(u.scroller,"drop",a)}function pr(e,t,n,r,i){function p(t){if(dt(h,t)==0)return;h=t;if(r=="rect"){var i=[],s=e.options.tabSize,l=_o(qs(o,n.line).text,n.ch,s),c=_o(qs(o,t.line).text,t.ch,s),p=Math.min(l,c),d=Math.max(l,c);for(var v=Math.min(n.line,t.line),m=Math.min(e.lastLine(),Math.max(n.line,t.line));v<=m;v++){var g=qs(o,v).text,y=Do(g,p,s);p==d?i.push(new bt(pt(v,y),pt(v,y))):g.length>y&&i.push(new bt(pt(v,y),pt(v,Do(g,d,s))))}i.length||i.push(new bt(n,n)),Pt(o,wt(f.ranges.slice(0,a).concat(i),a),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b=u,w=b.anchor,E=t;if(r!="single"){if(r=="double")var S=e.findWordAt(t);else var S=new bt(pt(t.line,0),xt(o,pt(t.line+1,0)));dt(S.anchor,w)>0?(E=S.head,w=gt(b.from(),S.anchor)):(E=S.anchor,w=mt(b.to(),S.head))}var i=f.ranges.slice(0);i[a]=new bt(xt(o,w),E),Pt(o,wt(i,a),Ao)}}function m(t){var n=++v,i=ur(e,t,!0,r=="rect");if(!i)return;if(dt(i,h)!=0){nr(e),p(i);var u=q(s,o);(i.line>=u.to||i.line<u.from)&&setTimeout(Fn(e,function(){v==n&&m(t)}),150)}else{var a=t.clientY<d.top?-20:t.clientY>d.bottom?20:0;a&&setTimeout(Fn(e,function(){if(v!=n)return;s.scroller.scrollTop+=a,m(t)}),50)}}function g(t){v=Infinity,fo(t),tr(e),go(document,"mousemove",y),go(document,"mouseup",b),o.history.lastSelOrigin=null}var s=e.display,o=e.doc;fo(t);var u,a,f=o.sel;i&&!t.shiftKey?(a=o.sel.contains(n),a>-1?u=o.sel.ranges[a]:u=new bt(n,n)):u=o.sel.primary();if(t.altKey)r="rect",i||(u=new bt(n,n)),n=ur(e,t,!0,!0),a=-1;else if(r=="double"){var l=e.findWordAt(n);e.display.shift||o.extend?u=kt(o,u,l.anchor,l.head):u=l}else if(r=="triple"){var c=new bt(pt(n.line,0),xt(o,pt(n.line+1,0)));e.display.shift||o.extend?u=kt(o,u,c.anchor,c.head):u=c}else u=kt(o,u,n);i?a>-1?Ot(o,a,u,Ao):(a=o.sel.ranges.length,Pt(o,wt(o.sel.ranges.concat([u]),a),{scroll:!1,origin:"*mouse"})):(a=0,Pt(o,new yt([u],0),Ao),f=o.sel);var h=n,d=s.wrapper.getBoundingClientRect(),v=0,y=Fn(e,function(e){vo(e)?m(e):g(e)}),b=Fn(e,g);mo(document,"mousemove",y),mo(document,"mouseup",b)}function dr(e,t,n,r,i){try{var s=t.clientX,o=t.clientY}catch(t){return!1}if(s>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&fo(t);var u=e.display,a=u.lineDiv.getBoundingClientRect();if(o>a.bottom||!To(e,n))return co(t);o-=a.top-u.viewOffset;for(var f=0;f<e.options.gutters.length;++f){var l=u.gutters.childNodes[f];if(l&&l.getBoundingClientRect().right>=s){var c=Xs(e.doc,o),h=e.options.gutters[f];return i(e,n,e,c,h,t),co(t)}}}function vr(e,t){return dr(e,t,"gutterClick",!0,wo)}function gr(e){var t=this;if(So(t,e)||or(t.display,e))return;fo(e),r&&(mr=+(new Date));var n=ur(t,e,!0),i=e.dataTransfer.files;if(!n||rr(t))return;if(i&&i.length&&window.FileReader&&window.File){var s=i.length,o=Array(s),u=0,a=function(e,r){var i=new FileReader;i.onload=Fn(t,function(){o[r]=i.result;if(++u==s){n=xt(t.doc,n);var e={from:n,to:n,text:mu(o.join("\n")),origin:"paste"};Wr(t.doc,e),Dt(t.doc,Et(n,Fr(e)))}}),i.readAsText(e)};for(var f=0;f<s;++f)a(i[f],f)}else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1){t.state.draggingText(e),setTimeout(Uo(tr,t),20);return}try{var o=e.dataTransfer.getData("Text");if(o){if(t.state.draggingText&&(v?!e.metaKey:!e.ctrlKey))var l=t.listSelections();Ht(t.doc,Et(n,n));if(l)for(var f=0;f<l.length;++f)Qr(t.doc,"",l[f].anchor,l[f].head,"drag");t.replaceSelection(o,"around","paste"),tr(t)}}catch(e){}}}function yr(e,t){if(r&&(!e.state.draggingText||+(new Date)-mr<100)){ho(t);return}if(So(e,t)||or(e.display,t))return;t.dataTransfer.setData("Text",e.getSelection());if(t.dataTransfer.setDragImage&&!f){var n=Ko("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",a&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),a&&n.parentNode.removeChild(n)}}function br(t,n){if(Math.abs(t.doc.scrollTop-n)<2)return;t.doc.scrollTop=n,e||J(t,{top:n}),t.display.scroller.scrollTop!=n&&(t.display.scroller.scrollTop=n),t.display.scrollbarV.scrollTop!=n&&(t.display.scrollbarV.scrollTop=n),e&&J(t),Vt(t,100)}function wr(e,t,n){if(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)return;t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,R(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t)}function xr(t,n){var r=n.wheelDeltaX,i=n.wheelDeltaY;r==null&&n.detail&&n.axis==n.HORIZONTAL_AXIS&&(r=n.detail),i==null&&n.detail&&n.axis==n.VERTICAL_AXIS?i=n.detail:i==null&&(i=n.wheelDelta);var o=t.display,u=o.scroller;if(!(r&&u.scrollWidth>u.clientWidth||i&&u.scrollHeight>u.clientHeight))return;if(i&&v&&s)e:for(var f=n.target,l=o.view;f!=u;f=f.parentNode)for(var c=0;c<l.length;c++)if(l[c].node==f){t.display.currentWheelTarget=f;break e}if(r&&!e&&!a&&Sr!=null){i&&br(t,Math.max(0,Math.min(u.scrollTop+i*Sr,u.scrollHeight-u.clientHeight))),wr(t,Math.max(0,Math.min(u.scrollLeft+r*Sr,u.scrollWidth-u.clientWidth))),fo(n),o.wheelStartX=null;return}if(i&&Sr!=null){var h=i*Sr,p=t.doc.scrollTop,d=p+o.wrapper.clientHeight;h<0?p=Math.max(0,p+h-50):d=Math.min(t.doc.height,d+h+50),J(t,{top:p,bottom:d})}Er<20&&(o.wheelStartX==null?(o.wheelStartX=u.scrollLeft,o.wheelStartY=u.scrollTop,o.wheelDX=r,o.wheelDY=i,setTimeout(function(){if(o.wheelStartX==null)return;var e=u.scrollLeft-o.wheelStartX,t=u.scrollTop-o.wheelStartY,n=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null;if(!n)return;Sr=(Sr*Er+n)/(Er+1),++Er},200)):(o.wheelDX+=r,o.wheelDY+=i))}function Tr(e,t,n){if(typeof t=="string"){t=wi[t];if(!t)return!1}e.display.pollingFast&&Zn(e)&&(e.display.pollingFast=!1);var r=e.display.shift,i=!1;try{rr(e)&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=ko}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}function Nr(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function kr(e,t){var n=Si(e.options.keyMap),r=n.auto;clearTimeout(Cr),r&&!Ti(t)&&(Cr=setTimeout(function(){Si(e.options.keyMap)==n&&(e.options.keyMap=r.call?r.call(null,e):r,A(e))},50));var i=Ni(t,!0),s=!1;if(!i)return!1;var o=Nr(e);return t.shiftKey?s=xi("Shift-"+i,o,function(t){return Tr(e,t,!0)})||xi(i,o,function(t){if(typeof t=="string"?/^go[A-Z]/.test(t):t.motion)return Tr(e,t)}):s=xi(i,o,function(t){return Tr(e,t)}),s&&(fo(t),Xt(e),wo(e,"keyHandled",e,i,t)),s}function Lr(e,t,n){var r=xi("'"+n+"'",Nr(e),function(t){return Tr(e,t,!0)});return r&&(fo(t),Xt(e),wo(e,"keyHandled",e,"'"+n+"'",t)),r}function Or(e){var t=this;nr(t);if(So(t,e))return;r&&i<11&&e.keyCode==27&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=n==16||e.shiftKey;var s=kr(t,e);a&&(Ar=s?n:null,!s&&n==88&&!yu&&(v?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),n==18&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&Mr(t)}function Mr(e){function n(e){if(e.keyCode==18||!e.altKey)nu(t,"CodeMirror-crosshair"),go(document,"keyup",n),go(document,"mouseover",n)}var t=e.display.lineDiv;ru(t,"CodeMirror-crosshair"),mo(document,"keyup",n),mo(document,"mouseover",n)}function _r(e){e.keyCode==16&&(this.doc.sel.shift=!1),So(this,e)}function Dr(e){var t=this;if(So(t,e)||e.ctrlKey&&!e.altKey||v&&e.metaKey)return;var n=e.keyCode,s=e.charCode;if(a&&n==Ar){Ar=null,fo(e);return}if((a&&(!e.which||e.which<10)||l)&&kr(t,e))return;var o=String.fromCharCode(s==null?n:s);if(Lr(t,e,o))return;r&&i>=9&&(t.display.inputHasSelection=null),Gn(t)}function Pr(e){if(e.options.readOnly=="nocursor")return;e.state.focused||(yo(e,"focus",e),e.state.focused=!0,ru(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(er(e),s&&setTimeout(Uo(er,e,!0),0))),Qn(e),Xt(e)}function Hr(e){e.state.focused&&(yo(e,"blur",e),e.state.focused=!1,nu(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150)}function Br(e,t){function h(){if(n.input.selectionStart!=null){var t=e.somethingSelected(),r=n.input.value="​"+(t?n.input.value:"");n.prevInput=t?"":"​",n.input.selectionStart=1,n.input.selectionEnd=r.length,n.selForContextMenu=e.doc.sel}}function p(){n.inputDiv.style.position="relative",n.input.style.cssText=l,r&&i<9&&(n.scrollbarV.scrollTop=n.scroller.scrollTop=u),Qn(e);if(n.input.selectionStart!=null){(!r||r&&i<9)&&h();var t=0,s=function(){n.selForContextMenu==e.doc.sel&&n.input.selectionStart==0?Fn(e,wi.selectAll)(e):t++<10?n.detectingSelectAll=setTimeout(s,500):er(e)};n.detectingSelectAll=setTimeout(s,200)}}if(So(e,t,"contextmenu"))return;var n=e.display;if(or(n,t)||jr(e,t))return;var o=ur(e,t),u=n.scroller.scrollTop;if(!o||a)return;var f=e.options.resetSelectionOnContextMenu;f&&e.doc.sel.contains(o)==-1&&Fn(e,Pt)(e.doc,Et(o),Lo);var l=n.input.style.cssText;n.inputDiv.style.position="absolute",n.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: "+(r?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(s)var c=window.scrollY;tr(e),s&&window.scrollTo(null,c),er(e),e.somethingSelected()||(n.input.value=n.prevInput=" "),n.selForContextMenu=e.doc.sel,clearTimeout(n.detectingSelectAll),r&&i>=9&&h();if(b){ho(t);var d=function(){go(window,"mouseup",d),setTimeout(p,20)};mo(window,"mouseup",d)}else setTimeout(p,50)}function jr(e,t){return To(e,"gutterContextMenu")?dr(e,t,"gutterContextMenu",!1,yo):!1}function Ir(e,t){if(dt(e,t.from)<0)return e;if(dt(e,t.to)<=0)return Fr(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Fr(t).ch-t.to.ch),pt(n,r)}function qr(e,t){var n=[];for(var r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new bt(Ir(i.anchor,t),Ir(i.head,t)))}return wt(n,e.sel.primIndex)}function Rr(e,t,n){return e.line==t.line?pt(n.line,e.ch-t.ch+n.ch):pt(n.line+(e.line-t.line),e.ch)}function Ur(e,t,n){var r=[],i=pt(e.first,0),s=i;for(var o=0;o<t.length;o++){var u=t[o],a=Rr(u.from,i,s),f=Rr(Fr(u),i,s);i=u.to,s=f;if(n=="around"){var l=e.sel.ranges[o],c=dt(l.head,l.anchor)<0;r[o]=new bt(c?f:a,c?a:f)}else r[o]=new bt(a,a)}return new yt(r,e.sel.primIndex)}function zr(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return n&&(r.update=function(t,n,r,i){t&&(this.from=xt(e,t)),n&&(this.to=xt(e,n)),r&&(this.text=r),i!==undefined&&(this.origin=i)}),yo(e,"beforeChange",e,r),e.cm&&yo(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Wr(e,t,n){if(e.cm){if(!e.cm.curOp)return Fn(e.cm,Wr)(e,t,n);if(e.cm.state.suppressEdits)return}if(To(e,"beforeChange")||e.cm&&To(e.cm,"beforeChange")){t=zr(e,t,!0);if(!t)return}var r=w&&!n&&Wi(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)Xr(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text});else Xr(e,t)}function Xr(e,t){if(t.text.length==1&&t.text[0]==""&&dt(t.from,t.to)==0)return;var n=qr(e,t);Ys(e,t,n,e.cm?e.cm.curOp.id:NaN),Jr(e,t,n,Ri(e,t));var r=[];Fs(e,function(e,n){!n&&Fo(r,e.history)==-1&&(ao(e.history,t),r.push(e.history)),Jr(e,t,null,Ri(e,t))})}function Vr(e,t,n){if(e.cm&&e.cm.state.suppressEdits)return;var r=e.history,i,s=e.sel,o=t=="undo"?r.done:r.undone,u=t=="undo"?r.undone:r.done;for(var a=0;a<o.length;a++){i=o[a];if(n?i.ranges&&!i.equals(e.sel):!i.ranges)break}if(a==o.length)return;r.lastOrigin=r.lastSelOrigin=null;for(;;){i=o.pop();if(!i.ranges)break;to(i,u);if(n&&!i.equals(e.sel)){Pt(e,i,{clearRedo:!1});return}s=i}var f=[];to(s,u),u.push({changes:f,generation:r.generation}),r.generation=i.generation||++r.maxGeneration;var l=To(e,"beforeChange")||e.cm&&To(e.cm,"beforeChange");for(var a=i.changes.length-1;a>=0;--a){var c=i.changes[a];c.origin=t;if(l&&!zr(e,c,!1)){o.length=0;return}f.push(Ks(e,c));var h=a?qr(e,c):Bo(o);Jr(e,c,h,zi(e,c)),!a&&e.cm&&e.cm.scrollIntoView({from:c.from,to:Fr(c)});var p=[];Fs(e,function(e,t){!t&&Fo(p,e.history)==-1&&(ao(e.history,c),p.push(e.history)),Jr(e,c,null,zi(e,c))})}}function $r(e,t){if(t==0)return;e.first+=t,e.sel=new yt(Io(e.sel.ranges,function(e){return new bt(pt(e.anchor.line+t,e.anchor.ch),pt(e.head.line+t,e.head.ch))}),e.sel.primIndex);if(e.cm){zn(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)Wn(e.cm,r,"gutter")}}function Jr(e,t,n,r){if(e.cm&&!e.cm.curOp)return Fn(e.cm,Jr)(e,t,n,r);if(t.to.line<e.first){$r(e,t.text.length-1-(t.to.line-t.from.line));return}if(t.from.line>e.lastLine())return;if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);$r(e,i),t={from:pt(e.first,0),to:pt(t.to.line+i,t.to.ch),text:[Bo(t.text)],origin:t.origin}}var s=e.lastLine();t.to.line>s&&(t={from:t.from,to:pt(s,qs(e,s).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Rs(e,t.from,t.to),n||(n=qr(e,t)),e.cm?Kr(e.cm,t,r):Ms(e,t,r),Ht(e,n,Lo)}function Kr(e,t,n){var r=e.doc,i=e.display,s=t.from,o=t.to,u=!1,a=s.line;e.options.lineWrapping||(a=Ws(es(qs(r,s.line))),r.iter(a,o.line+1,function(e){if(e==i.maxLine)return u=!0,!0})),r.sel.contains(t.from,t.to)>-1&&xo(e),Ms(r,t,n,k(e)),e.options.lineWrapping||(r.iter(a,s.line+t.text.length,function(e){var t=P(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,u=!1)}),u&&(e.curOp.updateMaxLine=!0)),r.frontier=Math.min(r.frontier,s.line),Vt(e,400);var f=t.text.length-(o.line-s.line)-1;s.line==o.line&&t.text.length==1&&!Os(e.doc,t)?Wn(e,s.line,"text"):zn(e,s.line,o.line+1,f);var l=To(e,"changes"),c=To(e,"change");if(c||l){var h={from:s,to:o,text:t.text,removed:t.removed,origin:t.origin};c&&wo(e,"change",e,h),l&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}function Qr(e,t,n,r,i){r||(r=n);if(dt(r,n)<0){var s=r;r=n,n=s}typeof t=="string"&&(t=mu(t)),Wr(e,{from:n,to:r,text:t,origin:i})}function Gr(e,t){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1);if(i!=null&&!h){var s=Ko("div","​",null,"position: absolute; top: "+(t.top-n.viewOffset-Qt(e.display))+"px; height: "+(t.bottom-t.top+Co)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(s),s.scrollIntoView(i),e.display.lineSpace.removeChild(s)}}function Yr(e,t,n,r){r==null&&(r=0);for(;;){var i=!1,s=yn(e,t),o=!n||n==t?s:yn(e,n),u=ei(e,Math.min(s.left,o.left),Math.min(s.top,o.top)-r,Math.max(s.left,o.left),Math.max(s.bottom,o.bottom)+r),a=e.doc.scrollTop,f=e.doc.scrollLeft;u.scrollTop!=null&&(br(e,u.scrollTop),Math.abs(e.doc.scrollTop-a)>1&&(i=!0)),u.scrollLeft!=null&&(wr(e,u.scrollLeft),Math.abs(e.doc.scrollLeft-f)>1&&(i=!0));if(!i)return s}}function Zr(e,t,n,r,i){var s=ei(e,t,n,r,i);s.scrollTop!=null&&br(e,s.scrollTop),s.scrollLeft!=null&&wr(e,s.scrollLeft)}function ei(e,t,n,r,i){var s=e.display,o=Tn(e.display);n<0&&(n=0);var u=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:s.scroller.scrollTop,a=s.scroller.clientHeight-Co,f={};i-n>a&&(i=n+a);var l=e.doc.height+Gt(s),c=n<o,h=i>l-o;if(n<u)f.scrollTop=c?0:n;else if(i>u+a){var p=Math.min(n,(h?l:i)-a);p!=u&&(f.scrollTop=p)}var d=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:s.scroller.scrollLeft,v=s.scroller.clientWidth-Co-s.gutters.offsetWidth,m=r-t>v;return m&&(r=n+a),t<10?f.scrollLeft=0:t<d?f.scrollLeft=Math.max(0,t-(m?0:10)):r>v+d-3&&(f.scrollLeft=r+(m?0:10)-v),f}function ti(e,t,n){(t!=null||n!=null)&&ri(e),t!=null&&(e.curOp.scrollLeft=(e.curOp.scrollLeft==null?e.doc.scrollLeft:e.curOp.scrollLeft)+t),n!=null&&(e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+n)}function ni(e){ri(e);var t=e.getCursor(),n=t,r=t;e.options.lineWrapping||(n=t.ch?pt(t.line,t.ch-1):t,r=pt(t.line,t.ch+1)),e.curOp.scrollToPos={from:n,to:r,margin:e.options.cursorScrollMargin,isCursor:!0}}function ri(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=bn(e,t.from),r=bn(e,t.to),i=ei(e,Math.min(n.left,r.left),Math.min(n.top,r.top)-t.margin,Math.max(n.right,r.right),Math.max(n.bottom,r.bottom)+t.margin);e.scrollTo(i.scrollLeft,i.scrollTop)}}function ii(e,t,n,r){var i=e.doc,s;n==null&&(n="add"),n=="smart"&&(i.mode.indent?s=Kt(e,t):n="prev");var o=e.options.tabSize,u=qs(i,t),a=_o(u.text,null,o);u.stateAfter&&(u.stateAfter=null);var f=u.text.match(/^\s*/)[0],l;if(!r&&!/\S/.test(u.text))l=0,n="not";else if(n=="smart"){l=i.mode.indent(s,u.text.slice(f.length),u.text);if(l==ko||l>150){if(!r)return;n="prev"}}n=="prev"?t>i.first?l=_o(qs(i,t-1).text,null,o):l=0:n=="add"?l=a+e.options.indentUnit:n=="subtract"?l=a-e.options.indentUnit:typeof n=="number"&&(l=a+n),l=Math.max(0,l);var c="",h=0;if(e.options.indentWithTabs)for(var p=Math.floor(l/o);p;--p)h+=o,c+="	";h<l&&(c+=Ho(l-h));if(c!=f)Qr(i,c,pt(t,0),pt(t,f.length),"+input");else for(var p=0;p<i.sel.ranges.length;p++){var d=i.sel.ranges[p];if(d.head.line==t&&d.head.ch<f.length){var h=pt(t,f.length);Ot(i,p,new bt(h,h));break}}u.stateAfter=null}function si(e,t,n,r){var i=t,s=t;return typeof t=="number"?s=qs(e,St(e,t)):i=Ws(t),i==null?null:(r(s,i)&&e.cm&&Wn(e.cm,i,n),s)}function oi(e,t){var n=e.doc.sel.ranges,r=[];for(var i=0;i<n.length;i++){var s=t(n[i]);while(r.length&&dt(s.from,Bo(r).to)<=0){var o=r.pop();if(dt(o.from,s.from)<0){s.from=o.from;break}}r.push(s)}jn(e,function(){for(var t=r.length-1;t>=0;t--)Qr(e.doc,"",r[t].from,r[t].to,"+delete");ni(e)})}function ui(e,t,n,r,i){function l(){var t=s+n;return t<e.first||t>=e.first+e.size?f=!1:(s=t,a=qs(e,t))}function c(e){var t=(i?Pu:Hu)(a,o,n,!0);if(t==null){if(!!e||!l())return f=!1;i?o=(n<0?Cu:Nu)(a):o=n<0?a.text.length:0}else o=t;return!0}var s=t.line,o=t.ch,u=n,a=qs(e,s),f=!0;if(r=="char")c();else if(r=="column")c(!0);else if(r=="word"||r=="group"){var h=null,p=r=="group",d=e.cm&&e.cm.getHelper(t,"wordChars");for(var v=!0;;v=!1){if(n<0&&!c(!v))break;var m=a.text.charAt(o)||"\n",g=Xo(m,d)?"w":p&&m=="\n"?"n":!p||/\s/.test(m)?null:"p";p&&!v&&!g&&(g="s");if(h&&h!=g){n<0&&(n=1,c());break}g&&(h=g);if(n>0&&!c(!v))break}}var y=It(e,pt(s,o),u,!0);return f||(y.hitSide=!0),y}function ai(e,t,n,r){var i=e.doc,s=t.left,o;if(r=="page"){var u=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);o=t.top+n*(u-(n<0?1.5:.5)*Tn(e.display))}else r=="line"&&(o=n>0?t.bottom+3:t.top-3);for(;;){var a=En(e,s,o);if(!a.outside)break;if(n<0?o<=0:o>=i.height){a.hitSide=!0;break}o+=n*5}return a}function ci(e,t,n,r){S.defaults[e]=t,n&&(li[e]=r?function(e,t,r){r!=hi&&n(e,t,r)}:n)}function Si(e){return typeof e=="string"?Ei[e]:e}function Ai(e,t,n,r,i){if(r&&r.shared)return Mi(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Fn(e.cm,Ai)(e,t,n,r,i);var s=new ki(e,i),o=dt(t,n);r&&Ro(r,s,!1);if(o>0||o==0&&s.clearWhenEmpty!==!1)return s;s.replacedWith&&(s.collapsed=!0,s.widgetNode=Ko("span",[s.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||(s.widgetNode.ignoreEvents=!0),r.insertLeft&&(s.widgetNode.insertLeft=!0));if(s.collapsed){if(Zi(e,t.line,t,n,s)||t.line!=n.line&&Zi(e,n.line,t,n,s))throw new Error("Inserting collapsed marker partially overlapping an existing one");E=!0}s.addToHistory&&Ys(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var u=t.line,a=e.cm,f;e.iter(u,n.line+1,function(e){a&&s.collapsed&&!a.options.lineWrapping&&es(e)==a.display.maxLine&&(f=!0),s.collapsed&&u!=t.line&&zs(e,0),Fi(e,new Hi(s,u==t.line?t.ch:null,u==n.line?n.ch:null)),++u}),s.collapsed&&e.iter(t.line,n.line+1,function(t){is(e,t)&&zs(t,0)}),s.clearOnEnter&&mo(s,"beforeCursorEnter",function(){s.clear()}),s.readOnly&&(w=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),s.collapsed&&(s.id=++Li,s.atomic=!0);if(a){f&&(a.curOp.updateMaxLine=!0);if(s.collapsed)zn(a,t.line,n.line+1);else if(s.className||s.title||s.startStyle||s.endStyle)for(var l=t.line;l<=n.line;l++)Wn(a,l,"text");s.atomic&&jt(a.doc),wo(a,"markerAdded",a,s)}return s}function Mi(e,t,n,r,i){r=Ro(r),r.shared=!1;var s=[Ai(e,t,n,r,i)],o=s[0],u=r.widgetNode;return Fs(e,function(e){u&&(r.widgetNode=u.cloneNode(!0)),s.push(Ai(e,xt(e,t),xt(e,n),r,i));for(var a=0;a<e.linked.length;++a)if(e.linked[a].isParent)return;o=Bo(s)}),new Oi(s,o)}function _i(e){return e.findMarks(pt(e.first,0),e.clipPos(pt(e.lastLine())),function(e){return e.parent})}function Di(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),s=e.clipPos(i.from),o=e.clipPos(i.to);if(dt(s,o)){var u=Ai(e,s,o,r.primary,r.primary.type);r.markers.push(u),u.parent=r}}}function Pi(e){for(var t=0;t<e.length;t++){var n=e[t],r=[n.primary.doc];Fs(n.primary.doc,function(e){r.push(e)});for(var i=0;i<n.markers.length;i++){var s=n.markers[i];Fo(r,s.doc)==-1&&(s.parent=null,n.markers.splice(i--,1))}}}function Hi(e,t,n){this.marker=e,this.from=t,this.to=n}function Bi(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function ji(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Fi(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Ii(e,t,n){if(e)for(var r=0,i;r<e.length;++r){var s=e[r],o=s.marker,u=s.from==null||(o.inclusiveLeft?s.from<=t:s.from<t);if(u||s.from==t&&o.type=="bookmark"&&(!n||!s.marker.insertLeft)){var a=s.to==null||(o.inclusiveRight?s.to>=t:s.to>t);(i||(i=[])).push(new Hi(o,s.from,a?null:s.to))}}return i}function qi(e,t,n){if(e)for(var r=0,i;r<e.length;++r){var s=e[r],o=s.marker,u=s.to==null||(o.inclusiveRight?s.to>=t:s.to>t);if(u||s.from==t&&o.type=="bookmark"&&(!n||s.marker.insertLeft)){var a=s.from==null||(o.inclusiveLeft?s.from<=t:s.from<t);(i||(i=[])).push(new Hi(o,a?null:s.from-t,s.to==null?null:s.to-t))}}return i}function Ri(e,t){var n=Nt(e,t.from.line)&&qs(e,t.from.line).markedSpans,r=Nt(e,t.to.line)&&qs(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,s=t.to.ch,o=dt(t.from,t.to)==0,u=Ii(n,i,o),a=qi(r,s,o),f=t.text.length==1,l=Bo(t.text).length+(f?i:0);if(u)for(var c=0;c<u.length;++c){var h=u[c];if(h.to==null){var p=Bi(a,h.marker);p?f&&(h.to=p.to==null?null:p.to+l):h.to=i}}if(a)for(var c=0;c<a.length;++c){var h=a[c];h.to!=null&&(h.to+=l);if(h.from==null){var p=Bi(u,h.marker);p||(h.from=l,f&&(u||(u=[])).push(h))}else h.from+=l,f&&(u||(u=[])).push(h)}u&&(u=Ui(u)),a&&a!=u&&(a=Ui(a));var d=[u];if(!f){var v=t.text.length-2,m;if(v>0&&u)for(var c=0;c<u.length;++c)u[c].to==null&&(m||(m=[])).push(new Hi(u[c].marker,null,null));for(var c=0;c<v;++c)d.push(m);d.push(a)}return d}function Ui(e){for(var t=0;t<e.length;++t){var n=e[t];n.from!=null&&n.from==n.to&&n.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function zi(e,t){var n=io(e,t),r=Ri(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var s=n[i],o=r[i];if(s&&o)e:for(var u=0;u<o.length;++u){var a=o[u];for(var f=0;f<s.length;++f)if(s[f].marker==a.marker)continue e;s.push(a)}else o&&(n[i]=o)}return n}function Wi(e,t,n){var r=null;e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;n.readOnly&&(!r||Fo(r,n)==-1)&&(r||(r=[])).push(n)}});if(!r)return null;var i=[{from:t,to:n}];for(var s=0;s<r.length;++s){var o=r[s],u=o.find(0);for(var a=0;a<i.length;++a){var f=i[a];if(dt(f.to,u.from)<0||dt(f.from,u.to)>0)continue;var l=[a,1],c=dt(f.from,u.from),h=dt(f.to,u.to);(c<0||!o.inclusiveLeft&&!c)&&l.push({from:f.from,to:u.from}),(h>0||!o.inclusiveRight&&!h)&&l.push({from:u.to,to:f.to}),i.splice.apply(i,l),a+=l.length-1}}return i}function Xi(e){var t=e.markedSpans;if(!t)return;for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}function Vi(e,t){if(!t)return;for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}function $i(e){return e.inclusiveLeft?-1:0}function Ji(e){return e.inclusiveRight?1:0}function Ki(e,t){var n=e.lines.length-t.lines.length;if(n!=0)return n;var r=e.find(),i=t.find(),s=dt(r.from,i.from)||$i(e)-$i(t);if(s)return-s;var o=dt(r.to,i.to)||Ji(e)-Ji(t);return o?o:t.id-e.id}function Qi(e,t){var n=E&&e.markedSpans,r;if(n)for(var i,s=0;s<n.length;++s)i=n[s],i.marker.collapsed&&(t?i.from:i.to)==null&&(!r||Ki(r,i.marker)<0)&&(r=i.marker);return r}function Gi(e){return Qi(e,!0)}function Yi(e){return Qi(e,!1)}function Zi(e,t,n,r,i){var s=qs(e,t),o=E&&s.markedSpans;if(o)for(var u=0;u<o.length;++u){var a=o[u];if(!a.marker.collapsed)continue;var f=a.marker.find(0),l=dt(f.from,n)||$i(a.marker)-$i(i),c=dt(f.to,r)||Ji(a.marker)-Ji(i);if(l>=0&&c<=0||l<=0&&c>=0)continue;if(l<=0&&(dt(f.to,n)>0||a.marker.inclusiveRight&&i.inclusiveLeft)||l>=0&&(dt(f.from,r)<0||a.marker.inclusiveLeft&&i.inclusiveRight))return!0}}function es(e){var t;while(t=Gi(e))e=t.find(-1,!0).line;return e}function ts(e){var t,n;while(t=Yi(e))e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function ns(e,t){var n=qs(e,t),r=es(n);return n==r?t:Ws(r)}function rs(e,t){if(t>e.lastLine())return t;var n=qs(e,t),r;if(!is(e,n))return t;while(r=Yi(n))n=r.find(1,!0).line;return Ws(n)+1}function is(e,t){var n=E&&t.markedSpans;if(n)for(var r,i=0;i<n.length;++i){r=n[i];if(!r.marker.collapsed)continue;if(r.from==null)return!0;if(r.marker.widgetNode)continue;if(r.from==0&&r.marker.inclusiveLeft&&ss(e,t,r))return!0}}function ss(e,t,n){if(n.to==null){var r=n.marker.find(1,!0);return ss(e,r.line,Bi(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i,s=0;s<t.markedSpans.length;++s){i=t.markedSpans[s];if(i.marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(i.to==null||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&ss(e,t,i))return!0}}function us(e,t,n){Vs(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&ti(e,null,n)}function as(e){if(e.height!=null)return e.height;if(!Zo(document.body,e.node)){var t="position: relative;";e.coverGutter&&(t+="margin-left: -"+e.cm.getGutterElement().offsetWidth+"px;"),Yo(e.cm.display.measure,Ko("div",[e.node],null,t))}return e.height=e.node.offsetHeight}function fs(e,t,n,r){var i=new os(e,n,r);return i.noHScroll&&(e.display.alignWidgets=!0),si(e.doc,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);i.insertAt==null?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t;if(!is(e.doc,t)){var r=Vs(t)<e.doc.scrollTop;zs(t,t.height+as(i)),r&&ti(e,null,i.height),e.curOp.forceUpdate=!0}return!0}),i}function cs(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),Xi(e),Vi(e,n);var i=r?r(e):1;i!=e.height&&zs(e,i)}function hs(e){e.parent=null,Xi(e)}function ps(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";t[r]==null?t[r]=n[2]:(new RegExp("(?:^|s)"+n[2]+"(?:$|s)")).test(t[r])||(t[r]+=" "+n[2])}return e}function ds(e,t){if(e.blankLine)return e.blankLine(t);if(!e.innerMode)return;var n=S.innerMode(e,t);if(n.mode.blankLine)return n.mode.blankLine(n.state)}function vs(e,t,n){for(var r=0;r<10;r++){var i=e.token(t,n);if(t.pos>t.start)return i}throw new Error("Mode "+e.name+" failed to advance stream.")}function ms(e,t,n,r,i,s,o){var u=n.flattenSpans;u==null&&(u=e.options.flattenSpans);var a=0,f=null,l=new Ci(t,e.options.tabSize),c;t==""&&ps(ds(n,r),s);while(!l.eol()){l.pos>e.options.maxHighlightLength?(u=!1,o&&bs(e,t,r,l.pos),l.pos=t.length,c=null):c=ps(vs(n,l,r),s);if(e.options.addModeClass){var h=S.innerMode(n,r).mode.name;h&&(c="m-"+(c?h+" "+c:h))}if(!u||f!=c)a<l.start&&i(l.start,f),a=l.start,f=c;l.start=l.pos}while(a<l.pos){var p=Math.min(l.pos,a+5e4);i(p,f),a=p}}function gs(e,t,n,r){var i=[e.state.modeGen],s={};ms(e,t.text,e.doc.mode,n,function(e,t){i.push(e,t)},s,r);for(var o=0;o<e.state.overlays.length;++o){var u=e.state.overlays[o],a=1,f=0;ms(e,t.text,u.mode,!0,function(e,t){var n=a;while(f<e){var r=i[a];r>e&&i.splice(a,1,e,i[a+1],r),a+=2,f=Math.min(e,r)}if(!t)return;if(u.opaque)i.splice(n,a-n,e,"cm-overlay "+t),a=n+2;else for(;n<a;n+=2){var s=i[n+1];i[n+1]=(s?s+" ":"")+"cm-overlay "+t}},s)}return{styles:i,classes:s.bgClass||s.textClass?s:null}}function ys(e,t){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=gs(e,t,t.stateAfter=Kt(e,Ws(t)));t.styles=n.styles,n.classes?t.styleClasses=n.classes:t.styleClasses&&(t.styleClasses=null)}return t.styles}function bs(e,t,n,r){var i=e.doc.mode,s=new Ci(t,e.options.tabSize);s.start=s.pos=r||0,t==""&&ds(i,n);while(!s.eol()&&s.pos<=e.options.maxHighlightLength)vs(i,s,n),s.start=s.pos}function Ss(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Es:ws;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function xs(e,t){var n=Ko("span",null,null,s?"padding-right: .1px":null),i={pre:Ko("pre",[n]),content:n,col:0,pos:0,cm:e};t.measure={};for(var o=0;o<=(t.rest?t.rest.length:0);o++){var u=o?t.rest[o-1]:t.line,a;i.pos=0,i.addToken=Ns,(r||s)&&e.getOption("lineWrapping")&&(i.addToken=Cs(i.addToken)),vu(e.display.measure)&&(a=$s(u))&&(i.addToken=ks(i.addToken,a)),i.map=[],As(u,i,ys(e,u)),u.styleClasses&&(u.styleClasses.bgClass&&(i.bgClass=iu(u.styleClasses.bgClass,i.bgClass||"")),u.styleClasses.textClass&&(i.textClass=iu(u.styleClasses.textClass,i.textClass||""))),i.map.length==0&&i.map.push(0,0,i.content.appendChild(pu(e.display.measure))),o==0?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return yo(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=iu(i.pre.className,i.textClass||"")),i}function Ts(e){var t=Ko("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t}function Ns(e,t,n,s,o,u){if(!t)return;var a=e.cm.options.specialChars,f=!1;if(!a.test(t)){e.col+=t.length;var l=document.createTextNode(t);e.map.push(e.pos,e.pos+t.length,l),r&&i<9&&(f=!0),e.pos+=t.length}else{var l=document.createDocumentFragment(),c=0;for(;;){a.lastIndex=c;var h=a.exec(t),p=h?h.index-c:t.length-c;if(p){var d=document.createTextNode(t.slice(c,c+p));r&&i<9?l.appendChild(Ko("span",[d])):l.appendChild(d),e.map.push(e.pos,e.pos+p,d),e.col+=p,e.pos+=p}if(!h)break;c+=p+1;if(h[0]=="	"){var v=e.cm.options.tabSize,m=v-e.col%v,d=l.appendChild(Ko("span",Ho(m),"cm-tab"));e.col+=m}else{var d=e.cm.options.specialCharPlaceholder(h[0]);r&&i<9?l.appendChild(Ko("span",[d])):l.appendChild(d),e.col+=1}e.map.push(e.pos,e.pos+1,d),e.pos++}}if(n||s||o||f){var g=n||"";s&&(g+=s),o&&(g+=o);var y=Ko("span",[l],g);return u&&(y.title=u),e.content.appendChild(y)}e.content.appendChild(l)}function Cs(e){function t(e){var t=" ";for(var n=0;n<e.length-2;++n)t+=n%2?" ":" ";return t+=" ",t}return function(n,r,i,s,o,u){e(n,r.replace(/ {3,}/g,t),i,s,o,u)}}function ks(e,t){return function(n,r,i,s,o,u){i=i?i+" cm-force-border":"cm-force-border";var a=n.pos,f=a+r.length;for(;;){for(var l=0;l<t.length;l++){var c=t[l];if(c.to>a&&c.from<=a)break}if(c.to>=f)return e(n,r,i,s,o,u);e(n,r.slice(0,c.to-a),i,s,null,u),s=null,r=r.slice(c.to-a),a=c.to}}}function Ls(e,t,n,r){var i=!r&&n.widgetNode;i&&(e.map.push(e.pos,e.pos+t,i),e.content.appendChild(i)),e.pos+=t}function As(e,t,n){var r=e.markedSpans,i=e.text,s=0;if(!r){for(var o=1;o<n.length;o+=2)t.addToken(t,i.slice(s,s=n[o]),Ss(n[o+1],t.cm.options));return}var u=i.length,a=0,o=1,f="",l,c=0,h,p,d,v,m;for(;;){if(c==a){h=p=d=v="",m=null,c=Infinity;var g=[];for(var y=0;y<r.length;++y){var b=r[y],w=b.marker;b.from<=a&&(b.to==null||b.to>a)?(b.to!=null&&c>b.to&&(c=b.to,p=""),w.className&&(h+=" "+w.className),w.startStyle&&b.from==a&&(d+=" "+w.startStyle),w.endStyle&&b.to==c&&(p+=" "+w.endStyle),w.title&&!v&&(v=w.title),w.collapsed&&(!m||Ki(m.marker,w)<0)&&(m=b)):b.from>a&&c>b.from&&(c=b.from),w.type=="bookmark"&&b.from==a&&w.widgetNode&&g.push(w)}if(m&&(m.from||0)==a){Ls(t,(m.to==null?u+1:m.to)-a,m.marker,m.from==null);if(m.to==null)return}if(!m&&g.length)for(var y=0;y<g.length;++y)Ls(t,0,g[y])}if(a>=u)break;var E=Math.min(u,c);for(;;){if(f){var S=a+f.length;if(!m){var x=S>E?f.slice(0,E-a):f;t.addToken(t,x,l?l+h:h,d,a+x.length==c?p:"",v)}if(S>=E){f=f.slice(E-a),a=E;break}a=S,d=""}f=i.slice(s,s=n[o++]),l=Ss(n[o++],t.cm.options)}}}function Os(e,t){return t.from.ch==0&&t.to.ch==0&&Bo(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Ms(e,t,n,r){function i(e){return n?n[e]:null}function s(e,n,i){cs(e,n,i,r),wo(e,"change",e,t)}var o=t.from,u=t.to,a=t.text,f=qs(e,o.line),l=qs(e,u.line),c=Bo(a),h=i(a.length-1),p=u.line-o.line;if(Os(e,t)){for(var d=0,v=[];d<a.length-1;++d)v.push(new ls(a[d],i(d),r));s(l,l.text,h),p&&e.remove(o.line,p),v.length&&e.insert(o.line,v)}else if(f==l)if(a.length==1)s(f,f.text.slice(0,o.ch)+c+f.text.slice(u.ch),h);else{for(var v=[],d=1;d<a.length-1;++d)v.push(new ls(a[d],i(d),r));v.push(new ls(c+f.text.slice(u.ch),h,r)),s(f,f.text.slice(0,o.ch)+a[0],i(0)),e.insert(o.line+1,v)}else if(a.length==1)s(f,f.text.slice(0,o.ch)+a[0]+l.text.slice(u.ch),i(0)),e.remove(o.line+1,p);else{s(f,f.text.slice(0,o.ch)+a[0],i(0)),s(l,c+l.text.slice(u.ch),h);for(var d=1,v=[];d<a.length-1;++d)v.push(new ls(a[d],i(d),r));p>1&&e.remove(o.line+1,p-1),e.insert(o.line+1,v)}wo(e,"change",e,t)}function _s(e){this.lines=e,this.parent=null;for(var t=0,n=0;t<e.length;++t)e[t].parent=this,n+=e[t].height;this.height=n}function Ds(e){this.children=e;var t=0,n=0;for(var r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}function Fs(e,t,n){function r(e,i,s){if(e.linked)for(var o=0;o<e.linked.length;++o){var u=e.linked[o];if(u.doc==i)continue;var a=s&&u.sharedHist;if(n&&!a)continue;t(u.doc,a),r(u.doc,e,a)}}r(e,null,!0)}function Is(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,L(e),T(e),e.options.lineWrapping||H(e),e.options.mode=t.modeOption,zn(e)}function qs(e,t){t-=e.first;if(t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],s=i.chunkSize();if(t<s){n=i;break}t-=s}return n.lines[t]}function Rs(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var s=e.text;i==n.line&&(s=s.slice(0,n.ch)),i==t.line&&(s=s.slice(t.ch)),r.push(s),++i}),r}function Us(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function zs(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function Ws(e){if(e.parent==null)return null;var t=e.parent,n=Fo(t.lines,e);for(var r=t.parent;r;t=r,r=r.parent)for(var i=0;;++i){if(r.children[i]==t)break;n+=r.children[i].chunkSize()}return n+t.first}function Xs(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],s=i.height;if(t<s){e=i;continue e}t-=s,n+=i.chunkSize()}return n}while(!e.lines);for(var r=0;r<e.lines.length;++r){var o=e.lines[r],u=o.height;if(t<u)break;t-=u}return n+r}function Vs(e){e=es(e);var t=0,n=e.parent;for(var r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var s=n.parent;s;n=s,s=n.parent)for(var r=0;r<s.children.length;++r){var o=s.children[r];if(o==n)break;t+=o.height}return t}function $s(e){var t=e.order;return t==null&&(t=e.order=Bu(e.text)),t}function Js(e){this.done=[],this.undone=[],this.undoDepth=Infinity,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Ks(e,t){var n={from:vt(t.from),to:Fr(t),text:Rs(e,t.from,t.to)};return no(e,n,t.from.line,t.to.line+1),Fs(e,function(e){no(e,n,t.from.line,t.to.line+1)},!0),n}function Qs(e){while(e.length){var t=Bo(e);if(!t.ranges)break;e.pop()}}function Gs(e,t){if(t)return Qs(e.done),Bo(e.done);if(e.done.length&&!Bo(e.done).ranges)return Bo(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),Bo(e.done)}function Ys(e,t,n,r){var i=e.history;i.undone.length=0;var s=+(new Date),o;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&e.cm&&i.lastModTime>s-e.cm.options.historyEventDelay||t.origin.charAt(0)=="*"))&&(o=Gs(i,i.lastOp==r))){var u=Bo(o.changes);dt(t.from,t.to)==0&&dt(t.from,u.to)==0?u.to=Fr(t):o.changes.push(Ks(e,t))}else{var a=Bo(i.done);(!a||!a.ranges)&&to(e.sel,i.done),o={changes:[Ks(e,t)],generation:i.generation},i.done.push(o);while(i.done.length>i.undoDepth)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,u||yo(e,"historyAdded")}function Zs(e,t,n,r){var i=t.charAt(0);return i=="*"||i=="+"&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function eo(e,t,n,r){var i=e.history,s=r&&r.origin;n==i.lastSelOp||s&&i.lastSelOrigin==s&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==s||Zs(e,s,Bo(i.done),t))?i.done[i.done.length-1]=t:to(t,i.done),i.lastSelTime=+(new Date),i.lastSelOrigin=s,i.lastSelOp=n,r&&r.clearRedo!==!1&&Qs(i.undone)}function to(e,t){var n=Bo(t);n&&n.ranges&&n.equals(e)||t.push(e)}function no(e,t,n,r){var i=t["spans_"+e.id],s=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[s]=n.markedSpans),++s})}function ro(e){if(!e)return null;for(var t=0,n;t<e.length;++t)e[t].marker.explicitlyCleared?n||(n=e.slice(0,t)):n&&n.push(e[t]);return n?n.length?n:null:e}function io(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=0,i=[];r<t.text.length;++r)i.push(ro(n[r]));return i}function so(e,t,n){for(var r=0,i=[];r<e.length;++r){var s=e[r];if(s.ranges){i.push(n?yt.prototype.deepCopy.call(s):s);continue}var o=s.changes,u=[];i.push({changes:u});for(var a=0;a<o.length;++a){var f=o[a],l;u.push({from:f.from,to:f.to,text:f.text});if(t)for(var c in f)(l=c.match(/^spans_(\d+)$/))&&Fo(t,Number(l[1]))>-1&&(Bo(u)[c]=f[c],delete f[c])}}return i}function oo(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function uo(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i],o=!0;if(s.ranges){s.copied||(s=e[i]=s.deepCopy(),s.copied=!0);for(var u=0;u<s.ranges.length;u++)oo(s.ranges[u].anchor,t,n,r),oo(s.ranges[u].head,t,n,r);continue}for(var u=0;u<s.changes.length;++u){var a=s.changes[u];if(n<a.from.line)a.from=pt(a.from.line+r,a.from.ch),a.to=pt(a.to.line+r,a.to.ch);else if(t<=a.to.line){o=!1;break}}o||(e.splice(0,i+1),i=0)}}function ao(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;uo(e.done,n,r,i),uo(e.undone,n,r,i)}function co(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==0}function po(e){return e.target||e.srcElement}function vo(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),v&&e.ctrlKey&&t==1&&(t=3),t}function wo(e,t){function s(e){return function(){e.apply(null,r)}}var n=e._handlers&&e._handlers[t];if(!n)return;var r=Array.prototype.slice.call(arguments,2),i;Cn?i=Cn.delayedCallbacks:bo?i=bo:(i=bo=[],setTimeout(Eo,0));for(var o=0;o<n.length;++o)i.push(s(n[o]))}function Eo(){var e=bo;bo=null;for(var t=0;t<e.length;++t)e[t]()}function So(e,t,n){return yo(e,n||t.type,e,t),co(t)||t.codemirrorIgnore}function xo(e){var t=e._handlers&&e._handlers.cursorActivity;if(!t)return;var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]);for(var r=0;r<t.length;++r)Fo(n,t[r])==-1&&n.push(t[r])}function To(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function No(e){e.prototype.on=function(e,t){mo(this,e,t)},e.prototype.off=function(e,t){go(this,e,t)}}function Mo(){this.id=null}function Do(e,t,n){for(var r=0,i=0;;){var s=e.indexOf("	",r);s==-1&&(s=e.length);var o=s-r;if(s==e.length||i+o>=t)return r+Math.min(o,t-i);i+=s-r,i+=n-i%n,r=s+1;if(i>=t)return r}}function Ho(e){while(Po.length<=e)Po.push(Bo(Po)+" ");return Po[e]}function Bo(e){return e[e.length-1]}function Fo(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function Io(e,t){var n=[];for(var r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function qo(e,t){var n;if(Object.create)n=Object.create(e);else{var r=function(){};r.prototype=e,n=new r}return t&&Ro(t,n),n}function Ro(e,t,n){t||(t={});for(var r in e)e.hasOwnProperty(r)&&(n!==!1||!t.hasOwnProperty(r))&&(t[r]=e[r]);return t}function Uo(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Xo(e,t){return t?t.source.indexOf("\\w")>-1&&Wo(e)?!0:t.test(e):Wo(e)}function Vo(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function Jo(e){return e.charCodeAt(0)>=768&&$o.test(e)}function Ko(e,t,n,r){var i=document.createElement(e);n&&(i.className=n),r&&(i.style.cssText=r);if(typeof t=="string")i.appendChild(document.createTextNode(t));else if(t)for(var s=0;s<t.length;++s)i.appendChild(t[s]);return i}function Go(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function Yo(e,t){return Go(e).appendChild(t)}function Zo(e,t){if(e.contains)return e.contains(t);while(t=t.parentNode)if(t==e)return!0}function eu(){return document.activeElement}function tu(e){return new RegExp("\\b"+e+"\\b\\s*")}function nu(e,t){var n=tu(t);n.test(e.className)&&(e.className=e.className.replace(n,""))}function ru(e,t){tu(t).test(e.className)||(e.className+=" "+t)}function iu(e,t){var n=e.split(" ");for(var r=0;r<n.length;r++)n[r]&&!tu(n[r]).test(t)&&(t+=" "+n[r]);return t}function su(e){if(!document.body.getElementsByClassName)return;var t=document.body.getElementsByClassName("CodeMirror");for(var n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}function uu(){if(ou)return;au(),ou=!0}function au(){var e;mo(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,lu=null,su(sr)},100))}),mo(window,"blur",function(){su(Hr)})}function cu(e){if(lu!=null)return lu;var t=Ko("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return Yo(e,t),t.offsetWidth&&(lu=t.offsetHeight-t.clientHeight),lu||0}function pu(e){if(hu==null){var t=Ko("span","​");Yo(e,Ko("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(hu=t.offsetWidth<=1&&t.offsetHeight>2&&!(r&&i<8))}return hu?Ko("span","​"):Ko("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function vu(e){if(du!=null)return du;var t=Yo(e,document.createTextNode("AخA")),n=Qo(t,0,1).getBoundingClientRect();if(!n||n.left==n.right)return!1;var r=Qo(t,1,2).getBoundingClientRect();return du=r.right-n.right<3}function wu(e){if(bu!=null)return bu;var t=Yo(e,Ko("span","x")),n=t.getBoundingClientRect(),r=Qo(t,0,1).getBoundingClientRect();return bu=Math.abs(n.left-r.left)>1}function Su(e,t,n,r){if(!e)return r(t,n,"ltr");var i=!1;for(var s=0;s<e.length;++s){var o=e[s];if(o.from<n&&o.to>t||t==n&&o.to==t)r(Math.max(o.from,t),Math.min(o.to,n),o.level==1?"rtl":"ltr"),i=!0}i||r(t,n,"ltr")}function xu(e){return e.level%2?e.to:e.from}function Tu(e){return e.level%2?e.from:e.to}function Nu(e){var t=$s(e);return t?xu(t[0]):0}function Cu(e){var t=$s(e);return t?Tu(Bo(t)):e.text.length}function ku(e,t){var n=qs(e.doc,t),r=es(n);r!=n&&(t=Ws(r));var i=$s(r),s=i?i[0].level%2?Cu(r):Nu(r):0;return pt(t,s)}function Lu(e,t){var n,r=qs(e.doc,t);while(n=Yi(r))r=n.find(1,!0).line,t=null;var i=$s(r),s=i?i[0].level%2?Nu(r):Cu(r):r.text.length;return pt(t==null?Ws(r):t,s)}function Au(e,t){var n=ku(e,t.line),r=qs(e.doc,n.line),i=$s(r);if(!i||i[0].level==0){var s=Math.max(0,r.text.search(/\S/)),o=t.line==n.line&&t.ch<=s&&t.ch;return pt(n.line,o?0:s)}return n}function Ou(e,t,n){var r=e[0].level;return t==r?!0:n==r?!1:t<n}function _u(e,t){Mu=null;for(var n=0,r;n<e.length;++n){var i=e[n];if(i.from<t&&i.to>t)return n;if(i.from==t||i.to==t){if(r!=null)return Ou(e,i.level,e[r].level)?(i.from!=i.to&&(Mu=r),n):(i.from!=i.to&&(Mu=n),r);r=n}}return r}function Du(e,t,n,r){if(!r)return t+n;do t+=n;while(t>0&&Jo(e.text.charAt(t)));return t}function Pu(e,t,n,r){var i=$s(e);if(!i)return Hu(e,t,n,r);var s=_u(i,t),o=i[s],u=Du(e,t,o.level%2?-n:n,r);for(;;){if(u>o.from&&u<o.to)return u;if(u==o.from||u==o.to)return _u(i,u)==s?u:(o=i[s+=n],n>0==o.level%2?o.to:o.from);o=i[s+=n];if(!o)return null;n>0==o.level%2?u=Du(e,o.to,-1,r):u=Du(e,o.from,1,r)}}function Hu(e,t,n,r){var i=t+n;if(r)while(i>0&&Jo(e.text.charAt(i)))i+=n;return i<0||i>e.text.length?null:i}var e=/gecko\/\d/i.test(navigator.userAgent),t=/MSIE \d/.test(navigator.userAgent),n=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),r=t||n,i=r&&(t?document.documentMode||6:n[1]),s=/WebKit\//.test(navigator.userAgent),o=s&&/Qt\/\d+\.\d+/.test(navigator.userAgent),u=/Chrome\//.test(navigator.userAgent),a=/Opera\//.test(navigator.userAgent),f=/Apple Computer/.test(navigator.vendor),l=/KHTML\//.test(navigator.userAgent),c=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),h=/PhantomJS/.test(navigator.userAgent),p=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),d=p||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),v=p||/Mac/.test(navigator.platform),m=/win/i.test(navigator.platform),g=a&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);g&&(g=Number(g[1])),g&&g>=15&&(a=!1,s=!0);var y=v&&(o||a&&(g==null||g<12.11)),b=e||r&&i>=9,w=!1,E=!1,pt=S.Pos=function(e,t){if(!(this instanceof pt))return new pt(e,t);this.line=e,this.ch=t},dt=S.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};yt.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(dt(n.anchor,r.anchor)!=0||dt(n.head,r.head)!=0)return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new bt(vt(this.ranges[t].anchor),vt(this.ranges[t].head));return new yt(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(dt(t,r.from())>=0&&dt(e,r.to())<=0)return n}return-1}},bt.prototype={from:function(){return gt(this.anchor,this.head)},to:function(){return mt(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var un={left:0,right:0,top:0,bottom:0},xn,Cn=null,kn=0,Yn=null,fr,lr,mr=0,Er=0,Sr=null;r?Sr=-0.53:e?Sr=15:u?Sr=-0.7:f&&(Sr=-1/3);var Cr,Ar=null,Fr=S.changeEnd=function(e){return e.text?pt(e.from.line+e.text.length-1,Bo(e.text).length+(e.text.length==1?e.from.ch:0)):e.to};S.prototype={constructor:S,focus:function(){window.focus(),tr(this),Gn(this)},setOption:function(e,t){var n=this.options,r=n[e];if(n[e]==t&&e!="mode")return;n[e]=t,li.hasOwnProperty(e)&&Fn(this,li[e])(this,t,r)},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){var t=this.state.keyMaps;for(var n=0;n<t.length;++n)if(t[n]==e||typeof t[n]!="string"&&t[n].name==e)return t.splice(n,1),!0},addOverlay:In(function(e,t){var n=e.token?e:S.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:e,opaque:t&&t.opaque}),this.state.modeGen++,zn(this)}),removeOverlay:In(function(e){var t=this.state.overlays;for(var n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||typeof e=="string"&&r.name==e){t.splice(n,1),this.state.modeGen++,zn(this);return}}}),indentLine:In(function(e,t,n){typeof t!="string"&&typeof t!="number"&&(t==null?t=this.options.smartIndent?"smart":"prev":t=t?"add":"subtract"),Nt(this.doc,e)&&ii(this,e,t,n)}),indentSelection:In(function(e){var t=this.doc.sel.ranges,n=-1;for(var r=0;r<t.length;r++){var i=t[r];if(!i.empty()){var s=i.from(),o=i.to(),u=Math.max(n,s.line);n=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1;for(var a=u;a<n;++a)ii(this,a,e);var f=this.doc.sel.ranges;s.ch==0&&t.length==f.length&&f[r].from().ch>0&&Ot(this.doc,r,new bt(s,f[r].to()),Lo)}else i.head.line>n&&(ii(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&ni(this))}}),getTokenAt:function(e,t){var n=this.doc;e=xt(n,e);var r=Kt(this,e.line,t),i=this.doc.mode,s=qs(n,e.line),o=new Ci(s.text,this.options.tabSize);while(o.pos<e.ch&&!o.eol()){o.start=o.pos;var u=vs(i,o,r)}return{start:o.start,end:o.pos,string:o.current(),type:u||null,state:r}},getTokenTypeAt:function(e){e=xt(this.doc,e);var t=ys(this,qs(this.doc,e.line)),n=0,r=(t.length-1)/2,i=e.ch,s;if(i==0)s=t[2];else for(;;){var o=n+r>>1;if((o?t[o*2-1]:0)>=i)r=o;else{if(!(t[o*2+1]<i)){s=t[o*2+2];break}n=o+1}}var u=s?s.indexOf("cm-overlay "):-1;return u<0?s:u==0?null:s.slice(0,u-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?S.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!gi.hasOwnProperty(t))return gi;var r=gi[t],i=this.getModeAt(e);if(typeof i[t]=="string")r[i[t]]&&n.push(r[i[t]]);else if(i[t])for(var s=0;s<i[t].length;s++){var o=r[i[t][s]];o&&n.push(o)}else i.helperType&&r[i.helperType]?n.push(r[i.helperType]):r[i.name]&&n.push(r[i.name]);for(var s=0;s<r._global.length;s++){var u=r._global[s];u.pred(i,this)&&Fo(n,u.val)==-1&&n.push(u.val)}return n},getStateAfter:function(e,t){var n=this.doc;return e=St(n,e==null?n.first+n.size-1:e),Kt(this,e+1,t)},cursorCoords:function(e,t){var n,r=this.doc.sel.primary();return e==null?n=r.head:typeof e=="object"?n=xt(this.doc,e):n=e?r.from():r.to(),yn(this,n,t||"page")},charCoords:function(e,t){return gn(this,xt(this.doc,e),t||"page")},coordsChar:function(e,t){return e=mn(this,e,t||"page"),En(this,e.left,e.top)},lineAtHeight:function(e,t){return e=mn(this,{top:e,left:0},t||"page").top,Xs(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var n=!1,r=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>r&&(e=r,n=!0);var i=qs(this.doc,e);return vn(this,i,{top:0,left:0},t||"page").top+(n?this.doc.height-Vs(i):0)},defaultTextHeight:function(){return Tn(this.display)},defaultCharWidth:function(){return Nn(this.display)},setGutterMarker:In(function(e,t,n){return si(this.doc,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&Vo(r)&&(e.gutterMarkers=null),!0})}),clearGutter:In(function(e){var t=this,n=t.doc,r=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,Wn(t,r,"gutter"),Vo(n.gutterMarkers)&&(n.gutterMarkers=null)),++r})}),addLineWidget:In(function(e,t,n){return fs(this,e,t,n)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if(typeof e=="number"){if(!Nt(this.doc,e))return null;var t=e;e=qs(this.doc,e);if(!e)return null}else{var t=Ws(e);if(t==null)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var s=this.display;e=yn(this,xt(this.doc,e));var o=e.bottom,u=e.left;t.style.position="absolute",s.sizer.appendChild(t);if(r=="over")o=e.top;else if(r=="above"||r=="near"){var a=Math.max(s.wrapper.clientHeight,this.doc.height),f=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);(r=="above"||e.bottom+t.offsetHeight>a)&&e.top>t.offsetHeight?o=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=a&&(o=e.bottom),u+t.offsetWidth>f&&(u=f-t.offsetWidth)}t.style.top=o+"px",t.style.left=t.style.right="",i=="right"?(u=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):(i=="left"?u=0:i=="middle"&&(u=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&Zr(this,u,o,u+t.offsetWidth,o+t.offsetHeight)},triggerOnKeyDown:In(Or),triggerOnKeyPress:In(Dr),triggerOnKeyUp:_r,execCommand:function(e){if(wi.hasOwnProperty(e))return wi[e](this)},findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var s=0,o=xt(this.doc,e);s<t;++s){o=ui(this.doc,o,i,n,r);if(o.hitSide)break}return o},moveH:In(function(e,t){var n=this;n.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?ui(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()},Oo)}),deleteH:In(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):oi(this,function(n){var i=ui(r,n.head,e,t,!1);return e<0?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(e,t,n,r){var i=1,s=r;t<0&&(i=-1,t=-t);for(var o=0,u=xt(this.doc,e);o<t;++o){var a=yn(this,u,"div");s==null?s=a.left:a.left=s,u=ai(this,a,i,n);if(u.hitSide)break}return u},moveV:In(function(e,t){var n=this,r=this.doc,i=[],s=!n.display.shift&&!r.extend&&r.sel.somethingSelected();r.extendSelectionsBy(function(o){if(s)return e<0?o.from():o.to();var u=yn(n,o.head,"div");o.goalColumn!=null&&(u.left=o.goalColumn),i.push(u.left);var a=ai(n,u,e,t);return t=="page"&&o==r.sel.primary()&&ti(n,null,gn(n,a,"div").top-u.top),a},Oo);if(i.length)for(var o=0;o<r.sel.ranges.length;o++)r.sel.ranges[o].goalColumn=i[o]}),findWordAt:function(e){var t=this.doc,n=qs(t,e.line).text,r=e.ch,i=e.ch;if(n){var s=this.getHelper(e,"wordChars");(e.xRel<0||i==n.length)&&r?--r:++i;var o=n.charAt(r),u=Xo(o,s)?function(e){return Xo(e,s)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!Xo(e)};while(r>0&&u(n.charAt(r-1)))--r;while(i<n.length&&u(n.charAt(i)))++i}return new bt(pt(e.line,r),pt(e.line,i))},toggleOverwrite:function(e){if(e!=null&&e==this.state.overwrite)return;(this.state.overwrite=!this.state.overwrite)?ru(this.display.cursorDiv,"CodeMirror-overwrite"):nu(this.display.cursorDiv,"CodeMirror-overwrite"),yo(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return eu()==this.display.input},scrollTo:In(function(e,t){(e!=null||t!=null)&&ri(this),e!=null&&(this.curOp.scrollLeft=e),t!=null&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller,t=Co;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:In(function(e,t){e==null?(e={from:this.doc.sel.primary().head,to:null},t==null&&(t=this.options.cursorScrollMargin)):typeof e=="number"?e={from:pt(e,0),to:null}:e.from==null&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0;if(e.from.line!=null)ri(this),this.curOp.scrollToPos=e;else{var n=ei(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}}),setSize:In(function(e,t){function r(e){return typeof e=="number"||/^\d+$/.test(String(e))?e+"px":e}var n=this;e!=null&&(n.display.wrapper.style.width=r(e)),t!=null&&(n.display.wrapper.style.height=r(t)),n.options.lineWrapping&&cn(this);var i=n.display.viewFrom;n.doc.iter(i,n.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Wn(n,i,"widget");break}++i}),n.curOp.forceUpdate=!0,yo(n,"refresh",this)}),operation:function(e){return jn(this,e)},refresh:In(function(){var e=this.display.cachedTextHeight;zn(this),this.curOp.forceUpdate=!0,hn(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),D(this),(e==null||Math.abs(e-Tn(this.display))>.5)&&L(this),yo(this,"refresh",this)}),swapDoc:In(function(e){var t=this.doc;return t.cm=null,Is(this,e),hn(this),er(this),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,wo(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},No(S);var fi=S.defaults={},li=S.optionHandlers={},hi=S.Init={toString:function(){return"CodeMirror.Init"}};ci("value","",function(e,t){e.setValue(t)},!0),ci("mode",null,function(e,t){e.doc.modeOption=t,T(e)},!0),ci("indentUnit",2,T,!0),ci("indentWithTabs",!1),ci("smartIndent",!0),ci("tabSize",4,function(e){N(e),hn(e),zn(e)},!0),ci("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t){e.options.specialChars=new RegExp(t.source+(t.test("	")?"":"|	"),"g"),e.refresh()},!0),ci("specialCharPlaceholder",Ts,function(e){e.refresh()},!0),ci("electricChars",!0),ci("rtlMoveVisually",!m),ci("wholeLineUpdateBefore",!0),ci("theme","default",function(e){O(e),M(e)},!0),ci("keyMap","default",A),ci("extraKeys",null),ci("lineWrapping",!1,C,!0),ci("gutters",[],function(e){B(e.options),M(e)},!0),ci("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?W(e.display)+"px":"0",e.refresh()},!0),ci("coverGutterNextToScrollbar",!1,I,!0),ci("lineNumbers",!1,function(e){B(e.options),M(e)},!0),ci("firstLineNumber",1,M,!0),ci("lineNumberFormatter",function(e){return e},M,!0),ci("showCursorWhenSelecting",!1,Ut,!0),ci("resetSelectionOnContextMenu",!0),ci("readOnly",!1,function(e,t){t=="nocursor"?(Hr(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||er(e))}),ci("disableInput",!1,function(e,t){t||er(e)},!0),ci("dragDrop",!0),ci("cursorBlinkRate",530),ci("cursorScrollMargin",0),ci("cursorHeight",1,Ut,!0),ci("singleCursorHeightPerLine",!0,Ut,!0),ci("workTime",100),ci("workDelay",100),ci("flattenSpans",!0,N,!0),ci("addModeClass",!1,N,!0),ci("pollInterval",100),ci("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),ci("historyEventDelay",1250),ci("viewportMargin",10,function(e){e.refresh()},!0),ci("maxHighlightLength",1e4,N,!0),ci("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),ci("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),ci("autofocus",null);var pi=S.modes={},di=S.mimeModes={};S.defineMode=function(e,t){!S.defaults.mode&&e!="null"&&(S.defaults.mode=e);if(arguments.length>2){t.dependencies=[];for(var n=2;n<arguments.length;++n)t.dependencies.push(arguments[n])}pi[e]=t},S.defineMIME=function(e,t){di[e]=t},S.resolveMode=function(e){if(typeof e=="string"&&di.hasOwnProperty(e))e=di[e];else if(e&&typeof e.name=="string"&&di.hasOwnProperty(e.name)){var t=di[e.name];typeof t=="string"&&(t={name:t}),e=qo(t,e),e.name=t.name}else if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return S.resolveMode("application/xml");return typeof e=="string"?{name:e}:e||{name:"null"}},S.getMode=function(e,t){var t=S.resolveMode(t),n=pi[t.name];if(!n)return S.getMode(e,"text/plain");var r=n(e,t);if(vi.hasOwnProperty(t.name)){var i=vi[t.name];for(var s in i){if(!i.hasOwnProperty(s))continue;r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=i[s]}}r.name=t.name,t.helperType&&(r.helperType=t.helperType);if(t.modeProps)for(var s in t.modeProps)r[s]=t.modeProps[s];return r},S.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),S.defineMIME("text/plain","null");var vi=S.modeExtensions={};S.extendMode=function(e,t){var n=vi.hasOwnProperty(e)?vi[e]:vi[e]={};Ro(t,n)},S.defineExtension=function(e,t){S.prototype[e]=t},S.defineDocExtension=function(e,t){Hs.prototype[e]=t},S.defineOption=ci;var mi=[];S.defineInitHook=function(e){mi.push(e)};var gi=S.helpers={};S.registerHelper=function(e,t,n){gi.hasOwnProperty(e)||(gi[e]=S[e]={_global:[]}),gi[e][t]=n},S.registerGlobalHelper=function(e,t,n,r){S.registerHelper(e,t,r),gi[e]._global.push({pred:n,val:r})};var yi=S.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n},bi=S.startState=function(e,t,n){return e.startState?e.startState(t,n):!0};S.innerMode=function(e,t){while(e.innerMode){var n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state,e=n.mode}return n||{mode:e,state:t}};var wi=S.commands={selectAll:function(e){e.setSelection(pt(e.firstLine(),0),pt(e.lastLine()),Lo)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Lo)},killLine:function(e){oi(e,function(t){if(t.empty()){var n=qs(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:pt(t.head.line+1,0)}:{from:t.head,to:pt(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){oi(e,function(t){return{from:pt(t.from().line,0),to:xt(e.doc,pt(t.to().line+1,0))}})},delLineLeft:function(e){oi(e,function(e){return{from:pt(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){oi(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){oi(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(pt(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(pt(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return ku(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return Au(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return Lu(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},Oo)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},Oo)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?Au(e,t.head):r},Oo)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	")},insertSoftTab:function(e){var t=[],n=e.listSelections(),r=e.options.tabSize;for(var i=0;i<n.length;i++){var s=n[i].from(),o=_o(e.getLine(s.line),s.ch,r);t.push((new Array(r-o%r+1)).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){jn(e,function(){var t=e.listSelections(),n=[];for(var r=0;r<t.length;r++){var i=t[r].head,s=qs(e.doc,i.line).text;if(s){i.ch==s.length&&(i=new pt(i.line,i.ch-1));if(i.ch>0)i=new pt(i.line,i.ch+1),e.replaceRange(s.charAt(i.ch-1)+s.charAt(i.ch-2),pt(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var o=qs(e.doc,i.line-1).text;o&&e.replaceRange(s.charAt(0)+"\n"+o.charAt(o.length-1),pt(i.line-1,o.length-1),pt(i.line,1),"+transpose")}}n.push(new bt(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){jn(e,function(){var t=e.listSelections().length;for(var n=0;n<t;n++){var r=e.listSelections()[n];e.replaceRange("\n",r.anchor,r.head,"+input"),e.indentLine(r.from().line+1,null,!0),ni(e)}})},toggleOverwrite:function(e){e.toggleOverwrite()}},Ei=S.keyMap={};Ei.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ei.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ei.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]},Ei.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},Ei["default"]=v?Ei.macDefault:Ei.pcDefault;var xi=S.lookupKey=function(e,t,n){function r(t){t=Si(t);var i=t[e];if(i===!1)return"stop";if(i!=null&&n(i))return!0;if(t.nofallthrough)return"stop";var s=t.fallthrough;if(s==null)return!1;if(Object.prototype.toString.call(s)!="[object Array]")return r(s);for(var o=0;o<s.length;++o){var u=r(s[o]);if(u)return u}return!1}for(var i=0;i<t.length;++i){var s=r(t[i]);if(s)return s!="stop"}},Ti=S.isModifierKey=function(e){var t=Eu[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"},Ni=S.keyName=function(e,t){if(a&&e.keyCode==34&&e["char"])return!1;var n=Eu[e.keyCode];if(n==null||e.altGraphKey)return!1;e.altKey&&(n="Alt-"+n);if(y?e.metaKey:e.ctrlKey)n="Ctrl-"+n;if(y?e.ctrlKey:e.metaKey)n="Cmd-"+n;return!t&&e.shiftKey&&(n="Shift-"+n),n};S.fromTextArea=function(e,t){function r(){e.value=a.getValue()}t||(t={}),t.value=e.value,!t.tabindex&&e.tabindex&&(t.tabindex=e.tabindex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder);if(t.autofocus==null){var n=eu();t.autofocus=n==e||e.getAttribute("autofocus")!=null&&n==document.body}if(e.form){mo(e.form,"submit",r);if(!t.leaveSubmitMethodAlone){var i=e.form,s=i.submit;try{var o=i.submit=function(){r(),i.submit=s,i.submit(),i.submit=o}}catch(u){}}}e.style.display="none";var a=S(function(t){e.parentNode.insertBefore(t,e.nextSibling)},t);return a.save=r,a.getTextArea=function(){return e},a.toTextArea=function(){r(),e.parentNode.removeChild(a.getWrapperElement()),e.style.display="",e.form&&(go(e.form,"submit",r),typeof e.form.submit=="function"&&(e.form.submit=s))},a};var Ci=S.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Ci.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if(typeof e=="string")var n=t==e;else var n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){var t=this.pos;while(this.eat(e));return this.pos>t},eatSpace:function(){var e=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=_o(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?_o(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return _o(this.string,null,this.tabSize)-(this.lineStart?_o(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,n){if(typeof e!="string"){var s=this.string.slice(this.pos).match(e);return s&&s.index>0?null:(s&&t!==!1&&(this.pos+=s[0].length),s)}var r=function(e){return n?e.toLowerCase():e},i=this.string.substr(this.pos,e.length);if(r(i)==r(e))return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var ki=S.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e};No(ki),ki.prototype.clear=function(){if(this.explicitlyCleared)return;var e=this.doc.cm,t=e&&!e.curOp;t&&Ln(e);if(To(this,"clear")){var n=this.find();n&&wo(this,"clear",n.from,n.to)}var r=null,i=null;for(var s=0;s<this.lines.length;++s){var o=this.lines[s],u=Bi(o.markedSpans,this);e&&!this.collapsed?Wn(e,Ws(o),"text"):e&&(u.to!=null&&(i=Ws(o)),u.from!=null&&(r=Ws(o))),o.markedSpans=ji(o.markedSpans,u),u.from==null&&this.collapsed&&!is(this.doc,o)&&e&&zs(o,Tn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var a=es(this.lines[s]),f=P(a);f>e.display.maxLineLength&&(e.display.maxLine=a,e.display.maxLineLength=f,e.display.maxLineChanged=!0)}r!=null&&e&&this.collapsed&&zn(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&jt(e.doc)),e&&wo(e,"markerCleared",e,this),t&&On(e),this.parent&&this.parent.clear()},ki.prototype.find=function(e,t){e==null&&this.type=="bookmark"&&(e=1);var n,r;for(var i=0;i<this.lines.length;++i){var s=this.lines[i],o=Bi(s.markedSpans,this);if(o.from!=null){n=pt(t?s:Ws(s),o.from);if(e==-1)return n}if(o.to!=null){r=pt(t?s:Ws(s),o.to);if(e==1)return r}}return n&&{from:n,to:r}},ki.prototype.changed=function(){var e=this.find(-1,!0),t=this,n=this.doc.cm;if(!e||!n)return;jn(n,function(){var r=e.line,i=Ws(e.line),s=rn(n,i);s&&(ln(s),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0;if(!is(t.doc,r)&&t.height!=null){var o=t.height;t.height=null;var u=as(t)-o;u&&zs(r,r.height+u)}})},ki.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||Fo(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ki.prototype.detachLine=function(e){this.lines.splice(Fo(this.lines,e),1);if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var Li=0,Oi=S.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};No(Oi),Oi.prototype.clear=function(){if(this.explicitlyCleared)return;this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();wo(this,"clear")},Oi.prototype.find=function(e,t){return this.primary.find(e,t)};var os=S.LineWidget=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.cm=e,this.node=t};No(os),os.prototype.clear=function(){var e=this.cm,t=this.line.widgets,n=this.line,r=Ws(n);if(r==null||!t)return;for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var s=as(this);jn(e,function(){us(e,n,-s),Wn(e,r,"widget"),zs(n,Math.max(0,n.height-s))})},os.prototype.changed=function(){var e=this.height,t=this.cm,n=this.line;this.height=null;var r=as(this)-e;if(!r)return;jn(t,function(){t.curOp.forceUpdate=!0,us(t,n,r),zs(n,n.height+r)})};var ls=S.Line=function(e,t,n){this.text=e,Vi(this,t),this.height=n?n(this):1};No(ls),ls.prototype.lineNo=function(){return Ws(this)};var ws={},Es={};_s.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,hs(i),wo(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},Ds.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var s=Math.min(t,i-e),o=r.height;r.removeInner(e,s),this.height-=o-r.height,i==s&&(this.children.splice(n--,1),r.parent=null);if((t-=s)==0)break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof _s))){var u=[];this.collapse(u),this.children=[new _s(u)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],s=i.chunkSize();if(e<=s){i.insertInner(e,t,n);if(i.lines&&i.lines.length>50){while(i.lines.length>50){var o=i.lines.splice(i.lines.length-25,25),u=new _s(o);i.height-=u.height,this.children.splice(r+1,0,u),u.parent=this}this.maybeSpill()}break}e-=s}},maybeSpill:function(){if(this.children.length<=10)return;var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new Ds(t);if(!e.parent){var r=new Ds(e.children);r.parent=e,e.children=[r,n],e=r}else{e.size-=n.size,e.height-=n.height;var i=Fo(e.parent.children,e);e.parent.children.splice(i+1,0,n)}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],s=i.chunkSize();if(e<s){var o=Math.min(t,s-e);if(i.iterN(e,o,n))return!0;if((t-=o)==0)break;e=0}else e-=s}}};var Ps=0,Hs=S.Doc=function(e,t,n){if(!(this instanceof Hs))return new Hs(e,t,n);n==null&&(n=0),Ds.call(this,[new _s([new ls("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var r=pt(n,0);this.sel=Et(r),this.history=new Js(null),this.id=++Ps,this.modeOption=t,typeof e=="string"&&(e=mu(e)),Ms(this,{from:r,to:r,text:e}),Pt(this,Et(r),Lo)};Hs.prototype=qo(Ds.prototype,{constructor:Hs,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){var n=0;for(var r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Us(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:qn(function(e){var t=pt(this.first,0),n=this.first+this.size-1;Wr(this,{from:t,to:pt(n,qs(this,n).text.length),text:mu(e),origin:"setValue"},!0),Pt(this,Et(t))}),replaceRange:function(e,t,n,r){t=xt(this,t),n=n?xt(this,n):t,Qr(this,e,t,n,r)},getRange:function(e,t,n){var r=Rs(this,xt(this,e),xt(this,t));return n===!1?r:r.join(n||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Nt(this,e))return qs(this,e)},getLineNumber:function(e){return Ws(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=qs(this,e)),es(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return xt(this,e)},getCursor:function(e){var t=this.sel.primary(),n;return e==null||e=="head"?n=t.head:e=="anchor"?n=t.anchor:e=="end"||e=="to"||e===!1?n=t.to():n=t.from(),n},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:qn(function(e,t,n){Mt(this,xt(this,typeof e=="number"?pt(e,t||0):e),null,n)}),setSelection:qn(function(e,t,n){Mt(this,xt(this,e),xt(this,t||e),n)}),extendSelection:qn(function(e,t,n){Lt(this,xt(this,e),t&&xt(this,t),n)}),extendSelections:qn(function(e,t){At(this,Ct(this,e,t))}),extendSelectionsBy:qn(function(e,t){At(this,Io(this.sel.ranges,e),t)}),setSelections:qn(function(e,t,n){if(!e.length)return;for(var r=0,i=[];r<e.length;r++)i[r]=new bt(xt(this,e[r].anchor),xt(this,e[r].head));t==null&&(t=Math.min(e.length-1,this.sel.primIndex)),Pt(this,wt(i,t),n)}),addSelection:qn(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new bt(xt(this,e),xt(this,t||e))),Pt(this,wt(r,r.length-1),n)}),getSelection:function(e){var t=this.sel.ranges,n;for(var r=0;r<t.length;r++){var i=Rs(this,t[r].from(),t[r].to());n=n?n.concat(i):i}return e===!1?n:n.join(e||"\n")},getSelections:function(e){var t=[],n=this.sel.ranges;for(var r=0;r<n.length;r++){var i=Rs(this,n[r].from(),n[r].to());e!==!1&&(i=i.join(e||"\n")),t[r]=i}return t},replaceSelection:function(e,t,n){var r=[];for(var i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:qn(function(e,t,n){var r=[],i=this.sel;for(var s=0;s<i.ranges.length;s++){var o=i.ranges[s];r[s]={from:o.from(),to:o.to(),text:mu(e[s]),origin:n}}var u=t&&t!="end"&&Ur(this,r,t);for(var s=r.length-1;s>=0;s--)Wr(this,r[s]);u?Dt(this,u):this.cm&&ni(this.cm)}),undo:qn(function(){Vr(this,"undo")}),redo:qn(function(){Vr(this,"redo")}),undoSelection:qn(function(){Vr(this,"undo",!0)}),redoSelection:qn(function(){Vr(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){var e=this.history,t=0,n=0;for(var r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Js(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:so(this.history.done),undone:so(this.history.undone)}},setHistory:function(e){var t=this.history=new Js(this.history.maxGeneration);t.done=so(e.done.slice(0),null,!0),t.undone=so(e.undone.slice(0),null,!0)},addLineClass:qn(function(e,t,n){return si(this,e,"class",function(e){var r=t=="text"?"textClass":t=="background"?"bgClass":"wrapClass";if(!e[r])e[r]=n;else{if((new RegExp("(?:^|\\s)"+n+"(?:$|\\s)")).test(e[r]))return!1;e[r]+=" "+n}return!0})}),removeLineClass:qn(function(e,t,n){return si(this,e,"class",function(e){var r=t=="text"?"textClass":t=="background"?"bgClass":"wrapClass",i=e[r];if(!i)return!1;if(n==null)e[r]=null;else{var s=i.match(new RegExp("(?:^|\\s+)"+n+"(?:$|\\s+)"));if(!s)return!1;var o=s.index+s[0].length;e[r]=i.slice(0,s.index)+(!s.index||o==i.length?"":" ")+i.slice(o)||null}return!0})}),markText:function(e,t,n){return Ai(this,xt(this,e),xt(this,t),n,"range")},setBookmark:function(e,t){var n={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared};return e=xt(this,e),Ai(this,e,e,n,"bookmark")},findMarksAt:function(e){e=xt(this,e);var t=[],n=qs(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(i.from==null||i.from<=e.ch)&&(i.to==null||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=xt(this,e),t=xt(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(s){var o=s.markedSpans;if(o)for(var u=0;u<o.length;u++){var a=o[u];!(i==e.line&&e.ch>a.to||a.from==null&&i!=e.line||i==t.line&&a.from>t.ch)&&(!n||n(a.marker))&&r.push(a.marker.parent||a.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)n[r].from!=null&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first;return this.iter(function(r){var i=r.text.length+1;if(i>e)return t=e,!0;e-=i,++n}),xt(this,pt(n,t))},indexFromPos:function(e){e=xt(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new Hs(Us(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<n&&(n=e.to);var r=new Hs(Us(this,t,n),e.mode||this.modeOption,t);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Di(r,_i(this)),r},unlinkDoc:function(e){e instanceof S&&(e=e.doc);if(this.linked)for(var t=0;t<this.linked.length;++t){var n=this.linked[t];if(n.doc!=e)continue;this.linked.splice(t,1),e.unlinkDoc(this),Pi(_i(this));break}if(e.history==this.history){var r=[e.id];Fs(e,function(e){r.push(e.id)},!0),e.history=new Js(null),e.history.done=so(this.history.done,r),e.history.undone=so(this.history.undone,r)}},iterLinkedDocs:function(e){Fs(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),Hs.prototype.eachLine=Hs.prototype.iter;var Bs="iter insert remove copy getEditor".split(" ");for(var js in Hs.prototype)Hs.prototype.hasOwnProperty(js)&&Fo(Bs,js)<0&&(S.prototype[js]=function(e){return function(){return e.apply(this.doc,arguments)}}(Hs.prototype[js]));No(Hs);var fo=S.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},lo=S.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},ho=S.e_stop=function(e){fo(e),lo(e)},mo=S.on=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={}),i=r[t]||(r[t]=[]);i.push(n)}},go=S.off=function(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers&&e._handlers[t];if(!r)return;for(var i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}}},yo=S.signal=function(e,t){var n=e._handlers&&e._handlers[t];if(!n)return;var r=Array.prototype.slice.call(arguments,2);for(var i=0;i<n.length;++i)n[i].apply(null,r)},bo=null,Co=30,ko=S.Pass={toString:function(){return"CodeMirror.Pass"}},Lo={scroll:!1},Ao={origin:"*mouse"},Oo={origin:"+move"};Mo.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var _o=S.countColumn=function(e,t,n,r,i){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var s=r||0,o=i||0;;){var u=e.indexOf("	",s);if(u<0||u>=t)return o+(t-s);o+=u-s,o+=n-o%n,s=u+1}},Po=[""],jo=function(e){e.select()};p?jo=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:r&&(jo=function(e){try{e.select()}catch(t){}}),[].indexOf&&(Fo=function(e,t){return e.indexOf(t)}),[].map&&(Io=function(e,t){return e.map(t)});var zo=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Wo=S.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||zo.test(e))},$o=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,Qo;document.createRange?Qo=function(e,t,n){var r=document.createRange();return r.setEnd(e,n),r.setStart(e,t),r}:Qo=function(e,t,n){var r=document.body.createTextRange();return r.moveToElementText(e.parentNode),r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r},r&&i<11&&(eu=function(){try{return document.activeElement}catch(e){return document.body}});var ou=!1,fu=function(){if(r&&i<9)return!1;var e=Ko("div");return"draggable"in e||"dragDrop"in e}(),lu,hu,du,mu=S.splitLines="\n\nb".split(/\n/).length!=3?function(e){var t=0,n=[],r=e.length;while(t<=r){var i=e.indexOf("\n",t);i==-1&&(i=e.length);var s=e.slice(t,e.charAt(i-1)=="\r"?i-1:i),o=s.indexOf("\r");o!=-1?(n.push(s.slice(0,o)),t+=o+1):(n.push(s),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},gu=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},yu=function(){var e=Ko("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),bu=null,Eu={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};S.keyNames=Eu,function(){for(var e=0;e<10;e++)Eu[e+48]=Eu[e+96]=String(e);for(var e=65;e<=90;e++)Eu[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)Eu[e+111]=Eu[e+63235]="F"+e}();var Mu,Bu=function(){function n(n){return n<=247?e.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1773?t.charAt(n-1536):1774<=n&&n<=2220?"r":8192<=n&&n<=8203?"w":n==8204?"b":"L"}function f(e,t,n){this.level=e,this.from=t,this.to=n}var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,s=/[LRr]/,o=/[Lb1n]/,u=/[1n]/,a="L";return function(e){if(!r.test(e))return!1;var t=e.length,l=[];for(var c=0,h;c<t;++c)l.push(h=n(e.charCodeAt(c)));for(var c=0,p=a;c<t;++c){var h=l[c];h=="m"?l[c]=p:p=h}for(var c=0,d=a;c<t;++c){var h=l[c];h=="1"&&d=="r"?l[c]="n":s.test(h)&&(d=h,h=="r"&&(l[c]="R"))}for(var c=1,p=l[0];c<t-1;++c){var h=l[c];h=="+"&&p=="1"&&l[c+1]=="1"?l[c]="1":h==","&&p==l[c+1]&&(p=="1"||p=="n")&&(l[c]=p),p=h}for(var c=0;c<t;++c){var h=l[c];if(h==",")l[c]="N";else if(h=="%"){for(var v=c+1;v<t&&l[v]=="%";++v);var m=c&&l[c-1]=="!"||v<t&&l[v]=="1"?"1":"N";for(var g=c;g<v;++g)l[g]=m;c=v-1}}for(var c=0,d=a;c<t;++c){var h=l[c];d=="L"&&h=="1"?l[c]="L":s.test(h)&&(d=h)}for(var c=0;c<t;++c)if(i.test(l[c])){for(var v=c+1;v<t&&i.test(l[v]);++v);var y=(c?l[c-1]:a)=="L",b=(v<t?l[v]:a)=="L",m=y||b?"L":"R";for(var g=c;g<v;++g)l[g]=m;c=v-1}var w=[],E;for(var c=0;c<t;)if(o.test(l[c])){var S=c;for(++c;c<t&&o.test(l[c]);++c);w.push(new f(0,S,c))}else{var x=c,T=w.length;for(++c;c<t&&l[c]!="L";++c);for(var g=x;g<c;)if(u.test(l[g])){x<g&&w.splice(T,0,new f(1,x,g));var N=g;for(++g;g<c&&u.test(l[g]);++g);w.splice(T,0,new f(2,N,g)),x=g}else++g;x<c&&w.splice(T,0,new f(1,x,c))}return w[0].level==1&&(E=e.match(/^\s+/))&&(w[0].from=E[0].length,w.unshift(new f(0,0,E[0].length))),Bo(w).level==1&&(E=e.match(/\s+$/))&&(Bo(w).to-=E[0].length,w.push(new f(0,t-E[0].length,t))),w[0].level!=Bo(w).level&&w.push(new f(w[0].level,t,t)),w}}();return S.version="4.6.0",S}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/mode/clike/clike",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e){var t={},n=e.split(" ");for(var r=0;r<n.length;++r)t[n[r]]=!0;return t}function r(e,t){if(!t.startOfLine)return!1;for(;;){if(!e.skipTo("\\")){e.skipToEnd(),t.tokenize=null;break}e.next();if(e.eol()){t.tokenize=r;break}}return"meta"}function i(e,t){e.backUp(1);if(e.match(/(R|u8R|uR|UR|LR)/)){var n=e.match(/"([^\s\\()]{0,16})\(/);return n?(t.cpp11RawStringDelim=n[1],t.tokenize=o,o(e,t)):!1}return e.match(/(u8|u|U|L)/)?e.match(/["']/,!1)?"string":!1:(e.next(),!1)}function s(e,t){var n;while((n=e.next())!=null)if(n=='"'&&!e.eat('"')){t.tokenize=null;break}return"string"}function o(e,t){var n=t.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&"),r=e.match(new RegExp(".*?\\)"+n+'"'));return r?t.tokenize=null:e.skipToEnd(),"string"}function u(t,n){function i(e){if(e)for(var t in e)e.hasOwnProperty(t)&&r.push(t)}typeof t=="string"&&(t=[t]);var r=[];i(n.keywords),i(n.builtin),i(n.atoms),r.length&&(n.helperType=t[0],e.registerHelper("hintWords",t[0],r));for(var s=0;s<t.length;++s)e.defineMIME(t[s],n)}e.defineMode("clike",function(t,n){function d(e,t){var n=e.next();if(l[n]){var r=l[n](e,t);if(r!==!1)return r}if(n=='"'||n=="'")return t.tokenize=v(n),t.tokenize(e,t);if(/[\[\]{}\(\),;\:\.]/.test(n))return p=n,null;if(/\d/.test(n))return e.eatWhile(/[\w\.]/),"number";if(n=="/"){if(e.eat("*"))return t.tokenize=m,m(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(h.test(n))return e.eatWhile(h),"operator";e.eatWhile(/[\w\$_]/);var i=e.current();return o.propertyIsEnumerable(i)?(a.propertyIsEnumerable(i)&&(p="newstatement"),"keyword"):u.propertyIsEnumerable(i)?(a.propertyIsEnumerable(i)&&(p="newstatement"),"builtin"):f.propertyIsEnumerable(i)?"atom":"variable"}function v(e){return function(t,n){var r=!1,i,s=!1;while((i=t.next())!=null){if(i==e&&!r){s=!0;break}r=!r&&i=="\\"}if(s||!r&&!c)n.tokenize=null;return"string"}}function m(e,t){var n=!1,r;while(r=e.next()){if(r=="/"&&n){t.tokenize=null;break}n=r=="*"}return"comment"}function g(e,t,n,r,i){this.indented=e,this.column=t,this.type=n,this.align=r,this.prev=i}function y(e,t,n){var r=e.indented;return e.context&&e.context.type=="statement"&&(r=e.context.indented),e.context=new g(r,t,n,null,e.context)}function b(e){var t=e.context.type;if(t==")"||t=="]"||t=="}")e.indented=e.context.indented;return e.context=e.context.prev}var r=t.indentUnit,i=n.statementIndentUnit||r,s=n.dontAlignCalls,o=n.keywords||{},u=n.builtin||{},a=n.blockKeywords||{},f=n.atoms||{},l=n.hooks||{},c=n.multiLineStrings,h=/[+\-*&%=<>!?|\/]/,p;return{startState:function(e){return{tokenize:null,context:new g((e||0)-r,0,"top",!1),indented:0,startOfLine:!0}},token:function(e,t){var n=t.context;e.sol()&&(n.align==null&&(n.align=!1),t.indented=e.indentation(),t.startOfLine=!0);if(e.eatSpace())return null;p=null;var r=(t.tokenize||d)(e,t);if(r=="comment"||r=="meta")return r;n.align==null&&(n.align=!0);if(p!=";"&&p!=":"&&p!=","||n.type!="statement")if(p=="{")y(t,e.column(),"}");else if(p=="[")y(t,e.column(),"]");else if(p=="(")y(t,e.column(),")");else if(p=="}"){while(n.type=="statement")n=b(t);n.type=="}"&&(n=b(t));while(n.type=="statement")n=b(t)}else p==n.type?b(t):((n.type=="}"||n.type=="top")&&p!=";"||n.type=="statement"&&p=="newstatement")&&y(t,e.column(),"statement");else b(t);return t.startOfLine=!1,r},indent:function(t,n){if(t.tokenize!=d&&t.tokenize!=null)return e.Pass;var o=t.context,u=n&&n.charAt(0);o.type=="statement"&&u=="}"&&(o=o.prev);var a=u==o.type;return o.type=="statement"?o.indented+(u=="{"?0:i):o.align&&(!s||o.type!=")")?o.column+(a?0:1):o.type==")"&&!a?o.indented+i:o.indented+(a?0:r)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});var n="auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile";u(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:t(n),blockKeywords:t("case do else for if switch while struct"),atoms:t("null"),hooks:{"#":r},modeProps:{fold:["brace","include"]}}),u(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:t(n+" asm dynamic_cast namespace reinterpret_cast try bool explicit new "+"static_cast typeid catch operator template typename class friend private "+"this using const_cast inline public throw virtual delete mutable protected "+"wchar_t alignas alignof constexpr decltype nullptr noexcept thread_local final "+"static_assert override"),blockKeywords:t("catch class do else finally for if struct switch try while"),atoms:t("true false null"),hooks:{"#":r,u:i,U:i,L:i,R:i},modeProps:{fold:["brace","include"]}}),u("text/x-java",{name:"clike",keywords:t("abstract assert boolean break byte case catch char class const continue default do double else enum extends final finally float for goto if implements import instanceof int interface long native new package private protected public return short static strictfp super switch synchronized this throw throws transient try void volatile while"),blockKeywords:t("catch class do else finally for if switch try while"),atoms:t("true false null"),hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"}},modeProps:{fold:["brace","import"]}}),u("text/x-csharp",{name:"clike",keywords:t("abstract as base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),blockKeywords:t("catch class do else finally for foreach if struct switch try while"),builtin:t("Boolean Byte Char DateTime DateTimeOffset Decimal Double Guid Int16 Int32 Int64 Object SByte Single String TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),atoms:t("true false null"),hooks:{"@":function(e,t){return e.eat('"')?(t.tokenize=s,s(e,t)):(e.eatWhile(/[\w\$_]/),"meta")}}}),u("text/x-scala",{name:"clike",keywords:t("abstract case catch class def do else extends false final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try trye type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector :: #:: Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:t("catch class do else finally for forSome if match switch try while"),atoms:t("true false null"),hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"}}}),u(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:t("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadowconst attribute uniform varying break continue discard return for while do if else struct in out inout"),blockKeywords:t("for while do if else struct"),builtin:t("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smootstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:t("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragColor gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),hooks:{"#":r},modeProps:{fold:["brace","include"]}}),u("text/x-nesc",{name:"clike",keywords:t(n+"as atomic async call command component components configuration event generic "+"implementation includes interface module new norace nx_struct nx_union post provides "+"signal task uses abstract extends"),blockKeywords:t("case do else for if switch while struct"),atoms:t("null"),hooks:{"#":r},modeProps:{fold:["brace","include"]}})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/mode/vbscript/vbscript",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("vbscript",function(e,t){function r(e){return new RegExp("^(("+e.join(")|(")+"))\\b","i")}function j(e,t){t.currentIndent++}function F(e,t){t.currentIndent--}function I(e,t){if(e.eatSpace())return"space";var r=e.peek();if(r==="'")return e.skipToEnd(),"comment";if(e.match(B))return e.skipToEnd(),"comment";if(e.match(/^((&H)|(&O))?[0-9\.]/i,!1)&&!e.match(/^((&H)|(&O))?[0-9\.]+[a-z_]/i,!1)){var f=!1;e.match(/^\d*\.\d+/i)?f=!0:e.match(/^\d+\.\d*/)?f=!0:e.match(/^\.\d+/)&&(f=!0);if(f)return e.eat(/J/i),"number";var l=!1;e.match(/^&H[0-9a-f]+/i)?l=!0:e.match(/^&O[0-7]+/i)?l=!0:e.match(/^[1-9]\d*F?/)?(e.eat(/J/i),l=!0):e.match(/^0(?![\dx])/i)&&(l=!0);if(l)return e.eat(/L/i),"number"}return e.match(A)?(t.tokenize=q(e.current()),t.tokenize(e,t)):e.match(s)||e.match(i)||e.match(h)?"operator":e.match(o)?null:e.match(u)?"bracket":e.match(H)?(t.doInCurrentLine=!0,"keyword"):e.match(P)?(j(e,t),t.doInCurrentLine=!0,"keyword"):e.match(O)?(t.doInCurrentLine?t.doInCurrentLine=!1:j(e,t),"keyword"):e.match(M)?"keyword":e.match(D)?(F(e,t),F(e,t),"keyword"):e.match(_)?(t.doInCurrentLine?t.doInCurrentLine=!1:F(e,t),"keyword"):e.match(T)?"keyword":e.match(N)?"atom":e.match(L)?"variable-2":e.match(C)?"builtin":e.match(k)?"variable-2":e.match(a)?"variable":(e.next(),n)}function q(e){var r=e.length==1,i="string";return function(s,o){while(!s.eol()){s.eatWhile(/[^'"]/);if(s.match(e))return o.tokenize=I,i;s.eat(/['"]/)}if(r){if(t.singleLineStringErrors)return n;o.tokenize=I}return i}}function R(e,t){var r=t.tokenize(e,t),i=e.current();if(i==="."){r=t.tokenize(e,t),i=e.current();if(!r||r.substr(0,8)!=="variable"&&r!=="builtin"&&r!=="keyword")return n;if(r==="builtin"||r==="keyword")r="variable";return x.indexOf(i.substr(1))>-1&&(r="variable-2"),r}return r}var n="error",i=new RegExp("^[\\+\\-\\*/&\\\\\\^<>=]"),s=new RegExp("^((<>)|(<=)|(>=))"),o=new RegExp("^[\\.,]"),u=new RegExp("^[\\(\\)]"),a=new RegExp("^[A-Za-z][_A-Za-z0-9]*"),f=["class","sub","select","while","if","function","property","with","for"],l=["else","elseif","case"],c=["next","loop","wend"],h=r(["and","or","not","xor","is","mod","eqv","imp"]),p=["dim","redim","then","until","randomize","byval","byref","new","property","exit","in","const","private","public","get","set","let","stop","on error resume next","on error goto 0","option explicit","call","me"],d=["true","false","nothing","empty","null"],v=["abs","array","asc","atn","cbool","cbyte","ccur","cdate","cdbl","chr","cint","clng","cos","csng","cstr","date","dateadd","datediff","datepart","dateserial","datevalue","day","escape","eval","execute","exp","filter","formatcurrency","formatdatetime","formatnumber","formatpercent","getlocale","getobject","getref","hex","hour","inputbox","instr","instrrev","int","fix","isarray","isdate","isempty","isnull","isnumeric","isobject","join","lbound","lcase","left","len","loadpicture","log","ltrim","rtrim","trim","maths","mid","minute","month","monthname","msgbox","now","oct","replace","rgb","right","rnd","round","scriptengine","scriptenginebuildversion","scriptenginemajorversion","scriptengineminorversion","second","setlocale","sgn","sin","space","split","sqr","strcomp","string","strreverse","tan","time","timer","timeserial","timevalue","typename","ubound","ucase","unescape","vartype","weekday","weekdayname","year"],m=["vbBlack","vbRed","vbGreen","vbYellow","vbBlue","vbMagenta","vbCyan","vbWhite","vbBinaryCompare","vbTextCompare","vbSunday","vbMonday","vbTuesday","vbWednesday","vbThursday","vbFriday","vbSaturday","vbUseSystemDayOfWeek","vbFirstJan1","vbFirstFourDays","vbFirstFullWeek","vbGeneralDate","vbLongDate","vbShortDate","vbLongTime","vbShortTime","vbObjectError","vbOKOnly","vbOKCancel","vbAbortRetryIgnore","vbYesNoCancel","vbYesNo","vbRetryCancel","vbCritical","vbQuestion","vbExclamation","vbInformation","vbDefaultButton1","vbDefaultButton2","vbDefaultButton3","vbDefaultButton4","vbApplicationModal","vbSystemModal","vbOK","vbCancel","vbAbort","vbRetry","vbIgnore","vbYes","vbNo","vbCr","VbCrLf","vbFormFeed","vbLf","vbNewLine","vbNullChar","vbNullString","vbTab","vbVerticalTab","vbUseDefault","vbTrue","vbFalse","vbEmpty","vbNull","vbInteger","vbLong","vbSingle","vbDouble","vbCurrency","vbDate","vbString","vbObject","vbError","vbBoolean","vbVariant","vbDataObject","vbDecimal","vbByte","vbArray"],g=["WScript","err","debug","RegExp"],y=["description","firstindex","global","helpcontext","helpfile","ignorecase","length","number","pattern","source","value","count"],b=["clear","execute","raise","replace","test","write","writeline","close","open","state","eof","update","addnew","end","createobject","quit"],w=["server","response","request","session","application"],E=["buffer","cachecontrol","charset","contenttype","expires","expiresabsolute","isclientconnected","pics","status","clientcertificate","cookies","form","querystring","servervariables","totalbytes","contents","staticobjects","codepage","lcid","sessionid","timeout","scripttimeout"],S=["addheader","appendtolog","binarywrite","end","flush","redirect","binaryread","remove","removeall","lock","unlock","abandon","getlasterror","htmlencode","mappath","transfer","urlencode"],x=b.concat(y);g=g.concat(m),e.isASP&&(g=g.concat(w),x=x.concat(S,E));var T=r(p),N=r(d),C=r(v),k=r(g),L=r(x),A='"',O=r(f),M=r(l),_=r(c),D=r(["end"]),P=r(["do"]),H=r(["on error resume next","exit"]),B=r(["rem"]),U={electricChars:"dDpPtTfFeE ",startState:function(){return{tokenize:I,lastToken:null,currentIndent:0,nextLineIndent:0,doInCurrentLine:!1,ignoreKeyword:!1}},token:function(e,t){e.sol()&&(t.currentIndent+=t.nextLineIndent,t.nextLineIndent=0,t.doInCurrentLine=0);var n=R(e,t);return t.lastToken={style:n,content:e.current()},n==="space"&&(n=null),n},indent:function(t,n){var r=n.replace(/^\s+|\s+$/g,"");return r.match(_)||r.match(D)||r.match(M)?e.indentUnit*(t.currentIndent-1):t.currentIndent<0?0:t.currentIndent*e.indentUnit}};return U}),e.defineMIME("text/vbscript","vbscript")}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/addon/edit/matchbrackets",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function i(e,t,i,o){var u=e.getLineHandle(t.line),a=t.ch-1,f=a>=0&&r[u.text.charAt(a)]||r[u.text.charAt(++a)];if(!f)return null;var l=f.charAt(1)==">"?1:-1;if(i&&l>0!=(a==t.ch))return null;var c=e.getTokenTypeAt(n(t.line,a+1)),h=s(e,n(t.line,a+(l>0?1:0)),l,c||null,o);return h==null?null:{from:n(t.line,a),to:h&&h.pos,match:h&&h.ch==f.charAt(0),forward:l>0}}function s(e,t,i,s,o){var u=o&&o.maxScanLineLength||1e4,a=o&&o.maxScanLines||1e3,f=[],l=o&&o.bracketRegex?o.bracketRegex:/[(){}[\]]/,c=i>0?Math.min(t.line+a,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-a);for(var h=t.line;h!=c;h+=i){var p=e.getLine(h);if(!p)continue;var d=i>0?0:p.length-1,v=i>0?p.length:-1;if(p.length>u)continue;h==t.line&&(d=t.ch-(i<0?1:0));for(;d!=v;d+=i){var m=p.charAt(d);if(l.test(m)&&(s===undefined||e.getTokenTypeAt(n(h,d+1))==s)){var g=r[m];if(g.charAt(1)==">"==i>0)f.push(m);else{if(!f.length)return{pos:n(h,d),ch:m};f.pop()}}}}return h-i==(i>0?e.lastLine():e.firstLine())?!1:null}function o(e,r,s){var o=e.state.matchBrackets.maxHighlightLineLength||1e3,u=[],a=e.listSelections();for(var f=0;f<a.length;f++){var l=a[f].empty()&&i(e,a[f].head,!1,s);if(l&&e.getLine(l.from.line).length<=o){var c=l.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";u.push(e.markText(l.from,n(l.from.line,l.from.ch+1),{className:c})),l.to&&e.getLine(l.to.line).length<=o&&u.push(e.markText(l.to,n(l.to.line,l.to.ch+1),{className:c}))}}if(u.length){t&&e.state.focused&&e.display.input.focus();var h=function(){e.operation(function(){for(var e=0;e<u.length;e++)u[e].clear()})};if(!r)return h;setTimeout(h,800)}}function a(e){e.operation(function(){u&&(u(),u=null),u=o(e,!1,e.state.matchBrackets)})}var t=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),n=e.Pos,r={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},u=null;e.defineOption("matchBrackets",!1,function(t,n,r){r&&r!=e.Init&&t.off("cursorActivity",a),n&&(t.state.matchBrackets=typeof n=="object"?n:{},t.on("cursorActivity",a))}),e.defineExtension("matchBrackets",function(){o(this,!0)}),e.defineExtension("findMatchingBracket",function(e,t,n){return i(this,e,t,n)}),e.defineExtension("scanForBracket",function(e,t,n,r){return s(this,e,t,n,r)})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/addon/selection/active-line",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function r(e){for(var r=0;r<e.state.activeLines.length;r++)e.removeLineClass(e.state.activeLines[r],"wrap",t),e.removeLineClass(e.state.activeLines[r],"background",n)}function i(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function s(e,s){var o=[];for(var u=0;u<s.length;u++){var a=s[u];if(!a.empty())continue;var f=e.getLineHandleVisualStart(a.head.line);o[o.length-1]!=f&&o.push(f)}if(i(e.state.activeLines,o))return;e.operation(function(){r(e);for(var i=0;i<o.length;i++)e.addLineClass(o[i],"wrap",t),e.addLineClass(o[i],"background",n);e.state.activeLines=o})}function o(e,t){s(e,t.ranges)}var t="CodeMirror-activeline",n="CodeMirror-activeline-background";e.defineOption("styleActiveLine",!1,function(t,n,i){var u=i&&i!=e.Init;n&&!u?(t.state.activeLines=[],s(t,t.listSelections()),t.on("beforeSelectionChange",o)):!n&&u&&(t.off("beforeSelectionChange",o),r(t),delete t.state.activeLines)})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/addon/search/searchcursor",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function n(e,n,i,s){this.atOccurrence=!1,this.doc=e,s==null&&typeof n=="string"&&(s=!1),i=i?e.clipPos(i):t(0,0),this.pos={from:i,to:i};if(typeof n!="string")n.global||(n=new RegExp(n.source,n.ignoreCase?"ig":"g")),this.matches=function(r,i){if(r){n.lastIndex=0;var s=e.getLine(i.line).slice(0,i.ch),o=0,u,a;for(;;){n.lastIndex=o;var f=n.exec(s);if(!f)break;u=f,a=u.index,o=u.index+(u[0].length||1);if(o==s.length)break}var l=u&&u[0].length||0;l||(a==0&&s.length==0?u=undefined:a!=e.getLine(i.line).length&&l++)}else{n.lastIndex=i.ch;var s=e.getLine(i.line),u=n.exec(s),l=u&&u[0].length||0,a=u&&u.index;a+l!=s.length&&!l&&(l=1)}if(u&&l)return{from:t(i.line,a),to:t(i.line,a+l),match:u}};else{var o=n;s&&(n=n.toLowerCase());var u=s?function(e){return e.toLowerCase()}:function(e){return e},a=n.split("\n");if(a.length==1)n.length?this.matches=function(i,s){if(i){var a=e.getLine(s.line).slice(0,s.ch),f=u(a),l=f.lastIndexOf(n);if(l>-1)return l=r(a,f,l),{from:t(s.line,l),to:t(s.line,l+o.length)}}else{var a=e.getLine(s.line).slice(s.ch),f=u(a),l=f.indexOf(n);if(l>-1)return l=r(a,f,l)+s.ch,{from:t(s.line,l),to:t(s.line,l+o.length)}}}:this.matches=function(){};else{var f=o.split("\n");this.matches=function(n,r){var i=a.length-1;if(n){if(r.line-(a.length-1)<e.firstLine())return;if(u(e.getLine(r.line).slice(0,f[i].length))!=a[a.length-1])return;var s=t(r.line,f[i].length);for(var o=r.line-1,l=i-1;l>=1;--l,--o)if(a[l]!=u(e.getLine(o)))return;var c=e.getLine(o),h=c.length-f[0].length;if(u(c.slice(h))!=a[0])return;return{from:t(o,h),to:s}}if(r.line+(a.length-1)>e.lastLine())return;var c=e.getLine(r.line),h=c.length-f[0].length;if(u(c.slice(h))!=a[0])return;var p=t(r.line,h);for(var o=r.line+1,l=1;l<i;++l,++o)if(a[l]!=u(e.getLine(o)))return;if(u(e.getLine(o).slice(0,f[i].length))!=a[i])return;return{from:p,to:t(o,f[i].length)}}}}}function r(e,t,n){if(e.length==t.length)return n;for(var r=Math.min(n,e.length);;){var i=e.slice(0,r).toLowerCase().length;if(i<n)++r;else{if(!(i>n))return r;--r}}}var t=e.Pos;n.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){function i(e){var r=t(e,0);return n.pos={from:r,to:r},n.atOccurrence=!1,!1}var n=this,r=this.doc.clipPos(e?this.pos.from:this.pos.to);for(;;){if(this.pos=this.matches(e,r))return this.atOccurrence=!0,this.pos.match||!0;if(e){if(!r.line)return i(0);r=t(r.line-1,this.doc.getLine(r.line-1).length)}else{var s=this.doc.lineCount();if(r.line==s-1)return i(s);r=t(r.line+1,0)}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(n){if(!this.atOccurrence)return;var r=e.splitLines(n);this.doc.replaceRange(r,this.pos.from,this.pos.to),this.pos.to=t(this.pos.from.line+r.length-1,r[r.length-1].length+(r.length==1?this.pos.from.ch:0))}},e.defineExtension("getSearchCursor",function(e,t,r){return new n(this.doc,e,t,r)}),e.defineDocExtension("getSearchCursor",function(e,t,r){return new n(this,e,t,r)}),e.defineExtension("selectMatches",function(t,n){var r=[],i,s=this.getSearchCursor(t,this.getCursor("from"),n);while(i=s.findNext()){if(e.cmpPos(s.to(),this.getCursor("to"))>0)break;r.push({anchor:s.from(),head:s.to()})}r.length&&this.setSelections(r,0)})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/addon/dialog/dialog",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,n){var r=e.getWrapperElement(),i;return i=r.appendChild(document.createElement("div")),n?i.className="CodeMirror-dialog CodeMirror-dialog-bottom":i.className="CodeMirror-dialog CodeMirror-dialog-top",typeof t=="string"?i.innerHTML=t:i.appendChild(t),i}function n(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",function(r,i,s){function f(e){if(typeof e=="string")l.value=e;else{if(u)return;u=!0,o.parentNode.removeChild(o),a.focus(),s.onClose&&s.onClose(o)}}s||(s={}),n(this,null);var o=t(this,r,s.bottom),u=!1,a=this,l=o.getElementsByTagName("input")[0],c;if(l)s.value&&(l.value=s.value),s.onInput&&e.on(l,"input",function(e){s.onInput(e,l.value,f)}),s.onKeyUp&&e.on(l,"keyup",function(e){s.onKeyUp(e,l.value,f)}),e.on(l,"keydown",function(t){if(s&&s.onKeyDown&&s.onKeyDown(t,l.value,f))return;if(t.keyCode==27||s.closeOnEnter!==!1&&t.keyCode==13)l.blur(),e.e_stop(t),f();t.keyCode==13&&i(l.value)}),s.closeOnBlur!==!1&&e.on(l,"blur",f),l.focus();else if(c=o.getElementsByTagName("button")[0])e.on(c,"click",function(){f(),a.focus()}),s.closeOnBlur!==!1&&e.on(c,"blur",f),c.focus();return f}),e.defineExtension("openConfirm",function(r,i,s){function c(){if(a)return;a=!0,o.parentNode.removeChild(o),f.focus()}n(this,null);var o=t(this,r,s&&s.bottom),u=o.getElementsByTagName("button"),a=!1,f=this,l=1;u[0].focus();for(var h=0;h<u.length;++h){var p=u[h];(function(t){e.on(p,"click",function(n){e.e_preventDefault(n),c(),t&&t(f)})})(i[h]),e.on(p,"blur",function(){--l,setTimeout(function(){l<=0&&c()},200)}),e.on(p,"focus",function(){++l})}}),e.defineExtension("openNotification",function(r,i){function f(){if(o)return;o=!0,clearTimeout(u),s.parentNode.removeChild(s)}n(this,f);var s=t(this,r,i&&i.bottom),o=!1,u,a=i&&typeof i.duration!="undefined"?i.duration:5e3;return e.on(s,"click",function(t){e.e_preventDefault(t),f()}),a&&(u=setTimeout(f,a)),f})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):typeof define=="function"&&define.amd?define("cm/addon/search/search",["../../lib/codemirror","./searchcursor","../dialog/dialog"],e):e(CodeMirror)}(function(e){function t(e,t){return typeof e=="string"?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(t){e.lastIndex=t.pos;var n=e.exec(t.string);if(n&&n.index==t.pos)return t.pos+=n[0].length,"searching";n?t.pos=n.index:t.skipToEnd()}}}function n(){this.posFrom=this.posTo=this.query=null,this.overlay=null}function r(e){return e.state.search||(e.state.search=new n)}function i(e){return typeof e=="string"&&e==e.toLowerCase()}function s(e,t,n){return e.getSearchCursor(t,n,i(t))}function o(e,t,n,r,i){e.openDialog?e.openDialog(t,i,{value:r}):i(prompt(n,r))}function u(e,t,n,r){e.openConfirm?e.openConfirm(t,r):confirm(n)&&r[0]()}function a(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);return t?(e=new RegExp(t[1],t[2].indexOf("i")==-1?"":"i"),e.test("")&&(e=/x^/)):e==""&&(e=/x^/),e}function l(e,n){var s=r(e);if(s.query)return c(e,n);o(e,f,"Search for:",e.getSelection(),function(r){e.operation(function(){if(!r||s.query)return;s.query=a(r),e.removeOverlay(s.overlay,i(s.query)),s.overlay=t(s.query,i(s.query)),e.addOverlay(s.overlay),s.posFrom=s.posTo=e.getCursor(),c(e,n)})})}function c(t,n){t.operation(function(){var i=r(t),o=s(t,i.query,n?i.posFrom:i.posTo);if(!o.find(n)){o=s(t,i.query,n?e.Pos(t.lastLine()):e.Pos(t.firstLine(),0));if(!o.find(n))return}t.setSelection(o.from(),o.to()),t.scrollIntoView({from:o.from(),to:o.to()}),i.posFrom=o.from(),i.posTo=o.to()})}function h(e){e.operation(function(){var t=r(e);if(!t.query)return;t.query=null,e.removeOverlay(t.overlay)})}function m(e,t){if(e.getOption("readOnly"))return;o(e,p,"Replace:",e.getSelection(),function(n){if(!n)return;n=a(n),o(e,d,"Replace with:","",function(r){if(t)e.operation(function(){for(var t=s(e,n);t.findNext();)if(typeof n!="string"){var i=e.getRange(t.from(),t.to()).match(n);t.replace(r.replace(/\$(\d)/g,function(e,t){return i[t]}))}else t.replace(r)});else{h(e);var i=s(e,n,e.getCursor()),o=function(){var t=i.from(),r;if(!(r=i.findNext())){i=s(e,n);if(!(r=i.findNext())||t&&i.from().line==t.line&&i.from().ch==t.ch)return}e.setSelection(i.from(),i.to()),e.scrollIntoView({from:i.from(),to:i.to()}),u(e,v,"Replace?",[function(){a(r)},o])},a=function(e){i.replace(typeof n=="string"?r:r.replace(/\$(\d)/g,function(t,n){return e[n]})),o()};o()}})})}var f='Search: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',p='Replace: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',d='With: <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',v="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";e.commands.find=function(e){h(e),l(e)},e.commands.findNext=l,e.commands.findPrev=function(e){l(e,!0)},e.commands.clearSearch=h,e.commands.replace=m,e.commands.replaceAll=function(e){m(e,!0)}}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/addon/search/match-highlighter",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function s(e){typeof e=="object"&&(this.minChars=e.minChars,this.style=e.style,this.showToken=e.showToken,this.delay=e.delay,this.wordsOnly=e.wordsOnly),this.style==null&&(this.style=n),this.minChars==null&&(this.minChars=t),this.delay==null&&(this.delay=r),this.wordsOnly==null&&(this.wordsOnly=i),this.overlay=this.timeout=null}function o(e){var t=e.state.matchHighlighter;clearTimeout(t.timeout),t.timeout=setTimeout(function(){u(e)},t.delay)}function u(e){e.operation(function(){var t=e.state.matchHighlighter;t.overlay&&(e.removeOverlay(t.overlay),t.overlay=null);if(!e.somethingSelected()&&t.showToken){var n=t.showToken===!0?/[\w$]/:t.showToken,r=e.getCursor(),i=e.getLine(r.line),s=r.ch,o=s;while(s&&n.test(i.charAt(s-1)))--s;while(o<i.length&&n.test(i.charAt(o)))++o;s<o&&e.addOverlay(t.overlay=l(i.slice(s,o),n,t.style));return}var u=e.getCursor("from"),f=e.getCursor("to");if(u.line!=f.line)return;if(t.wordsOnly&&!a(e,u,f))return;var c=e.getRange(u,f).replace(/^\s+|\s+$/g,"");c.length>=t.minChars&&e.addOverlay(t.overlay=l(c,!1,t.style))})}function a(e,t,n){var r=e.getRange(t,n);if(r.match(/^\w+$/)!==null){if(t.ch>0){var i={line:t.line,ch:t.ch-1},s=e.getRange(i,t);if(s.match(/\W/)===null)return!1}if(n.ch<e.getLine(t.line).length){var i={line:n.line,ch:n.ch+1},s=e.getRange(n,i);if(s.match(/\W/)===null)return!1}return!0}return!1}function f(e,t){return(!e.start||!t.test(e.string.charAt(e.start-1)))&&(e.pos==e.string.length||!t.test(e.string.charAt(e.pos)))}function l(e,t,n){return{token:function(r){if(r.match(e)&&(!t||f(r,t)))return n;r.next(),r.skipTo(e.charAt(0))||r.skipToEnd()}}}var t=2,n="matchhighlight",r=100,i=!1;e.defineOption("highlightSelectionMatches",!1,function(t,n,r){if(r&&r!=e.Init){var i=t.state.matchHighlighter.overlay;i&&t.removeOverlay(i),clearTimeout(t.state.matchHighlighter.timeout),t.state.matchHighlighter=null,t.off("cursorActivity",o)}n&&(t.state.matchHighlighter=new s(n),u(t),t.on("cursorActivity",o))})}),define("Code",["jquery","config","utils","cm/lib/codemirror","cm/mode/clike/clike","cm/mode/vbscript/vbscript","cm/addon/edit/matchbrackets","cm/addon/selection/active-line","cm/addon/search/search","cm/addon/search/match-highlighter","cm/addon/search/searchcursor"],function(e,t,n,r){return function(){var i=null,s=e.Deferred();this.editor=s.promise(),this.isHidden=!0,this.$node=e("<div class='code'></div>"),this.setMode=function(){},this.isRestricted=function(){return require("currentReport").prop("CodeRestricted")||t.get("CodeRestricted")},this.show=function(){n.render("code").done(function(t){this.$code=e("#code-editor",t),this.$node.html(t),this.editor=r.fromTextArea(this.$code[0],{lineNumbers:!0,matchBrackets:!0,styleActiveLine:!0,highlightSelectionMatches:{showToken:/\w/},mode:"text/x-csharp",theme:"neat"}),this.editor.on("change",function(e){i=e.getValue()}),this.setMode=function(e){switch(e.toLowerCase()){case"vb":e="text/vbscript";break;case"csharp":e="text/x-csharp";break;default:throw new Error("wrong mode")}this.editor.setOption("mode",e)},this.show=function(){this.$node.show(),this.isHidden=!1,i&&this.editor.setValue(i),this.editor.setCursor(17,9),this.editor.focus()},this.setMode(require("currentReport").prop("ScriptLanguage")),this.show(),s.resolve(this.editor)}.bind(this))},this.setCode=function(e){i=e},this.getCode=function(){return i},this.hide=function(){this.$node.hide(),this.isHidden=!0}}}),define("movements/creatingComponent",["jquery","config","utils","baseEvents"],function(e,t,n,r){var i=500,s=n.isMobile?30:15,o="component-over";return function(){function l(e,t){t.css({left:e.pageX-t.outerWidth(!0)-s+document.body.scrollLeft,top:e.pageY-t.outerHeight(!0)-s+document.body.scrollTop})}function c(e,t){var n=t.find(".d-pulse-dot")[0].getBoundingClientRect(),r=f.attr("data-scale"),i=f.pages.current,o=e.x-i.attr("margin")-i.attr("padding"),u=e.y;return o-=s/r,u-=s/r,{x:o,y:u,left:n.left,top:n.top}}var u,a=require("head"),f=this.report;this.addAction("creating-component",{start:function(t){var r,s=e(t.target),o=function(){var e=this.get();l(t,e.$container),r.css("visibility","visible"),e.component=s.data("component"),e.view=s.data("view"),u=null}.bind(this);r=s.clone(),r.removeClass("d-wb selected"),r.addClass("will-be-created"),r.css({left:t.pageX,top:t.pageY}),r.append('<div class="d-pulse-dot"><div class="d-dot"></div><div class="d-pulse"></div></div>'),e(".add-param, .remove-param",r).remove(),a.put(r),this.set({$container:r}),n.isMobile||!s.is(".d-mc")?u=setTimeout(o,i):o()},move:function(t){var r=this.get(),i,s,a;return!r||!r.component?u?!1:!0:(i=c(t,r.$container),r.$container.hide(),s=e(document.elementFromPoint(i.left,i.top)),r.$container.show(),l(t,r.$container),a=e("."+o),a.length&&e.each(a,function(){n.removeClass(this,o)}),r.existingComponent&&r.existingComponent.deleteComponentOver(t,i),r.existingComponent=s.parents(".component.droppable-component:first"),r.existingComponent.length&&r.view&&r.existingComponent.is(".droppable-view")?(r.existingComponent=r.existingComponent[0].component,n.addClass(r.existingComponent.$moveBlock[0],o),r.existingComponent.creatingComponentOver(t,i)):delete r.existingComponent,!1)},end:function(i){var s=this.get(),a=s.$container,l=f.pages.current,h=e.contains(document.documentElement,a[0]),p,d=c(i,a);a.remove();if(u){clearTimeout(u);return}h&&(s.view&&(s.view=t.get("brackets").replace(",",s.view)),s.existingComponent?(s.existingComponent.creatingComponentEnd(i,d,s.view),n.removeClass(s.existingComponent.$moveBlock[0],o),s.existingComponent.render()):(p=l.bands.findInsideCoord([d.x,d.y]),p||(p=l.bands.first(),d.x=0,d.y=l.attr("padding")),d.y-=p.prop("Top"),r.trigger("add-component",s.component,p,!0,{view:s.view,left:d.x,top:d.y}),p.creatingComponentEnd(i,d,s.view))),this.set(null)}})}}),define("baseComponent",["jquery","config","StateMachine","utils","l10n","baseEvents","baseEntity","facProperties","facEvents"],function(e,t,n,r,i,s,o,u,a){return r.object(o,{SM:new n,_init:function(){this.prop({Width:50,Height:50})},create:function(t,n){if(e.isEmptyObject(r.getModules(t)))return!1;var i=require("components/"+t),s=o.createObject(this);return s.attr({opacity:1,activated:!1,removeable:!0,copyable:!0,minWidth:10,minHeight:10,resizableX:!0,resizableY:!0,movable:!0}),s._id="ct"+r.guid(),s=i.call(s)||s,s.constructor=i,s._super._init.apply(s,arguments),s._super._init!==s._init&&s._init.apply(s,arguments),n||s.fillMap(),this.SM.add(s),s.prop("Name",s.formName()),s},clone:function(){var e=this._super._super.clone.apply(this,arguments);return e.attr("activated",!1),e.collection=r.extend({},this.collection),e},fillMap:function(){this.fieldMap=u.factory(["Appearance:Border","Appearance:Cursor","Appearance:EvenStyle","Appearance:EvenStylePriority",{prop:"Appearance:Fill:Fill.Color",getValue:function(){return this.prop("Fill.Color")||this.$moveBlock.css("fill")}},"Appearance:Style","Appearance:HoverStyle","Behavior:CanGrow","Behavior:CanShrink","Behavior:Exportable","Behavior:GrowToBottom","Behavior:Printable","Behavior:PrintOn","Behavior:ShiftMode","Behavior:Visible","Design:Name","Design:Restrictions","Layout:Anchor","Layout:Dock","Layout:Height","Layout:Left","Layout:Top","Layout:Width"]),this.eventMap=a.factory(["Build:AfterDataEvent","Build:AfterPrintEvent","Build:BeforePrintEvent","Preview:ClickEvent","Preview:MouseDownEvent","Preview:MouseEnterEvent","Preview:MouseLeaveEvent","Preview:MouseMoveEvent","Preview:MouseUpEvent"])},resizingComponents:function(){var n=t.get("circleButtonWidth"),i=t.get("circleButtonHeight"),s=this.prop("Width")-n,o=this.prop("Height")-i,u,a,f;return this.$resizing||(this.$resizing=e(),e.each(["e-resize","s-resize","se-resize"],function(t,s){u=e(r.createNS("g",{"class":"resizing-component"})),a=e(r.createNS("rect",{"class":s})),f=r.createNS("use"),r.xAttr(f,"xlink:href","#d-button-circle"),u.append(f,a),this.$resizing.push(u),this.$controlElements.append(u),a.css("fill","transparent"),a.attr({width:n*2,height:i*2})}.bind(this))),this.$resizing[0]&&r.attr(this.$resizing[0][0],"transform","translate("+s+","+o/3+")"),this.$resizing[1]&&r.attr(this.$resizing[1][0],"transform","translate("+s/3+","+o+")"),this.$resizing[2]&&r.attr(this.$resizing[2][0],"transform","translate("+s+","+o+")"),this},hideResizingComponents:function(){e.each(this.$resizing||[],function(e,t){t&&t.hide()})},showResizingComponents:function(n){e.each(this.$resizing||[],function(e,t){t&&t.show()}),n&&this.$resizing&&this.$resizing.length&&(this.$resizing[0]&&this.$resizing[0][this.prop("Height")<t.get("minComponentHeightForResizingElements")?"hide":"show"](),this.$resizing[1]&&this.$resizing[1][this.prop("Width")<t.get("minComponentWidthForResizingElements")?"hide":"show"]())},appendEdges:function(){var n=t.get("polylineWidth"),i=this.prop("Width")-n,s=this.prop("Height")-n;return this.$edges||(this.$edges=e(),e.each(["0 "+n+", 0 0, "+n+" 0","0 0, "+n+" 0, "+n+" "+n,"0 0, 0 "+n+", "+n+" "+n,"0 "+n+", "+n+" "+n+", "+n+" 0"],function(n,i){var s=e(r.createNS("g")),o=e(r.createNS("polyline",{fill:t.get("polylineFill"),stroke:t.get("polylineStroke"),"stroke-width":t.get("polylineStrokeWidth")}));s.append(o),o.attr("points",i),this.$edges.push(s),this.$controlElements.append(s)}.bind(this))),r.attr(this.$edges[0][0],"transform","translate(0, 0)"),r.attr(this.$edges[1][0],"transform","translate("+i+", 0)"),r.attr(this.$edges[2][0],"transform","translate(0, "+s+")"),r.attr(this.$edges[3][0],"transform","translate("+i+", "+s+")"),this},appendBorders:function(){var n=this.prop("Border.Lines"),i=this.prop("Border.Color"),s=this.prop("Border.Width"),o=this.prop("Border.Style"),u=this.prop("Border.Shadow"),a=this.prop("Border.ShadowWidth"),f=this.prop("Border.ShadowColor"),l=[],c=this.prop("Width"),h=this.prop("Height"),p=function(e){if(!this.$borders[e])return;this.$borders[e].remove(),delete this.$borders[e]}.bind(this);this.$borders||(this.$borders={}),n&&n!=="None"&&(l=n.split(/,[\s]?/)),l.length?e.each(function(){var n={},r=t.get("dasharrays");if(e.inArray("All",l)!==-1||e.inArray("Top",l)!==-1)n.top={x1:.5,x2:c,y1:.5,y2:.5,color:this.prop("Border.TopLine.Color")||i,width:this.prop("Border.TopLine.Width")||s,dasharray:r[this.prop("Border.TopLine.Style")||o]};if(e.inArray("All",l)!==-1||e.inArray("Right",l)!==-1)n.right={x1:c,x2:c,y1:.5,y2:h,color:this.prop("Border.RightLine.Color")||i,width:this.prop("Border.RightLine.Width")||s,dasharray:r[this.prop("Border.RightLine.Style")||o]};if(e.inArray("All",l)!==-1||e.inArray("Bottom",l)!==-1)n.bottom={x1:.5,x2:c,y1:h,y2:h,color:this.prop("Border.BottomLine.Color")||i,width:this.prop("Border.BottomLine.Width")||s,dasharray:r[this.prop("Border.BottomLine.Style")||o]};if(e.inArray("All",l)!==-1||e.inArray("Left",l)!==-1)n.left={x1:.5,x2:.5,y1:.5,y2:h,color:this.prop("Border.LeftLine.Color")||i,width:this.prop("Border.LeftLine.Width")||s,dasharray:r[this.prop("Border.LeftLine.Style")||o]};return n}.bind(this)(),function(t,n){this.$borders[t]||(this.$borders[t]=e(r.createNS("line")),this.$controlElements.before(this.$borders[t])),this.$borders[t].attr({x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2}).css({stroke:n.color,"stroke-width":n.width,"stroke-dasharray":n.dasharray})}.bind(this)):(e.each(this.$borders,function(){e(this).remove()}),this.$borders={}),e.inArray("All",l)===-1&&(e.inArray("Left",l)===-1&&this.$borders.left&&p("left"),e.inArray("Top",l)===-1&&this.$borders.top&&p("top"),e.inArray("Right",l)===-1&&this.$borders.right&&p("right"),e.inArray("Bottom",l)===-1&&this.$borders.bottom&&p("bottom"));if(u){if(!this.$shadow||!this.$shadow.length)this.$shadow=e(r.createNS("rect"));this.$shadow.attr({width:c,height:h,x:a,y:a}),this.$shadow.css("fill",f),this.prop("Fill.Color")==="transparent"&&this.$moveBlock.css("fill","#ffffff"),this.$g.prepend(this.$shadow)}else this.$shadow&&this.$shadow.length&&this.$shadow.remove();return this},appendPadding:function(){var e,t,n,i,s,o=this.prop("Width"),u=this.prop("Height");if(this.canHaveProp("Layout:Padding")||this.type==="TableCell"){s=this.prop("Padding"),s?(s=s.split(", ")||[],i=+s[0]||0,e=+s[1]||0,t=+s[2]||0,n=+s[3]||0):(i=this.prop("Padding.Left")||0,e=this.prop("Padding.Top")||0,t=this.prop("Padding.Right")||0,n=this.prop("Padding.Bottom")||0),this.prop("Padding.Left",i),this.prop("Padding.Top",e),this.prop("Padding.Right",t),this.prop("Padding.Bottom",n),this.deleteProp("Padding");if(i||e)o=o-i-t,u=u-e-n,o<0&&(o=0),u<0&&(u=0),r.attr(this.body,"transform","translate("+i+", "+e+")")}else o+=2,u+=2,r.attr(this.$contentGroup[0],"transform","translate(1,1)");return this.$content.attr({width:o,height:u}),this},setPosition:function(t,n,i){var s=this.collection&&this.collection.container,o;return e.isNumeric(t)||(t=this.prop("Left")),e.isNumeric(n)||(n=this.prop("Top")),s&&s.isBand()&&(t<0&&(t=0),o=s.prop("Top")-s.attr("padding"),n+o<0&&(n=-o)),this.prop("Left",t,i),this.prop("Top",n,i),this.attr("right",t+this.prop("Width")),this.attr("bottom",n+this.prop("Height")),r.attr(this.g,"transform","translate("+t+", "+n+")"),this},activate:function(){return this.attr("activated")||(r.addClass(this.g,"selected"),this.attr("activated",!0),e.each(this.$edges||[],function(n,i){i=e(i),r.attr(i.find("polyline")[0],{"stroke-width":t.get("selectedPolylineStrokeWidth")})}),this.showResizingComponents(!0)),this},deactivate:function(){return this.attr("activated")&&(r.removeClass(this.g,"selected"),this.attr("activated",!1),e.each(this.$edges||[],function(n,i){i=e(i),r.attr(i.find("polyline")[0],{"stroke-width":t.get("polylineStrokeWidth")})}),this.hideResizingComponents()),this},createMoveBlock:function(){var n=t.get("rectButtonWidth"),i=t.get("rectButtonHeight"),s=e(r.createNS("g",{"class":"move"})),o=e(r.createNS("rect")),u=r.createNS("use");return r.xAttr(u,"xlink:href","#d-button-rect"),o.attr({width:n*2,height:i*2,x:-(n/2),y:-(i/2)}),r.attr(s[0],"transform","translate(1,"+ -(i-1)+")"),s.append(u,o),s},renderContainer:function(t,n){return this.$g||(this.g=r.createNS("g",{"class":"component"}),this.$g=e(this.g),this.controlElements=r.createNS("g"),this.$controlElements=e(this.controlElements),this.body=r.createNS("g"),this.$body=e(this.body),this.content=r.createNS("svg",{"class":"move"}),this.$content=e(this.content),this.$contentGroup=e(r.createNS("g")),this.$content.append(this.$contentGroup),this.$body.append(this.$content),this.$g.append(this.$body,this.$controlElements),this.g.component=this),this.setPosition(t,n),this.$g},render:function(t,n){var i,s;return this.touched?(i=this.prop("Width"),s=this.prop("Height"),this.renderContainer(t,n),this.$moveBlock||(this.$moveBlock=this.$workspace=e(r.createNS("rect",{"class":"move"})),this.$g.prepend(this.$moveBlock)),this.$moveBlock.attr({width:i,height:s}),this.$moveBlock.css({opacity:this.attr("opacity"),fill:this.prop("Fill.Color")}),this.appendBorders(),this.appendEdges(),this.resizingComponents(),this.appendPadding(),this.attr("bottom",this.prop("Top")+s),this.touched=!1,this.attr("removed")&&(this.collection.container.putInTree(this.buildTree()),this.attr("removed",!1),this.$g.show()),this.$g):this.$g},remove:function(){return this._super._super.remove.call(this)?(this.deactivate(),this.attr("removed",!0),this.$g.hide(),this.collection.container.removeFromTree(this.selfTree.$main),!0):!1},applyFontStyles:function(e,t){var n="";t=t||"",e.css({"font-weight":this.attr(t+"Font.Bold")?"bold":"","font-style":this.attr(t+"Font.Italic")?"italic":""}),this.attr(t+"Font.Strikeout")&&(n+="line-through",n+=" "),this.attr(t+"Font.Underline")&&(n+="underline"),e.css("text-decoration",n)},isComponent:function(){return!0},canBeRemoved:function(){return!0},rightClick:function(e){var t=this,n=function(e){return t.onChangeCM(e)},r;return r=t.collection.getMainCollection().container.report.res.createContextMenu(t.toString(),[{name:i.tr("Can Grow"),type:"checkbox",curVal:t.prop("CanGrow"),prop:"CanGrow",onChange:n},{name:i.tr("Can Shrink"),type:"checkbox",curVal:t.prop("CanShrink"),prop:"CanShrink",onChange:n},{name:i.tr("Grow To Bottom"),type:"checkbox",curVal:t.prop("GrowToBottom"),prop:"GrowToBottom",onChange:n},{type:"separator"},{name:i.tr("Delete"),type:"default",disabled:!t.canBeRemoved(),closeAfter:!0,onClick:function(){s.trigger("menu-remove",t)}},{type:"separator"},{name:i.tr("Bring to Front"),type:"default",closeAfter:!0,onClick:function(){s.trigger("menu-bring-to-front",t)}},{name:i.tr("Send to back"),type:"default",closeAfter:!0,onClick:function(){s.trigger("menu-send-to-back",t)}}]),r.css({left:e.pageX,top:e.pageY}),require("head").put(r),!1},fillFont:function(t,n){var r,i,s,o;n=n||"",r=t.attr(n+"Font"),r&&(i=r.match(/^([\w]+),/),s=r.match(/([\d]+[\w]+)/),o=r.match(/style=([\w,]+)?/),i&&i[1]&&this.attr(n+"Font.Name",i[1]),s&&s[1]&&this.attr(n+"Font.Size",s[1]),o&&o[1]&&(o=o[1].split(","),e.inArray("Bold",o)!==-1&&this.attr(n+"Font.Bold",!0),e.inArray("Italic",o)!==-1&&this.attr(n+"Font.Italic",!0),e.inArray("Underline",o)!==-1&&this.attr(n+"Font.Underline",!0),e.inArray("Strikeout",o)!==-1&&this.attr(n+"Font.Strikeout",!0))),this.deleteProp(n+"Font")},bindFontView:function(e,t){t=t||"";var n,r=t+"Font.Name",i=t+"Font.Size",s=t+"Font.Bold",o=t+"Font.Italic",u=t+"Font.Underline",a=t+"Font.Strikeout";if(this.attr(r)){n="",n+=this.attr(r),this.attr(i)&&(n+=", "+this.attr(i));if(this.attr(s)||this.attr(o)||this.attr(u)||this.attr(a))n+=", style=",this.attr(s)&&(n+="Bold,"),this.attr(o)&&(n+="Italic,"),this.attr(u)&&(n+="Underline,"),this.attr(a)&&(n+="Strikeout"),n[n.length-1]===","&&(n=n.substring(0,n.length-1));if(n)return e.attr(t+"Font",n),!0}return!1},fillProps:function(e){return this._super._super.fillProps.apply(this,arguments),this.fillFont(e),this},toXML:function(){var t=e(this._super._super.toXML.apply(this,arguments));return this.prop("TextFill.Color")==="#000000"&&t.removeAttr("TextFill.Color"),this.bindFontView(t),t[0]},buildTree:function(){return this._super._super.buildTree.call(this),this.updateTreeView(),this.selfTree.$main}})}),define("movements/movingComponent",["jquery","utils","queue","baseEvents","baseComponent"],function(e,t,n,r,i){return function(){function s(e){var t;return r.trigger("put-component",e.container,e.component,e.leftCoord,e.topCoord),t=e.container.prop("Height"),e.container.prop("Height",e.bandHeight),r.trigger("balance-band",e.container,t),!0}function o(t,n){var i=[],o,u,a,f,l=function(){return t.length>1||n&&n.ctrlKey?function(e){e.component.activate(),r.trigger("update-info")}:function(e){r.trigger("activate",e.component),e.moved&&r.trigger("update-properties-panel",e.component)}}();for(o=0,u=t.length;o<u;o+=1)a=t[o],f=a.component.collection.container,a.container?(s(a),i.push(a.container)):(a.container=e.drop(a.component),a.container&&i.push(a.container)),l(a),a.component.movingEnd(n,a),a.container!==f&&f.isBand()&&i.push(f);for(o=0,u=i.removeDoubleValue().length;o<u;o+=1)r.trigger("balance-band",i[o])}function u(e,t,n){var r=e.prop("Left"),i=e.prop("Top");return{component:e,prevX:t,prevY:n,leftCoord:r,topCoord:i,leftLastCoord:r,topLastCoord:i}}function a(e,n){var r=n.component,i,s,o;if(n.prevX&&n.prevY){n.leftLastCoord=n.leftCoord+(e.x-n.prevX),n.topLastCoord=n.topCoord+(e.y-n.prevY);if(r.canMove())return i=r.prop("Left"),s=r.prop("Top"),o=t.nearPoint([n.leftLastCoord-i,n.topLastCoord-s]),r.setPosition.apply(r,[i<n.leftLastCoord?i+o[0]:i-o[0],s<n.topLastCoord?s+o[1]:s-o[1]])}return}var e=this.report;this.addAction("moving-component",{start:function(n,r){var i=[],s=[],o,f=r.attr("activated")?e.pages.current.bands.getSelectedComponents():[r],l,c=0,h;for(h=f.length;c<h;c+=1)r=f[c],l=r.collection.container,r.deactivate(),r.state.set.call(r,"in_move"),o=u.call(this,r,n.x,n.y),s.push(o),i.push(t.extend({container:l,bandHeight:l.prop("Height")},o)),r.movingStart(n,o),a(n,o);this.set({data:s,init:i})},move:function(e){var t=this.get(),n=0,r,s;if(!t){t=[],s=i.state.get("in_move");for(r=s.length;n<r;n+=1)t.push(u.call(this,s[n],e.x,e.y));this.set({data:t})}else if(t.data){t.moved=!0,t=t.data;for(r=t.length;n<r;n+=1)a(e,t[n])&&(t[n].component.moving(e,t[n]),t[n].moved=!0)}return!1},end:function(e){var t=this.get();if(!t)return;t.init&&t.moved&&n.push({context:this,func:o,undoData:[t.init,e],redoData:[t.data,e]}),o.call(this,t.data,e),this.set(null)}})}}),define("movements/resizingComponent",["jquery","utils","queue","baseEvents"],function(e,t,n,r){return function(){function s(e){if(e.is(".resizing-component")||e.parents(".resizing-component").length){if(e.is(".e-resize")||e.parents(".e-resize").length)return function(e){var t=this.attr("minWidth");this.canResizeX()&&(e-=this.prop("Left"),this.prop("Width",e<t?t:e))};if(e.is(".se-resize")||e.parents(".se-resize").length)return function(e,t){var n=this.attr("minWidth"),r=this.attr("minHeight");this.canResizeX()&&(e-=this.prop("Left"),e<n&&(e=n),this.prop("Width",e)),this.canResizeY()&&(t-=this.prop("Top"),t<r&&(t=r),this.prop("Height",t))};if(e.is(".s-resize")||e.parents(".s-resize").length)return function(e,t){var n=this.attr("minHeight");this.canResizeY()&&(t-=this.prop("Top"),this.prop("Height",t<n?n:t))}}else if(e.is(".resizing-line")||e.parents(".resizing-line").length)if(e.is(".se-resize")||e.parents(".se-resize"))return function(e,t){this.canResizeX()&&(e-=this.prop("Left"),this.prop("Width",e)),this.canResizeY()&&(t-=this.prop("Top"),this.prop("Height",t))}}var i=this.report;this.addAction("resizing-component",{start:function(t,n){var r=e(t.target),i=s(r).bind(n);r.is(".s-resize")?i.dir=1:r.is(".e-resize")?i.dir=0:i.dir=2,i.component=n;if(n.collection)i.container=n.collection.container,i.oldWidth=n.prop("Width"),i.oldHeight=n.prop("Height"),i.oldBandHeight=i.container.prop("Height");else{if(!n.getTable)return;i.container=n.getTable()}this.set(i),n.deactivate(),n.resizingStart(t,this.get())},move:function(e){var n=this.get(),r,s,o,u=i.attr("data-scale"),a,f,l,c,h;return n&&(s=n.component,r=n.container,o=r.$workspace[0].getBoundingClientRect(),c=s.attr("right"),h=s.attr("bottom"),a=(e.pageX-o.left)/u,f=(e.pageY-o.top)/u,l=t.nearPoint([a-c,f-h]),n(c<a?c+l[0]:c-l[0],h<f?h+l[1]:h-l[1]),n.changed=!0,s.resizing(e,n),s.render()),!1},end:function(e){var t=this.get(),i,s;if(!t)return;i=t.component,s=t.container,i.resizingEnd(e,t),s.isBand()&&r.trigger("balance-band",s),r.trigger("activate",i),r.trigger("update-properties-panel",i),i.render(),t.changed&&t.oldBandHeight&&n.push({context:i,func:function(e,t,n){var i=this.collection.container,s;this.deactivate(),this.prop({Width:t,Height:n}),this.render(),r.trigger("activate",this),r.trigger("update-properties-panel",this),s=i.prop("Height"),i.prop("Height",e),r.trigger("balance-band",i,s)},undoData:[t.oldBandHeight,t.oldWidth,t.oldHeight],redoData:[i.collection.container.prop("Height"),i.prop("Width"),i.prop("Height")]}),this.set(null)}})}}),define("movements/resizingBand",["jquery","utils","queue","baseEvents"],function(e,t,n,r){return function(){var e=this.report;this.addAction("resizing-band",{start:function(e,t){t.resizingStart(e),this.set({band:t,oldHeight:t.prop("Height")})},move:function(e){var n=this.get(),i=n.band,s=e.y,o=i.prop("Height"),u;if(!i.canResizeY())return;return i.attr("threshold")>=s&&(s=i.attr("threshold")),s-=i.prop("Top"),u=t.nearPoint([null,s-o])[1],u=o<s?o+u:o-u,u=u<0?0:u,u!==o&&(i.prop("Height",u),r.trigger("balance-band",i),i.resizing(e)),!1},end:function(t){var i=this.get(),s=i.band;s.resizingEnd(t),r.trigger("balance-band",s,i.oldHeight),r.trigger("activate",s),r.trigger("update-properties-panel",s),n.push({context:this,func:function(t,n){var i=t.prop("Height");t.prop("Height",n),r.trigger("balance-band",t,i),r.trigger("activate",t),r.trigger("update-properties-panel",t),e.pages.current.render()},undoData:[s,i.oldHeight],redoData:[s,s.prop("Height")]}),this.set(null)}})}}),define("movements/selection",["jquery","utils","baseEvents"],function(e,t,n){function r(e,t){for(var n=0,r=e.length;n<r;n+=1)e[n][t]();return!0}return function(){this.addAction("selection",{start:function(n,r){if(t.isMobile)return r&&this.set({element:r}),!0;this.report.$selection?this.report.$selection.find("rect").attr({width:0,height:0}):(this.report.$selection=e(t.createNS("g")),this.report.$selection.append(e(t.createNS("rect"))),this.report.$workspace.append(this.report.$selection)),t.attr(this.report.$selection[0],{transform:"translate("+n.x+","+n.y+")","class":"selection",left:n.x,top:n.y}),this.set({initLeft:n.x,initTop:n.y,element:r})},move:function(e){var n=this.get(),r,i,s,o,u;return!n||!n.initLeft&&!n.initTop?!0:(this.report.$selection.show(),r=this.report.$selection.find("rect"),i=n.initLeft,s=n.initTop,o=e.x-i,u=e.y-s,o<0&&(o=Math.abs(o),i=e.x),u<0&&(u=Math.abs(u),s=e.y),r.attr({width:o,height:u}),t.attr(this.report.$selection[0],{transform:"translate("+i+","+s+")",left:i,top:s}),!1)},end:function(e){var t=this.get(),i=this.report.pages.current,s=i.attr("margin")+i.attr("padding"),o=i.bands,u,a,f,l,c,h,p;r(o.getSelectedComponents(),"deactivate"),t&&(t.element&&n.trigger("activate",t.element),t.initLeft&&t.initTop&&(a=parseInt(this.report.$selection.attr("left"),10)-s,f=parseInt(this.report.$selection.attr("top"),10),h=this.report.$selection.find("rect"),l=parseInt(h.attr("width"),10),c=parseInt(h.attr("height"),10),p=o.componentsIn([a,a+l||a],[f,f+c||f]),p.length===1?n.trigger("activate",p[0]):(u=l>10&&c>10?o.findInsideCoord([e.x-s,e.y]):t.element,n.trigger("activate",u||i),r(p,"activate"),n.trigger("update-info")),u&&u.isBand()&&n.trigger("balance-band",u),this.report.$selection.hide()))}})}}),define("movements/movements",["jquery","utils","config","baseEvents","movements/creatingComponent","movements/movingComponent","movements/resizingComponent","movements/resizingBand","movements/selection"],function(e,t,n,r,i,s,o,u,a){function f(t){r.trigger("scale-page",t,function(){e(".scale-page").find(".d-icr").val(t)})}function l(i){var s=require("head"),o=!1,u=this.data=function(){var e={},t=null,n={};return{$svg:i.$workspace,report:i,addAction:function(t,n){return e[t]=n,this},getAction:function(t){return e[t]},activate:function(e){return t=e,this},deactivate:function(){return t&&(n[t]=null,t=null),this},getActive:function(){return t},set:function(e){return n[t]=e,this},get:function(){return n[t]}}}();this.getHandlers=function(i){function c(e){var t=u.report.$wrap[0],n=t.getBoundingClientRect(),r=t.scrollTop-(t.clientTop||0)-n.top,i=t.scrollLeft-(t.clientLeft||0)-n.left,s=u.report.attr("data-scale");return e.clientY!==undefined?r+=e.clientY:r+=e.touches&&e.touches[0]?e.touches[0].clientY:e.changedTouches[0].clientY,e.clientX!==undefined?i+=e.clientX:i+=e.touches&&e.touches[0]?e.touches[0].clientX:e.changedTouches[0].clientX,{x:Math.round(i/s),y:Math.round(r/s)}}function h(e){var n;return t.extend(e,c(e)),e.pageX=e.pageX||e.touches&&e.touches[0]&&e.touches[0].pageX||e.changedTouches&&e.changedTouches[0].pageX||0,e.pageY=e.pageY||e.touches&&e.touches[0]&&e.touches[0].pageY||e.changedTouches&&e.changedTouches[0].pageY||0,n=s.$main.offset(),e.pageX-=n.left,e.pageY-=n.top,e.pageX-=document.body.scrollLeft,e.pageY-=document.body.scrollTop,e}function p(e){var t=e.parents(".component:first");return t.length?t[0].component:(t=e.parents(".band:first"),t.length?t[0].band:(t=e.parents(".rt-node").data("entity"),t?t:u.report.pages.current))}var a,l;return e.isFunction(i)&&i.call(u),{rightClick:function(t){var n=e(t.target),i=p(n),s=!0;return r.trigger("remove-context-menus"),i&&i.rightClick&&(s=i.rightClick(t)),s},mouseover:function(t){var n=e(t.target),r=p(n);r&&r.mouseover&&r.mouseover(t)},mouseout:function(t){var n=e(t.target),r=p(n);r&&r.mouseout&&r.mouseout(t)},dblclick:function(t){var n=e(t.target),r=p(n);r&&r.dblclick&&r.dblclick(t)},start:function(i){var s=e(i.target),o=p(s),a,f=".d-mc:not([disabled])[data-component],.rt-content[data-component]",l=".move",c=".resizing-component,.resizing-line",d=".resizing-band",v=".workspace";if(s.parents(".lock_window").length||u.getActive()){u.deactivate();return}h(i),r.trigger("remove-context-menus");if(o){a=o.mouseStart(i);if(a===!1)return}if(s.is(f)||s.parents(f).length)s.is(f)||(s=s.parents(f)),t.extend(i,{target:s[0]}),u.activate("creating-component"),a=u.getAction("creating-component");else if(s.is(l)||s.parents(l).length)u.activate("moving-component"),a=u.getAction("moving-component");else if(s.is(c)||s.parents(c).length)u.activate("resizing-component"),a=u.getAction("resizing-component");else if(s.is(d)||s.parents(d).length)u.activate("resizing-band"),a=u.getAction("resizing-band");else if(s.is(v)||s.parents(v).length)u.activate("selection"),a=u.getAction("selection");return n.set("showHelpers",!1),(a&&a.start||function(){}).call(u,i,o)},move:function(e){if(u.getActive()&&!o)return h(e),u.pageX=e.pageX,u.pageY=e.pageY,(u.getAction(u.getActive()).move||function(){}).call(u,e)},end:function(e){var t;return u.getActive()&&(h(e),t=(u.getAction(u.getActive()).end||function(){}).call(u,e),u.deactivate()),n.set("showHelpers",!0),t},zoomstart:function(e){var t;if(!e.touches||e.touches.length!==2)return;return o=!0,t=Math.sqrt(Math.pow(e.touches[0].clientX-e.touches[1].clientX,2)+Math.pow(e.touches[0].clientY-e.touches[1].clientY,2)),a=t,l=t,!1},zoommove:function(e){if(!o)return;var t=Math.sqrt(Math.pow(e.touches[0].clientX-e.touches[1].clientX,2)+Math.pow(e.touches[0].clientY-e.touches[1].clientY,2)),n=0;return Math.abs(l-t)>50&&(t>a?n=.1:n=-0.1,n=u.report.attr("data-scale")+n,f(n),l=t),a=t,!1},zoomend:function(){o=!1}}}}return e.event.props.push("touches","targetTouches","changedTouches"),function(e){var n=require("head").$node,r=e.movements,c;r?c=r.handlers:(r=new l(e),c=r.getHandlers(function(){i.call(this),s.call(this),o.call(this),u.call(this),a.call(this)}),e.movements={data:r.data,handlers:c}),n.off("touchstart").on("touchstart",c.start),n.off("mousedown").on("mousedown",function(e){if(e.button===0)return c.start.call(this,e)}),n.off("touchmove mousemove").on("touchmove mousemove",c.move),n.off("touchend mouseup").on("touchend mouseup",c.end),n.on("touchstart",c.zoomstart),n.on("touchmove",c.zoommove),n.on("touchend",c.zoomend),t.isMobile||(n.off("dblclick").on("dblclick",c.dblclick),n.off("contextmenu").on("contextmenu",function(e){if(e.button===2)return c.rightClick.call(this,e)}),n.off("mouseover").on("mouseover",c.mouseover),n.off("mouseout").on("mouseout",c.mouseout),n.on("mousewheel DOMMouseScroll",function(t){var n;if(t.ctrlKey)return t.originalEvent.detail&&t.originalEvent.detail<0||t.originalEvent.wheelDelta&&t.originalEvent.wheelDelta>0?n=.1:n=-0.1,f(e.attr("data-scale")+n),!1}))}}),define("base/Report",["jquery","config","utils","queue","UIRes","baseEvents","baseEntity","baseCollection","base/Page","data/Connection","data/DataSource","data/parameter","dataSourceCollection","parameterCollection","data/systemVariables","data/Functions","Code","movements/movements","facProperties","facEvents"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b){return n.object(o,{isReport:function(){return!0},create:function(){return this.createObject(this,{init:function(){this.type="Report",this.prop({Name:"Report"}),this._id="report"+n.guid(),this.pages=u.create(this),this.movements=null,this.connections=u.create(this),this.dataSources=h.create(this),this.parameters=p.create(this),this.systemVariables=d.create(),this.functions=new v,this.code=new m,this.unparsedDict=[],this.unparsed=[],this.attr({grid:!0,"data-scale":t.get("scale")||1,title:"Report",info:"Report info",icon:"icon-134"}),this.defaultValues={"ReportInfo.PreviewPictureRatio":.1,"ReportInfo.SavePreviewPicture":!1,ScriptLanguage:"CSharp",StoreInResources:!0,ConvertNulls:!0,DoublePass:!1,InitialPageNumber:1,UseFillCache:!1,AutoFillDataSet:!0,Compressed:!1,MaxPages:0,SmoothGraphics:!1,TextQuality:"Default","PrintSettings.Collate":!0,"PrintSettings.Copies":1,"PrintSettings.Duplex":"Default","PrintSettings.PageRange":"All","PrintSettings.PagesOnSheet":"One","PrintSettings.PaperSource":7,"PrintSettings.Printer":"Default","PrintSettings.PrintMode":"Default","PrintSettings.PrintOnSheetHeight":297,"PrintSettings.PrintOnSheetRawPaperSize":0,"PrintSettings.PrintOnSheetWidth":210,"PrintSettings.PrintPages":"All","PrintSettings.PrintToFile":!1,"PrintSettings.Reverse":!1,"PrintSettings.SavePrinterWithReport":!1,"PrintSettings.ShowDialog":!0},this.prop({"ReportInfo.Created":new Date,"ReportInfo.Modified":new Date,"ReportInfo.CreatorVersion":"1.0.0.0"}),this.$node=e("<div>"),this.$wrap=e("<div>"),this.$node.append(this.$wrap),this.$node.hide(),this.$node.addClass("d-report"),this.$wrap.addClass("workspace"),this.workspace=n.createNS("svg",{"class":"d-rw",viewBox:"0 0 0 0"}),this.$workspace=e(this.workspace),this.$workspace.data("report",this),this.$wrap.append(this.$workspace),this.$node.append(this.code.$node),this.createRes(),this.updateDefs(),this.$node.on("scroll",function(){this.$node.scrollLeft()?this.$node.addClass("left-shadow-border"):this.$node.removeClass("left-shadow-border")}.bind(this)),this.$node.on("dragstart",function(){return!1}),g(this),this.fieldMap=y.factory(["Design:ReportInfo","Design:StoreInResources","Email:EmailSettings","Engine","Misc:AutoFillDataSet","Misc:MaxPages","Misc:SmoothGraphics","Misc:TextQuality","Print:PrintSettings:PrintSettings.Collate","Print:PrintSettings:PrintSettings.Copies","Print:PrintSettings:PrintSettings.CopyNames","Print:PrintSettings:PrintSettings.Duplex","Print:PrintSettings:PrintSettings.PageNumbers","Print:PrintSettings:PrintSettings.PageRange","Print:PrintSettings:PrintSettings.PagesOnSheet","Print:PrintSettings:PrintSettings.PaperSource","Print:PrintSettings:PrintSettings.Printer","Print:PrintSettings:PrintSettings.PrintMode","Print:PrintSettings:PrintSettings.PrintOnSheetHeight","Print:PrintSettings:PrintSettings.PrintOnSheetRawPaperSize","Print:PrintSettings:PrintSettings.PrintOnSheetWidth","Print:PrintSettings:PrintSettings.PrintPages","Print:PrintSettings:PrintSettings.PrintToFile","Print:PrintSettings:PrintSettings.PrintToFileName","Print:PrintSettings:PrintSettings.Reverse","Print:PrintSettings:PrintSettings.SavePrinterWithReport","Print:PrintSettings:PrintSettings.ShowDialog","Script"]),this.eventMap=b.factory(["Build:FinishReportEvent","Build:StartReportEvent"]),this.attr=function(e,t){var n=this._super.attr.apply(this,arguments);if(e==="left"||e==="top"){if(t===undefined)return this.workspace.getBoundingClientRect()[e];this.$node.css(e,t)}return n}}})},createRes:function(){this.res=new i},updateDefs:function(){if(!this.res)throw new Error("create UIRes instance first");this.$workspace.find("defs").remove(),this.$workspace.append(this.res.defs)},findContainerForDropping:function(t,n,r){function o(e){var t=".component.droppable-component:first";return e=e||i.parents(t),e.length?e[0].component.canHaveChildren(r.type)?e[0].component:o(e.parents(t)):null}var i=e(document.elementFromPoint(t+1,n+1)),s;return s=o(),s||(i=i.parents(".band:first"),i.length?s=i[0].band:s=null),s},drop:function(e){var t=e.$workspace[0].getBoundingClientRect(),n,r=this.attr("left"),i=this.attr("top"),o,u=this.attr("data-scale"),a,f;return e.$g.hide(),n=this.findContainerForDropping(t.left,t.top,e)||e.collection.container,e.$g.show(),e.state.set.call(e,"normal"),o=n.$workspace[0].getBoundingClientRect(),a=t.left-r-(o.left-r),f=t.top-i-(o.top-i),a/=u,f/=u,s.trigger("put-component",n,e,a,f),n},createPage:function(t){var n=e.Deferred(),r=a.create();return this.pages.add(r),r.report=this,this.$workspace.append(r.$workspace),this.putInTree(r.buildTree()),r.update(),r.render(),r.prop("Name",r.formName("Page")),t?(require(["page-types/"+t],function(t){e.when(t.call(r)).done(function(e){n.resolve(e)})},function(){n.reject()}),n.promise()):(n.resolve(r),n.promise())},removePage:function(e){if(!e)return!1;var t=this.pages.all(),n=t[t.indexOf(e)-1];return n||(n=this.pages.last()),e.remove(),s.trigger("activate",n),this},clear:function(){var t=this.removePage.bind(this);e.each([].concat(this.pages.all()),function(){t(this)}),this.pages.clear(),r.clear(),this.counter.clear()},remove:function(){this.clear(),this.$node.remove()},getSelected:function(){var e=this.pages.current,t=o.getSelected();return e?t?t:(t=e.bands.getSelectedComponents(),t&&t.length>1?null:(t=t[0],t||(t=e.bands.getSelectedBand()),!t&&e.attr("activated")&&(t=e),t||(t=this),t)):null},createDataSource:function(e,t){var n=l.create(e);return t?t.dataSources.add(n):this.dataSources.add(n),n},removeDataSource:function(e){e.remove()},pullDataSourceByView:function(e){var t=0,n=this.connections.all(),r=n.length,i;for(;t<r;t+=1){i=n[t].dataSources.pullByView(e);if(i)return i}return this.dataSources.pullByView(e)},createConnection:function(e){var t=f.create(e);return this.connections.add(t),t},removeConnection:function(e){e.remove()},createParameter:function(e){var t=e&&e.parameters||this.parameters,n=c.create();return t.add(n),n.createName(),n.updateView(),n},removeParameter:function(e){e.remove()},fillProps:function(e){return this._super._super.fillProps.apply(this,arguments),e.attr("ReportInfo.Created")&&this.prop("ReportInfo.Created",new Date(e.attr("ReportInfo.Created"))),e.attr("ReportInfo.Modified")&&this.prop("ReportInfo.Modified",new Date(e.attr("ReportInfo.Modified"))),this},toXML:function(){var t=e.parseXML("<Report/>"),r=e(t.createElement("Dictionary")),i=e(this._super._super.toXML.call(this,t)),s;return i.attr("ReportInfo.Picture")&&i.attr("ReportInfo.Picture",i.attr("ReportInfo.Picture").replace(/^([\w:\/;]+base64,){1}/,"")),this.code.getCode()&&(s=e(t.createElement("ScriptText")),s.text(n.escapeHTML(this.code.getCode())),i.append(s)),e.each(this.connections.all(),function(){s=this.toXML(r[0]),s&&r.append(s)}),e.each(this.dataSources.all(),function(){s=this.toXML(r[0]),s&&r.append(s)}),e.each(this.parameters.all(),function(){s=this.toXML(r[0]),s&&r.append(s)}),e.each(this.unparsedDict,function(){r.append(e(this))}),i.append(r),e.each(this.pages.all(),function(){s=this.toXML(i[0]),s&&i.append(s)}),e.each(this.unparsed,function(){i.append(e(this))}),t.documentElement.appendChild(i[0]),i[0]},buildTree:function(){return this._super._super.buildTree.call(this),this.pages.eachEntity(function(e){this.putInTree(e.buildTree())}.bind(this)),this.updateTreeView(),this.selfTree.$main.addClass("rt-root"),this.selfTree.$main}})}),define("componentCollection",["utils","baseCollection"],function(e,t){return e.object(t,{add:function(e){if(!e)return;e.collection&&e.collection!==this&&e.collection.remove(e),e.collection=this,this.entities.removeByValue(e),this.entities.push(e),this.container.$components.append(e.$g),this.container.selfTree&&e.selfTree&&this.container.selfTree.$container.append(e.selfTree.$main)},addInStart:function(e){if(!e)return;e.collection&&e.collection!==this&&e.collection.remove(e),e.collection=this,this.entities.removeByValue(e),this.entities.unshift(e),this.container.$components.prepend(e.$g),this.container.selfTree&&e.selfTree&&this.container.selfTree.$container.prepend(e.selfTree.$main)},find:function(e){var t;return this.eachEntity(function(n,r){if(n._id===e)return t=[n,r],!1}),t}})}),define("base/Band",["jquery","config","utils","l10n","StateMachine","base/Container","componentCollection","bandCollection","facProperties","facEvents","baseEvents"],function(e,t,n,r,i,s,o,u,a,f,l){return n.object(s,{SM:new i,create:function(r,i){var s=e.Deferred();return require(["bands/"+r],function(e){s.resolve(this.createObject(this,{init:function(){this.SM.add(this),this.attr({title:"title",threshold:0,"title-font-size":"12px","title-font-family":require("head").$main.css("font-family"),"title-font-weight":"normal","title-angle":"-90","title-color":"black","fill-blanket":"rgb(90, 90, 90)","fill-title":"#91D4FF",removeable:!0,activated:!1,margin:0,padding:0,layer_defect:0}),this.attr({"separator.color":t.get("default-band-separator-color"),"separator.style":"","separator.width":t.get("band-indent-top")||2,"separator.opacity":t.get("band-indent-opacity")||1}),e.call(this),this.constructor=e,this._id="band"+n.guid(),this.unparsed=[],this.prop({Name:this.formName(),Width:718.2,Height:170.08}),this.components=o.create(this),this.bands=u.create(this),this._init&&this._init.apply(this,arguments),i||this.fillMap()}}))}.bind(this),function(){s.reject()}),s.promise()},fillMap:function(){this.fieldMap=a.factory(["Appearance:Border","Appearance:Cursor","Appearance:EvenStyle","Appearance:EvenStylePriority","Appearance:Fill:Fill.Color","Appearance:HoverStyle","Appearance:Style","Behavior:CanBreak","Behavior:CanGrow","Behavior:CanShrink","Behavior:Exportable","Behavior:FirstRowStartsNewPage","Behavior:KeepChild","Behavior:Printable","Behavior:PrintOn","Behavior:PrintOnBottom","Behavior:RepeatOnEveryPage","Behavior:StartNewPage","Behavior:Visible","Design:Name","Design:Restrictions","Layout:Height"]),this.eventMap=f.factory(["Build:AfterDataEvent","Build:AfterLayoutEvent","Build:AfterPrintEvent","Build:BeforeLayoutEvent","Build:BeforePrintEvent","Preview:ClickEvent","Preview:MouseDownEvent","Preview:MouseEnterEvent","Preview:MouseLeaveEvent","Preview:MouseMoveEvent","Preview:MouseUpEvent"]),this.mainFields=[["Design:Name"],["Layout:Height"]]},canHaveChildren:function(t){var n=t.type||t;return e.inArray(n,["ChildBand"])>-1},has:function(e){var t=e.type||e;return this.bands.findAmongChildrenBy({type:t}).length?!0:!1},canBeAdded:function(e){var t=e.bands.findAmongChildrenBy({type:this.type});return t.length>0?!1:!0},canBeRemoved:function(){var e=this.collection.getMainCollection().container;return e.bands.count()!==1||e.bands.first()!==this},applyRule:function(){return this},addResizingBandComponent:function(){var r=e(n.createNS("g")),i=e(n.createNS("rect",{"class":"resizing-band s-resize"})),s=n.createNS("use"),o;return n.xAttr(s,"xlink:href","#d-resizing-band"),r.append(s,i),this.$resize.append(r),o={width:t.get("resizingBandBlockWidth"),height:t.get("resizingBandBlockHeight")},i.attr({width:o.width,height:o.height*2,x:0,y:-(o.height/2)}),this.addResizingBandComponent=function(){return n.attr(r[0],"transform","translate(-79, "+Math.abs((this.prop("Height")||o.height)-o.height)+")"),this},this.addResizingBandComponent()},separate:function(){var t=this.prop("Width"),r,i=this.prop("Columns.Count"),s=this.prop("Columns.Width"),o=this.collection.mainCollection.container.prop("Columns.Count"),u=this.collection.mainCollection.container.prop("Columns.Width");if(i===undefined&&s===undefined)return;return o!==undefined&&(!i||i in[0,1])?(i=o,s=u):s||(s=t/i),this.$blanket||(this.$blanket=e(n.createNS("rect"))),i&&i>1?(r=t-s,r<0&&(r=0),this.$blanket.attr({width:r,height:this.prop("Height"),x:s,y:0}),this.$blanket.css({fill:this.attr("fill-blanket")}),this.$background.append(this.$blanket)):(this.prop("Width",t),this.$blanket.remove()),this},appendSeparator:function(){var t=this.attr("separator.color"),r=this.attr("separator.width"),i=this.attr("separator.style"),s=this.attr("separator.opacity");return this.$borders||(this.$borders=[]),e.each([{color:t,width:r,dasharray:i,opacity:s}],function(t,r){var i;this.$borders[t]||(this.$borders[t]=e(n.createNS("g"))),i=e("line:first",this.$borders[t]),i.length||(i=e(n.createNS("line",{"class":"band-separator"}))),this.$borders[t].append(i),n.attr(this.$borders[t][0],"transform","translate(0,"+(this.prop("Height")+r.width/2-r.width)+")"),i.attr({x1:0,y1:r.width,x2:this.prop("Width")+this.attr("padding"),y2:r.width}),i.css({stroke:r.color,"stroke-width":r.width,"stroke-dasharray":r.dasharray,opacity:r.opacity}),this.$resize.append(this.$borders[t])}.bind(this)),this},appendTitle:function(){var r=e(n.createNS("svg")),i=e(n.createNS("g")),s=e(n.createNS("g")),o=e(n.createNS("text")),u=e(n.createNS("rect")),a=e(n.createNS("line")),f=e(n.createNS("line"));return this.$title.append(u),s.append(o),i.append(s),r.append(i),this.$title.append(a,r),this.$g.prepend(this.$title),this.appendTitle=function(){var e=this.attr("separator.color"),l=this.attr("separator.width"),c=this.attr("separator.style"),h=0,p=this.collection,d,v=this.bands.getCommonHeight(),m=this.prop("Height")+(t.get("band-indent-top")||0),g=this.attr("padding"),y=this.attr("margin")+g,b;while(p.container.type!=="ReportPage")h+=1,p=p.container.collection;return d=(h+this.attr("layer_defect"))*(g/2),b=y-d,b<0&&(b=0),u.attr({width:b,height:m+v}).css({fill:this.attr("fill-title")}),o.css({"font-size":this.attr("title-font-size"),"font-family":this.attr("title-font-family"),"font-weight":this.attr("title-font-weight"),"text-anchor":"middle"}),a.attr({x1:0,y1:m-l/2,x2:b,y2:m-l/2}).css({stroke:e,"stroke-width":l,"stroke-dasharray":c}),f.attr({x1:0,y1:0,x2:0,y2:m+v,"class":"band-separator"}).css({stroke:e,"stroke-width":2,"stroke-dasharray":"8 5"}),o.text(this.toString()),n.attr(o[0],{x:0,y:0,fill:this.attr("title-color")}),r.attr({width:b,height:m+v}),this.toString().width({"font-size":this.attr("title-font-size"),"font-family":this.attr("title-font-family"),"font-weight":this.attr("title-font-weight")})<m?(n.attr(i[0],"transform","translate("+g+","+m/2+")"),n.attr(s[0],"transform","rotate("+this.attr("title-angle")+")")):(s.removeAttr("transform"),n.attr(i[0],"transform","translate(0,"+m/1.5+")"),o.css("text-anchor","start")),n.attr(this.$title[0],"transform","translate("+d+", 0)"),d!==0&&this.$title.append(f),this},this.appendTitle()},setPosition:function(e,t){return n.attr(this.g,"transform","translate("+e+", "+t+")"),this},put:function(e){var t=e.collection&&e.collection.container;return e.isComponent()?this.components.add(e.g.component):e.isBand()&&this._super._super.put.apply(this,arguments),this.putInTree(e.buildTree()),t&&t.updateTreeView(),this},activate:function(){return this.attr("activated")||(n.addClass(this.g,"selected"),this.attr("separator.color",t.get("selected-band-separator-color")),this.appendSeparator(),this.appendTitle(),this.attr("activated",!0)),this},deactivate:function(){return this.attr("activated")&&(n.removeClass(this.g,"selected"),this.attr("separator.color",t.get("default-band-separator-color")),this.appendSeparator(),this.appendTitle(),this.attr("activated",!1)),this},updateThreshold:function(){var e=this,t,n=this.prop("Top")||0;return this.attr("threshold",0),this.components.eachEntity(function(r){t=r.attr("bottom")+n,t>e.attr("threshold")&&e.attr("threshold",t)}),this.touch(),this},adjust:function(){return this.prop("Top",this.bands.getHeightTo(this,this.attr("padding"))),this.updateThreshold(),this.attr("threshold")>this.prop("Top")+this.prop("Height")&&this.prop("Height",this.attr("threshold")-this.prop("Top")),this},balance:function(e){var t=this.bands.mainCollection.container,n;return e=e!==undefined?e:this.prop("Height"),this.adjust(),this.render(),n=this.prop("Height"),e!==n&&n!==undefined&&(t.bands.after(this,function(e){e.updateThreshold()}),t.balance()),this},renderContainer:function(){return this.$g?this.$g:(this.g=n.createNS("g",{"class":"band"}),this.$g=e(this.g),this.g.band=this,this.$body=e(n.createNS("g")),this.$bands=e(n.createNS("g")),this.$title=e(n.createNS("g")),this.$resize=e(n.createNS("g",{"class":"resizing-band s-resize"})),this.$components=e(n.createNS("g")),this.$background=e(n.createNS("g")),this.$rect=e(n.createNS("rect")),this.$net=e(n.createNS("rect")),this.$background.append(this.$rect,this.$net),this.$workspace=this.$background,this.$body.append(this.$background,this.$resize,this.$components),this.$g.append(this.$title,this.$body,this.$bands),this.$g)},render:function(){var e,t,r;return this.touched?(this.renderContainer(),e=this.attr("padding"),r=this.prop("Height"),t=this.prop("Width"),n.attr(this.$background[0],"transform","translate("+e+", 0)"),n.attr(this.$components[0],"transform","translate("+e+", 0)"),n.attr(this.$body[0],"transform","translate("+this.attr("margin")+", 0)"),n.attr(this.$bands[0],"transform","translate(0,"+(r+this.attr("separator.width"))+")"),this.$rect.attr({width:t,height:r}),this.$net.attr({width:t,height:r}),this.$rect.css("fill",this.prop("Fill.Color")),this.collection.mainCollection.container.report.attr("grid")?this.$net.css("fill","url(#d-net)"):this.$net.css("fill",""),this.appendSeparator(),this.appendTitle(),this.addResizingBandComponent(),this.separate(),this.touched=!1,this._super._super.render.call(this),this.$g):this.$g},toXML:function(){var t=e(this._super._super.toXML.apply(this,arguments));return t.removeAttr("Top"),t.attr("Left")==="0"&&t.removeAttr("Left"),this.components.eachEntity(function(e){var n=e.toXML(t[0]);n&&t.append(n)}),this.bands.count()>0&&this.bands.eachEntity(function(e){var n=e.toXML(t[0]);n&&t.append(n)}),e.each(this.unparsed,function(){t.append(this)}),t[0]},isBand:function(){return!0},rightClick:function(e){var t=this,n=function(e){return t.onChangeCM(e)},i;return i=t.collection.getMainCollection().container.report.res.createContextMenu(t.toString(),[{name:r.tr("Add Child Band"),type:"default",closeAfter:!0,disabled:t.has("ChildBand")?!0:!1,onClick:function(){l.trigger("add-band","ChildBand",t)}},{name:r.tr("Can Grow"),type:"checkbox",curVal:t.prop("CanGrow"),prop:"CanGrow",onChange:n},{name:r.tr("Can Shrink"),type:"checkbox",curVal:t.prop("CanShrink"),prop:"CanShrink",onChange:n},{name:r.tr("Can Break"),type:"checkbox",curVal:t.prop("CanBreak"),prop:"CanBreak",onChange:n},{type:"separator"},{name:r.tr("Delete"),type:"default",disabled:!t.canBeRemoved(),closeAfter:!0,onClick:function(){l.trigger("menu-remove",t)}}]),i.css({left:e.pageX,top:e.pageY}),require("head").put(i),!1},buildTree:function(){return this._super._super.buildTree.call(this),this.bands.eachEntity(function(e){this.putInTree(e.buildTree())}.bind(this)),this.components.eachEntity(function(e){this.putInTree(e.buildTree())}.bind(this)),this.updateTreeView(),this.selfTree.$main}})}),define("modules/Parser/main",["jquery","utils","base/Band","baseComponent"],function(e,t,n,r){function s(){if(!i)throw new Error("Report wasn't initialized")}function o(t,n){return e.when(i.createParameter(n)).done(function(e){e.fillProps(t),e.updateView();if(t.children().length)return f(t.children(),e)})}function u(t,n){return e.when(n.createColumn()).done(function(e){e.fillProps(t),e.updateBindableControl(),e.updateView()})}function a(t){return e.when(i.createPage()).then(function(e){return e.fillProps(t),e.update(),p(t.children(),e)}).done(function(){return!0})}function f(t,n){e.each(t,function(){o(e(this),n)})}function l(t,n){var r,s=t.prop("tagName"),o=/DataSource$/i,a=/Connection$/i;return s.match(o)?r=i.createDataSource(s,n):s.match(a)&&(r=i.createConnection(s,n)),e.when(r).done(function(n){if(!n)return;return n.fillProps(t),t.children().each(function(){var t=e(this);t.is("Column")?u(t,n):t.prop("tagName").match(o)?l(t,n):n.unparsed.push(t)}),n})}function c(n){var r=e(n);r&&r.length&&i.code.setCode(t.reverseEscapeHTML(e(n).text()))}function h(t,n){var i=e.Deferred();return e.when(r.create(t.prop("tagName"))).done(function(e){e.fillProps(t),e.render(),n.put(e),i.resolve()}),i.promise()}function p(r,i){var s=function(t,r){var s=e.Deferred();return e.when(n.create(t.prop("tagName"))).done(function(e){if(!e)return;e.fillProps(t),r||(r=i);if(!r.addBand(e))return;s.resolve(o(t.children(),e))}),s.promise()},o=function(n,r){var i=function(r){var i=0,o=e.Deferred(),u=n.length,a=[],f=function(n){var i=n.prop("tagName"),o=e.Deferred();return t.getModules("components/")[i]?h(n,r).done(function(){o.resolve()}):t.getModules("bands/")[i]?s(n,r).done(function(){e.when.apply(null,arguments).done(function(){o.resolve()})}):(r&&r.unparsed&&r.unparsed.push(n),o.resolve()),o.promise()};for(;i<u;i+=1)a.push(f(e(n[i])));return e.when.apply(null,a).done(function(){r&&r.balance(),o.resolve()}),o.promise()};return i(r||null)};return o(r)}var i;return{init:function(e){return i=e,this},parse:function(t){var n=e(t),r,o,u,h=[],p=e.Deferred();return s(),r=n.find("Report"),r.length?(i.fillProps(r),r.children().each(function(){var t=e(this);t.is("ScriptText")?c(r.find("ScriptText")):t.is("Dictionary")?t.children().each(function(){var t=e(this),n=t.prop("tagName");t.is("Parameter")?f(t):t.is("Relation")?(i.unparsedDict.push(t),console.log(t)):n.match(/DataSource$/i)||n.match(/Connection$/i)?h.push(l(t)):(i.unparsedDict.push(t),console.log(t))}):t.is("ReportPage")?h.push(a(t)):(i.unparsed.push(t),console.log(t))}),e.when.apply(null,h).done(function(){e.each(i.pages.all(),function(){this.render()}),p.resolve(i)})):require("notification").notify('there must be a "Report" tag inside .frx report',{danger:!0,delay:!1}),p.promise()},toXML:function(){return s(),i.toXML()}}}),define("modules/Parser/loader",["jquery","utils"],function(e,t){function n(e){return e.replace(/<ScriptText>([\s\S]+)<\/ScriptText>/,function(e,n){return"<ScriptText>"+t.escapeHTML(n)+"</ScriptText>"})}function r(e){return e.replace(/^([\s\S]*)<Report /,"<Report ")}function i(t){var s=e.Deferred();return e.ajax({url:t,dataType:"text",beforeSend:function(e){i.cache[t]&&(e.abort(),s.resolve(i.cache[t]))},success:function(o){o=n(o),o=r(o),i.cache[t]=e.parseXML(o),s.resolve(i.cache[t])},error:function(){s.reject.apply(null,arguments)}}),s.promise()}return i.cache={},{get:function(e){return i(e)}}}),define("notification",["jquery","config","l10n"],function(e,t,n){var r=300,i=5e3,s,o=t.get("notifications");if(!o)s=function(){};else if(o==="html5"){var u=0,a=window.webkitNotifications||window.Notification||null,f=!0;e(document).on("click",function(){a&&f&&a.requestPermission()}),s=function(e,t){var r,s={};return a?(s.tag=u,s.icon=null,s.name="",s.body=t.trans?n.tr(e):e,r=a.createNotification?a.createNotification(s.icon,s.name,s.body):new a(s.name,s),u+=1,r.onshow=function(){t.delay!==!1&&setTimeout(function(){r.close()},t.delay||i)},r.onerror=function(){f=!1,a=null,alert("HTML5 Notifications are blocked. Change property `notifications` in config on `default` or switch it off.")},r):null}}else{var l=e("<div>"),c=function(t,i){var s=e("<div>"),o=e("<div>");return s.hide(),s.addClass("ntf"),o.addClass("ntf-message"),s.append(o),s.on("click",function(){s.fadeOut(r)}),i.success&&s.addClass("ntf-success"),i.danger&&s.addClass("ntf-danger"),i.warning&&s.addClass("ntf-warning"),i.info&&s.addClass("ntf-info"),i.limitWidth===!1&&s.css("max-width","none"),typeof t!="string"?o.html(t):o.text(i.trans?n.tr(t):t),s};l.addClass("ntf-panel"),s=function(e,t){var n=require("head"),s;t=t||{},l.parent().length||n.put(l),l.css({top:require("menu").$node.height(),right:"20px"}),s=c(e,t),t.inEmptyList?l.html(s):l.prepend(s),s.fadeIn(300,function(){t.delay!==!1&&setTimeout(function(){s.fadeOut(r,function(){s.removeClass("success danger warning info")})},t.delay||i)})}}return{notify:s}}),define("expression",["jquery","config","utils","baseEvents","notification"],function(e,t,n,r,i){var s={},o;return e.event.props.push("dataTransfer"),{edit:function(i){function o(e){var n=i.element?i.element.prop("Brackets"):t.get("brackets");return n[0]+e+n[2]}function u(e){e.preventDefault(),e.stopPropagation()}function a(t){t.dataTransfer.setData("text",e(t.target).data("view"))}function f(t){var n=e(t.target),r=t.dataTransfer.getData("text");t.preventDefault(),n.val(n.val()+o(r))}var s;if(i===undefined)return;return s=e.Deferred(),require("currentReport").res.createPopup("Edit expression").done(function(t){return e.when(n.render("expression/index",{data:typeof i=="string"?i:i.value}),this.getMenu(!1)).done(function(n,l){var c={$main:t,onClick:function(){i.element&&(i.element.prop(i.prop,p.val()),r.trigger("update-properties-panel",i.element),r.trigger("remove-popups"),i.element.render())}},h=e(".rt-content[data-view]",l),p=e("textarea",n[0]),d=e(".add-to-expr",n[0]);e(".expr-menu",n[0]).html(l),h.attr("draggable",!0),h.css("cursor","move"),p.on("dragover",u),p.on("dragenter",u),h.on("dragstart",a),p.on("drop",f),l.on("click",".rt-content",function(){var t=e(this);t.is(".selected[data-view]")?d.removeAttr("disabled"):d.attr("disabled",!0)}),d.on("click",function(){var t=e(".selected",l).data("view");t&&p.val(p.val()+o(t))}),n[0].on("click",".edit-expr",function(){var e=Array.prototype.slice.call(arguments);return e.push(p.val()),c.onClick.apply(this,e)}),e(".modal-content",t).html(n[0]),s.resolve(c)})}.bind(this)),s.promise()},getMenu:function(t){var u=require("currentReport");return e.when(n.lazyGetTemplate("expression/menu"),n.lazyGetTemplate("expression/menu-block"),n.lazyGetTemplate("expression/menu-item")).then(function(n){var a=e(n.render({opened:t===!1?{}:s,selected:t===!1?null:o,dataSources:{dataSources:{label:"Data Sources",fields:e.merge(u.connections.all(),u.dataSources.all()),icon:"icon-053"}},systemVariables:{systemVariables:{label:"systemVariables",icon:u.systemVariables.attr("icon"),fields:u.systemVariables.entities}},parameters:{parameters:{label:"parameters",fields:u.parameters.all(),icon:"icon-234"}},functions:{functions:{label:"functions",icon:u.functions.icon,fields:u.functions.entities}}}));return a.on("click",".rt-content",function(){var t=e(this),n=t.parents(".root");n.is(".functions")&&i.notify(t.data("interface"),{inEmptyList:!0,limitWidth:!1,delay:!1}),e(".selected",a).removeClass("selected"),t.addClass("selected"),o=t.data("id")}),a.on("click",".rt-expand, .rt-icon",function(){var t=e(this),n;return t.is(".rt-icon")&&(t=t.prev(".rt-expand")),n=t.nextAll(".rt-content").data("title"),t.is(".icon-exp_minus")?(delete s[n],t.parent().find(".rt-container:first").slideUp(100,function(){t.removeClass("icon-exp_minus").addClass("icon-exp_plus")})):t.is(".icon-exp_plus")&&(s[n]=!0,t.parent().find(".rt-container:first").slideDown(100,function(){t.removeClass("icon-exp_plus").addClass("icon-exp_minus")})),!1}),a.on("click",".add-param:not([disabled])",function(){return r.trigger("create-parameter",u.parameters.findEntity(e(this).parent().data("id"))),!1}),a.on("click",".remove-param:not([disabled])",function(){return r.trigger("remove-parameter",u.parameters.findEntity(e(this).parent().data("id"))),!1}),a})}}}),define("events/main",["jquery","utils","config","baseEvents","expression"],function(e,t,n,r,i){return function(){var t=require("currentReport"),s=require("head"),o=require("customization"),u=require("menu"),a=require("info");r.bind("init",function(){r.trigger("fill-customization-panel"),r.trigger("activate",t.pages.first()),r.unbind("init")}),r.bind("remove-popups",function(){e(".popup").fadeOut(n.get("fadeout"),function(){e(this).remove()}),e(".will-be-created",s.$node).remove(),n.set("hotkeyProhibited",!1)}),r.bind("remove-context-menus",function(){var t=e(".d-cm");t.length&&(t.remove(),n.set("hotkeyProhibited",!1))}),r.bind("update-workspace-left-indent",function(){t.attr("left",o.$node.outerWidth(!0)),t.$node.show()}),r.bind("align-workspace",function(){var e=u.getHeight();s.$workspace.css({top:e,bottom:a.getHeight()}),r.trigger("update-workspace-left-indent")}),r.bind("show-expression-editor",function(e){i.edit(e).done(function(e){s.put(e.$main),n.set("hotkeyProhibited",!0)})}),r.bind("activate",function(e,n){var i;if(!e)return;i=t.getSelected(),i&&!i.isPage()&&i.deactivate(),e.isComponent()?r.trigger("activate-component",e):e.isBand()?r.trigger("activate-band",e):e.isPage()?r.trigger("activate-page",e):e.isReport()?r.trigger("activate-report",e):e.activate();if(e===i&&!n)return;r.trigger("re-render",e)}),r.bind("activate-report",function(e){e.activate()}),r.bind("activate-page",function(e){e.active(),r.trigger("hide-code-tab")}),r.bind("show-page",function(e){r.trigger("hide-code-tab"),t.pages.current.deactivate(),e.show()}),r.bind("activate-band",function(e){e.active()}),r.bind("activate-component",function(e){e.active()}),r.bind("re-render",function(e){e=e||t.getSelected(),t.selectInTree(e),r.trigger("update-properties|events-panel",e),r.trigger("update-menu"),r.trigger("update-info")})}}),define("events/band",["jquery","queue","baseEvents","base/Band"],function(e,t,n,r){return function(){var i=require("currentReport"),s=require("menu");n.bind("balance-band",function(e,t){e.bands&&(e.balance(t),i.pages.current.render())}),n.bind("remove-band",function(e){e.remove(),e.bands.mainCollection.container.render()}),n.bind("render-band",function(e){e.render(),e.bands.mainCollection.container.render()}),n.bind("add-band",function(s,o,u){var a=i.pages.current;u=u!==!1?!0:!1,r.create(s).done(function(r){o||(o=a.bands.getSelectedBand());if(!o||!o.canHaveChildren(r))o=a;r=o.addBand(r);if(!r)return;e.when(r.applyRule()).done(function(e,r){r!==undefined&&(u=r),u&&t.push({context:n,undo:function(e,t){this.trigger("remove-band",e),t.rebuildTree()},redo:function(e,t){this.trigger("render-band",e),t.rebuildTree()},data:[e,o]}),n.trigger("balance-band",e,0),n.trigger("update-menu"),o.rebuildTree()})})}),n.bind("update-menu",function(){var e=i.pages.current,t=e.bands.getSelectedBand();s.lock("[data-band]"),e.bands.findBy({type:"ReportTitleBand"}).length||s.unlock("[data-band=ReportTitleBand]"),e.bands.findBy({type:"PageHeaderBand"}).length||s.unlock("[data-band=PageHeaderBand]"),e.bands.findBy({type:"ColumnHeaderBand"}).length||s.unlock("[data-band=ColumnHeaderBand]"),e.bands.findBy({type:"ColumnFooterBand"}).length||s.unlock("[data-band=ColumnFooterBand]"),e.bands.findBy({type:"ReportSummaryBand"}).length||s.unlock("[data-band=ReportSummaryBand]"),e.bands.findBy({type:"PageFooterBand"}).length||s.unlock("[data-band=PageFooterBand]"),e.bands.findBy({type:"OverlayBand"}).length||s.unlock("[data-band=OverlayBand]"),s.unlock(["[data-band=DataBand]","[data-band=GroupHeaderBand]"]);if(!t)return;t.canHaveChildren("ChildBand")&&!t.has("ChildBand")&&s.unlock("[data-band=ChildBand]"),t.canHaveChildren("DataHeaderBand")&&!t.has("DataHeaderBand")&&s.unlock("[data-band=DataHeaderBand]"),t.canHaveChildren("DataFooterBand")&&!t.has("DataFooterBand")&&s.unlock("[data-band=DataFooterBand]"),t.canHaveChildren("GroupFooterBand")&&!t.has("GroupFooterBand")&&s.unlock("[data-band=GroupFooterBand]")})}}),define("events/component",["jquery","utils","queue","baseEvents","baseComponent","notification","l10n"],function(e,t,n,r,i,s,o){return function(){function l(e){for(var t=0;t<e.length;t+=1)e[t]&&!e[t].attr("copyable")&&e.splice(t,1)}function c(e){var t=u.pages.current.bands.getSelectedComponents(),n=t.length-1;if(n===-1)return;for(;n>=0;n-=1)e.call(t[n]),t[n].render();return t.length}function h(e,t){e!==undefined?(f.unlock(t),e&&f.select(t)):f.lock(t)}var u=require("currentReport"),a=require("customization"),f=require("menu");r.bind("remove-component",function(e){e.remove(),e.collection.container.updateThreshold&&e.collection.container.updateThreshold()}),r.bind("render-component",function(e){e.render(),e.collection.container.updateThreshold()}),r.bind("add-component",function(e,t,a,f){var l=i.create(e);a=a!==!1?!0:!1,l.prop("Width",i.prop("width")),l.prop("Height",i.prop("height")),f.view&&l.prop("Text",f.view),l.render(f.left,f.top),t.put(l),r.trigger("align-component",l,f.left,f.top),l.afterAlign(),l.type==="SubreportObject"&&!l.prop("ReportPage")&&r.trigger("new-subreport-page",l),a&&n.push({context:this,undo:function(e){e.remove()},redo:function(e){e.render()},data:[l]}),r.trigger("balance-band",t),r.trigger("re-render"),s.notify(l.toString()+" "+o.tr("created"),{success:!0}),u.drop(l),l.afterDrop()}),r.bind("put-component",function(e,t,n,r){if(!e)return;t.collection.container!==e&&e.put(t),t.setPosition(n,r)}),r.bind("align-component",function(e,n,r,i){var s=t.nearPoint([n,r]);e.setPosition(s[0],s[1]);if(i)return;s=t.nearPoint([e.prop("Left")+e.prop("Width"),e.prop("Top")+e.prop("Height")]),e.prop("Width",+(s[0]-e.prop("Left")).toFixed(2)),e.prop("Height",+(s[1]-e.prop("Top")).toFixed(2)),e.render()}),r.bind("new-subreport-page",function(t){e.when(u.createPage()).done(function(e){e.attr("isSubreport",!0),r.trigger("add-band","DataBand",e,!1),t.prop("ReportPage",e.prop("Name")),e.render(),r.trigger("activate",e)})}),r.bind("menu-copy",function(){var e=u.pages.current;e.buffer=e.bands.getSelectedComponents();if(!e.buffer.length){e.buffer=null;return}l(e.buffer),e.buffer.length&&(s.notify(o.tr("copied")+" "+e.buffer.length,{info:!0,inEmptyList:!0}),r.trigger("update-menu"))}),r.bind("menu-cut",function(){var t=u.pages.current;t.buffer=t.bands.getSelectedComponents();if(!t.buffer.length){t.buffer=null;return}l(t.buffer),t.buffer.length&&(s.notify(o.tr("cut")+" "+t.buffer.length,{info:!0,inEmptyList:!0}),t.buffer.cut=!0,t.buffer.each(function(){this.remove()}),n.push({context:this,undo:function(n){e.each(n,function(){this.render(),t.buffer=null})},undoData:[t.buffer]}),r.trigger("update-menu"))}),r.bind("menu-past",function(){function y(){var n=[],s=function(e,i){e.attr("pasted",!0),e.render(),i.put(e),t.isMobile?r.trigger("align-component",e,0,0,!0):(r.trigger("align-component",e,e.prop("Left")+d,e.prop("Top")+v,!0),e.state.set.call(e,"in_move"),u.movements.data.activate("moving-component")),n.push(e)},o=e.Deferred();return i.buffer.cut?(e.each(i.buffer,function(e,t){s(t,t.collection.container)}),o.resolve(n)):(e.each(i.buffer,function(e,t){n.push(t.clone())}),e.when.apply(e,n).done(function(){n=[],e.each(arguments,function(e,t){s(t,t.collection.container)}),o.resolve(n)})),o.promise()}var i=u.pages.current;if(!i.buffer||!i.buffer.length)return;var l,c,h,p,d,v,m,g;e.each(i.buffer,function(e,t){d=t.prop("Left"),v=t.prop("Top"),m=t.attr("right"),g=t.attr("bottom");if(!l||l>d)l=d;if(!c||c<m)c=m;if(!h||h>v)h=v;if(!p||p<g)p=g}),d=-l+u.movements.data.pageX-a.$node.width()-i.attr("padding")*4,v=-h+u.movements.data.pageY-f.getHeight()-i.attr("padding")*6,y().done(function(t){n.push({func:function(t,n){e.each(t,function(){this.state.set.call(this,"normal"),r.trigger(n,this)}),u.movements.data.deactivate("moving-component")},undoData:[t,"remove-component"],redoData:[t,"render-component"]}),s.notify(o.tr("pasted")+" "+t.length,{success:!0,inEmptyList:!0}),i.buffer.cut&&(i.buffer=null),r.trigger("update-properties|events-panel",u.getSelected())})}),r.bind("move-component",function(e,t,n){var i=c(function(){var n,r;if(!this.canHaveProp("Layout:Left")||!this.canHaveProp("Layout:Top"))return;n=this.prop("Left"),r=this.prop("Top"),t=t||1;switch(e){case 1:n-=t;break;case 2:r-=t;break;case 3:n+=t;break;case 4:r+=t}n<0&&(n=0),r<0&&(r=0),this.setPosition(n,r,!0)});i&&(i===1&&r.trigger("update-properties|events-panel",u.getSelected()),n&&n())}),r.bind("select-all-components",function(){u.pages.current.bands.everyEntity(function(e){e.components.eachEntity(function(e){e.activate()})}),r.trigger("update-info")}),r.bind("menu-vert-align-top",function(){c(function(){this.prop("VertAlign","Top",!0)})}),r.bind("menu-vert-align-center",function(){c(function(){this.prop("VertAlign","Center",!0)})}),r.bind("menu-vert-align-bottom",function(){c(function(){this.prop("VertAlign","Bottom",!0)})}),r.bind("menu-horz-align-left",function(){c(function(){this.prop("HorzAlign","Left",!0)})}),r.bind("menu-horz-align-center",function(){c(function(){this.prop("HorzAlign","Center",!0)})}),r.bind("menu-horz-align-right",function(){c(function(){this.prop("HorzAlign","Right",!0)})}),r.bind("menu-horz-align-justify",function(){c(function(){this.prop("HorzAlign","Justify",!0)})}),r.bind("menu-font-bold",function(){c(function(){this.attr("Font.Bold",!this.attr("Font.Bold"),!0)})}),r.bind("menu-font-italic",function(){c(function(){this.attr("Font.Italic",!this.attr("Font.Italic"),!0)})}),r.bind("menu-font-underline",function(){c(function(){this.attr("Font.Underline",!this.attr("Font.Underline"),!0)})}),r.bind("menu-font-strikeout",function(){c(function(){this.attr("Font.Strikeout",!this.attr("Font.Strikeout"),!0)})}),r.bind("menu-send-to-back",function(e){e?e.collection.container.components.addInStart(e):c(function(){this.collection.container.components.addInStart(this)})}),r.bind("menu-bring-to-front",function(e){e?e.collection.container.components.add(e):c(function(){this.collection.container.components.add(this)})}),r.bind("menu-border-style",function(e){c(function(){this.prop("Border.Style",e,!0)})}),r.bind("menu-border-width",function(e){c(function(){this.prop("Border.Width",e,!0)})}),r.bind("menu-font-name",function(e){c(function(){this.attr("Font.Name",e,!0)})}),r.bind("menu-font-width",function(e){c(function(){this.attr("Font.Size",e,!0)})}),r.bind("update-menu",function(){var e=u.pages.current,t=e.bands.getSelectedComponents(),n;f.unselect(["vert-align-top","vert-align-center","vert-align-bottom","horz-align-left","horz-align-center","horz-align-right","horz-align-justify","font-bold","font-italic","font-underline","font-strikeout"]),e.buffer?f.unlock("past"):f.lock("past"),t.length?(f.unlock("copy"),f.unlock("cut"),f.unlock("bring-to-front"),f.unlock("send-to-back")):(f.lock("copy"),f.lock("cut"),f.lock("bring-to-front"),f.lock("send-to-back")),t.length===1?(n=t[0].prop("VertAlign"),n?(f.unlock(["vert-align-top","vert-align-center","vert-align-bottom"]),f.select("vert-align-"+n.toLowerCase())):f.lock(["vert-align-top","vert-align-center","vert-align-bottom"]),n=t[0].prop("HorzAlign"),n?(f.unlock(["horz-align-left","horz-align-center","horz-align-right","horz-align-justify"]),f.select("horz-align-"+n.toLowerCase())):f.lock(["horz-align-left","horz-align-center","horz-align-right","horz-align-justify"]),f.unlock(["font-bold","font-italic","font-underline","font-strikeout"]),h(t[0].attr("Font.Bold"),"font-bold"),h(t[0].attr("Font.Italic"),"font-italic"),h(t[0].attr("Font.Underline"),"font-underline"),h(t[0].attr("Font.Strikeout"),"font-strikeout"),n=t[0].attr("Font.Name"),n?(f.unlock("font-name"),f.set("font-name",n)):f.lock("font-name"),n=t[0].attr("Font.Size"),n?(f.unlock("font-width"),f.set("font-width",n)):f.lock("font-width")):f.lock(["text-fill","vert-align-top","vert-align-center","vert-align-bottom","horz-align-left","horz-align-center","horz-align-right","horz-align-justify","font-bold","font-italic","font-underline","font-strikeout","fill-color","border-color","border-style","border-width","font-name","font-width"])})}}),define("customization-res/Data",["jquery","baseEvents","expression","l10n"],function(e,t,n,r){return function(){this.create=function(){var i=require("currentReport"),s=e.Deferred();return n.getMenu().done(function(n){this.$body=n,this.$header=e("<div>"),this.$title=e("<div>"),this.$title.text(r.tr("data")),this.buttonClassName="show-data",this.icon="icon-053",this.$body.on("click",".rt-content",function(){var n=e(this),r=n.parents(".root"),s,o,u=n.data("title"),a=n.data("id"),f,l,c;if(r.is(".system-variables"))f=i.systemVariables.get(u);else if(r.is(".data-sources")){r.is(".data-sources")&&(l=i.dataSources,f=l.findOneAmongAll({_id:a})),f||(s=n.parents(".rt-conn"),s.length&&(l=i.connections,f=l.findOneAmongAll({_id:s.find("> .rt-content:first").data("id")}),n.parent().is(".rt-conn")||(l=f.dataSources,f=l.findOneAmongAll({_id:a}))));if(!f){o=n.parents(".rt-container:first").prev(".rt-content"),o.data("id")&&(c=l.findOneAmongAll({_id:o.data("id")}));if(!c)return;f=c.columns.find(a)[0]}}else r.is(".parameters")&&(f=i.parameters.findEntity(a));t.trigger("update-properties|events-panel",f)}),s.resolve(this)}.bind(this)),s.promise()},this.update=function(){n.getMenu().done(function(e){this.$body.html(e.children())}.bind(this))}}}),define("customization-res/DataSource",["jquery","l10n"],function(){return function(){this.create=function(){return null}}}),define("customization-res/ReportTree",["jquery","l10n","baseEvents"],function(e,t,n){return function(){this.create=function(){var r=require("currentReport");return this.$body=e("<ul class='rt-container'>").append(r.buildTree()),this.$title=e("<div>"),this.$title.text(t.tr("report-tree")),this.buttonClassName="show-rt",this.icon="icon-189",this.$body.addClass("rt-main-container"),r.selfTree.$main.on("click",".rt-content",function(){n.trigger("activate",e(this).parent().data("entity"))}),r.selfTree.$main.on("click",".rt-expand, .rt-icon",function(){var t=e(this),n;return t.is(".rt-icon")&&(t=t.prev(".rt-expand")),n=t.parent().data("entity"),t.is(".icon-exp_minus")?n.selfTree.$container.slideUp(100,function(){t.removeClass("icon-exp_minus").addClass("icon-exp_plus"),n.statusTree=0}):t.is(".icon-exp_plus")&&n.selfTree.$container.slideDown(100,function(){t.removeClass("icon-exp_plus").addClass("icon-exp_minus"),n.statusTree=1}),!1}),this}}}),define("field-properties/base",["jquery","utils"],function(e,t){return t.object(null,{build:function(e,n,r){var i=t.object(this);return i.field=e,i.$label=n,i.$body=r,i.create.apply(i,arguments),i},isValid:function(){return!0},getValue:function(e){return e=e||this.$control,Number(e.val())||e.val()},getProp:function(){return this.field.prop}})}),define("field-properties/select",["jquery","utils","l10n","field-properties/base"],function(e,t,n,r){return t.object(r,{create:function(t){var r,i=t.collection,s=t.value&&t.value.label||t.value;this.$control=e("<select>"),typeof i=="function"&&(i=i.call(t.element,t)),!e.isArray(i)&&!e.isPlainObject(i)&&(i=[]),t.multiple&&(s&&typeof s=="string"&&(s=s.split(",")),this.$control.attr("multiple",!0)),e.each(i,function(t,i){r=e("<option>"),typeof t!="string"&&(t=i),t=t.label||t,r.val(t),r.text(n.tr(t)),(t.toString()===s||e.inArray(t,s)!==-1)&&r.attr("selected",!0),this.$control.append(r)}.bind(this))},getValue:function(t){var n=[];return t=t||this.$control,e("option:selected",t).each(function(){n.push(e(this).val())}),n.length===1?n[0]:n}})}),define("field-properties/textarea",["jquery","utils","field-properties/base"],function(e,t,n){return t.object(n,{create:function(t){this.$control=e("<textarea>"),this.$control.val(t.value)}})}),define("field-properties/checkbox",["jquery","utils","l10n","field-properties/base"],function(e,t,n,r){return t.object(r,{create:function(t,n,r){this.$control=e("<input/>"),this.$control.attr({type:"checkbox",checked:t.value})},getValue:function(e){return e=e||this.$control,e.prop("checked")}})}),define("field-properties/unit",["jquery","utils","units","field-properties/base"],function(e,t,n,r){return t.object(r,{create:function(t){this.$control=e("<input/>"),this.$control.attr("type","number"),this.$control.val(n.toUnit(t.value)||t.defaultValue)},isValid:function(e){return t.isFloat(e)||t.isInteger(e)},getValue:function(e,t){var r;return e=e||this.$control,r=parseFloat(n.toPx(e.val()),10),t&&(r=n.toUnit(r)),r}})}),define("field-properties/file",["jquery","utils","field-properties/base"],function(e,t,n){var r;return t.object(n,{create:function(n){r=e.Deferred(),this.$control=e("<input/>"),this.$control.attr("type",n.type),this.$control.on("change",function(){t.readURL(this,function(e){r.resolve(e.target.result)})})},getValue:function(e){return r.promise()}})}),define("field-properties/event",["jquery","utils","field-properties/base","baseEvents"],function(e,t,n,r){return t.object(n,{create:function(t,n,i){var s=e("<input/>");this.$control=e("<input/>"),this.$control.attr("type","text"),this.$control.val(t.value),this.$control.css({width:"80%",display:"inline-block"}),this.$control.addClass("d-fc-exp-input"),s.attr("type","button"),s.addClass("d-fc-exp-but"),s.val("..."),i.append(this.$control,s),s.on("click",function(){r.trigger("procedure",t.element,t)})}})}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/core",["jquery"],e):e(jQuery)}(function(e){function t(t,r){var i,s,o,u=t.nodeName.toLowerCase();return"area"===u?(i=t.parentNode,s=i.name,!t.href||!s||i.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap='#"+s+"']")[0],!!o&&n(o))):(/^(input|select|textarea|button|object)$/.test(u)?!t.disabled:"a"===u?t.href||r:r)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var n=this.css("position"),r=n==="absolute",i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return r&&t.css("position")==="static"?!1:i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return n==="fixed"||!s.length?e(this[0].ownerDocument||document):s},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(n){return t(n,!isNaN(e.attr(n,"tabindex")))},tabbable:function(n){var r=e.attr(n,"tabindex"),i=isNaN(r);return(i||r>=0)&&t(n,!i)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){function o(t,n,i,s){return e.each(r,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var r=n==="Width"?["Left","Right"]:["Top","Bottom"],i=n.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return t===undefined?s["inner"+n].call(this):this.each(function(){e(this).css(i,o(this,t)+"px")})},e.fn["outer"+n]=function(t,r){return typeof t!="number"?s["outer"+n].call(this,t):this.each(function(){e(this).css(i,o(this,t,!0,r)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(n,r){return typeof n=="number"?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(t!==undefined)return this.css("zIndex",t);if(this.length){var n=e(this[0]),r,i;while(n.length&&n[0]!==document){r=n.css("position");if(r==="absolute"||r==="relative"||r==="fixed"){i=parseInt(n.css("zIndex"),10);if(!isNaN(i)&&i!==0)return i}n=n.parent()}}return 0}}),e.ui.plugin={add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n,r){var i,s=e.plugins[t];if(!s)return;if(!r&&(!e.element[0].parentNode||e.element[0].parentNode.nodeType===11))return;for(i=0;i<s.length;i++)e.options[s[i][0]]&&s[i][1].apply(e.element,n)}}}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/datepicker",["jquery","./core"],e):e(jQuery)}(function(e){function n(e){var t,n;while(e.length&&e[0]!==document){t=e.css("position");if(t==="absolute"||t==="relative"||t==="fixed"){n=parseInt(e.css("zIndex"),10);if(!isNaN(n)&&n!==0)return n}e=e.parent()}return 0}function r(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=i(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",s)}function s(){e.datepicker._isDisabledDatepicker(t.inline?t.dpDiv.parent()[0]:t.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).addClass("ui-datepicker-next-hover"))}function o(t,n){e.extend(t,n);for(var r in n)n[r]==null&&(t[r]=n[r]);return t}e.extend(e.ui,{datepicker:{version:"1.11.4"}});var t;return e.extend(r.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return o(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var r,i,s;r=t.nodeName.toLowerCase(),i=r==="div"||r==="span",t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),i),s.settings=e.extend({},n||{}),r==="input"?this._connectDatepicker(t,s):i&&this._inlineDatepicker(t,s)},_newInst:function(t,n){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?i(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,n){var r=e(t);n.append=e([]),n.trigger=e([]);if(r.hasClass(this.markerClassName))return;this._attachments(r,n),r.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),e.data(t,"datepicker",n),n.settings.disabled&&this._disableDatepicker(t)},_attachments:function(t,n){var r,i,s,o=this._get(n,"appendText"),u=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[u?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),r=this._get(n,"showOn"),(r==="focus"||r==="both")&&t.focus(this._showDatepicker);if(r==="button"||r==="both")i=this._get(n,"buttonText"),s=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:i,title:i}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:i,title:i}):i)),t[u?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1})},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,r,i,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){n=0,r=0;for(i=0;i<e.length;i++)e[i].length>n&&(n=e[i].length,r=i);return r},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,n){var r=e(t);if(r.hasClass(this.markerClassName))return;r.addClass(this.markerClassName).append(n.dpDiv),e.data(t,"datepicker",n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(t),n.dpDiv.css("display","block")},_dialogDatepicker:function(t,n,r,i,s){var u,a,f,l,c,h=this._dialogInst;return h||(this.uuid+=1,u="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+u+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),h=this._dialogInst=this._newInst(this._dialogInput,!1),h.settings={},e.data(this._dialogInput[0],"datepicker",h)),o(h.settings,i||{}),n=n&&n.constructor===Date?this._formatDate(h,n):n,this._dialogInput.val(n),this._pos=s?s.length?s:[s.pageX,s.pageY]:null,this._pos||(a=document.documentElement.clientWidth,f=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[a/2-100+l,f/2-150+c]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),h.settings.onSelect=r,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",h),this},_destroyDatepicker:function(n){var r,i=e(n),s=e.data(n,"datepicker");if(!i.hasClass(this.markerClassName))return;r=n.nodeName.toLowerCase(),e.removeData(n,"datepicker"),r==="input"?(s.append.remove(),s.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r==="div"||r==="span")&&i.removeClass(this.markerClassName).empty(),t===s&&(t=null)},_enableDatepicker:function(t){var n,r,i=e(t),s=e.data(t,"datepicker");if(!i.hasClass(this.markerClassName))return;n=t.nodeName.toLowerCase();if(n==="input")t.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(n==="div"||n==="span")r=i.children("."+this._inlineClass),r.children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e})},_disableDatepicker:function(t){var n,r,i=e(t),s=e.data(t,"datepicker");if(!i.hasClass(this.markerClassName))return;n=t.nodeName.toLowerCase();if(n==="input")t.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(n==="div"||n==="span")r=i.children("."+this._inlineClass),r.children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,n,r){var i,s,u,a,f=this._getInst(t);if(arguments.length===2&&typeof n=="string")return n==="defaults"?e.extend({},e.datepicker._defaults):f?n==="all"?e.extend({},f.settings):this._get(f,n):null;i=n||{},typeof n=="string"&&(i={},i[n]=r),f&&(this._curInst===f&&this._hideDatepicker(),s=this._getDateDatepicker(t,!0),u=this._getMinMaxDate(f,"min"),a=this._getMinMaxDate(f,"max"),o(f.settings,i),u!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(f.settings.minDate=this._formatDate(f,u)),a!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(f.settings.maxDate=this._formatDate(f,a)),"disabled"in i&&(i.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),f),this._autoSize(f),this._setDate(f,s),this._updateAlternate(f),this._updateDatepicker(f))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,r,i,s=e.datepicker._getInst(t.target),o=!0,u=s.dpDiv.is(".ui-datepicker-rtl");s._keyEvent=!0;if(e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return i=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),i[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,i[0]),n=e.datepicker._get(s,"onSelect"),n?(r=e.datepicker._formatDate(s),n.apply(s.input?s.input[0]:null,[r,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else t.keyCode===36&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,r,i=e.datepicker._getInst(t.target);if(e.datepicker._get(i,"constrainInput"))return n=e.datepicker._possibleChars(e.datepicker._get(i,"dateFormat")),r=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||r<" "||!n||n.indexOf(r)>-1},_doKeyUp:function(t){var n,r=e.datepicker._getInst(t.target);if(r.input.val()!==r.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(r,"dateFormat"),r.input?r.input.val():null,e.datepicker._getFormatConfig(r)),n&&(e.datepicker._setDateFromField(r),e.datepicker._updateAlternate(r),e.datepicker._updateDatepicker(r))}catch(i){}return!0},_showDatepicker:function(t){t=t.target||t,t.nodeName.toLowerCase()!=="input"&&(t=e("input",t.parentNode)[0]);if(e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)return;var r,i,s,u,a,f,l;r=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==r&&(e.datepicker._curInst.dpDiv.stop(!0,!0),r&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),i=e.datepicker._get(r,"beforeShow"),s=i?i.apply(t,[t,r]):{};if(s===!1)return;o(r.settings,s),r.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(r),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),u=!1,e(t).parents().each(function(){return u|=e(this).css("position")==="fixed",!u}),a={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,r.dpDiv.empty(),r.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(r),a=e.datepicker._checkOffset(r,a,u),r.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":u?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),r.inline||(f=e.datepicker._get(r,"showAnim"),l=e.datepicker._get(r,"duration"),r.dpDiv.css("z-index",n(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[f]?r.dpDiv.show(f,e.datepicker._get(r,"showOptions"),l):r.dpDiv[f||"show"](f?l:null),e.datepicker._shouldFocusInput(r)&&r.input.focus(),e.datepicker._curInst=r)},_updateDatepicker:function(n){this.maxRows=4,t=n,n.dpDiv.empty().append(this._generateHTML(n)),this._attachHandlers(n);var r,i=this._getNumberOfMonths(n),o=i[1],u=17,a=n.dpDiv.find("."+this._dayOverClass+" a");a.length>0&&s.apply(a.get(0)),n.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&n.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",u*o+"em"),n.dpDiv[(i[0]!==1||i[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi"),n.dpDiv[(this._get(n,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),n===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(n)&&n.input.focus(),n.yearshtml&&(r=n.yearshtml,setTimeout(function(){r===n.yearshtml&&n.yearshtml&&n.dpDiv.find("select.ui-datepicker-year:first").replaceWith(n.yearshtml),r=n.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,n,r){var i=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,u=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(r?0:e(document).scrollLeft()),f=document.documentElement.clientHeight+(r?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?i-o:0,n.left-=r&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=r&&n.top===t.input.offset().top+u?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+i>a&&a>i?Math.abs(n.left+i-a):0),n.top-=Math.min(n.top,n.top+s>f&&f>s?Math.abs(s+u):0),n},_findPos:function(t){var n,r=this._getInst(t),i=this._get(r,"isRTL");while(t&&(t.type==="hidden"||t.nodeType!==1||e.expr.filters.hidden(t)))t=t[i?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var n,r,i,s,o=this._curInst;if(!o||t&&o!==e.data(t,"datepicker"))return;this._datepickerShowing&&(n=this._get(o,"showAnim"),r=this._get(o,"duration"),i=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[n]||e.effects[n])?o.dpDiv.hide(n,e.datepicker._get(o,"showOptions"),r,i):o.dpDiv[n==="slideDown"?"slideUp":n==="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1,s=this._get(o,"onClose"),s&&s.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(!e.datepicker._curInst)return;var n=e(t.target),r=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&n.parents("#"+e.datepicker._mainDivId).length===0&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==r)&&e.datepicker._hideDatepicker()},_adjustDate:function(t,n,r){var i=e(t),s=this._getInst(i[0]);if(this._isDisabledDatepicker(i[0]))return;this._adjustInstDate(s,n+(r==="M"?this._get(s,"showCurrentAtPos"):0),r),this._updateDatepicker(s)},_gotoToday:function(t){var n,r=e(t),i=this._getInst(r[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(n=new Date,i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()),this._notifyChange(i),this._adjustDate(r)},_selectMonthYear:function(t,n,r){var i=e(t),s=this._getInst(i[0]);s["selected"+(r==="M"?"Month":"Year")]=s["draw"+(r==="M"?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(i)},_selectDay:function(t,n,r,i){var s,o=e(t);if(e(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0]))return;s=this._getInst(o[0]),s.selectedDay=s.currentDay=e("a",i).html(),s.selectedMonth=s.currentMonth=n,s.selectedYear=s.currentYear=r,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var r,i=e(t),s=this._getInst(i[0]);n=n!=null?n:this._formatDate(s),s.input&&s.input.val(n),this._updateAlternate(s),r=this._get(s,"onSelect"),r?r.apply(s.input?s.input[0]:null,[n,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],typeof s.input[0]!="object"&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,r,i,s=this._get(t,"altField");s&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),i=this.formatDate(n,r,this._getFormatConfig(t)),e(s).each(function(){e(this).val(i)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,r){if(t==null||n==null)throw"Invalid arguments";n=typeof n=="object"?n.toString():n+"";if(n==="")return null;var i,s,o,u=0,a=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,f=typeof a!="string"?a:(new Date).getFullYear()%100+parseInt(a,10),l=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,c=(r?r.dayNames:null)||this._defaults.dayNames,h=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,p=(r?r.monthNames:null)||this._defaults.monthNames,d=-1,v=-1,m=-1,g=-1,y=!1,b,w=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},E=function(e){var t=w(e),r=e==="@"?14:e==="!"?20:e==="y"&&t?4:e==="o"?3:2,i=e==="y"?r:1,s=new RegExp("^\\d{"+i+","+r+"}"),o=n.substring(u).match(s);if(!o)throw"Missing number at position "+u;return u+=o[0].length,parseInt(o[0],10)},S=function(t,r,i){var s=-1,o=e.map(w(t)?i:r,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});e.each(o,function(e,t){var r=t[1];if(n.substr(u,r.length).toLowerCase()===r.toLowerCase())return s=t[0],u+=r.length,!1});if(s!==-1)return s+1;throw"Unknown name at position "+u},x=function(){if(n.charAt(u)!==t.charAt(i))throw"Unexpected literal at position "+u;u++};for(i=0;i<t.length;i++)if(y)t.charAt(i)==="'"&&!w("'")?y=!1:x();else switch(t.charAt(i)){case"d":m=E("d");break;case"D":S("D",l,c);break;case"o":g=E("o");break;case"m":v=E("m");break;case"M":v=S("M",h,p);break;case"y":d=E("y");break;case"@":b=new Date(E("@")),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"!":b=new Date((E("!")-this._ticksTo1970)/1e4),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"'":w("'")?x():y=!0;break;default:x()}if(u<n.length){o=n.substr(u);if(!/^\s+/.test(o))throw"Extra/unparsed characters found in date: "+o}d===-1?d=(new Date).getFullYear():d<100&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=f?0:-100));if(g>-1){v=1,m=g;do{s=this._getDaysInMonth(d,v-1);if(m<=s)break;v++,m-=s}while(!0)}b=this._daylightSavingAdjust(new Date(d,v-1,m));if(b.getFullYear()!==d||b.getMonth()+1!==v||b.getDate()!==m)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=function(t){var n=r+1<e.length&&e.charAt(r+1)===t;return n&&r++,n},f=function(e,t,n){var r=""+t;if(a(e))while(r.length<n)r="0"+r;return r},l=function(e,t,n,r){return a(e)?r[t]:n[t]},c="",h=!1;if(t)for(r=0;r<e.length;r++)if(h)e.charAt(r)==="'"&&!a("'")?h=!1:c+=e.charAt(r);else switch(e.charAt(r)){case"d":c+=f("d",t.getDate(),2);break;case"D":c+=l("D",t.getDay(),i,s);break;case"o":c+=f("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":c+=f("m",t.getMonth()+1,2);break;case"M":c+=l("M",t.getMonth(),o,u);break;case"y":c+=a("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=t.getTime()*1e4+this._ticksTo1970;break;case"'":a("'")?c+="'":h=!0;break;default:c+=e.charAt(r)}return c},_possibleChars:function(e){var t,n="",r=!1,i=function(n){var r=t+1<e.length&&e.charAt(t+1)===n;return r&&t++,r};for(t=0;t<e.length;t++)if(r)e.charAt(t)==="'"&&!i("'")?r=!1:n+=e.charAt(t);else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":i("'")?n+="'":r=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()===e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),s=i,o=this._getFormatConfig(e);try{s=this.parseDate(n,r,o)||i}catch(u){r=t?"":r}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=r?s.getDate():0,e.currentMonth=r?s.getMonth():0,e.currentYear=r?s.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,r){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(r){}var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=i.getFullYear(),o=i.getMonth(),u=i.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,f=a.exec(n);while(f){switch(f[2]||"d"){case"d":case"D":u+=parseInt(f[1],10);break;case"w":case"W":u+=parseInt(f[1],10)*7;break;case"m":case"M":o+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o))}f=a.exec(n)}return new Date(s,o,u)},o=n==null||n===""?r:typeof n=="string"?s(n):typeof n=="number"?isNaN(n)?r:i(n):new Date(n.getTime());return o=o&&o.toString()==="Invalid Date"?r:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!==e.selectedMonth||s!==e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()===""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),r="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(r,-n,"M")},next:function(){e.datepicker._adjustDate(r,+n,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(r)},selectDay:function(){return e.datepicker._selectDay(r,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(r,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(r,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=new Date,R=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),U=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),X=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),$=this._get(e,"showCurrentAtPos"),J=this._get(e,"stepMonths"),K=V[0]!==1||V[1]!==1,Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),Y=this._getMinMaxDate(e,"max"),Z=e.drawMonth-$,et=e.drawYear;Z<0&&(Z+=12,et--);if(Y){t=this._daylightSavingAdjust(new Date(Y.getFullYear(),Y.getMonth()-V[0]*V[1]+1,Y.getDate())),t=G&&t<G?G:t;while(this._daylightSavingAdjust(new Date(et,Z,1))>t)Z--,Z<0&&(Z=11,et--)}e.drawMonth=Z,e.drawYear=et,n=this._get(e,"prevText"),n=X?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z-J,1)),this._getFormatConfig(e)):n,r=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>",i=this._get(e,"nextText"),i=X?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z+J,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>",o=this._get(e,"currentText"),u=this._get(e,"gotoCurrent")&&e.currentDay?Q:R,o=X?this.formatDate(o,u,this._getFormatConfig(e)):o,a=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",f=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?a:"")+(this._isInRange(e,u)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(U?"":a)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,c=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),d=this._get(e,"monthNames"),v=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),g=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",E;for(S=0;S<V[0];S++){x="",this.maxRows=4;for(T=0;T<V[1];T++){N=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),C=" ui-corner-all",k="";if(K){k+="<div class='ui-datepicker-group";if(V[1]>1)switch(T){case 0:k+=" ui-datepicker-group-first",C=" ui-corner-"+(U?"right":"left");break;case V[1]-1:k+=" ui-datepicker-group-last",C=" ui-corner-"+(U?"left":"right");break;default:k+=" ui-datepicker-group-middle",C=""}k+="'>"}k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&S===0?U?s:r:"")+(/all|right/.test(C)&&S===0?U?r:s:"")+this._generateMonthYearHeader(e,Z,et,G,Y,S>0||T>0,d,v)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",L=c?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"";for(E=0;E<7;E++)A=(E+l)%7,L+="<th scope='col'"+((E+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[A]+"'>"+p[A]+"</span></th>";k+=L+"</tr></thead><tbody>",O=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,O)),M=(this._getFirstDayOfMonth(et,Z)-l+7)%7,_=Math.ceil((M+O)/7),D=K?this.maxRows>_?this.maxRows:_:_,this.maxRows=D,P=this._daylightSavingAdjust(new Date(et,Z,1-M));for(H=0;H<D;H++){k+="<tr>",B=c?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(P)+"</td>":"";for(E=0;E<7;E++)j=m?m.apply(e.input?e.input[0]:null,[P]):[!0,""],F=P.getMonth()!==Z,I=F&&!y||!j[0]||G&&P<G||Y&&P>Y,B+="<td class='"+((E+l+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(P.getTime()===N.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===P.getTime()&&b.getTime()===N.getTime()?" "+this._dayOverClass:"")+(I?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!g?"":" "+j[1]+(P.getTime()===Q.getTime()?" "+this._currentClass:"")+(P.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+((!F||g)&&j[2]?" title='"+j[2].replace(/'/g,"&#39;")+"'":"")+(I?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(F&&!g?"&#xa0;":I?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===R.getTime()?" ui-state-highlight":"")+(P.getTime()===Q.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);k+=B+"</tr>"}Z++,Z>11&&(Z=0,et++),k+="</tbody></table>"+(K?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=k}w+=x}return w+=f,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(s||!m)w+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{a=r&&r.getFullYear()===n,f=i&&i.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(l=0;l<12;l++)(!a||l>=r.getMonth())&&(!f||l<=i.getMonth())&&(w+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+u[l]+"</option>");w+="</select>"}y||(b+=w+(s||!m||!g?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!g)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{c=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},d=p(c[0]),v=Math.max(d,p(c[1]||"")),d=r?Math.max(d,r.getFullYear()):d,v=i?Math.min(v,i.getFullYear()):v,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;d<=v;d++)e.yearshtml+="<option value='"+d+"'"+(d===n?" selected='selected'":"")+">"+d+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}}return b+=this._get(e,"yearSuffix"),y&&(b+=(s||!m||!g?"&#xa0;":"")+w),b+="</div>",b},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n==="Y"?t:0),i=e.drawMonth+(n==="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n==="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n==="M"||n==="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return r&&i>r?r:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n,r,i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,u=null,a=this._get(e,"yearRange");return a&&(n=a.split(":"),r=(new Date).getFullYear(),o=parseInt(n[0],10),u=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(o+=r),n[1].match(/[+\-].*/)&&(u+=r)),(!i||t.getTime()>=i.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!u||t.getFullYear()<=u)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),e("#"+e.datepicker._mainDivId).length===0&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return typeof t!="string"||t!=="isDisabled"&&t!=="getDate"&&t!=="widget"?t==="option"&&arguments.length===2&&typeof arguments[1]=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){typeof t=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new r,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.4",e.datepicker}),define("field-properties/datetime",["jquery","jquery-ui/datepicker","utils","field-properties/base"],function(e,t,n,r){return n.object(r,{create:function(t){var n=t.value;this.$control=e("<input/>"),this.$control.datepicker(),this.$control.datepicker("setDate",n)},getValue:function(e){var t;return e=e||this.$control,t=e.val(),new Date(t)}})}),function(e){typeof define=="function"&&define.amd?define("spectrum",["jquery"],e):typeof exports=="object"&&typeof module=="object"?module.exports=e:e(jQuery)}(function(e,t){function a(t,n,r,i){var o=[];for(var u=0;u<t.length;u++){var a=t[u];if(a){var f=tinycolor(a),l=f.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";l+=tinycolor.equals(n,a)?" sp-thumb-active":"";var c=f.toString(i.preferredFormat||"rgb"),h=s?"background-color:"+f.toRgbString():"filter:"+f.toFilter();o.push('<span title="'+c+'" data-color="'+f.toRgbString()+'" class="'+l+'"><span class="sp-thumb-inner" style="'+h+';" /></span>')}else{var p="sp-clear-display";o.push(e("<div />").append(e('<span data-color="" style="background-color:transparent;" class="'+p+'"></span>').attr("title",i.noColorSelectedText)).html())}}return"<div class='sp-cf "+r+"'>"+o.join("")+"</div>"}function f(){for(var e=0;e<r.length;e++)r[e]&&r[e].hide()}function l(t,r){var i=e.extend({},n,t);return i.callbacks={move:v(i.move,r),change:v(i.change,r),show:v(i.show,r),hide:v(i.hide,r),beforeShow:v(i.beforeShow,r)},i}function c(n,c){function Tt(){p.showPaletteOnly&&(p.showPalette=!0),lt.text(p.showPaletteOnly?p.togglePaletteMoreText:p.togglePaletteLessText);if(p.palette){j=p.palette.slice(0),F=e.isArray(j[0])?j:[j],I={};for(var t=0;t<F.length;t++)for(var n=0;n<F[t].length;n++){var r=tinycolor(F[t][n]).toRgbString();I[r]=!0}}K.toggleClass("sp-flat",v),K.toggleClass("sp-input-disabled",!p.showInput),K.toggleClass("sp-alpha-enabled",p.showAlpha),K.toggleClass("sp-clear-enabled",xt),K.toggleClass("sp-buttons-disabled",!p.showButtons),K.toggleClass("sp-palette-buttons-disabled",!p.togglePaletteOnly),K.toggleClass("sp-palette-disabled",!p.showPalette),K.toggleClass("sp-palette-only",p.showPaletteOnly),K.toggleClass("sp-initial-disabled",!p.showInitial),K.addClass(p.className).addClass(p.containerClassName),Vt()}function Nt(){function n(t){return t.data&&t.data.ignore?(It(e(t.target).closest(".sp-thumb-el").data("color")),Ut()):(It(e(t.target).closest(".sp-thumb-el").data("color")),Ut(),Xt(!0),p.hideAfterPaletteSelect&&jt()),!1}i&&K.find("*:not(input)").attr("unselectable","on"),Tt(),pt&&V.after(dt).hide(),xt||at.hide();if(v)V.after(K).hide();else{var t=p.appendTo==="parent"?V.parent():e(p.appendTo);t.length!==1&&(t=e("body")),t.append(K)}Ct(),vt.bind("click.spectrum touchstart.spectrum",function(t){J||Pt(),t.stopPropagation(),e(t.target).is("input")||t.preventDefault()}),(V.is(":disabled")||p.disabled===!0)&&Qt(),K.click(d),it.change(Dt),it.bind("paste",function(){setTimeout(Dt,1)}),it.keydown(function(e){e.keyCode==13&&Dt()}),ut.text(p.cancelText),ut.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),Ft(),jt()}),at.attr("title",p.clearText),at.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),St=!0,Ut(),v&&Xt(!0)}),ft.text(p.chooseText),ft.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),i&&it.is(":focus")&&it.trigger("change"),Rt()&&(Xt(!0),jt())}),lt.text(p.showPaletteOnly?p.togglePaletteMoreText:p.togglePaletteLessText),lt.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),p.showPaletteOnly=!p.showPaletteOnly,!p.showPaletteOnly&&!v&&K.css("left","-="+(Q.outerWidth(!0)+5)),Tt()}),m(nt,function(e,t,n){B=e/O,St=!1,n.shiftKey&&(B=Math.round(B*10)/10),Ut()},Mt,_t),m(Z,function(e,t){D=parseFloat(t/L),St=!1,p.showAlpha||(B=1),Ut()},Mt,_t),m(G,function(e,t,n){if(!n.shiftKey)z=null;else if(!z){var r=P*N,i=C-H*C,s=Math.abs(e-r)>Math.abs(t-i);z=s?"x":"y"}var o=!z||z==="x",u=!z||z==="y";o&&(P=parseFloat(e/N)),u&&(H=parseFloat((C-t)/C)),St=!1,p.showAlpha||(B=1),Ut()},Mt,_t),gt?(It(gt),zt(),wt=bt||tinycolor(gt).format,kt(gt)):zt(),v&&Ht();var r=i?"mousedown.spectrum":"click.spectrum touchstart.spectrum";st.delegate(".sp-thumb-el",r,n),ot.delegate(".sp-thumb-el:nth-child(1)",r,{ignore:!0},n)}function Ct(){if(w&&window.localStorage){try{var t=window.localStorage[w].split(",#");t.length>1&&(delete window.localStorage[w],e.each(t,function(e,t){kt(t)}))}catch(n){}try{q=window.localStorage[w].split(";")}catch(n){}}}function kt(t){if(b){var n=tinycolor(t).toRgbString();if(!I[n]&&e.inArray(n,q)===-1){q.push(n);while(q.length>R)q.shift()}if(w&&window.localStorage)try{window.localStorage[w]=q.join(";")}catch(r){}}}function Lt(){var e=[];if(p.showPalette)for(var t=0;t<q.length;t++){var n=tinycolor(q[t]).toRgbString();I[n]||e.push(q[t])}return e.reverse().slice(0,p.maxSelectionSize)}function At(){var t=qt(),n=e.map(F,function(e,n){return a(e,t,"sp-palette-row sp-palette-row-"+n,p)});Ct(),q&&n.push(a(Lt(),t,"sp-palette-row sp-palette-row-selection",p)),st.html(n.join(""))}function Ot(){if(p.showInitial){var e=yt,t=qt();ot.html(a([e,t],t,"sp-palette-row-initial",p))}}function Mt(){(C<=0||N<=0||L<=0)&&Vt(),K.addClass(U),z=null,V.trigger("dragstart.spectrum",[qt()])}function _t(){K.removeClass(U),V.trigger("dragstop.spectrum",[qt()])}function Dt(){var e=it.val();if(e!==null&&e!==""||!xt){var t=tinycolor(e);t.isValid()?(It(t),Xt(!0)):it.addClass("sp-validation-error")}else It(null),Xt(!0)}function Pt(){T?jt():Ht()}function Ht(){var t=e.Event("beforeShow.spectrum");if(T){Vt();return}V.trigger(t,[qt()]);if(S.beforeShow(qt())===!1||t.isDefaultPrevented())return;f(),T=!0,e(W).bind("click.spectrum",Bt),e(window).bind("resize.spectrum",x),dt.addClass("sp-active"),K.removeClass("sp-hidden"),Vt(),zt(),yt=qt(),Ot(),S.show(yt),V.trigger("show.spectrum",[yt])}function Bt(e){if(e.button==2)return;Et?Xt(!0):Ft(),jt()}function jt(){if(!T||v)return;T=!1,e(W).unbind("click.spectrum",Bt),e(window).unbind("resize.spectrum",x),dt.removeClass("sp-active"),K.addClass("sp-hidden"),S.hide(qt()),V.trigger("hide.spectrum",[qt()])}function Ft(){It(yt,!0)}function It(e,t){if(tinycolor.equals(e,qt())){zt();return}var n,r;!e&&xt?St=!0:(St=!1,n=tinycolor(e),r=n.toHsv(),D=r.h%360/360,P=r.s,H=r.v,B=r.a),zt(),n&&n.isValid()&&!t&&(wt=bt||n.getFormat())}function qt(e){return e=e||{},xt&&St?null:tinycolor.fromRatio({h:D,s:P,v:H,a:Math.round(B*100)/100},{format:e.format||wt})}function Rt(){return!it.hasClass("sp-validation-error")}function Ut(){zt(),S.move(qt()),V.trigger("move.spectrum",[qt()])}function zt(){it.removeClass("sp-validation-error"),Wt();var e=tinycolor.fromRatio({h:D,s:1,v:1});G.css("background-color",e.toHexString());var t=wt;B<1&&(B!==0||t!=="name")&&(t==="hex"||t==="hex3"||t==="hex6"||t==="name")&&(t="rgb");var n=qt({format:t}),r="";mt.removeClass("sp-clear-display"),mt.css("background-color","transparent");if(!n&&xt)mt.addClass("sp-clear-display");else{var o=n.toHexString(),u=n.toRgbString();s||n.alpha===1?mt.css("background-color",u):(mt.css("background-color","transparent"),mt.css("filter",n.toFilter()));if(p.showAlpha){var a=n.toRgb();a.a=0;var f=tinycolor(a).toRgbString(),l="linear-gradient(left, "+f+", "+o+")";i?tt.css("filter",tinycolor(f).toFilter({gradientType:1},o)):(tt.css("background","-webkit-"+l),tt.css("background","-moz-"+l),tt.css("background","-ms-"+l),tt.css("background","linear-gradient(to right, "+f+", "+o+")"))}r=n.toString(t)}p.showInput&&it.val(r),p.showPalette&&At(),Ot()}function Wt(){var e=P,t=H;if(xt&&St)rt.hide(),et.hide(),Y.hide();else{rt.show(),et.show(),Y.show();var n=e*N,r=C-t*C;n=Math.max(-k,Math.min(N-k,n-k)),r=Math.max(-k,Math.min(C-k,r-k)),Y.css({top:r+"px",left:n+"px"});var i=B*O;rt.css({left:i-M/2+"px"});var s=D*L;et.css({top:s-_+"px"})}}function Xt(e){var t=qt(),n="",r=!tinycolor.equals(t,yt);t&&(n=t.toString(wt),kt(t)),ct&&V.val(n),e&&r&&(S.change(t),V.trigger("change",[t]))}function Vt(){N=G.width(),C=G.height(),k=Y.height(),A=Z.width(),L=Z.height(),_=et.height(),O=nt.width(),M=rt.width(),v||(K.css("position","absolute"),p.offset?K.offset(p.offset):K.offset(h(K,vt))),Wt(),p.showPalette&&At(),V.trigger("reflow.spectrum")}function $t(){V.show(),vt.unbind("click.spectrum touchstart.spectrum"),K.remove(),dt.remove(),r[Yt.id]=null}function Jt(n,r){if(n===t)return e.extend({},p);if(r===t)return p[n];p[n]=r,Tt()}function Kt(){J=!1,V.attr("disabled",!1),vt.removeClass("sp-disabled")}function Qt(){jt(),J=!0,V.attr("disabled",!0),vt.addClass("sp-disabled")}function Gt(e){p.offset=e,Vt()}var p=l(c,n),v=p.flat,b=p.showSelectionPalette,w=p.localStorageKey,E=p.theme,S=p.callbacks,x=g(Vt,10),T=!1,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=1,j=[],F=[],I={},q=p.selectionPalette.slice(0),R=p.maxSelectionSize,U="sp-dragging",z=null,W=n.ownerDocument,X=W.body,V=e(n),J=!1,K=e(u,W).addClass(E),Q=K.find(".sp-picker-container"),G=K.find(".sp-color"),Y=K.find(".sp-dragger"),Z=K.find(".sp-hue"),et=K.find(".sp-slider"),tt=K.find(".sp-alpha-inner"),nt=K.find(".sp-alpha"),rt=K.find(".sp-alpha-handle"),it=K.find(".sp-input"),st=K.find(".sp-palette"),ot=K.find(".sp-initial"),ut=K.find(".sp-cancel"),at=K.find(".sp-clear"),ft=K.find(".sp-choose"),lt=K.find(".sp-palette-toggle"),ct=V.is("input"),ht=ct&&V.attr("type")==="color"&&y(),pt=ct&&!v,dt=pt?e(o).addClass(E).addClass(p.className).addClass(p.replacerClassName):e([]),vt=pt?dt:V,mt=dt.find(".sp-preview-inner"),gt=p.color||ct&&V.val(),yt=!1,bt=p.preferredFormat,wt=bt,Et=!p.showButtons||p.clickoutFiresChange,St=!gt,xt=p.allowEmpty&&!ht;Nt();var Yt={show:Ht,hide:jt,toggle:Pt,reflow:Vt,option:Jt,enable:Kt,disable:Qt,offset:Gt,set:function(e){It(e),Xt()},get:qt,destroy:$t,container:K};return Yt.id=r.push(Yt)-1,Yt}function h(t,n){var r=0,i=t.outerWidth(),s=t.outerHeight(),o=n.outerHeight(),u=t[0].ownerDocument,a=u.documentElement,f=a.clientWidth+e(u).scrollLeft(),l=a.clientHeight+e(u).scrollTop(),c=n.offset();return c.top+=o,c.left-=Math.min(c.left,c.left+i>f&&f>i?Math.abs(c.left+i-f):0),c.top-=Math.min(c.top,c.top+s>l&&l>s?Math.abs(s+o-r):r),c}function p(){}function d(e){e.stopPropagation()}function v(e,t){var n=Array.prototype.slice,r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}function m(t,n,r,s){function p(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function d(e){if(u){if(i&&o.documentMode<9&&!e.button)return m();var r=e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0],s=r&&r.pageX||e.pageX,h=r&&r.pageY||e.pageY,d=Math.max(0,Math.min(s-a.left,l)),v=Math.max(0,Math.min(h-a.top,f));c&&p(e),n.apply(t,[d,v,e])}}function v(n){var i=n.which?n.which==3:n.button==2;!i&&!u&&r.apply(t,arguments)!==!1&&(u=!0,f=e(t).height(),l=e(t).width(),a=e(t).offset(),e(o).bind(h),e(o.body).addClass("sp-dragging"),c||d(n),p(n))}function m(){u&&(e(o).unbind(h),e(o.body).removeClass("sp-dragging"),s.apply(t,arguments)),u=!1}n=n||function(){},r=r||function(){},s=s||function(){};var o=document,u=!1,a={},f=0,l=0,c="ontouchstart"in window,h={};h.selectstart=p,h.dragstart=p,h["touchmove mousemove"]=d,h["touchend mouseup"]=m,e(t).bind("touchstart mousedown",v)}function g(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,e.apply(i,s)};n&&clearTimeout(r);if(n||!r)r=setTimeout(o,t)}}function y(){return e.fn.spectrum.inputTypeColorSupport()}var n={beforeShow:p,move:p,change:p,show:p,hide:p,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!1,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},r=[],i=!!/msie/i.exec(window.navigator.userAgent),s=function(){function e(e,t){return!!~(""+e).indexOf(t)}var t=document.createElement("div"),n=t.style;return n.cssText="background-color:rgba(0,0,0,.5)",e(n.backgroundColor,"rgba")||e(n.backgroundColor,"hsla")}(),o=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),u=function(){var e="";if(i)for(var t=1;t<=6;t++)e+="<div class='sp-"+t+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",e,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),b="spectrum.id";e.fn.spectrum=function(t,n){if(typeof t=="string"){var i=this,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=r[e(this).data(b)];if(n){var o=n[t];if(!o)throw new Error("Spectrum: no such method: '"+t+"'");t=="get"?i=n.get():t=="container"?i=n.container:t=="option"?i=n.option.apply(n,s):t=="destroy"?(n.destroy(),e(this).removeData(b)):o.apply(n,s)}}),i}return this.spectrum("destroy").each(function(){var n=e.extend({},t,e(this).data()),r=c(this,n);e(this).data(b,r.id)})},e.fn.spectrum.load=!0,e.fn.spectrum.loadOpts={},e.fn.spectrum.draggable=m,e.fn.spectrum.defaults=n,e.fn.spectrum.inputTypeColorSupport=function w(){if(typeof w._cachedResult=="undefined"){var t=e("<input type='color' value='!' />")[0];w._cachedResult=t.type==="color"&&t.value!=="!"}return w._cachedResult},e.spectrum={},e.spectrum.localization={},e.spectrum.palettes={},e.fn.spectrum.processNativeColorInputs=function(){var t=e("input[type=color]");t.length&&!y()&&t.spectrum({preferredFormat:"hex6"})},function(){function f(e){var t={r:0,g:0,b:0},n=1,r=!1,i=!1;return typeof e=="string"&&(e=W(e)),typeof e=="object"&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(t=l(e.r,e.g,e.b),r=!0,i=String(e.r).substr(-1)==="%"?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=q(e.s),e.v=q(e.v),t=d(e.h,e.s,e.v),r=!0,i="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=q(e.s),e.l=q(e.l),t=h(e.h,e.s,e.l),r=!0,i="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=D(n),{ok:r,format:e.format||i,r:s(255,o(t.r,0)),g:s(255,o(t.g,0)),b:s(255,o(t.b,0)),a:n}}function l(e,t,n){return{r:P(e,255)*255,g:P(t,255)*255,b:P(n,255)*255}}function c(e,t,n){e=P(e,255),t=P(t,255),n=P(n,255);var r=o(e,t,n),i=s(e,t,n),u,a,f=(r+i)/2;if(r==i)u=a=0;else{var l=r-i;a=f>.5?l/(2-r-i):l/(r+i);switch(r){case e:u=(t-n)/l+(t<n?6:0);break;case t:u=(n-e)/l+2;break;case n:u=(e-t)/l+4}u/=6}return{h:u,s:a,l:f}}function h(e,t,n){function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var r,i,s;e=P(e,360),t=P(t,100),n=P(n,100);if(t===0)r=i=s=n;else{var u=n<.5?n*(1+t):n+t-n*t,a=2*n-u;r=o(a,u,e+1/3),i=o(a,u,e),s=o(a,u,e-1/3)}return{r:r*255,g:i*255,b:s*255}}function p(e,t,n){e=P(e,255),t=P(t,255),n=P(n,255);var r=o(e,t,n),i=s(e,t,n),u,a,f=r,l=r-i;a=r===0?0:l/r;if(r==i)u=0;else{switch(r){case e:u=(t-n)/l+(t<n?6:0);break;case t:u=(n-e)/l+2;break;case n:u=(e-t)/l+4}u/=6}return{h:u,s:a,v:f}}function d(e,t,n){e=P(e,360)*6,t=P(t,100),n=P(n,100);var i=r.floor(e),s=e-i,o=n*(1-t),u=n*(1-s*t),a=n*(1-(1-s)*t),f=i%6,l=[n,u,o,o,a,n][f],c=[a,n,n,u,o,o][f],h=[o,o,a,n,n,u][f];return{r:l*255,g:c*255,b:h*255}}function v(e,t,n,r){var s=[I(i(e).toString(16)),I(i(t).toString(16)),I(i(n).toString(16))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function m(e,t,n,r){var s=[I(R(r)),I(i(e).toString(16)),I(i(t).toString(16)),I(i(n).toString(16))];return s.join("")}function g(e,t){t=t===0?0:t||10;var n=a(e).toHsl();return n.s-=t/100,n.s=H(n.s),a(n)}function y(e,t){t=t===0?0:t||10;var n=a(e).toHsl();return n.s+=t/100,n.s=H(n.s),a(n)}function b(e){return a(e).desaturate(100)}function w(e,t){t=t===0?0:t||10;var n=a(e).toHsl();return n.l+=t/100,n.l=H(n.l),a(n)}function E(e,t){t=t===0?0:t||10;var n=a(e).toRgb();return n.r=o(0,s(255,n.r-i(255*-(t/100)))),n.g=o(0,s(255,n.g-i(255*-(t/100)))),n.b=o(0,s(255,n.b-i(255*-(t/100)))),a(n)}function S(e,t){t=t===0?0:t||10;var n=a(e).toHsl();return n.l-=t/100,n.l=H(n.l),a(n)}function x(e,t){var n=a(e).toHsl(),r=(i(n.h)+t)%360;return n.h=r<0?360+r:r,a(n)}function T(e){var t=a(e).toHsl();return t.h=(t.h+180)%360,a(t)}function N(e){var t=a(e).toHsl(),n=t.h;return[a(e),a({h:(n+120)%360,s:t.s,l:t.l}),a({h:(n+240)%360,s:t.s,l:t.l})]}function C(e){var t=a(e).toHsl(),n=t.h;return[a(e),a({h:(n+90)%360,s:t.s,l:t.l}),a({h:(n+180)%360,s:t.s,l:t.l}),a({h:(n+270)%360,s:t.s,l:t.l})]}function k(e){var t=a(e).toHsl(),n=t.h;return[a(e),a({h:(n+72)%360,s:t.s,l:t.l}),a({h:(n+216)%360,s:t.s,l:t.l})]}function L(e,t,n){t=t||6,n=n||30;var r=a(e).toHsl(),i=360/n,s=[a(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,s.push(a(r));return s}function A(e,t){t=t||6;var n=a(e).toHsv(),r=n.h,i=n.s,s=n.v,o=[],u=1/t;while(t--)o.push(a({h:r,s:i,v:s})),s=(s+u)%1;return o}function _(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function D(e){e=parseFloat(e);if(isNaN(e)||e<0||e>1)e=1;return e}function P(e,t){j(e)&&(e="100%");var n=F(e);return e=s(t,o(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),r.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function H(e){return s(1,o(0,e))}function B(e){return parseInt(e,16)}function j(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function F(e){return typeof e=="string"&&e.indexOf("%")!=-1}function I(e){return e.length==1?"0"+e:""+e}function q(e){return e<=1&&(e=e*100+"%"),e}function R(e){return Math.round(parseFloat(e)*255).toString(16)}function U(e){return B(e)/255}function W(n){n=n.replace(e,"").replace(t,"").toLowerCase();var r=!1;if(O[n])n=O[n],r=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var i;return(i=z.rgb.exec(n))?{r:i[1],g:i[2],b:i[3]}:(i=z.rgba.exec(n))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=z.hsl.exec(n))?{h:i[1],s:i[2],l:i[3]}:(i=z.hsla.exec(n))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=z.hsv.exec(n))?{h:i[1],s:i[2],v:i[3]}:(i=z.hsva.exec(n))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=z.hex8.exec(n))?{a:U(i[1]),r:B(i[2]),g:B(i[3]),b:B(i[4]),format:r?"name":"hex8"}:(i=z.hex6.exec(n))?{r:B(i[1]),g:B(i[2]),b:B(i[3]),format:r?"name":"hex"}:(i=z.hex3.exec(n))?{r:B(i[1]+""+i[1]),g:B(i[2]+""+i[2]),b:B(i[3]+""+i[3]),format:r?"name":"hex"}:!1}var e=/^[\s,#]+/,t=/\s+$/,n=0,r=Math,i=r.round,s=r.min,o=r.max,u=r.random,a=function(e,t){e=e?e:"",t=t||{};if(e instanceof a)return e;if(!(this instanceof a))return new a(e,t);var r=f(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=i(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=i(this._r)),this._g<1&&(this._g=i(this._g)),this._b<1&&(this._b=i(this._b)),this._ok=r.ok,this._tc_id=n++};a.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},setAlpha:function(e){return this._a=D(e),this._roundA=i(100*this._a)/100,this},toHsv:function(){var e=p(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=p(this._r,this._g,this._b),t=i(e.h*360),n=i(e.s*100),r=i(e.v*100);return this._a==1?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=c(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=c(this._r,this._g,this._b),t=i(e.h*360),n=i(e.s*100),r=i(e.l*100);return this._a==1?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return v(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return m(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:i(this._r),g:i(this._g),b:i(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+i(this._r)+", "+i(this._g)+", "+i(this._b)+")":"rgba("+i(this._r)+", "+i(this._g)+", "+i(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:i(P(this._r,255)*100)+"%",g:i(P(this._g,255)*100)+"%",b:i(P(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+i(P(this._r,255)*100)+"%, "+i(P(this._g,255)*100)+"%, "+i(P(this._b,255)*100)+"%)":"rgba("+i(P(this._r,255)*100)+"%, "+i(P(this._g,255)*100)+"%, "+i(P(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:M[v(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+m(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=a(e);n=i.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0,i=!t&&r&&(e==="hex"||e==="hex6"||e==="hex3"||e==="name");if(i)return e==="name"&&this._a===0?this.toName():this.toRgbString();e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString());if(e==="hex"||e==="hex6")n=this.toHexString();return e==="hex3"&&(n=this.toHexString(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString()},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(w,arguments)},brighten:function(){return this._applyModification(E,arguments)},darken:function(){return this._applyModification(S,arguments)},desaturate:function(){return this._applyModification(g,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(L,arguments)},complement:function(){return this._applyCombination(T,arguments)},monochromatic:function(){return this._applyCombination(A,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(N,arguments)},tetrad:function(){return this._applyCombination(C,arguments)}},a.fromRatio=function(e,t){if(typeof e=="object"){var n={};for(var r in e)e.hasOwnProperty(r)&&(r==="a"?n[r]=e[r]:n[r]=q(e[r]));e=n}return a(e,t)},a.equals=function(e,t){return!e||!t?!1:a(e).toRgbString()==a(t).toRgbString()},a.random=function(){return a.fromRatio({r:u(),g:u(),b:u()})},a.mix=function(e,t,n){n=n===0?0:n||50;var r=a(e).toRgb(),i=a(t).toRgb(),s=n/100,o=s*2-1,u=i.a-r.a,f;o*u==-1?f=o:f=(o+u)/(1+o*u),f=(f+1)/2;var l=1-f,c={r:i.r*f+r.r*l,g:i.g*f+r.g*l,b:i.b*f+r.b*l,a:i.a*s+r.a*(1-s)};return a(c)},a.readability=function(e,t){var n=a(e),r=a(t),i=n.toRgb(),s=r.toRgb(),o=n.getBrightness(),u=r.getBrightness(),f=Math.max(i.r,s.r)-Math.min(i.r,s.r)+Math.max(i.g,s.g)-Math.min(i.g,s.g)+Math.max(i.b,s.b)-Math.min(i.b,s.b);return{brightness:Math.abs(o-u),color:f}},a.isReadable=function(e,t){var n=a.readability(e,t);return n.brightness>125&&n.color>500},a.mostReadable=function(e,t){var n=null,r=0,i=!1;for(var s=0;s<t.length;s++){var o=a.readability(e,t[s]),u=o.brightness>125&&o.color>500,f=3*(o.brightness/125)+o.color/500;if(u&&!i||u&&i&&f>r||!u&&!i&&f>r)i=u,r=f,n=a(t[s])}return n};var O=a.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},M=a.hexNames=_(O),z=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();window.tinycolor=a}(),e(function(){e.fn.spectrum.load&&e.fn.spectrum.processNativeColorInputs()})}),define("field-properties/color",["jquery","utils","spectrum","field-properties/base"],function(e,t,n,r){return t.object(r,{create:function(n,r,i){this.$control=e("<input/>"),this.$control.attr("type",n.type),t.isAvailable("color")?this.$control.val(t.getHex(n.value)):(i.append(this.$control),this.$control.spectrum({color:t.getHex(n.value),preferredFormat:"hex",change:function(){e(this).trigger("change keyup")}}))},isValid:function(e){return/#[0-9a-f]{6}|#[0-9a-f]{3}/gi.test(e)?!0:!1}})}),define("field-properties/url",["jquery","utils","field-properties/base"],function(e,t,n){return t.object(n,{create:function(t){this.$control=e("<input/>"),this.$control.attr("type",t.type),this.$control.val(t.value)}})}),define("field-properties/text",["jquery","utils","field-properties/base"],function(e,t,n){return t.object(n,{create:function(t){this.$control=e("<input/>"),this.$control.attr("type",t.type),this.$control.val(t.value)},getValue:function(e){var t;return e=e||this.$control,t=e.val(),t=t&&t.toString&&t.toString(),t}})}),define("field-properties/number",["jquery","utils","field-properties/base"],function(e,t,n){return t.object(n,{create:function(t){this.$control=e("<input/>"),this.$control.attr("type",t.type),this.$control.val(t.value)},isValid:function(e){return t.isFloat(e)||t.isInteger(e)},getValue:function(e){var n;return e=e||this.$control,n=e.val(),t.isFloat(n)?parseFloat(n,10):parseInt(n,10)}})}),define("customization-res/base-properties/BaseFields",["jquery","utils","l10n","baseEvents","field-properties/select","field-properties/textarea","field-properties/checkbox","field-properties/unit","field-properties/file","field-properties/event","field-properties/datetime","field-properties/color","field-properties/url","field-properties/text","field-properties/number"],function(e,t,n,r){function a(e){var t;if(!e)return!1;for(t in e){if(!e.hasOwnProperty(t))continue;u.$control.attr(t,typeof e[t]=="function"?e[t]():e[t])}return!0}function f(t){var n;return t.expression?(n=e('<input type="button" value="..."/>'),u.$control.addClass("d-fc-exp-input"),n.addClass("d-fc-exp-but"),o.append(n),n.on("click",function(){r.trigger("show-expression-editor",this)}.bind(t)),!0):!1}function l(r){var l=t.getModules(r.type)[r.type];return i=e("<div>"),s=e("<label>"),o=e("<div>"),s.html(n.tr(r.label)),i.append(s,o),u=l.build(r,s,o),o.children().length||o.append(u.$control),u.$control.data("control",u),u.$control.addClass("d-fc"),o.addClass("fg-body"),i.addClass("fg"),a(r.attrs),f(r),{self:u,$main:i,$body:o,$label:s}}var i,s,o,u;return{getFor:function(e){return l(e)}}}),define("customization-res/base-properties/Base",["jquery","config","utils","l10n","units","customization-res/base-properties/BaseFields","baseEvents"],function(e,t,n,r,i,s,o){function f(t,n,r){r.element.render&&r.element.render(),e.isFunction(r.afterSetValue)&&r.afterSetValue.apply(r.element,arguments)}function l(t,n,r,i){var s=r.field,o;s.value=n;if(e.isFunction(s.setValue)){s.setValue.apply(s.element,arguments),f(t,n,s);return}o=s.element.attr(t)!==undefined?"attr":"prop",s.element[o](t,n,i),f(t,n,s)}function c(t,n){var r=e.Deferred(),i=t.data("control"),s=i.field;return e.when(i.getProp(),i.getValue(t)).done(function(e,o){function u(){t.removeClass("has-error"),l(e,o,i,n),r.resolve(s)}function a(){return t.addClass("has-error"),r.resolve(!1),!1}s.isValid?s.isValid.call(s.element,o)?u():a():i.isValid(o)||i.field.defaultValue&&o===i.field.defaultValue?u():a()}),r.promise()}function h(t,n){if(!t.fields)return!1;var i=e("<div>"),s=e("<div>"),o=e("<div>"),u=e("<div>"),f=e("<span>"),l=function(){u.removeClass("icon-plus").addClass("icon-minus")},c=function(){u.removeClass("icon-minus").addClass("icon-plus"),o.hide()};return o.attr("tabIndex",-1),i.addClass("cstn-panel"),s.addClass("cstn-panel-header"),o.addClass("cstn-panel-body"),u.addClass("fa cstn-toogle"),n&&(i.addClass("cstn-root"),o.addClass("fgs-opened")),f.text(r.tr(t.label)),s.append(u,f),i.append(s,o),a[t.label]!==undefined?a[t.label]===!1?c():l():t.opened||n?l():c(),i.data("field",t),{$main:i,$header:s,$body:o,$toggle:u,$headerTitle:f}}function p(t){var n,i,s,o,a;if(!t.origin)return;n=t.element,i=e.inArray(t.origin,(n.mainFields||[])[0]),s=e.inArray(t.origin,(n.mainFields||[])[1]);if(i>-1||s>-1)o=t.control.self.$body.clone(!0,!0),a=e('input:not([type="button"]),select,textarea',o),a.addClass("d-mc d-sb"),a.data("ref",t.control.self.$control),t.control.self.$control.data("ref",a),o.find("span").remove(),i>-1?(o.width(100/n.mainFields[0].length-1+"%"),u.$extraFirstLine.append(o)):s>-1&&(o.width(100/n.mainFields[1].length-1+"%"),u.$extraSecondLine.append(o)),a.attr("data-info",r.tr(t.extraLabel||t.label)),u.$extra.show();return}function d(e,t){return t.prop=e,t.element=this,t.getValue?t.value=t.getValue.call(this,e,t):(t.value=this.prop(e),t.value===undefined&&(t.value=this.attr(e),t.value===undefined&&(t.value=t.defaultValue))),t}function v(t,n,r){var i;e.each(t,function(e,t){i=h(t,r);if(i)return n.append(i.$main),v.call(this,t.fields,i.$body),i;d.call(this,e,t),t.control=s.getFor(t),t.control.self.$control.on("focus",g),t.control.self.$control.on("change keyup",b),t.control.self.$control.on("blur",w),n.append(t.control.$main),p(t)}.bind(this))}function m(){var t=e(this),n=t.find(".cstn-toogle"),r=t.parent(),i=r.data("field");n.is(".icon-minus")?(i.opened=!1,t.next(".cstn-panel-body").slideUp(100,function(){e(this).removeClass("fgs-opened"),n.removeClass("icon-minus").addClass("icon-plus")})):(i.opened=!0,t.next(".cstn-panel-body").slideDown(100,function(){e(this).addClass("fgs-opened"),n.removeClass("icon-plus").addClass("icon-minus")})),r.is(".cstn-root")&&(a[i.label]=i.opened)}function g(){t.set("hotkeyProhibited",!0)}function y(t,n){e.when(c(t,n)).done(function(e){var n=t.data("ref"),r;e&&(n?(r=e.control.self.getValue(t,!0),e.type==="checkbox"?n.prop("checked",r):n.val(r)):o.trigger("update-menu"))})}function b(t){var n=!0;t.keyCode&&t.keyCode!==13&&(n=!1),y(e(this),n)}function w(){t.set("hotkeyProhibited",!1),y(e(this),!0)}var u,a={};return{build:function(t,n){var r=".d-fc",i=e("<form>");return i.addClass("form-horizontal"),i.attr("role","form"),u||(u=require("menu")),n?(v.call(t,n,i,!0),i.on("click",".cstn-panel-header",m),i):i}}}),define("customization-res/Properties",["jquery","utils","l10n","customization-res/base-properties/Base","baseEvents"],function(e,t,n,r,i){return function(){return t.object(r,{create:function(){return this.buttonClassName="show-properties",this.icon="icon-078",this.$title=e("<div>"),this.$header=e("<div>"),this.$body=e("<div>"),this},update:function(t){var r,s,o,u=require("menu");return u.$extraFirstLine.empty(),u.$extraSecondLine.empty(),u.$extra.hide(),t?(this.$title&&(r=e("<strong>"),s=e("<span>"),r.text(n.tr("properties")+" "),s.text(t.prop("Name")+" "+(t.type||"")),this.$title.empty(),this.$title.append(r,s)),i.trigger("clear-cstn-panel",this.$body),o=this.build(t,t.fieldMap),this.$body&&(this.$body.replaceWith(o),this.$body=o),this):!1}})}}),define("customization-res/Events",["jquery","utils","l10n","customization-res/base-properties/Base"],function(e,t,n,r){return function(){return t.object(r,{create:function(){return require("currentReport").prop("CodeRestricted")?null:(this.buttonClassName="show-events",this.icon="icon-079",this.$title=e("<div>"),this.$header=e("<div>"),this.$body=e("<div>"),this)},update:function(t){var r,i,s;return t?(this.$title&&(r=e("<strong>"),i=e("<span>"),r.text(n.tr("Events")+" "),i.text(t.prop("Name")+" "+t.type),this.$title.empty(),this.$title.append(r,i)),s=this.build(t,t.eventMap),this.$body&&(this.$body.replaceWith(s),this.$body=s),this):!1}})}}),define("events/customization",["jquery","utils","baseEvents","customization-res/Data","customization-res/DataSource","customization-res/ReportTree","customization-res/Properties","customization-res/Events"],function(e,t,n,r,i,s,o,u){return function(){var t=require("currentReport"),a=require("customization");n.bind("fill-customization-panel",function(){var e=new o,t=new u,f=new s,l=new i,c=new r;require.undef("properties"),require.undef("events"),require.undef("reportTree"),require.undef("dataSourcePanel"),require.undef("dataPanel"),define("properties",function(){return e}),define("events",function(){return t}),define("reportTree",function(){return f}),define("dataSourcePanel",function(){return l}),define("dataPanel",function(){return c}),require(["properties","events","reportTree","dataSourcePanel","dataPanel"]),a.append(e,t,f,l,c),n.unbind("fill-customization-panel")}),n.bind("update-properties|events-panel",function(e){require(["properties","events"],function(t,r){t.update(e),r.update(e),n.unbind("update-properties|events-panel"),n.bind("update-properties|events-panel",function(e){n.trigger("update-properties-panel",e),n.trigger("update-events-panel",e)})})}),n.bind("update-properties-panel",function(e){require("properties").update(e)}),n.bind("update-events-panel",function(e){require("events").update(e)}),n.bind("update-data-panel",function(){require("dataPanel").update()}),n.bind("create-parameter",function(r){e.when(t.createParameter(r)).done(function(){n.trigger("update-data-panel")})}),n.bind("remove-parameter",function(t){e.when(require("currentReport").removeParameter(t)).done(function(){n.trigger("update-data-panel")})}),n.bind("clear-cstn-panel",function(){e(".sp-container").remove()})}}),define("events/info",["jquery","baseEvents"],function(e,t){return function(){var e=require("currentReport"),n=require("info");t.bind("update-info",function(){var t=e.pages.current;n.update({report:e,page:t,"all-pages":e.pages.all(),band:t.bands.getSelectedBand(),component:t.bands.getSelectedComponents()[0],amount:t.bands.getSelectedComponents().length,scale:e.attr("data-scale")})}),t.bind("scale-page",function(t,n){t<.1&&(t=.1),t>2&&(t=2),e.attr("data-scale",t),e.pages.current.updateSize(),typeof n=="function"&&n(t)})}}),define("events/toolbar",["jquery","config","utils","queue","baseEvents","baseEntity","units","notification","l10n","modules/Parser/main","spinner","spectrum"],function(e,t,n,r,i,s,o,u,a,f,l){return function(){var c=require("currentReport"),h=require("menu"),p=require("head"),d=function(){var e=c.pages.current,t=e.bands.getSelectedComponents();return t.length||(t=e.bands.getSelectedBand(),t||(t=e),t=[t]),t},v=function(t){var n=["border-all","border-none","border-left","border-top","border-right","border-bottom"],r;if(!t||!t.canHaveProp("Appearance:Border")){h.lock(n),h.unselect(n);return}h.unlock(n),h.unselect(n),r=t.prop("Border.Lines"),r?(r=r.split(/,[\s]?/),e.each(r,function(){h.select("border-"+this.toLowerCase())}),e.inArray("All",r)!==-1&&h.select(["border-left","border-top","border-right","border-bottom"])):h.select("border-none")},m=function(t){var r=p.$color,i=d();n.isAvailable("color")?(r.trigger("click"),r.val(n.getHex(i[0].prop(t)))):(r.spectrum({color:n.getHex(i[0].prop(t)),preferredFormat:"hex",change:function(){e(".sp-container:not(.sp-hidden)").remove(),e(this).trigger("change keyup")}}),r.next().trigger("click"),e(".sp-container:not(.sp-hidden)").css({left:"40%",top:"16%"})),r.off("change keyup").on("change keyup",function(){var n=e(this).val(),r=i.length-1;for(;r>=0;r-=1)i[r].prop(t,n,!0),i[r].render()})};i.bind("menu-border-all",function(){e.each(d(),function(){this.applyForBorder("All"),this.render()})}),i.bind("menu-border-none",function(){e.each(d(),function(){this.applyForBorder("None"),this.render()})}),i.bind("menu-border-left",function(){e.each(d(),function(){this.applyForBorder("Left"),this.render()})}),i.bind("menu-border-top",function(){e.each(d(),function(){this.applyForBorder("Top"),this.render()})}),i.bind("menu-border-right",function(){e.each(d(),function(){this.applyForBorder("Right"),this.render()})}),i.bind("menu-border-bottom",function(){e.each(d(),function(){this.applyForBorder("Bottom"),this.render()})}),i.bind("menu-fill-color",function(){m("Fill.Color")}),i.bind("menu-border-color",function(){m("Border.Color")}),i.bind("menu-text-fill",function(){m("TextFill.Color")}),i.bind("menu-remove",function(t){var n=c.pages.current,o=n.bands,f=0;if(!t){t=o.getSelectedComponents();if(!t.length){t=o.getSelectedBand();if(!t||!t.canBeRemoved())return;t=[t]}}else typeof t.length=="undefined"&&(t=[t]);e.each(t,function(){this.attr("removeable")&&(i.trigger(this.isComponent()?"remove-component":"remove-band",this),f+=1)}),r.push({context:this,func:function(t,r){e.each(t,function(){i.trigger(r+(this.isComponent()?"-component":"-band"),this),this.isBand()&&this.collection.container.rebuildTree()}),n.balance()},undoData:[t,"render"],redoData:[t,"remove"]}),s.deactivate(),i.trigger("remove-popups"),i.trigger("re-render",n),u.notify(a.tr("removed")+" "+f,{info:!0})}),i.bind("menu-undo",function(){var e=r.prev(),t;if(!e)return;t=e.undo||e.func;if(typeof t!="function")return i.trigger("menu-undo");t.apply(e.context,e.undoData||e.data),i.trigger("re-render")}),i.bind("menu-redo",function(){var e=r.next(),t;if(!e)return;t=e.redo||e.func;if(typeof t!="function")return i.trigger("menu-redo");t.apply(e.context,e.redoData||e.data),i.trigger("re-render")}),i.bind("menu-grid",function(){c.attr("grid",!c.attr("grid")),i.trigger("re-render")}),i.bind("menu-snap-size",function(e){var n=t.get("net");e=parseFloat(e),isNaN(e)||e<=0?e=n:e=o.toPx(e),t.set("net",e),e!==n&&c.updateDefs()}),i.bind("menu-new-report-page",function(){c.createPage("Standard").done(function(e){i.trigger("activate",e),r.push({context:i,undo:function(e){c.removePage(e)},redo:function(e){e.render(),this.trigger("activate",e)},data:[e]})})}),i.bind("menu-delete-page",function(e){e=e||c.pages.current,c.removePage(e),r.push({context:i,undo:function(e){e.render(),this.trigger("activate",e)},redo:function(e){c.removePage(e)},data:[e]})}),i.bind("menu-preview",function(){var r=f.toXML(),i=n.escapeHTML((new XMLSerializer).serializeToString(r));return console.dirxml(r),e.when(l.show()).done(function(){return e.ajax({url:t.get("makePreviewByUUID")+require("currentReport")._id,dataType:"text",type:"POST",data:i}).done(function(t){l.hide(),c.res.createPopup().done(function(r){n.render("toolbar/preview",{report:t}).done(function(t){e(".modal-content",r).html(t),e(document.body).append(r)})})}).fail(function(){l.hide(),console.error(arguments),require("notification").notify("something went wrong",{danger:!0})})})}),i.bind("menu-save",function(){require("notification").notify("saving available in the full version",{danger:!0,inEmptyList:!0,trans:!0,delay:!1})}),i.bind("menu-units",function(e){o.setCurrent(e),i.trigger("update-properties-panel",c.getSelected())}),i.bind("update-menu",function(){var n=c.getSelected();h.unlock("new-page"),c.pages.current&&c.pages.all().length>1?h.unlock("delete-page"):h.lock("delete-page"),r.canUndo()?h.unlock("undo"):h.lock("undo"),r.canRedo()?h.unlock("redo"):h.lock("redo"),n&&e.isFunction(n.remove)?(h.unlock("remove"),n.isPage()&&h.lock("remove")):h.lock("remove"),n.canHaveProp("Appearance:Fill:Fill.Color")?h.unlock("fill-color"):h.lock("fill-color"),n.prop("Border.Color")?h.unlock("border-color"):h.lock("border-color"),n.prop("Border.Style")?(h.unlock("border-style"),h.set("border-style",n.prop("Border.Style"))):h.lock("border-style"),n.prop("Border.Width")?(h.unlock("border-width"),h.set("border-width",n.prop("Border.Width"))):h.lock("border-width"),n.prop("TextFill.Color")?h.unlock("text-fill"):h.lock("text-fill"),c.attr("grid")?h.select("grid"):h.unselect("grid"),h.set("units",o.getCurrent()),h.set("snap-size",o.toUnit(t.get("net"))),v(n)})}}),define("events/code",["jquery","config","baseEvents","notification"],function(e,t,n,r){return function(){var i=require("currentReport");n.bind("show-code-tab",function(){i.code.isHidden&&(i.pages.current.deactivate(),i.$workspace.hide(),t.set("hotkeyProhibited",!0),i.code.show(),n.trigger("update-info"))}),n.bind("hide-code-tab",function(){i.code.isHidden||(i.$workspace.show(),t.set("hotkeyProhibited",!1),i.code.hide(),n.trigger("update-info"))}),n.bind("procedure",function(t,s){if(i.code.isRestricted())return;n.trigger("show-code-tab"),t=t||i.getSelected(),e.when(i.code.editor).done(function(e){var n=t.prop("Name")+"_"+s.eventName,i="ReportScript",o,u=e.getValue(),a=u.search(n),f=u.search(i);if(a<0){if(f<0){r.notify("Could not create event handler due to errors in source code",{danger:!0,trans:!0});return}o=s.eventStatement.replace("%event%",n),u=u.splice(f+i.length+10,0,"		"+o+"\n		{"+"\n			"+"\n		}\n\n"),e.setValue(u),e.setCursor(19,11),e.focus()}t.prop(s.prop,n),require(["events"],function(e){e.update(t)})})})}}),define("res/Main",["jquery","config"],function(e,t){return function(){var n=t.get("root-id"),r=e("<div>");this.$color=e("<input type='color'/>","<input type='file'/>"),r.append(this.$color),this.$main=null,n&&(this.$main=e("#"+n));if(!this.$main||!this.$main.length)this.$main=e(document.body);this.$node=e("<div>"),this.$reusable=e("<div>"),this.$mainContainer=e("<div>"),this.$controls=e("<div>"),this.$workspace=e("<div>"),this.$mainContainer.append(this.$controls,this.$workspace),this.$node.addClass("main"),this.$reusable.addClass("reusable"),this.$mainContainer.addClass("main-container"),this.$workspace.addClass("body"),this.$reusable.append(r),this.$node.append(this.$mainContainer,this.$reusable),this.$main.prepend(this.$node),this.put=function(e){this.$node.append(e)}}}),define("res/Menu",["jquery","utils","config","l10n","baseEvents","units"],function(e,t,n,r,i,s){var o=150;return function(){function v(){var n=e.Deferred();return t.render("toolbar/home-tab").done(function(t){return d(t),a.$extra=e(".d-extra",t),a.$extraFirstLine=e(".group-body-subcontainer:first",a.$extra),a.$extraSecondLine=e(".group-body-subcontainer:last",a.$extra),n.resolve(t)}),n.promise()}function m(){var n=e.Deferred();return e.when(t.render("toolbar/view-tab",{units:s.all()})).done(function(e){return d(e),n.resolve(e)}),n.promise()}function g(){var n=e.Deferred();return e.when(t.render("toolbar/components-tab",{data:t.getModules("components/")})).done(function(e){return n.resolve(e)}),n.promise()}function y(){var n=e.Deferred();return e.when(t.render("toolbar/bands-tab",{data:t.getModules("bands/")})).done(function(t){return t.on("click",".d-mc:not([disabled])",function(){var t=e(this);t.is("[data-band]")&&i.trigger("add-band",t.data("band"))}),n.resolve(t)}),n.promise()}function b(){var n=e.Deferred();return e.when(t.render("toolbar/report-tab")).done(function(e){return d(e),n.resolve(e)}),n.promise()}var u=e.Deferred(),a=this,f=function(t){e(".d-mc.menu-"+t,a.$node).addClass("d-wsb")},l=function(t){e(".d-mc.menu-"+t,a.$node).removeClass("d-wsb")},c=function(t){var n=e(".d-mc.menu-"+t,a.$node);n.length||(n=e(t+"",a.$node)),n.attr("disabled",!0)},h=function(t){var n=e(".d-mc.menu-"+t,a.$node);n.length||(n=e(t+"",a.$node)),n.removeAttr("disabled")},p=function(t,n){var r=e(".d-mc.menu-"+t,a.$node);r.length||(r=e(t+"",a.$node)),r.val(n)},d=function(t){var r=".d-mc[class*=menu-]:not([disabled])";t.on("click",r,function(){var t=e(this),n=t.attr("class").split(" ").filter(function(e){return e.indexOf("menu-")!==-1})[0];if(t.is("select")){e(".menu-helper").remove();return}if(!n)return;i.trigger(n,t.val()),i.trigger("update-menu")}),t.on("change",r,function(){var t=e(this),n=t.attr("class").split(" ").filter(function(e){return e.indexOf("menu-")!==-1})[0];if(!n)return;i.trigger(n,t.val()),i.trigger("update-menu")}),t.on("focus",r,function(){n.set("hotkeyProhibited",!0)}),t.on("blur",r,function(){n.set("hotkeyProhibited",!1)})};a.$node=e("<div>"),a.$node.addClass("menu"),t.render("toolbar/toolbar").done(function(s){a.$node.append(s),e.when(v(),b(),m(),g(),y()).done(function(s,f,l,c,h){var p=n.get("default-tab-menu"),d=e(".tab-content",a.$node),v=e(".nav-tabs",a.$node),m=e(".tabs-container",d);m.append(s,f,l,c,h),a.$node.on("click dragstart","img,a",function(){return!1}),v.on("click",".d-tab",function(){var t=e(this);if(!t.is("a[data-tab]"))return!1;v.find(".active").removeClass("active"),t.parent().addClass("active"),d.find(".tab-pane.active").removeClass("active"),d.find(".tab-pane."+t.data("tab")).addClass("active"),d.slideDown(o,function(){i.trigger("align-workspace")})}),p&&(p=v.find("a[data-tab="+p+"]"),p.length&&p.trigger("click")),d.on("click",".hide-menu",function(){d.slideUp(o,function(){i.trigger("align-workspace")}),v.find(".active").removeClass("active")}),d.on("click",".show-helper",function(){t.render("toolbar/helper").done(function(e){require("notification").notify(e,{inEmptyList:!0,delay:!1,success:!0,limitWidth:!1})})}),d.on("mouseenter",":not([disabled])[data-info]",function(){var i=e(this),s=r.tr(i.data("info")),o;if(t.isMobile)return!1;a.removeHelpers();if(!s||!s.length||n.get("showHelpers")===!1)return;o=e("<div>"),o.addClass("menu-helper"),o.css({left:i.offset().left,top:a.$node.height()-1}),o.html(s),a.$node.append(o)}),d.on("mouseleave",":not([disabled])[data-info]",function(){a.removeHelpers()}),u.resolve(a)})}),a.removeHelpers=function(){e(".menu-helper",a.$node).remove()},a.lock=function(t){e.isArray(t)||(t=[t]),e.each(t,function(){c(this)})},a.unlock=function(t){e.isArray(t)||(t=[t]),e.each(t,function(){h(this)})},a.set=function(t,n){e.isArray(t)||(t=[t]),e.each(t,function(){p(this,n)})},a.select=function(t){e.isArray(t)||(t=[t]),e.each(t,function(){f(this)})},a.unselect=function(t){e.isArray(t)||(t=[t]),e.each(t,function(){l(this)})},a.unselectAll=function(){e(".d-wsb",a.$node).removeClass("d-wsb")},a.getHeight=function(){return a.$node.outerHeight(!0)},a.isReady=function(){return u.promise()}}}),define("res/Info",["jquery","config","utils","baseEvents"],function(e,t,n,r){return function(){var i=e.Deferred(),s=function(n){e("input[type=range]",this.$node).val(n||t.get("scale"))}.bind(this);this.$node=e("<div>"),this.$node.addClass("info"),this.$node.on("click",".show-code-tab",function(){r.trigger("show-code-tab")}),this.$node.on("click",".show-page",function(){var t=require("currentReport").pages.findOneBy({_id:e(this).data("page")});r.trigger("activate",t)}),this.$node.on("change","input[type=range]",function(){var t=e(this),n=parseFloat(t.val(),10);r.trigger("scale-page",n,s)}),this.$node.on("click",".scale-page a",function(t){var n=e(t.currentTarget),i=parseFloat(e("input[type=range]",this.$node).val(),10);return n.find(".scale-plus").length?i+=.1:i-=.1,r.trigger("scale-page",i,s),!1}.bind(this)),this.update=function(e){e=e||{},n.render("info",{codeRestricted:e.report&&e.report.code.isRestricted(),page:e.page,allPages:e["all-pages"],band:e.band,component:e.component,amount:e.amount,scaleValue:e.scale}).done(function(t){this.$node.html(t),s(e.scale),i.resolve(this)}.bind(this))},this.getHeight=function(){return this.$node.outerHeight(!0)},this.isReady=function(){return i.promise()}}}),define("res/Customization",["jquery","config","utils","baseEvents"],function(e,t,n,r){return function(){var i=function(){var t={panel:null,$button:null,$icon:null,$group:null,$title:null,$header:null,$body:null},r,i=0,s=arguments.length;for(;i<s;i+=1){t.$button=e("<a>"),t.$icon=e("<div>");if(!arguments[i])continue;r=arguments[i],t.panel=r,t.$icon.addClass(r.icon),t.$button.addClass(r.buttonClassName),t.$group=e("<div>"),t.$group.addClass("cstn-panel"),t.$title=r.$title||null,t.$title&&(t.$title.addClass("cstn-panel-title"),t.$group.append(t.$title)),t.$header=r.$header||null,t.$header&&t.$group.append(t.$header),r.$body&&(t.$body=e("<div>"),t.$body.addClass("cstn-panel-body"),t.$body.append(r.$body),t.$group.append(t.$body)),t.$group.data("panel",n.extend({},t)),t.$button.append(t.$icon),this.$controls.append(t.$button),this.$mainContainer.append(t.$group),this.panels.push(r)}}.bind(this);this.panels=[],this.$node=e("<div>"),this.$controls=e("<div>"),this.$mainContainer=e("<div>"),this.$node.addClass("cstn"),this.$controls.addClass("cstn-controls"),this.$mainContainer.addClass("cstn-container"),this.$node.append(this.$controls,this.$mainContainer),this.$controls.on("click","> a",function(t){var n=e(t.currentTarget),i=e.grep(this.panels,function(e){return n.hasClass(e.buttonClassName)})[0];if(!i||!i.$body)return;this.toggle(i.$body.parents(".cstn-panel:first"),n),r.trigger("update-workspace-left-indent")}.bind(this)),this.update=function(){for(var e=0,t=this.panels.length;e<t;e+=1)this.panels[e]&&this.panels[e].update&&this.panels[e].update()},this.append=function(){var t=[].slice.call(arguments),n=0,s=t.length,o=[];for(;n<s;n+=1)o.push(t[n].create());e.when.apply(null,o).done(function(){i.apply(null,arguments),r.trigger("align-workspace"),this.showDefaultPanels()}.bind(this))},this.clear=function(){this.panels.length=0,this.$mainContainer.empty(),this.$controls.empty()},this.recalculate=function(){var t=e(".opened",this.$mainContainer),n=100/t.length;t.height(n-.5+"%"),t.length?this.$mainContainer.show():this.$mainContainer.hide(),t.each(function(){var t=e(this),n=t.data("panel"),r=t.height();n.$title&&(r-=n.$title.outerHeight()),n.$header&&(r-=n.$header.outerHeight()),n.$body.height(r-1+"px")})},this.show=function(e,t){e.addClass("opened appear"),t&&t.addClass("active"),this.recalculate()},this.hide=function(e,t){e.removeClass("opened appear"),t&&t.removeClass("active"),this.recalculate()},this.toggle=function(e){e.is(".opened")?this.hide.apply(this,arguments):this.show.apply(this,arguments)},this.showDefaultPanels=function(){var e=0,n=this.panels.length;for(;e<n;e+=1)t.get(this.panels[e].buttonClassName)&&this.$controls.find("."+this.panels[e].buttonClassName).trigger("click")}}}),define("modules/Hotkey",["jquery","config","utils","baseEvents"],function(e,t,n,r){function i(e,n){var i=e.ctrlKey?1:t.get("net");r.trigger("move-component",n,i,function(){e.stopPropagation(),e.preventDefault()})}return function(){if(n.isMobile)return!1;e(document.body).on("keydown",function(e){var n=window.event?e.which:e.keyCode;if(t.get("hotkeyProhibited")&&n!==27)return;switch(n){case 27:return r.trigger("remove-popups"),r.trigger("remove-context-menus"),!1;case 46:return r.trigger("menu-remove"),!1;case 65:if(e.ctrlKey)return r.trigger("select-all-components"),!1;break;case 67:if(e.ctrlKey)return r.trigger("menu-copy"),!1;break;case 86:if(e.ctrlKey)return r.trigger("menu-past"),!1;break;case 88:if(e.ctrlKey)return r.trigger("menu-cut"),!1;break;case 90:if(e.ctrlKey)return r.trigger("menu-undo"),!1;break;case 89:if(e.ctrlKey)return r.trigger("menu-redo"),!1;break;case 37:i(e,1);break;case 38:i(e,2);break;case 39:i(e,3);break;case 40:i(e,4);break;case 83:if(e.ctrlKey)return r.trigger("menu-save"),!1;break;case 80:if(e.ctrlKey)return r.trigger("menu-preview"),!1;break;default:}})}}),define("App",["jquery","utils","config","baseController","baseEvents","spinner","base/Report","modules/Parser/main","modules/Parser/loader","events/main","events/band","events/component","events/customization","events/info","events/toolbar","events/code","res/Main","res/Menu","res/Info","res/Customization","modules/Hotkey"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){return r.create({defer:e.Deferred(),init:function(){var t=this,n=function(){var n=e.Deferred();return define("head",[],function(){return new m(t)}),define("menu",[],function(){return new g(t)}),define("info",[],function(){var e=new y(t);return e.update(),e}),require(["head","menu","info"],function(t,r,i){e.when(r.isReady(),i.isReady()).then(function(){t.$controls.append(r.$node,i.$node)}).done(function(){n.resolve()})}),new w,n.promise()};e.when(n()).done(function(){t.defer.resolve(t)}).fail(function(){console.error("something went wrong"),console.error(arguments)})},isReady:function(){return this.defer.promise()},createReport:function(){var t=this,n=e.Deferred(),r=o.create();return define("customization",[],function(){return new b}),define("currentReport",[],function(){return r}),u.init(r),require(["currentReport","head","customization"],function(e,t,r){t.$workspace.empty(),t.$workspace.append(r.$node,e.$node),f(),c(),l(),d(),h(),p(),v(),n.resolve(e)}),t.reportCreated=!0,n.promise()},createStandardReport:function(){var t=e.Deferred();return e.when(this.clear()).then(function(){return this.createReport()}.bind(this)).then(function(e){return e.createPage("Standard")}).done(function(){i.trigger("init"),s.hide(),t.resolve(require("currentReport"))}),t.promise()},openReport:function(t){return typeof t=="string"&&(t=e.parseXML(t)),e.when(this.clear()).then(function(){return this.createReport()}.bind(this)).then(function(){return u.parse(t)}).done(function(e){return e.pages.count()||e.createPage("Standard"),i.trigger("init"),s.hide(),e})},openReportByURL:function(t){var n=e.Deferred();return e.when(s.show()).then(function(){return a.get(t)}).done(function(e){return this.openReport(e).done(function(e){n.resolve(e)})}.bind(this)).fail(function(){require("notification").notify(arguments[2],{danger:!0}),s.hide(),n.reject()}.bind(this)),n.promise()},clear:function(){var t;return this.reportCreated?(t=e.Deferred(),require(["currentReport","customization"],function(e,n){i.clear(),n.clear(),e.remove(),require.undef("currentReport"),require.undef("customization"),t.resolve()},function(){t.resolve()}),t.promise()):!0}})}),define("page-types/Standard",["jquery","base/Band"],function(e,t){return function(){return e.when(t.create("ReportTitleBand"),t.create("PageHeaderBand"),t.create("DataBand"),t.create("PageFooterBand")).then(function(){return this.addBands.apply(this,arguments),this}.bind(this))}}),define("bands/ChildBand",["utils"],function(e){var t={title:"ChildBand",info:"ChildBand info",icon:"icon-165"},n=function(){this.type="ChildBand",this.defaultValues={CompleteToNRows:0,FillUnusedSpace:!1},this.prop({Name:"Child"}),this.attr({pos:32}),this.fillMap=function(){this._super.fillMap.apply(this,arguments),this.fieldMap.append(["Behavior:CompleteToNRows","Behavior:FillUnusedSpace"])}};return e.extend(n,t),n}),define("bands/ColumnFooterBand",["utils"],function(e){var t={title:"ColumnFooterBand",info:"ColumnFooterBand info",icon:"icon-159"},n=function(){this.type="ColumnFooterBand",this.prop({Name:"ColumnFooter"}),this.attr({pos:50})};return e.extend(n,t),n}),define("bands/ColumnHeaderBand",["utils"],function(e){var t={title:"ColumnHeaderBand",info:"ColumnHeaderBand info",icon:"icon-158"},n=function(){this.type="ColumnHeaderBand",this.prop({Name:"ColumnHeader"}),this.attr({pos:30})};return e.extend(n,t),n}),define("bands/DataBand",["jquery","config","utils","l10n","baseEvents","expression"],function(e,t,n,r,i,s){var o={title:"DataBand",info:"DataBand info",icon:"icon-162"},u=function(r){var o=r.attr("Sort");r.collection.mainCollection.container.report.res.createPopup("Edit DataBand").done(function(u){e.when(n.render("bands/edit-data-band",{Sort:o})).done(function(n){var a=r.fieldMap[4].fields.DataSource.control.self.$body.clone(),f=r.fieldMap[4].fields.Filter.control.self.$body.clone(!0),l=e(".db-content",n),c=e(".db-content-ds",l),h=e(".db-content-sort",n),p=e(".db-content-filter",l),d;t.set("hotkeyProhibited",!0),c.append(a),p.append(f),n.on("click",".db-tabs-item",function(){d=e(this),d.parent().find(".active").removeClass("active"),d.addClass("active"),l.find(".active").removeClass("active"),l.find("."+d.attr("data-block")).addClass("active")}),n.on("click",".sort-expr .d-fc-exp-but",function(){d=e(this),s.edit(d.prev().val()).done(function(e){e.onClick=function(t,n){d.prev().val(n),e.$main.find(".close").trigger("click")},require("head").put(e.$main)})}),n.on("click",".edit-db",function(){var t=e(".sort-expr .d-fc",h),n=e(".sort-dir",h),s=a.find(":selected").val();t.each(function(t){d=e(this),o[t]=o[t]||{},o[t].Expression=d.val()}),n.each(function(t){d=e(this).find("[name=Sort"+t+"]:checked"),o[t]=o[t]||{},d.val()==="Ascending"?delete o[t].Descending:o[t].Descending=!0}),s==="None"&&(s=null),r.prop("DataSource",s),r.prop("Filter",f.find("input").val()),i.trigger("remove-popups"),r.render(),i.trigger("update-properties-panel",r)}),e(".modal-content",u).html(n),require("head").put(u)})})},a=function(){this.type="DataBand",this.defaultValues={"Columns.Count":0,"Columns.Width":0,"Columns.MinRowCount":0,"Columns.Layout":"AcrossThenDown",KeepDetail:!1,KeepTogether:!1,CollectChildRows:!1,PrintIfDatasourceEmpty:!1,PrintIfDetailEmpty:!1,MaxRows:0,RowCount:1},this.prop({Name:"Data"}),this.attr({Sort:[],pos:35,"fill-title":"#ffa500"}),this.fillMap=function(){this._super.fillMap.apply(this,arguments),this.fieldMap.rebuild(["Appearance:Columns:Columns.Count","Appearance:Columns:Columns.Layout","Appearance:Columns:Columns.MinRowCount","Appearance:Columns:Columns.Width","Behavior:CollectChildRows","Behavior:KeepDetail","Behavior:KeepTogether","Behavior:PrintIfDatasourceEmpty","Behavior:PrintIfDetailEmpty","Behavior:ResetPageNumber","Data:DataSource","Data:Filter","Data:MaxRows","Data:Relation","Data:RowCount"],["Behavior:RepeatOnEveryPage"]),this.mainFields=[["Design:Name","Layout:Height"],["Data:DataSource"]]},this.canHaveChildren=function(t){var n=t.type||t;return this._super.canHaveChildren.apply(this,arguments)||e.inArray(n,["DataBand","DataHeaderBand","DataFooterBand","GroupHeaderBand"])>-1},this.canBeAdded=function(){return!0},this.creatingComponentEnd=function(e,t,n){var r;n&&(r=require("currentReport").pullDataSourceByView(n),r&&!this.prop("DataSource")&&(this.prop("DataSource",r.prop("Name")),this.render()))},this.dblclick=function(){return u(this)},this.rightClick=function(e){var t=this,n=function(e){return t.onChangeCM(e)},s;return s=t.collection.mainCollection.container.report.res.createContextMenu(t.toString(),[{name:r.tr("Edit..."),type:"default",closeAfter:!0,onClick:function(){i.trigger("activate",t),u(t)}},{name:r.tr("Add Child Band"),type:"default",closeAfter:!0,disabled:t.has("ChildBand")?!0:!1,onClick:function(){i.trigger("add-band","ChildBand",t)}},{name:r.tr("Add Detail Data Band"),type:"default",closeAfter:!0,disabled:t.has("DataBand")?!0:!1,onClick:function(){i.trigger("add-band","DataBand",t)}},{type:"separator"},{name:r.tr("Can Grow"),type:"checkbox",curVal:t.prop("CanGrow"),prop:"CanGrow",onChange:n},{name:r.tr("Can Shrink"),type:"checkbox",curVal:t.prop("CanShrink"),prop:"CanShrink",onChange:n},{name:r.tr("Can Break"),type:"checkbox",curVal:t.prop("CanBreak"),prop:"CanBreak",onChange:n},{type:"separator"},{name:r.tr("Keep Together"),type:"checkbox",curVal:t.prop("KeepTogether"),prop:"KeepTogether",onChange:n},{name:r.tr("Keep Detail"),type:"checkbox",curVal:t.prop("KeepDetail"),prop:"KeepDetail",onChange:n},{name:r.tr("Start New Page"),type:"checkbox",curVal:t.prop("StartNewPage"),prop:"StartNewPage",onChange:n},{name:r.tr("Print On Bottom"),type:"checkbox",curVal:t.prop("PrintOnBottom"),prop:"PrintOnBottom",onChange:n},{type:"separator"},{name:r.tr("Delete"),type:"default",disabled:!t.canBeRemoved(),closeAfter:!0,onClick:function(){i.trigger("menu-remove",t)}}]),s.css({left:e.pageX,top:e.pageY}),require("head").put(s),!1},this.fillProps=function(t){var r,i,s=this;this._super.fillProps.apply(this,arguments),r=t.find("> Sort"),r.length&&e.each(r,function(){e.each(e(this).children(),function(){i={},e.each(this.attributes,function(){i[this.name]=n.convertVal(this.value)}),s.attr("Sort").push(i)}),e(this).remove()})},this.toXML=function(){var t=e(this._super.toXML.apply(this,arguments)),n=+t.attr("Columns.Count"),r=+t.attr("Columns.Width"),i=this.attr("Sort"),s,o;return e.isNumeric(n)||(n=0),e.isNumeric(r)||(r=0),n===0?(t.removeAttr("Columns.Count"),t.removeAttr("Columns.Width")):r!==0?t.attr("Width",r):n&&(t.attr("Width",this.prop("Width")/this.prop("Columns.Count")),t.removeAttr("Columns.Width")),e.each(i,function(){if(!this||!this.Expression)return;s||(s=e(t[0].ownerDocument.createElement("Sort")),t.append(s)),s&&(o=e(s[0].ownerDocument.createElement("Sort")),e.each(this,function(e,t){o.attr(e,t)}),s.append(o))}),t},this.toString=function(){var e=this.prop("Name");return this.prop("DataSource")&&(e+=": "+this.prop("DataSource")),e}};return n.extend(a,o),a}),define("bands/DataFooterBand",["utils"],function(e){var t={title:"DataFooterBand",info:"DataFooterBand info",icon:"icon-161"},n=function(){this.type="DataFooterBand",this.prop({Name:"DataFooter"}),this.attr({pos:37,layer_defect:-1,"fill-title":"#ffa500"}),this.render=function(){return this._super.render.apply(this,arguments),this.attr("fill-title",this._parent.attr("fill-title")),this.$g}};return e.extend(n,t),n}),define("bands/DataHeaderBand",["utils"],function(e){var t={title:"DataHeaderBand",info:"DataHeaderBand info",icon:"icon-160"},n=function(){this.type="DataHeaderBand",this.defaultValues={SortOrder:"Ascending"},this.prop({Name:"DataHeader"}),this.attr({pos:34,layer_defect:-1}),this.render=function(){return this._super.render.apply(this,arguments),this.attr("fill-title",this._parent.attr("fill-title")),this.$g}};return e.extend(n,t),n}),define("bands/GroupFooterBand",["utils"],function(e){var t={title:"GroupFooterBand",info:"GroupFooterBand info",icon:"icon-164"},n=function(){this.type="GroupFooterBand",this.prop({Name:"GroupFooter"}),this.attr({pos:36,"fill-title":"#01DF3A",layer_defect:-1})};return e.extend(n,t),n}),define("bands/GroupHeaderBand",["jquery","utils","config","l10n","queue","baseEvents","base/Band","expression"],function(e,t,n,r,i,s,o,u){var a={title:"GroupHeaderBand",info:"GroupHeaderBand info",icon:"icon-163"},f=function(r){r.collection.mainCollection.container.report.res.createPopup("Edit Group").done(function(i){e.when(t.render("bands/edit-group-header-band")).done(function(t){var o=r.fieldMap[4].fields.Condition.control.self.$body.clone(),a=r.fieldMap[1].fields.SortOrder.control.self.$body.clone(),f=e(".ghb-condition",t),l=e(".ghb-sort",t),c;n.set("hotkeyProhibited",!0),f.append(o),l.append(a),t.on("click",".d-fc-exp-but",function(){c=e(this),u.edit(c.prev().val()).done(function(e){e.onClick=function(t,n){c.prev().val(n),e.$main.find(".close").trigger("click")},require("head").put(e.$main)})}),t.on("click",".edit-ghb",function(){r.prop("Condition",o.find("input").val()),r.prop("SortOrder",a.find(":selected").val()),s.trigger("remove-popups"),r.render(),s.trigger("update-properties-panel",r)}),e(".modal-content",i).html(t),require("head").put(i)})})},l=function(){this.type="GroupHeaderBand",this.defaultValues={KeepTogether:!1,KeepWithData:!1},this.prop({Name:"GroupHeader"}),this.attr({pos:35,"fill-title":"#01DF3A"}),this.fillMap=function(){this._super.fillMap.apply(this,arguments),this.fieldMap.append(["Behavior:KeepTogether","Behavior:KeepWithData","Behavior:ResetPageNumber","Behavior:SortOrder","Data:Condition"])},this.canHaveChildren=function(t){var n=t.type||t;return this._super.canHaveChildren.apply(this,arguments)||e.inArray(n,["DataBand","DataHeaderBand","DataFooterBand","GroupHeaderBand","GroupFooterBand"])>-1},this.canBeAdded=function(){return!0},this.applyRule=function(){var t=e.Deferred(),n=["GroupHeaderBand","DataBand"],r=this._parent,u,a,f,l;return r.type==="DataBand"?(u=r,r=r._parent):(r.isPage()&&(n=["DataBand"]),r.bands.eachEntity(function(t){if(e.inArray(t.type,n)>-1)return t=t,!1}),u?f=e.inArray(u,u.collection.entities):(u=o.create("DataBand"),a=!0)),l=o.create("GroupFooterBand"),e.when(u,l).done(function(e,n){r.addBand(this,f),this.addBands(e,n),i.push({context:s,undo:function(e,t,n){this.trigger("remove-band",n),a||(e.addBand(t),this.trigger("render-band",t)),e.rebuildTree()},redo:function(e,t,n){this.trigger("remove-band",t),n.addBand(t),e.addBand(n),this.trigger("render-band",n),this.trigger("render-band",t),e.rebuildTree()},data:[r,e,this]}),t.resolve(this,!1)}.bind(this)),t.promise()},this.dblclick=function(){return f(this)},this.rightClick=function(e){var t=this,n=function(e){return t.onChangeCM(e)},i;return i=t.collection.mainCollection.container.report.res.createContextMenu(t.toString(),[{name:r.tr("Edit..."),type:"default",closeAfter:!0,onClick:function(){return s.trigger("activate",t),f(t)}},{name:r.tr("Add Child Band"),type:"default",closeAfter:!0,disabled:t.has("ChildBand")?!0:!1,onClick:function(){s.trigger("add-band","ChildBand",t)}},{type:"separator"},{name:r.tr("Can Grow"),type:"checkbox",curVal:t.prop("CanGrow"),prop:"CanGrow",onChange:n},{name:r.tr("Can Shrink"),type:"checkbox",curVal:t.prop("CanShrink"),prop:"CanShrink",onChange:n},{name:r.tr("Can Break"),type:"checkbox",curVal:t.prop("CanBreak"),prop:"CanBreak",onChange:n},{type:"separator"},{name:r.tr("Keep With Data"),type:"checkbox",curVal:t.prop("KeepWithData"),prop:"KeepWithData",onChange:n},{name:r.tr("Repeat on Every Page"),type:"checkbox",curVal:t.prop("RepeatOnEveryPage"),prop:"RepeatOnEveryPage",onChange:n},{name:r.tr("Keep Together"),type:"checkbox",curVal:t.prop("KeepTogether"),prop:"KeepTogether",onChange:n},{name:r.tr("Reset Page Number"),type:"checkbox",curVal:t.prop("ResetPageNumber"),prop:"ResetPageNumber",onChange:n},{name:r.tr("Start New Page"),type:"checkbox",curVal:t.prop("StartNewPage"),prop:"StartNewPage",onChange:n},{name:r.tr("Print On Bottom"),type:"checkbox",curVal:t.prop("PrintOnBottom"),prop:"PrintOnBottom",onChange:n},{type:"separator"},{name:r.tr("Delete"),type:"default",disabled:!t.canBeRemoved(),closeAfter:!0,onClick:function(){s.trigger("menu-remove",t)}}]),i.css({left:e.pageX,top:e.pageY}),require("head").put(i),!1},this.toString=function(){return this.prop("Condition")?this.prop("Name")+": "+this.prop("Condition"):this.prop("Name")}};return t.extend(l,a),l}),define("bands/OverlayBand",["utils"],function(e){var t={title:"OverlayBand",info:"OverlayBand info",icon:"icon-166"},n=function(){this.type="OverlayBand",this.prop({Name:"Overlay"}),this.attr({pos:80})};return e.extend(n,t),n}),define("bands/PageFooterBand",["utils"],function(e){var t={title:"PageFooterBand",info:"PageFooterBand info",icon:"icon-157"},n=function(){this.type="PageFooterBand",this.prop({Name:"PageFooter"}),this.attr({pos:70}),this.fillMap=function(){this._super.fillMap.apply(this,arguments),this.fieldMap.remove(["Behavior:PrintOnBottom","Behavior:RepeatOnEveryPage","Behavior:StartNewPage"])}};return e.extend(n,t),n}),define("bands/PageHeaderBand",["utils"],function(e){var t={title:"PageHeaderBand",info:"PageHeaderBand info",icon:"icon-156"},n=function(){this.type="PageHeaderBand",this.prop({Name:"PageHeader"}),this.attr({pos:20}),this.fillMap=function(){this._super.fillMap.apply(this,arguments),this.fieldMap.remove(["Behavior:PrintOnBottom","Behavior:RepeatOnEveryPage","Behavior:StartNewPage"])}};return e.extend(n,t),n}),define("bands/ReportSummaryBand",["utils"],function(e){var t={title:"ReportSummaryBand",info:"ReportSummaryBand info",icon:"icon-155"},n=function(){this.type="ReportSummaryBand",this.prop({Name:"ReportSummary"}),this.attr({pos:60})};return e.extend(n,t),n}),define("bands/ReportTitleBand",["utils"],function(e){var t={title:"ReportTitleBand",info:"ReportTitleBand info",icon:"icon-154"},n=function(){this.type="ReportTitleBand",this.prop({Name:"ReportTitle"}),this.attr({pos:10}),this.fillMap=function(){this._super.fillMap.apply(this,arguments),this.fieldMap.remove(["Behavior:RepeatOnEveryPage"])}};return e.extend(n,t),n}),define("components/CellularTextObject",["jquery","config","utils","l10n","baseEvents"],function(e,t,n,r,i){var s={title:"CellularTextObject",info:"CellularTextObject info",icon:"icon-cellular_text"},o=function(){var s=function(t){var r=e(n.createNS("line",{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}));return r.css({stroke:t.Color,"stroke-width":t.Width,"stroke-dasharray":t.Style}),r}.bind(this);this.type="CellularTextObject",this.defaultValues={VertAlign:"Top",HorzAlign:"Left","TextFill.Color":"#000000",ParagraphOffset:0,ProcessAt:"Default",WordWrap:!0,AllowExpressions:!0},this._init=function(){this.prop({Name:"CellularText",Text:"",Width:226.8,Height:28.35,CellWidth:0,CellHeight:0,HorzSpacing:0,VertSpacing:0,"Border.Lines":"All"}),this.attr({"Font.Name":"Arial","Font.Size":"10pt","Font.Bold":!1,"Font.Italic":!1,"Font.Underline":!1,"Font.Strikeout":!1,"text-anchor":"middle",cellWidth:28.34,cellHeight:28.34}),this.setMinWH()},this.fillMap=function(){this._super.fillMap.apply(this,arguments),this.fieldMap.append([{prop:"Appearance:CellWidth",type:"unit",afterSetValue:this.setMinWH},{prop:"Appearance:CellHeight",type:"unit",afterSetValue:this.setMinWH},"Appearance:Font","Appearance:HorzAlign",{prop:"Appearance:HorzSpacing",type:"unit"},"Appearance:ParagraphOffset","Appearance:TextFill","Appearance:VertAlign",{prop:"Appearance:VertSpacing",type:"unit"},"Behavior:Duplicates","Behavior:HideValue","Behavior:HideZeros","Behavior:NullValue","Behavior:ProcessAt","Behavior:WordWrap","Data:AllowExpressions","Data:Brackets",{prop:"Data:Text",type:"text",expression:!0}]),this.mainFields=[["Design:Name"],["Data:Text"]]},this.setMinWH=function(){this.prop("CellWidth")&&this.prop("CellHeight")?(this.attr("minWidth",this.prop("CellWidth")+this.prop("HorzSpacing")),this.attr("minHeight",this.prop("CellHeight")+this.prop("VertSpacing"))):(this.attr("minWidth",this.attr("cellWidth")+this.prop("HorzSpacing")),this.attr("minHeight",this.attr("cellHeight")+this.prop("VertSpacing")))},this.appendEdges=function(){},this.appendBorders=function(){},this.appendBordersForCell=function(n,r,i){var o=t.get("dasharrays"),u=this.prop("Border.Lines").split(/,[\s]?/),a=this.prop("Border.Color"),f=this.prop("Border.Width"),l=this.prop("Border.Style"),c=e();e.inArray("None",u)===-1&&((e.inArray("All",u)>-1||e.inArray("Top",u)>-1)&&c.push(s({x1:0,y1:0,x2:r,y2:0,Color:this.prop("Border.TopLine.Color")||a,Width:this.prop("Border.TopLine.Width")||f,Style:o[this.prop("Border.TopLine.Style")||l]})),(e.inArray("All",u)>-1||e.inArray("Right",u)>-1)&&c.push(s({x1:r,y1:0,x2:r,y2:i,Color:this.prop("Border.RightLine.Color")||a,Width:this.prop("Border.RightLine.Width")||f,Style:o[this.prop("Border.RightLine.Style")||l]})),(e.inArray("All",u)>-1||e.inArray("Bottom",u)>-1)&&c.push(s({x1:r,y1:i,x2:0,y2:i,Color:this.prop("Border.BottomLine.Color")||a,Width:this.prop("Border.BottomLine.Width")||f,Style:o[this.prop("Border.BottomLine.Style")||l]})),(e.inArray("All",u)>-1||e.inArray("Left",u)>-1)&&c.push(s({x1:0,y1:i,x2:0,y2:0,Color:this.prop("Border.LeftLine.Color")||a,Width:this.prop("Border.LeftLine.Width")||f,Style:o[this.prop("Border.LeftLine.Style")||l]}))),c.each(function(){n.append(this)})},this.generateCell=function(t,r,i,s){var o=e(n.createNS("g")),u=e(n.createNS("rect",{width:t,height:r}));return u.css({fill:this.prop("Fill.Color")}),n.attr(o[0],"transform","translate("+i+","+s+")"),o.append(u),this.appendBordersForCell(o,t,r),o},this.dblclick=function(){var e=this.fieldMap[4].fields.Text;i.trigger("show-expression-editor",e)},this.rightClick=function(e){var t=this,n=function(e){return t.onChangeCM(e)},s;return s=t.collection.getMainCollection().container.report.res.createContextMenu(t.toString(),[{name:r.tr("Edit..."),type:"default",closeAfter:!0,onClick:function(){i.trigger("activate",t),t.dblclick()}},{name:r.tr("Clear"),type:"default",closeAfter:!0,onClick:function(){t.prop("Text",""),t.render(),i.trigger("activate",t)}},{type:"separator"},{name:r.tr("Can Grow"),type:"checkbox",curVal:t.prop("CanGrow"),prop:"CanGrow",onChange:n},{name:r.tr("Can Shrink"),type:"checkbox",curVal:t.prop("CanShrink"),prop:"CanShrink",onChange:n},{name:r.tr("Can Break"),type:"checkbox",curVal:t.prop("CanBreak"),prop:"CanBreak",onChange:n},{name:r.tr("Grow To Bottom"),type:"checkbox",curVal:t.prop("GrowToBottom"),prop:"GrowToBottom",onChange:n},{type:"separator"},{name:r.tr("Auto Width"),type:"checkbox",curVal:t.prop("AutoWidth"),prop:"AutoWidth",onChange:n},{name:r.tr("WordWrap"),type:"checkbox",curVal:t.prop("WordWrap"),prop:"WordWrap",onChange:n},{name:r.tr("Allow Expressions"),type:"checkbox",curVal:t.prop("AllowExpressions"),prop:"AllowExpressions",onChange:n},{type:"separator"},{name:r.tr("Delete"),type:"default",disabled:!t.canBeRemoved(),closeAfter:!0,onClick:function(){i.trigger("menu-remove",t)}},{type:"separator"},{name:r.tr("Bring to Front"),type:"default",closeAfter:!0,onClick:function(){i.trigger("menu-bring-to-front",t)}},{name:r.tr("Send to back"),type:"default",closeAfter:!0,onClick:function(){i.trigger("menu-send-to-back",t)}}]),s.css({left:e.pageX,top:e.pageY}),require("head").put(s),!1},this.render=function(){this._super.render.apply(this,arguments);var t,r=this.prop("Text").toString(),i=this.attr("cellWidth"),s=this.attr("cellHeight"),o=this.prop("HorzSpacing"),u=this.prop("VertSpacing"),a=this.attr("Font.Size"),f=this.attr("Font.Name"),l=0,c=0,h=0,p=e(n.createNS("g")),d,v,m=this.prop("Width"),g=this.prop("Height");this.$contentGroup.empty(),this.prop("CellWidth")&&this.prop("CellHeight")&&(i=this.prop("CellWidth"),s=this.prop("CellHeight")),t=Math.floor(m/i)*Math.floor(g/s);for(;l<t;l+=1){c+i>m+1&&(c=0,h+=s+u);if(h+s>g+1)break;d=this.generateCell(i,s,c,h),v=e(n.createNS("text")),v.text(r[l]),v.css({"font-size":a+(e.isNumeric(a)?"pt":""),fill:this.prop("TextFill.Color"),"font-family":f,"text-anchor":this.attr("text-anchor")}),n.attr(v[0],"transform","translate("+i/2+","+s/1.3+")"),this.applyFontStyles(v),d.append(v),p.append(d),c+=i+o}return this.$moveBlock.css("fill","transparent"),this.$contentGroup.append(p),this.$g},this.fillProps=function(){this._super.fillProps.apply(this,arguments),this.prop("Text",this.prop("Text").fromASCIICode())},this.toXML=function(){var t=e(this._super.toXML.apply(this,arguments));return t.attr("Text",this.prop("Text").toASCIICode()),t[0]}};return n.extend(o,s),o}),define("components/CheckBoxObject",["jquery","utils"],function(e,t){var n={title:"CheckBoxObject",info:"CheckBoxObject info",icon:"icon-116"},r=function(){this.type="CheckBoxObject",this._init=function(){this.prop({Name:"CheckBox",Width:18.9,Height:18.9,CheckColor:"#000000",CheckedSymbol:"Check",CheckWithRatio:1,UncheckedSymbol:"None",Checked:!0})},this.fillMap=function(){this._super.fillMap.apply(this,arguments),this.fieldMap.append([{prop:"Appearance:CheckColor",type:"color",label:"CheckColor"},{prop:"Appearance:CheckedSymbol",type:"select",label:"CheckedSymbol",collection:["Check","Cross","Plus","Fill"],defaultValue:"Check"},{prop:"Appearance:CheckWithRatio",type:"number",attrs:{min:.2,max:2,step:.1},defaultValue:1},{prop:"Appearance:UncheckedSymbol",label:"UncheckedSymbol",type:"select",collection:["None","Cross","Minus"],defaultValue:"None"},{prop:"Behavior:HideIfUnchecked",type:"checkbox",label:"HideIfUnchecked",defaultValue:!1},{prop:"Data:Checked",type:"checkbox",label:"Checked"},"Data:DataColumn","Data:Expression"]),this.mainFields=[["Data:Checked","Appearance:CheckColor"],["Appearance:CheckedSymbol","Appearance:UncheckedSymbol"]]},this.render=function(){var n,r=this.prop("Width"),i=this.prop("Height"),s=this.prop("Left"),o=this.prop("Top"),u,a,f,l,c,h,p=this.prop("CheckWithRatio");this._super.render.apply(this,arguments),this.$contentGroup.children().length||(this.$nestedG1=e(t.createNS("g")),this.$nestedG2=e(t.createNS("g")),this.$textNode=e(t.createNS("text",{"class":"text"})),this.$nestedG2.append(this.$textNode),this.$nestedG1.append(this.$nestedG2),this.$contentGroup.append(this.$nestedG1));if(this.prop("Checked")){n=this.prop("CheckedSymbol");switch(n){case"Check":n="✓";break;case"Cross":n="x";break;case"Plus":n="+";break;case"Fill":n="-";break;default:n="✓"}}else{n=this.prop("UncheckedSymbol");switch(n){case"None":n="";break;case"Cross":n="x";break;case"Minus":n="-";break;default:n=""}}return this.$textNode.text(n),u=[s,o],a=[s+r,o+i],f=Math.sqrt(Math.pow(a[0]-u[0],2)+Math.pow(a[1]-u[1],2)),h=f/2,l=r/2-h/2,c=i/2-h/2,l<0&&(l=0),c<h&&(c=h),t.attr(this.$nestedG1[0],"transform","translate("+l+","+c+")"),this.$textNode.css({"font-size":h,fill:this.prop("CheckColor"),"font-weight":p<1?"normal":"bold"}),this.$g}};return t.extend(r,n),r}),define("components/LineObject",["jquery","config","utils","facProperties"],function(e,t,n,r){var i={title:"LineObject",info:"LineObject info",icon:"icon-105"},s={Normal:{label:"Normal",render:function(){return null}},Arrow:{label:"Arrow",render:function(t,r,i,s){i=(i||10)*2;var o=e(n.createNS("g",{transform:"translate("+t+","+r+")"})),u=e(n.createNS("g")),a=e(n.createNS("line")),f=e(n.createNS("line")),l={x1:0,y1:0,x2:i,y2:0};return a.attr(l),l.x2=0,l.y2=i,f.attr(l),a.css({"stroke-width":this.prop("Border.Width"),stroke:this.prop("Border.Color")}),f.css({"stroke-width":this.prop("Border.Width"),stroke:this.prop("Border.Color")}),u.append(a),u.append(f),n.attr(u[0],"transform","rotate("+s+")"),o.append(u),o}},Circle:{label:"Circle",render:function(t,r,i,s){var o=e(n.createNS("g",{transform:"translate("+t+","+r+")"})),u=e(n.createNS("g")),a=e(n.createNS("ellipse",{cx:i/2,cy:i/2,rx:i,ry:i}));return a.css({fill:this.attr("fill_tip"),stroke:this.prop("Border.Color"),"stroke-width":this.prop("Border.Width")}),u.append(a),n.attr(u[0],"transform","rotate("+s+")"),o.append(u),o}},Square:{label:"Square",render:function(t,r,i,s){i=(i||10)*3;var o=e(n.createNS("g",{transform:"translate("+t+","+r+")"})),u=e(n.createNS("g")),a=i/2-18,f=i/2-18,l=i-16,c=e(n.createNS("polygon",{points:a+", -20"+" "+"-20, "+f+" "+a+", "+l+" "+l+", "+f}));return c.css({fill:this.attr("fill_tip"),stroke:this.prop("Border.Color"),"stroke-width":this.prop("Border.Width")}),u.append(c),n.attr(u[0],"transform","rotate("+s+")"),o.append(u),o}},Diamond:{label:"Diamond",render:function(t,r,i,s){i=(i||10)*2;var o=e(n.createNS("g",{transform:"translate("+t+","+r+")"})),u=e(n.createNS("g")),a=e(n.createNS("polygon",{points:"25,10 0,0 10,25 32,32"}));return a.css({fill:this.attr("fill_tip"),stroke:this.prop("Border.Color"),"stroke-width":this.prop("Border.Width")}),u.append(a),n.attr(u[0],"transform","rotate("+s+")"),o.append(u),o}}},o=function(){function i(e,t){return Math.atan2(t,e)*(180/Math.PI)}this.type="LineObject",this.defaultValues={"EndCap.Style":"None","EndCap.Height":8,"EndCap.Width":8,"StartCap.Style":"None","StartCap.Height":8,"StartCap.Width":8,Diagonal:!1,"Border.Width":1,"Border.Color":"#000"},this._init=function(){this.attr({dasharray:"",fill_tip:"#ffffff",defaultValueWidth:100}),this.prop({Name:"Line",Width:0,Height:0})},this.fillMap=function(){this._super.fillMap.apply(this,arguments),this.fieldMap=r.factory(["Appearance:Border","Appearance:Cursor",{prop:"Appearance:Diagonal",type:"checkbox",label:"Diagonal"},{prop:"Appearance:StartCap:StartCap.Height",label:"Height",extraLabel:"StartCap height",type:"number"},{prop:"Appearance:StartCap:StartCap.Style",label:"Style",extraLabel:"StartCap style",type:"select",collection:s},{prop:"Appearance:StartCap:StartCap.Width",label:"Width",extraLabel:"StartCap width",type:"number"},{prop:"Appearance:EndCap:EndCap.Height",label:"Height",extraLabel:"EndCap height",type:"number"},{prop:"Appearance:EndCap:EndCap.Style",label:"Style",extraLabel:"EndCap style",type:"select",collection:s},{prop:"Appearance:EndCap:EndCap.Width",label:"Width",extraLabel:"EndCap width",type:"number"},"Appearance:EvenStyle","Appearance:EvenStylePriority","Appearance:Style","Appearance:HoverStyle","Behavior:CanGrow","Behavior:CanShrink","Behavior:Exportable","Behavior:GrowToBottom","Behavior:Printable","Behavior:PrintOn","Behavior:ShiftMode","Behavior:Visible","Design:Name","Design:Restrictions","Layout:Anchor","Layout:Dock","Layout:Height","Layout:Left","Layout:Top","Layout:Width"]),this.mainFields=[["Appearance:StartCap:StartCap.Height","Appearance:StartCap:StartCap.Style","Appearance:StartCap:StartCap.Width"],["Appearance:EndCap:EndCap.Height","Appearance:EndCap:EndCap.Style","Appearance:EndCap:EndCap.Width"]]},this.resizingComponents=function(){var r=t.get("circleButtonWidth"),i=t.get("circleButtonHeight"),s=this.prop("Width")-r,o=this.prop("Height")-i,u=s,a=o;if(!this.$resizing){var f=n.createNS("use"),l=e(n.createNS("rect",{"class":"se-resize"}));this.$resizing=e(),this.$resizing.push(null,null,e(n.createNS("g",{"class":"resizing-line"}))),n.xAttr(f,"xlink:href","#d-button-circle"),l.css("fill","transparent"),l.attr({width:r*2,height:i*2}),this.$resizing[2].append(f,l),this.$controlElements.append(this.$resizing[2])}return this.prop("Diagonal")||(s>o?a=0:u=0),n.attr(this.$resizing[2][0],"transform","translate("+u+","+a+")"),this},this.addStartCap=function(e){var t;this.prop("StartCap.Style")&&s[this.prop("StartCap.Style")]&&(t=s[this.prop("StartCap.Style")].render.call(this,e.x1,e.y1,this.prop("StartCap.Height"),i(e.x2-e.x1,e.y2-e.y1)-45),t&&this.$lineContainer.append(t))},this.addEndCap=function(e){var t;this.prop("EndCap.Style")&&s[this.prop("EndCap.Style")]&&(t=s[this.prop("EndCap.Style")].render.call(this,e.x2,e.y2,this.prop("EndCap.Height"),i(e.x2-e.x1,e.y2-e.y1)+135),t&&this.$lineContainer.append(t))},this.setPosition=function(){this._super.setPosition.apply(this,arguments),this.attr("isHorizontal")?this.attr("bottom",this.prop("Top")):this.attr("isVertical")&&this.attr("bottom",this.prop("Top")+this.prop("Height"))},this.render=function(){return this.prop("Width")===0&&this.prop("Height")===0&&this.prop("Width",this.attr("defaultValueWidth")),this._super.renderContainer.apply(this,arguments),this.$content=e(n.createNS("g",{"class":"move"})),this.$body.html(this.$content),this.$moveBlock=e(n.createNS("line")),this.$content.prepend(this.$moveBlock),this.$lineContainer=e(n.createNS("g")),this.$content.prepend(this.$lineContainer),n.attr(this.$lineContainer[0],{transform:"translate(0, 0)"}),this.render=function(){var r=this.prop("Width"),i=this.prop("Height"),s={};return s.style=t.get("dasharrays")[this.prop("Border.Style")],this.$lineContainer.empty(),this.$workspace=e(n.createNS("rect")),this.$line=this.$line||e(n.createNS("line")),this.$moveBlock.css({"stroke-width":+this.prop("Border.Width")+t.get("lineMovingScope"),stroke:"transparent"}),this.$line.css({"stroke-dasharray":s.style,"stroke-width":this.prop("Border.Width"),stroke:this.prop("Border.Color")}),this.$lineContainer.append(this.$workspace,this.$line),this.attr("bottom",this.prop("Top")),this.prop("Diagonal")?(s={x1:0,y1:0,x2:r,y2:i},i>0&&this.attr("bottom",this.attr("bottom")+i),this.attr("isVertical",!1),this.attr("isHorizontal",!1)):r>i?(s={x1:0,y1:0,x2:r,y2:0},this.attr("isHorizontal",!0),this.attr("isVertical",!1)):(s={x1:0,y1:0,x2:0,y2:i},this.attr("isVertical",!0),this.attr("isHorizontal",!1)),n.attr(this.$line[0],s),n.attr(this.$moveBlock[0],s),this.addEndCap(s),this.addStartCap(s),this.resizingComponents(),this.setPosition(),this.$g},this.render()},this.resizingEnd=function(){if(this.prop("Diagonal"))return;this.prop(this.attr("isHorizontal")?"Height":"Width",0)},this.toXML=function(){var t=e(this._super.toXML.apply(this,arguments));return this.prop("Border.Color")&&t.attr("Border.Color",this.prop("Border.Color")),this.prop("Border.Width")&&t.attr("Border.Width",this.prop("Border.Width")),this.prop("Border.Style")&&t.attr("Border.Style",this.prop("Border.Style")),t[0]}};return n.extend(o,i),o}),define("components/PictureObject",["jquery","utils"],function(e,t){var n={title:"PictureObject",info:"PictureObject info",icon:"icon-103"},r=function(){this.type="PictureObject",this.defaultValues={Angle:0,Tile:!1,Transparency:0,TransparentColor:"transparent",Image:"",ShowErrorImage:!1,SizeMode:"Zoom"},this._init=function(){this.prop({Name:"Picture",Width:75.6,Height:75.6}),this.attr({prefix:"data:image/png;base64,","fill-opacity":1})},this.fillMap=function(){this._super.fillMap.apply(this,arguments),this.fieldMap.append(["Appearance:Angle","Appearance:Tile","Appearance:Transparency","Appearance:TransparentColor","Behavior:ShowErrorImage","Behavior:SizeMode","Data:DataColumn","Data:Image","Data:ImageLocation","Layout:MaxHeight","Layout:MaxWidth","Layout:Padding"]),this.mainFields=[["Data:Image","Data:ImageLocation"],["Data:DataColumn"]]},this.render=function(){var n=this.prop("Angle");this._super.render.apply(this,arguments);if(!this.$image||!this.$rGroup)this.$rGroup=e(t.createNS("g")),this.$image=e(t.createNS("image",{"class":"move"}));return this.$image.attr({width:this.prop("Width"),height:this.prop("Height"),x:0,y:0}),this.$rGroup.append(this.$image),t.xAttr(this.$image[0],"href",this.prop("ImageLocation")||this.prop("Image")),n!==undefined&&t.attr(this.$rGroup[0],"transform","rotate($angle $x $y)".replace(/\$angle/g,n).replace(/\$x/g,this.prop("Width")/2).replace(/\$y/g,this.prop("Height")/2)),this.$contentGroup.append(this.$rGroup),this.$g},this.fillProps=function(){var e="";return this._super.fillProps.apply(this,arguments),this.prop("Image")&&(e=this.attr("prefix")+this.prop("Image")),this.prop("Image",e),this},this.toXML=function(){var t=this._super.toXML.apply(this,arguments),n;return this.prop("ImageLocation")?e(t).removeAttr("Image"):(n=this.prop("Image").replace(/^([\w:\/;]+base64,){1}/,""),e(t).attr("Image",n)),t}};return t.extend(r,n),r}),define("components/RichObject",["jquery","utils"],function(e,t){var n={title:"RichObject",info:"RichObject info",icon:"icon-126"},r=function(){this.type="RichObject",this.defaultValues={"Padding.Left":2,"Padding.Right":2,CanBreak:!0,ProcessAt:"Default",AllowExpressions:!0,OldBreakStyle:!1},this._init=function(){this.prop({Name:"Rich",Width:94.5,Height:18.9,Text:""})},this.fillMap=function(){this._super.fillMap.apply(this,arguments),this.fieldMap.append(["Behavior:BreakTo","Behavior:CanBreak","Behavior:Duplicates","Behavior:HideValue","Behavior:HideZeros","Behavior:NullValue","Behavior:ProcessAt","Data:AllowExpressions","Data:Brackets","Data:DataColumn","Data:Text","Layout:Padding",{prop:"Misc:OldBreakStyle",type:"checkbox"}]),this.mainFields=[["Design:Name"]]},this.render=function(){return this._super.render.apply(this,arguments),this.$g}};return t.extend(r,n),r}),define("components/ShapeObject",["jquery","config","utils"],function(e,t,n){var r={title:"ShapeObject",info:"ShapeObject info",icon:"icon-108"},i={Rectangle:{label:"rectangle",render:function(t,r){var i=e(n.createNS("rect",{width:t,height:r}));return i}},RoundRectangle:{label:"round rectangle",render:function(t,r){var i=e(n.createNS("rect",{width:t,height:r,rx:10,ry:10}));return i}},Ellipse:{label:"ellipse",render:function(t,r){var i=t/2,s=r/2,o=e(n.createNS("ellipse",{cx:i,cy:s,rx:i,ry:s}));return o}},Triangle:{label:"triangle",render:function(t,r){var i=e(n.createNS("polygon",{points:t/2+", 0"+" "+"0, "+r+" "+t+", "+r}));return i}},Diamond:{label:"diamond",render:function(t,r){var i=t/2,s=r/2,o=e(n.createNS("polygon",{points:i+",0"+" "+"0,"+s+" "+i+","+r+" "+t+","+s}));return o}}},s=function(){this.type="ShapeObject",this.defaultValues={Curve:0},this._init=function(){this.prop({Name:"Shape",Width:94.5,Height:18.9,Shape:"Rectangle","Fill.Color":"transparent"})},this.fillMap=function(){this._super.fillMap.apply(this,arguments),this.fieldMap.append(["Appearance:Curve",{prop:"Appearance:Shape",type:"select",label:"Shape",collection:i}]),this.mainFields=[["Design:Name"],["Appearance:Shape"]]},this.appendBorders=function(){},this.appendPadding=function(){},this.canHaveProp=function(e){return e==="Appearance:Border"?!1:this._super.canHaveProp.apply(this,arguments)},this.render=function(){var r,s=this.prop("Border.Width")||0,o=this.prop("Width")-s,u=this.prop("Height")-s;return this._super.render.apply(this,arguments),this.$shape||(this.$shape=e(n.createNS("g"))),this.$shape.empty(),r=i[this.prop("Shape")].render.call(this,o<0?0:o,u<0?0:u),r.css({fill:this.prop("Fill.Color"),stroke:this.prop("Border.Color"),"stroke-width":s,"stroke-dasharray":t.get("dasharrays")[this.prop("Border.Style")]}),n.attr(this.$shape[0],"transform","translate("+s/2+","+s/2+")"),this.$shape.append(r),this.$contentGroup.append(this.$shape),this.$moveBlock.css({fill:"transparent"}),this.$g},this.toXML=function(){var t=e(this._super.toXML.apply(this,arguments));return t.removeAttr("Border.Lines"),t[0]}};return n.extend(s,r),s}),define("components/SubreportObject",["jquery","utils","facProperties"],function(e,t,n){var r={title:"SubreportObject",info:"SubreportObject info",icon:"icon-104"},i=function(){this.type="SubreportObject",this.defaultValues={PrintOnParent:!1},this._init=function(){this.prop({Name:"Subreport",Width:70,Height:40,"Fill.Color":"#C9C9C9"})},this.fillMap=function(){this._super.fillMap.apply(this,arguments),this.fieldMap=n.factory(["Appearance:EvenStyle","Appearance:EvenStylePriority","Appearance:HoverStyle","Behavior:GrowToBottom","Behavior:PrintOn","Behavior:PrintOnParent","Behavior:ShiftMode","Behavior:Visible","Design:Name","Design:Restrictions","Layout:Anchor","Layout:Dock","Layout:Height","Layout:Left","Layout:Top","Layout:Width",{prop:"Misc:ReportPage",collection:function(){return e.grep(require("currentReport").pages.all(),function(e){return e.attr("isSubreport")})}}]),this.eventMap.remove(["Build:AfterPrintEvent","Build:BeforePrintEvent","Preview:ClickEvent"])},this.getReportPage=function(){return require("currentReport").pages.findOneAmongAll({Name:this.prop("ReportPage"),isSubreport:!0})},this.render=function(){var n=this.getReportPage();this._super.render.apply(this,arguments),this.$contentGroup.empty();var r=e(t.createNS("g")),i=e(t.createNS("text",{"class":"text"})),s=0,o=10;return r.append(i),this.$contentGroup.append(r),i.text(this.prop("Name")),i.css({"font-size":o,"fill-opacity":this.attr("text-fill-opacity"),fill:"#000000","text-anchor":"start"}),t.attr(r[0],"transform","translate("+s+","+o+")"),n&&n.attr("removed")&&n.attr("removed",!1),this.$g},this.remove=function(){this._super.remove.apply(this,arguments),require("currentReport").removePage(this.getReportPage())},this.fillProps=function(){this._super.fillProps.apply(this,arguments),e.each(require("currentReport").pages.findBy({Name:this.prop("ReportPage")}),function(){this.attr("isSubreport",!0)})}};return t.extend(i,r),i}),define("components/TableObject/TableColumn",["jquery","utils","baseEntity","baseEvents","facProperties"],function(e,t,n,r,i){var s={title:"TableColumn",info:"TableColumn info",icon:"icon-215"},o=function(t){return n.createObject(null,{init:function(){this.type="TableColumn",this.parent=t,this.constructor=o,this.prop("Name","Column"),this.prop({Name:this.formName(),MaxWidth:500,MinWidth:0,Width:66}),this.fieldMap=i.factory([{prop:"Behavior:AutoSize",defaultValue:!1},"Behavior:Visible","Design:Name","Design:Restrictions","Layout:MaxWidth","Layout:MinWidth",{prop:"Layout:Width",setValue:function(e,t){var n;t>this.prop("MaxWidth")&&(n=this.prop("MaxWidth")),t<this.prop("MinWidth")&&(n=this.prop("MinWidth")),this.prop(e,n||t),n&&r.trigger("update-properties-panel",this),this.getTable().update(),this.activate()}}])},_getInx:function(){return e.inArray(this,this.getTable().columns)},getTable:function(){return this.parent.matrix||this.parent},activate:function(){var e=this._getInx();return this.getTable()._eachRow(function(t,n){n.cells[e].activate()}),this._super.activate.call(this),this},deactivate:function(){var e=this._getInx();return this.getTable()._eachRow(function(t,n){n.cells[e].deactivate()}),this},toXML:function(t){var n=e(t.ownerDocument.createElement(this.type));return this.eachProp(function(e,t){n.attr(e,t)}),n[0]},buildTree:function(){return this._super.buildTree.call(this),this.updateTreeView(),this.selfTree.$main}})};return t.extend(o,s),o}),define("components/TableObject/TableRow",["jquery","utils","baseEntity","baseEvents","facProperties"],function(e,t,n,r,i){var s={title:"TableRow",info:"TableRow info",icon:"icon-216"},o=function(t){return n.createObject(null,{init:function(){this.type="TableRow",this.parent=t,this.constructor=o,this.cells=[],this.prop("Name","Row"),this.prop({Name:this.formName(),MaxHeight:500,MinHeight:0,Height:18}),this.fieldMap=i.factory([{prop:"Behavior:AutoSize",defaultValue:!1},"Behavior:Visible","Design:Name","Design:Restrictions","Layout:MaxHeight","Layout:MinHeight",{prop:"Layout:Height",setValue:function(e,t){var n;t>this.prop("MaxHeight")&&(n=this.prop("MaxHeight")),t<this.prop("MinHeight")&&(n=this.prop("MinHeight")),this.prop(e,n||t),n&&r.trigger("update-properties-panel",this),this.getTable().update(),r.trigger("balance-band",this.getTable().collection.container),this.activate()}}])},getTable:function(){return this.parent.matrix||this.parent},_getInx:function(){return e.inArray(this,this.getTable().rows)},activate:function(){var e=this._getInx();return this.getTable()._eachColumn(function(t,n){this.rows[e].cells[t].activate()}),this._super.activate.call(this),this},deactivate:function(){var e=this._getInx();return this.getTable()._eachColumn(function(t,n){this.rows[e].cells[t].deactivate()}),this},toXML:function(t){var n=e(t.ownerDocument.createElement(this.type));return this.eachProp(function(e,t){n.attr(e,t)}),n[0]},buildTree:function(){var e,t;this._super.buildTree.call(this);for(e=0,t=this.cells.length;e<t;e+=1)this.putInTree(this.cells[e].buildTree());return this.updateTreeView(),this.selfTree.$main}})};return t.extend(o,s),o}),define("components/TableObject/TableCell",["jquery","config","utils","baseEvents","baseComponent","componentCollection","facProperties","facEvents"],function(e,t,n,r,i,s,o,u){var a={title:"TableCell",info:"TableCell info",icon:"icon-214"},f=function(o){var u=i.create("TextObject",!0);return u.parent=o,u.constructor=f,u.type="TableCell",u.prop("Name","Cell"),u.prop({Name:u.formName(),Text:"",ColSpan:1,RowSpan:1,"Border.Color":"#C0C0C0"}),u.attr({removeable:!1,copyable:!1}),u.components=s.create(u),u.clone=function(e){var t=this._super._super.clone.apply(this,arguments);return this.components.isEmpty()||this.components.everyEntity(function(e){e=e.clone(),e&&(e.render(),t.put(e))}),t},u.rightClick=function(){},u._fillMap=function(){this.fillMap(),this.fieldMap.rebuild([{prop:"Appearance:ColSpan",type:"number",attrs:{min:1},afterSetValue:function(){this.getTable().update(),r.trigger("activate-component",require("currentReport").getSelected())}},{prop:"Appearance:RowSpan",type:"number",attrs:{min:1},afterSetValue:function(){this.getTable().update(),r.trigger("activate-component",require("currentReport").getSelected())}}],["Behavior:AutoWidth","Behavior:Duplicates","Behavior:CanGrow","Behavior:CanShrink","Behavior:GrowToBottom","Behavior:ShiftMode","Layout:Anchor","Layout:Dock","Layout:Height","Layout:Left","Layout:Top","Layout:Width"])},u.getTable=function(){return this.parent.parent.matrix||this.parent.parent},u.appendEdges=function(){this.$moveBlock.css({stroke:this.prop("Border.Color"),"stroke-dasharray":"","stroke-width":"1px"})},u.resizingComponents=function(){var e,r,i=t.get("circleButtonWidth"),s=t.get("circleButtonHeight");return this._super.resizingComponents.apply(this,arguments),this.$resizing[2]&&(this.$resizing[2].remove(),this.$resizing.splice(2,1)),e=this.prop("Width"),r=this.prop("Height"),n.attr(this.$resizing[0][0],"transform","translate("+(e-i*2)+","+(r/2-s)+")"),n.attr(this.$resizing[1][0],"transform","translate("+(e/2-i)+","+(r-s*2)+")"),this},u.getPosInRow=function(){return e.inArray(this,this.parent.cells)},u.getPosInColumn=function(){return e.inArray(this.parent,this.getTable().rows)},u.prev=function(){return this.parent.cells[this.getPosInRow()-1]},u.next=function(){return this.parent.cells[this.getPosInRow()+this.prop("ColSpan")]},u.under=function(){var e=this.getTable().rows[this.getPosInColumn()+this.prop("RowSpan")];return e?e.cells[this.getPosInRow()]:null},u.over=function(){var e=this.getTable().rows[this.getPosInColumn()-1];return e?e.cells[this.getPosInRow()]:null},u.afterInRow=function(e){return this.parent.cells.slice(this.getPosInRow()+(e?0:1),this.parent.cells.length)},u.afterInColumn=function(e){var t=[],n=this.getPosInRow(),r=this.getPosInColumn()+(e?0:1);return u.getTable()._eachRow(function(e,i){r<=e&&t.push(i.cells[n])}),t},u.activate=function(){this._super.activate.call(this),this.attr("activated")&&!this.fieldMap&&this._fillMap(),this.$blanket||(this.$blanket=e(n.createNS("rect")),this.$moveBlock.after(this.$blanket)),this.$blanket.attr({width:this.prop("Width"),height:this.prop("Height")}),this.$blanket.attr("fill","rgba(160, 195, 255, 0.5)"),this.showResizingComponents()},u.deactivate=function(){return this._super.deactivate.call(this),this.$blanket&&this.$blanket.removeAttr("fill"),this},u.put=function(e){this.components.add(e.g.component)},u.mouseStart=function(t){r.trigger("activate",this);if(e(t.target).is(".resizing-component > "))return;return!1},u.resizing=function(e,t){var n=this.getTable(),r;t.dir===0?(r=this.getPosInRow(),n.columns[r].prop("Width",this.prop("Width")),n.update()):(r=this.getPosInColumn(),n.rows[r].prop("Height",this.prop("Height")),n.update())},u.resizingEnd=function(){r.trigger("balance-band",this.getTable().collection.container)},u.canHaveChildren=function(e){return e!=="TableObject"&&e!=="MatrixObject"?!0:!1},u.render(),n.removeClass(u.$moveBlock[0],"move"),n.removeClass(u.content,"move"),u.$components=e(n.createNS("g")),u.$g.append(u.$components),n.addClass(u.g,"cell"),u.toXML=function(t){var n=e(this._super.toXML.apply(this,arguments));return this.components.everyEntity(function(e){n.append(e.toXML(n[0]))}),n.removeAttr("Left"),n.removeAttr("Top"),n.removeAttr("Width"),n.removeAttr("Height"),n[0]},u.buildTree=function(){return this._super._super.buildTree.call(this),this.components.eachEntity(function(e){this.putInTree(e.buildTree())}.bind(this)),this.updateTreeView(),this.selfTree.$main},u};return n.extend(f,a),f}),define("components/TableObject",["jquery","utils","l10n","baseEvents","baseComponent","components/TableObject/TableColumn","components/TableObject/TableRow","components/TableObject/TableCell"],function(e,t,n,r,i,s,o,u){var a={title:"TableObject",info:"TableObject info",icon:"icon-127"},f=function(){this.type="TableObject",this.rows=[],this.columns=[],this.defaultValues={Layout:"AcrossThenDown",WrappedGap:0,AdjustSpannedCellsWidth:!1,RepeatHeaders:!0,ManualBuildAutoSpans:!0,FixedColumns:0,FixedRows:0},this._init=function(){this.prop({Name:"Table"}),this.attr({RowCount:5,ColumnCount:5})},this.createCell=function(e){return new u(e)},this.clone=function(){var e=this._super.clone.apply(this),t;return this._eachRow(function(n,r){e.rows[n]=r.clone(e),this._eachColumn(function(i,s){e.columns[i]||(e.columns[i]=s.clone(e)),t=r.cells[i].clone(e.rows[n]),e.rows[n].cells[i]=t})}),e},this.rightClick=function(e){var t=this,i=function(e){return t.onChangeCM(e)},s;return s=t.collection.getMainCollection().container.report.res.createContextMenu(t.toString(),[{name:n.tr("Repeat Headers"),type:"checkbox",curVal:t.prop("RepeatHeaders"),prop:"RepeatHeaders",onChange:i},{name:n.tr("Can Break"),type:"checkbox",curVal:t.prop("CanBreak"),prop:"CanBreak",onChange:i},{name:n.tr("Grow To Bottom"),type:"checkbox",curVal:t.prop("GrowToBottom"),prop:"GrowToBottom",onChange:i},{type:"separator"},{name:n.tr("Delete"),type:"default",disabled:!t.canBeRemoved(),closeAfter:!0,onClick:function(){r.trigger("menu-remove",t)}},{type:"separator"},{name:n.tr("Bring to Front"),type:"default",closeAfter:!0,onClick:function(){r.trigger("menu-bring-to-front",t)}},{name:n.tr("Send to back"),type:"default",closeAfter:!0,onClick:function(){r.trigger("menu-send-to-back",t)}}]),s.css({left:e.pageX,top:e.pageY}),require("head").put(s),!1},this.fillMap=function(){this._super.fillMap.apply(this,arguments),this.eventMap.append(["Build:ManualBuildEvent"]),this.fieldMap.rebuild([{prop:"Appearance:ColumnCount",type:"number",attrs:{min:0,max:20},setValue:function(e,t){this.attr(e,t,1),this.update(),this.rebuildTree()}},"Appearance:Fill",{prop:"Appearance:RowCount",type:"number",attrs:{min:0,max:20},setValue:function(e,t){this.attr(e,t,1),this.update(),this.rebuildTree(),r.trigger("balance-band",this.collection.container)}},{prop:"Behavior:AdjustSpannedCellsWidth",type:"checkbox"},"Behavior:CanBreak","Behavior:Layout",{prop:"Behavior:RepeatHeaders",type:"checkbox"},{prop:"Behavior:WrappedGap",type:"unit"},{prop:"Build:ManualBuildAutoSpans",type:"checkbox"},{prop:"Layout:FixedColumns",type:"number",attrs:{min:0,max:4}},{prop:"Layout:FixedRows",type:"number",attrs:{min:0,max:4}}],["Behavior:CanGrow","Behavior:CanShrink"]),this.mainFields=[["Design:Name"],["Appearance:ColumnCount","Appearance:RowCount"]]},this.attr=function(e,t){var n=this._super.attr.apply(this,arguments);return t!==undefined&&(e==="RowCount"?this.rows=this.rows.slice(0,t):e==="ColumnCount"&&(this.columns=this.columns.slice(0,t),this._eachRow(function(e,n){n.cells=n.cells.slice(0,t)}))),n},this.appendRow=function(t){var n=new o(this);return this.attr("RowCount",this.attr("RowCount")+1),e.isNumeric(t)||(t=this.rows.length),this.rows.splice(t,0,n),this._eachColumn(function(){n.cells.push(this.createCell(n))}),n},this.removeRow=function(e){return this.rows.splice(e,1),this.attr("RowCount",this.attr("RowCount")-1),this},this.appendColumn=function(t){var n=new s(this);return this.attr("ColumnCount",this.attr("ColumnCount")+1),e.isNumeric(t)||(t=this.columns.length),this.columns.splice(t,0,n),this._eachRow(function(e,n){this._eachColumn(function(e){e===t&&n.cells.splice(e,0,this.createCell(n))})}),n},this.removeColumn=function(e){return this.columns.splice(e,1),this.attr("ColumnCount",this.attr("ColumnCount")-1),this},this.getCell=function(e,t){return this.rows[e].cells[t]},this._eachRow=function(e){var t=0,n;e=e||function(){};for(;t<this.attr("RowCount");t+=1)n=this.rows[t]||(this.rows[t]=new o(this)),e.call(this,t,n)},this._eachColumn=function(e){var t=0,n;e=e||function(){};for(;t<this.attr("ColumnCount");t+=1)n=this.columns[t]||(this.columns[t]=new s(this)),e.call(this,t,n)},this._eachCell=function(e){var t;e=e||function(){},this._eachRow(function(n,r){this._eachColumn(function(n,i){t=r.cells[n]||(r.cells[n]=this.createCell(r)),e.call(this,n,t,r,i)})})},this._percentage=function(){var e=this.prop("Width"),t=this.prop("Height");this._eachColumn(function(t,n){n.attr("percentage",n.prop("Width")/(e/100))}),this._eachRow(function(e,n){n.attr("percentage",n.prop("Height")/(t/100))})},this._recalculate=function(){var e=this.prop("Width"),t=this.prop("Height");this._eachRow(function(e,n){n.prop("Height",t/100*n.attr("percentage"))}),this._eachColumn(function(t,n){n.prop("Width",e/100*n.attr("percentage"))})},this._processSpanCell=function(){var e=[],t,n;return this._processSpanCell=function(r,i,s){n=r.prop("RowSpan");if(e[s]&&e[s].self!==r){e[s].counter+=1,e[s].counter<=e[s].need&&(e[s].self.prop("Height",e[s].self.prop("Height")+this.rows[i].prop("Height")),r.$g.hide(),e[s].self.render(),n=e[s].self.prop("ColSpan"),n>1&&(e[s].self.getPosInRow()+n>this.attr("ColumnCount")&&(n=Math.abs(e[s].self.getPosInRow()-this.attr("ColumnCount"))),t={self:r,counter:1,need:n}));if(e[s].counter>e[s].need)return r.$g.show(),e[s].self.render(),e[s]=undefined,this._processSpanCell(r,i,s);if(i+1===this.attr("RowCount")){e[s].self.render(),e[s]=undefined;return}}else n>1&&(e[s]={self:r,counter:1,need:n});n=r.prop("ColSpan");if(t&&t.self!==r){t.counter+=1,t.counter<=t.need&&(t.self.prop("Width",t.self.prop("Width")+this.columns[s].prop("Width")),r.$g.hide(),t.self.render());if(t.counter>t.need)return r.$g.show(),t.self.render(),t=null,this._processSpanCell(r,i,s);if(t.self.parent!==r.parent){r.$g.show(),t.self.render(),t=null;return}}else n>1&&(r.getPosInRow()+n>this.attr("ColumnCount")&&(n=Math.abs(r.getPosInRow()-this.attr("ColumnCount"))),t={self:r,counter:1,need:n});!t&&!e[s]&&r.$g.show()},this._processSpanCell.apply(this,arguments)},this._generate=function(){var e,t=0,n,r,i;this.$contentGroup&&this.$contentGroup.children().length>this.attr("RowCount")*this.attr("ColumnCount")&&this.$contentGroup.empty(),this._eachRow(function(s,o){n=0,i=o.prop("Height"),this._eachColumn(function(u,a){e=o.cells[u]||(o.cells[u]=this.createCell(o)),r=a.prop("Width"),e.prop({Width:r,Height:i,Left:n,Top:t}),n+=r,e.render(),this._processSpanCell(e,s,u),this.$contentGroup&&this.$contentGroup.append(e.$g)}),t+=i}),n&&t&&(this.prop("Width",n),this.prop("Height",t))},this.appendEdges=function(){},this.update=function(){return this._generate(),this._percentage(),this.render()},this.render=function(){return this.render=function(){if(this.attr("ColumnCount")!==this.columns.length||this.attr("RowCount")!==this.rows.length)this.update(),this.rebuildTree();return this._super.render.apply(this,arguments),this._recalculate(),this._generate(),this.$g},this._super.render.apply(this,arguments),this.$additionalMoveBlock=this.createMoveBlock(),t.removeClass(this.content,"move"),t.removeClass(this.$moveBlock[0],"move"),this.$g.append(this.$additionalMoveBlock),this.update(),this.buildTree(),this.$g},this.fillProps=function(t){function u(t,n){t.each(function(){var t=e(this),r=i.create(t.prop("tagName"));r&&(r.fillProps(t),r.render(),n.put(r))})}this._super.fillProps.apply(this,arguments);var n=e("TableRow",t),r=e("TableColumn",t),s=0,o=r.length;this.attr("RowCount",n.length),this.attr("ColumnCount",o),this._generate();for(;s<o;s+=1)this.columns[s].fillProps(e(r[s]));var a,f,l,c,h,p,d,v;for(s=0,o=n.length;s<o;s+=1){a=e(n[s]),f=a.children(),d=this.rows[s],d.fillProps(a);for(h=0,p=f.length;h<p;h+=1)l=e(f[h]),v=d.cells[h],v.fillProps(l),c=l.children(),c.length&&u(c,v)}},this.toXML=function(){var t=e(this._super.toXML.apply(this,arguments));return this._eachColumn(function(n,r){var i=e(r.toXML(t[0]));i&&t.append(i)}),this._eachRow(function(n,r){var i=e(r.toXML(t[0]));i&&(t.append(i),e.each(r.cells,function(){var t=e(this.toXML(i[0]));i&&i.append(t)}))}),t[0]},this.buildTree=function(){var e,t;this._super._super.buildTree.call(this);for(e=0,t=this.columns.length;e<t;e+=1)this.putInTree(this.columns[e].buildTree());for(e=0,t=this.rows.length;e<t;e+=1)this.putInTree(this.rows[e].rebuildTree());return this.updateTreeView(),this.selfTree.$main}};return t.extend(f,a),f}),define("components/TextObject",["jquery","utils","baseEvents","l10n"],function(e,t,n,r){var i={title:"TextObject",info:"TextObject info",icon:"icon-102"},s=function(){this.type="TextObject",this.defaultValues={Angle:0,VertAlign:"Top",HorzAlign:"Left","TextFill.Color":"#000","Padding.Left":2,"Padding.Right":2,AutoShrinkMinSize:0,CanBreak:!0,Clip:!0,FirstTabOffset:0,FontWidthRatio:1,LineHeight:0,ParagraphOffset:0,TabWidth:58,ProcessAt:"Default",WordWrap:!0,AllowExpressions:!0},this._init=function(){this.prop({Name:"Text",Width:94.5,Height:18.9,Text:""}),this.attr({"text-fill-opacity":1,"text-anchor":"start","Font.Name":"Arial","Font.Size":"10pt","Font.Bold":!1,"Font.Italic":!1,"Font.Underline":!1,"Font.Strikeout":!1,"droppable-view":!0,"droppable-component":!0})},this.fillMap=function(){this._super.fillMap.apply(this,arguments),this.fieldMap.append(["Appearance:Angle","Appearance:FirstTabOffset","Appearance:Font","Appearance:FontWidthRatio","Appearance:HorzAlign","Appearance:VertAlign","Appearance:LineHeight","Appearance:ParagraphOffset","Appearance:TabWidth",{prop:"Appearance:TextFill:TextFill.Color",getValue:function(){return this.$textNode.css("fill")||this.prop("TextFill.Color")}},"Appearance:Underlines","Behavior:AutoShrink","Behavior:AutoShrinkMinSize","Behavior:AutoWidth","Behavior:BreakTo","Behavior:CanBreak","Behavior:Clip","Behavior:Duplicates","Behavior:HideValue","Behavior:HideZeros","Behavior:HtmlTags","Behavior:NullValue","Behavior:ProcessAt","Behavior:RightToLeft","Behavior:Trimming","Behavior:WordWrap","Behavior:Wysiwyg","Layout:Padding","Data:AllowExpressions","Data:Brackets","Data:Text"]),this.mainFields=[["Design:Name"],["Data:Text"]]},this.getHorzAlign=function(){var e=this.prop("HorzAlign"),t=this.prop("Width"),n;return e==="Center"||e==="Justify"?(n=t/2,this.attr("text-anchor","middle")):e==="Left"?(n=0,this.attr("text-anchor","start")):e==="Right"&&(n=t,this.attr("text-anchor","end")),parseInt(n,10)},this.getVertAlign=function(){var e=this.prop("VertAlign"),t=this.prop("Height"),n=this.prop("Border.Width"),r=this.prop("Border.TopLine.Width"),i=this.prop("Border.BottomLine.Width"),s;return e==="Center"?s=t/2+(r||n||1)+(i||n||1):e==="Top"?s=this.attr("Font.Size"):e==="Bottom"&&(s=t-(i||n||1)),parseInt(s,10)},this.dblclick=function(){var e=this.fieldMap[4].fields.Text;n.trigger("show-expression-editor",e)},this.rightClick=function(e){var t=this,i=function(e){return t.onChangeCM(e)},s;return s=t.collection.getMainCollection().container.report.res.createContextMenu(t.toString(),[{name:r.tr("Edit..."),type:"default",closeAfter:!0,onClick:function(){n.trigger("activate",t),t.dblclick()}},{name:r.tr("Clear"),type:"default",closeAfter:!0,onClick:function(){t.prop("Text",""),t.render(),n.trigger("activate",t)}},{type:"separator"},{name:r.tr("Can Grow"),type:"checkbox",curVal:t.prop("CanGrow"),prop:"CanGrow",onChange:i},{name:r.tr("Can Shrink"),type:"checkbox",curVal:t.prop("CanShrink"),prop:"CanShrink",onChange:i},{name:r.tr("Can Break"),type:"checkbox",curVal:t.prop("CanBreak"),prop:"CanBreak",onChange:i},{name:r.tr("Grow To Bottom"),type:"checkbox",curVal:t.prop("GrowToBottom"),prop:"GrowToBottom",onChange:i},{type:"separator"},{name:r.tr("Auto Width"),type:"checkbox",curVal:t.prop("AutoWidth"),prop:"AutoWidth",onChange:i},{name:r.tr("WordWrap"),type:"checkbox",curVal:t.prop("WordWrap"),prop:"WordWrap",onChange:i},{name:r.tr("Allow Expressions"),type:"checkbox",curVal:t.prop("AllowExpressions"),prop:"AllowExpressions",onChange:i},{type:"separator"},{name:r.tr("Delete"),type:"default",disabled:!t.canBeRemoved(),closeAfter:!0,onClick:function(){n.trigger("menu-remove",t)}},{type:"separator"},{name:r.tr("Bring to Front"),type:"default",closeAfter:!0,onClick:function(){n.trigger("menu-bring-to-front",t)}},{name:r.tr("Send to back"),type:"default",closeAfter:!0,onClick:function(){n.trigger("menu-send-to-back",t)}}]),s.css({left:e.pageX,top:e.pageY}),require("head").put(s),!1},this.mouseover=function(){var t=this.$moveBlock[0].getBoundingClientRect(),n=this.prop("Text"),r=this.attr("Font.Size");if(!n||n.width({"font-size":this.attr("Font.Size"),"font-family":this.attr("Font.Size")})<this.prop("Width"))return;this.$tooltip||(this.$tooltip=require("currentReport").res.createTooltip(),require("head").put(this.$tooltip)),this.$tooltip.css({left:t.left,top:t.top+this.prop("Height")+10}),this.$tooltip.css({opacity:this.attr("text-fill-opacity"),"font-size":r+(e.isNumeric(r)?"pt":""),"font-family":this.attr("Font.Name"),color:this.prop("TextFill.Color"),"background-color":this.$moveBlock.css("fill")}),this.$tooltip.html(n)},this.mouseout=function(){this.$tooltip&&(this.$tooltip.remove(),delete this.$tooltip)},this.creatingComponentEnd=function(e,t,n){this.prop("Text",n)},this.render=function(){var n=0,r=0,i=this.attr("Font.Size"),s=this.attr("Font.Name"),o=this.prop("Text");return this._super.render.apply(this,arguments),this.$contentGroup.children().length||(this.$nestedG1=e(t.createNS("g")),this.$nestedG2=e(t.createNS("g")),this.$textNode=e(t.createNS("text")),this.$nestedG2.append(this.$textNode),this.$nestedG1.append(this.$nestedG2),this.$contentGroup.append(this.$nestedG1)),this.attr("droppable-component")?t.addClass(this.g,"droppable-component"):t.removeClass(this.g,"droppable-component"),this.attr("droppable-view")?t.addClass(this.g,"droppable-view"):t.removeClass(this.g,"droppable-view"),n=this.getHorzAlign(),r=this.getVertAlign(),o!==this.$textNode.text()&&this.$textNode.text(o),this.$textNode.css({"font-size":i+(e.isNumeric(i)?"pt":""),"fill-opacity":this.attr("text-fill-opacity"),fill:this.prop("TextFill.Color"),"font-family":s,"text-anchor":this.attr("text-anchor")}),this.applyFontStyles(this.$textNode),t.attr(this.$nestedG1[0],"transform","translate("+n+", "+r+")"),t.attr(this.$nestedG2[0],"transform","rotate("+this.prop("Angle")+")"),this.$g}};return t.extend(s,i),s}),define("components/BarcodeObject",["jquery","utils"],function(e,t){var n={title:"BarcodeObject",info:"BarcodeObject info",icon:"icon-123"},r={"2/5 Interleaved":{label:"2/5 Interleaved",render:function(){this.prop("Width",80),t.attr(this.$preview[0],"d",this.getD(150,0)),t.attr(this.$preview[0],"transform","translate(-150, 0)")}},"2/5 Industrial":{label:"2/5 Industrial",render:function(){this.prop("Width",140),t.attr(this.$preview[0],"d",this.getD(0,0)),t.attr(this.$preview[0],"transform","translate(0, 0)")}},"2/5 Matrix":{label:"2/5 Matrix",render:function(){this.prop("Width",105),t.attr(this.$preview[0],"d",this.getD(240,0)),t.attr(this.$preview[0],"transform","translate(-240, 0)")}},Codabar:{label:"Codabar",render:function(){this.prop("Width",126),t.attr(this.$preview[0],"d",this.getD(355,0)),t.attr(this.$preview[0],"transform","translate(-355, 0)")}},Code128:{label:"Code128",render:function(){this.prop("Width",99),t.attr(this.$preview[0],"d",this.getD(1093,0)),t.attr(this.$preview[0],"transform","translate(-1093, 0)")}},Code39:{label:"Code39",render:function(){this.prop("Width",145),t.attr(this.$preview[0],"d",this.getD(491,0)),t.attr(this.$preview[0],"transform","translate(-491, 0)")}},"Code39 Extended":{label:"Code39 Extended",render:function(){this.prop("Width",145),t.attr(this.$preview[0],"d",this.getD(646,0)),t.attr(this.$preview[0],"transform","translate(-646, 0)")}},Code93:{label:"Code93",render:function(){this.prop("Width",136),t.attr(this.$preview[0],"d",this.getD(801,0)),t.attr(this.$preview[0],"transform","translate(-801, 0)")}},"Code93 Extended":{label:"Code93 Extended",render:function(){this.prop("Width",136),t.attr(this.$preview[0],"d",this.getD(947,0)),t.attr(this.$preview[0],"transform","translate(-947, 0)")}},EAN8:{label:"EAN8",render:function(){this.prop("Width",84),t.attr(this.$preview[0],"d",this.getD(1284,0)),t.attr(this.$preview[0],"transform","translate(-1284, 0)")}},EAN13:{label:"EAN13",render:function(){this.prop("Width",129),t.attr(this.$preview[0],"d",this.getD(1378,0)),t.attr(this.$preview[0],"transform","translate(-1378, 0)")}},MSI:{label:"MSI",render:function(){this.prop("Width",144),t.attr(this.$preview[0],"d",this.getD(1517,0)),t.attr(this.$preview[0],"transform","translate(-1517, 0)")}},PostNet:{label:"PostNet",render:function(){this.prop("Width",155),t.attr(this.$preview[0],"d",this.getD(1767,0)),t.attr(this.$preview[0],"transform","translate(-1767, 0)")}},"UPC-A":{label:"UPC-A",render:function(){this.prop("Width",139),t.attr(this.$preview[0],"d",this.getD(2256,0)),t.attr(this.$preview[0],"transform","translate(-2256, 0)")}},"UPC-E0":{label:"UPC-E0",render:function(){this.prop("Width",84),t.attr(this.$preview[0],"d",this.getD(2162,0)),t.attr(this.$preview[0],"transform","translate(-2162, 0)")}},"UPC-E1":{label:"UPC-E1",render:function(){this.prop("Width",84),t.attr(this.$preview[0],"d",this.getD(2162,0)),t.attr(this.$preview[0],"transform","translate(-2162, 0)")}},"Supplement 2":{label:"Supplement 2",render:function(){this.prop("Width",25),t.attr(this.$preview[0],"d",this.getD(2058,0)),t.attr(this.$preview[0],"transform","translate(-2058, 0)")}},"Supplement 5":{label:"Supplement 5",render:function(){this.prop("Width",59),t.attr(this.$preview[0],"d",this.getD(2093,0)),t.attr(this.$preview[0],"transform","translate(-2093, 0)")}},PDF417:{label:"PDF417",render:function(){this.prop("Width",86),t.attr(this.$preview[0],"d",this.getD(1671,0)),t.attr(this.$preview[0],"transform","translate(-1671, 0)")}},Datamatrix:{label:"Datamatrix",render:function(){this.prop("Width",72),t.attr(this.$preview[0],"d",this.getD(1202,0)),t.attr(this.$preview[0],"transform","translate(-1202, 0)")}},"QR Code":{label:"QR Code",render:function(){this.prop("Width",116),t.attr(this.$preview[0],"d",this.getD(1932,0)),t.attr(this.$preview[0],"transform","translate(-1932, 0)")}},Plessey:{label:"Plessey",render:function(){this.prop("Width",154),t.attr(this.$preview[0],"d",this.getD(2400,0)),t.attr(this.$preview[0],"transform","translate(-2400, 0)")}},"GS1-128 (UCC/EAN-128)":{label:"GS1-128 (UCC/EAN-128)",render:function(){this.prop("Width",112),t.attr(this.$preview[0],"d",this.getD(2559,0)),t.attr(this.$preview[0],"transform","translate(-2559, 0)")}},Aztec:{label:"Aztec",render:function(){this.prop("Width",88),t.attr(this.$preview[0],"d",this.getD(2676,0)),t.attr(this.$preview[0],"transform","translate(-2676, 0)")}}},i=function(){this.type="BarcodeObject",this.defaultValues={HideIfNoData:!0,ShowText:!0},this._init=function(){this.prop({Name:"Barcode",Barcode:"Code39",Height:85}),this.attr({resizableX:!1})},this.fillMap=function(){this._super.fillMap.apply(this,arguments),this.fieldMap.append(["Appearance:Angle",{prop:"Appearance:Barcode",label:"Barcode",fields:{Barcode:{label:"Type",type:"select",origin:"Appearance:Barcode:Barcode",collection:r},"Barcode.CalcCheckSum":{label:"CalcCheckSum",type:"checkbox",defaultValue:!0},"Barcode.WideBarRatio":{label:"WideBarRatio",type:"number",defaultValue:2,attrs:{min:2,max:3,step:1}}}},{prop:"Appearance:Zoom",defaultValue:1,type:"number",attrs:{min:1}},"Behavior:AutoSize","Behavior:HideIfNoData","Behavior:ShowText","Data:DataColumn","Data:Expression","Data:NoDataText",{prop:"Data:Text",type:"text",defaultValue:"12345678"},"Layout:Padding"]),this.mainFields=[["Design:Name"],["Appearance:Barcode:Barcode"]]},this.getD=function(e,t){var n=[e,t],r=[n[0]+this.prop("Width"),0],i=[r[0],116],s=[n[0],i[1]];return"M"+n[0]+" "+n[1]+" L"+r[0]+" "+r[1]+" L"+i[0]+" "+i[1]+" L"+s[0]+" "+s[1]+" L"+n[0]+" "+n[1]+"Z"},this.render=function(){var n;return this.$previewContainer||(this.$previewContainer=e(t.createNS("g",{transform:"scale(1)"}))),this.$preview||(this.$preview=e(t.createNS("path",{fill:"url(#d-barcode-sprite)","class":"move"}))),n=this.prop("Barcode"),r[n]&&r[n].render.call(this),this._super.render.apply(this,arguments),this.prop("Zoom")&&(t.attr(this.$previewContainer[0],"transform","scale("+this.prop("Zoom")+", 1)"),this.prop("Width",this.prop("Width")*this.prop("Zoom"))),this.$previewContainer.append(this.$preview),this.$contentGroup.append(this.$previewContainer),this.$g}};return t.extend(i,n),i}),define("components/SparklineObject",["jquery","utils"],function(e,t){var n={title:"SparklineObject",info:"SparklineObject info",icon:"icon-130",disabled:!0},r=function(){this.type="SparklineObject",this._init=function(){this.prop({Name:"Sparkline"})},this.fillMap=function(){this._super.fillMap.apply(this,arguments)},this.render=function(){return this._super.render.apply(this,arguments),this.$g}};return t.extend(r,n),r}),define("components/LinearGauge",["jquery","utils"],function(e,t){var n=6,r=3,i=3.6,s=40,o=18.89,u={title:"LinearGauge",info:"LinearGauge info",icon:"icon-135"},a=function(){this.type="LinearGauge",this.defaultValues={Maximum:100,Minimum:0,Value:10,Inverted:!1,"Pointer.BorderColor":"#000","Pointer.Color":"#FFA500","Scale.MajorTicks.Color":"#000","Scale.MajorTicks.Width":2,"Scale.MinorTicks.Color":"#000","Scale.MinorTicks.Width":2},this._init=function(){this.prop({Name:"LinearGauge",Width:302.36,Height:75.59,"Border.Lines":"All"}),this.attr({"Scale.Font.Name":"Arial","Scale.Font.Size":"8pt","Scale.Font.Bold":!1,"Scale.Font.Italic":!1,"Scale.Font.Underline":!1,"Scale.Font.Strikeout":!1})},this.fillMap=function(){this._super.fillMap.apply(this,arguments),this.fieldMap.append(["Appearance:Inverted","Appearance:Pointer","Appearance:Scale:Font","Appearance:Scale:MajorTicks","Appearance:Scale:MinorTicks","Data:Expression","Layout:Maximum","Layout:Minimum","Layout:Value"]),this.mainFields=[["Design:Name"],["Data:Expression"]]},this.getRange=function(){return this.prop("Maximum")-this.prop("Minimum")},this.getPace=function(){return Math.floor(this.getRange()/(n-1))},this.appendPointer=function(){var n,r,u=this.prop("Width"),a=this.prop("Height"),f=this.prop("Value"),l=this.getRange(),c=f*100/l,h=u-o*2,p=a-o*2;return this.$pointer||(this.$pointerContainer=e(t.createNS("g")),this.$pointer=e(t.createNS("path"))),r=this.prop("Pointer.Width",u*i/100),n=this.prop("Pointer.Height",a*s/100),t.attr(this.$pointer[0],"d","M"+r/2+" 0 L0 10 L0 "+n+" L"+r+" "+n+" L"+r+" 10 L"+r/2+" 0 Z"),this.$pointer.css({stroke:this.prop("Pointer.BorderColor"),fill:this.prop("Pointer.Color")}),this.prop("Inverted")?this.attr("isHorizontal")?(t.attr(this.$pointer[0],"transform","rotate(180, "+r/2+", "+n/2+")"),t.attr(this.$pointerContainer[0],"transform","translate("+(h*c/100+o-r/2)+", "+o+")")):(t.attr(this.$pointer[0],"transform","rotate(90, "+r/2+", "+n/2+")"),t.attr(this.$pointerContainer[0],"transform","translate("+o*2+", "+(p+o-n/2-p*c/100)+")")):this.attr("isHorizontal")?(t.attr(this.$pointer[0],"transform","rotate(0)"),t.attr(this.$pointerContainer[0],"transform","translate("+(h*c/100+o-r/2)+", "+a/2+")")):(t.attr(this.$pointer[0],"transform","rotate(270, "+r/2+", "+n/2+")"),t.attr(this.$pointerContainer[0],"transform","translate("+u/2+", "+(p+o-n/2-p*c/100)+")")),this.$pointerContainer.append(this.$pointer),this.$contentGroup.append(this.$pointerContainer),this.$pointer},this.createHorz=function(){var i,s,u=o,a=20,f,l=this.prop("Width"),c=this.prop("Height"),h=this.getPace(),p=this.prop("Minimum"),d=l-o*2,v=d/(n-1);if(!this.paces||this.attr("isVertical"))this.$contentGroup.empty(),this.paces=[];for(i=0;i<n;i+=1){this.paces[i]||(this.paces[i]={$self:e(t.createNS("g")),$minorTicks:[],$majorTick:e(t.createNS("line")),$paceText:e(t.createNS("text"))},this.paces[i].$self.append(this.paces[i].$majorTick,this.paces[i].$paceText),this.$contentGroup.append(this.paces[i].$self)),this.paces[i].$majorTick.css({"stroke-width":this.prop("Scale.MajorTicks.Width"),stroke:this.prop("Scale.MajorTicks.Color")}),this.paces[i].$majorTick.attr({x1:0,y1:1,x2:0,y2:c-a*2}),this.paces[i].$paceText.text(p),this.applyFontStyles(this.paces[i].$paceText,"Scale."),this.paces[i].$paceText.css({"font-size":this.attr("Scale.Font.Size")+(e.isNumeric(this.attr("Scale.Font.Size"))?"pt":""),fill:"#000","font-family":this.attr("Scale.Font.Name"),"text-anchor":"middle"}),t.attr(this.paces[i].$self[0],"transform","translate("+u+", "+a+")"),u+=v;if(i+1!==n)for(s=0,f=0;s<r;s+=1)this.paces[i].$minorTicks[s]||(this.paces[i].$minorTicks[s]=e(t.createNS("line")),this.paces[i].$self.append(this.paces[i].$minorTicks[s])),this.paces[i].$minorTicks[s].css({"stroke-width":this.prop("Scale.MinorTicks.Width"),stroke:this.prop("Scale.MinorTicks.Color")}),this.paces[i].$minorTicks[s].attr({x1:0,y1:0,x2:0,y2:c-a*3}),f+=v/(r+1),t.attr(this.paces[i].$minorTicks[s][0],"transform","translate("+f+", "+a/2+")");p+=h,this.prop("Inverted")?t.attr(this.paces[i].$paceText[0],"transform","translate(0, "+(c-a-5)+")"):t.attr(this.paces[i].$paceText[0],"transform","translate(0, 0)")}},this.createVert=function(){var i,s,u=o,a,f=20,l=this.prop("Width"),c=this.prop("Height"),h=this.getPace(),p=this.prop("Minimum"),d=c-o*2,v=d/(n-1);u+=d;if(!this.paces||this.attr("isHorizontal"))this.$contentGroup.empty(),this.paces=[];for(i=0;i<n;i+=1){this.paces[i]||(this.paces[i]={$self:e(t.createNS("g")),$minorTicks:[],$majorTick:e(t.createNS("line")),$paceText:e(t.createNS("text"))},this.paces[i].$self.append(this.paces[i].$majorTick,this.paces[i].$paceText),this.$contentGroup.append(this.paces[i].$self)),this.paces[i].$majorTick.css({"stroke-width":this.prop("Scale.MajorTicks.Width"),stroke:this.prop("Scale.MajorTicks.Color")}),this.paces[i].$majorTick.attr({x1:0,y1:1,x2:l-f*2,y2:0}),this.paces[i].$paceText.text(p),this.paces[i].$paceText.css({"font-size":this.attr("Scale.Font.Size")+(e.isNumeric(this.attr("Scale.Font.Size"))?"pt":""),fill:"#000","font-family":this.attr("Scale.Font.Name"),"text-anchor":"middle"}),this.applyFontStyles(this.paces[i].$paceText,"Scale."),t.attr(this.paces[i].$self[0],"transform","translate("+f+", "+u+")"),u-=v,p+=h,this.prop("Inverted")?t.attr(this.paces[i].$paceText[0],"transform","translate("+(l-f-10)+", 5)"):t.attr(this.paces[i].$paceText[0],"transform","translate(-10, 5)");if(i!==0)for(s=0,a=0;s<r;s+=1)this.paces[i].$minorTicks[s]||(this.paces[i].$minorTicks[s]=e(t.createNS("line")),this.paces[i].$self.append(this.paces[i].$minorTicks[s])),this.paces[i].$minorTicks[s].css({"stroke-width":this.prop("Scale.MinorTicks.Width"),stroke:this.prop("Scale.MinorTicks.Color")}),this.paces[i].$minorTicks[s].attr({x1:0,y1:0,x2:l-f*3,y2:0}),a+=v/(r+1),t.attr(this.paces[i].$minorTicks[s][0],"transform","translate("+f/2+", "+a+")")}},this.render=function(){return this._super.render.apply(this,arguments),this.prop("Width")>this.prop("Height")?(this.createHorz(),this.attr("isHorizontal",!0),this.attr("isVertical",!1)):(this.createVert(),this.attr("isVertical",!0),this.attr("isHorizontal",!1)),this.appendPointer(),this.$g},this.fillProps=function(e){return this._super.fillProps.apply(this,arguments),this.fillFont(e,"Scale."),this},this.toXML=function(){var t=e(this._super.toXML.apply(this,arguments));return this.bindFontView(t,"Scale."),t[0]}};return t.extend(a,u),a}),define("components/SimpleGauge",["jquery","utils"],function(e,t){var n=6,r=3,i=10,s=18.89,o=14.89,u={title:"SimpleGauge",info:"SimpleGauge info",icon:"icon-135"},a=function(){this.type="SimpleGauge",this.defaultValues={Maximum:100,Minimum:0,Value:75,Inverted:!1,"Pointer.BorderColor":"#000","Pointer.Color":"#FFA500","Scale.FirstSubScale.Enabled":!0,"Scale.FirstSubScale.ShowCaption":!0,"Scale.SecondSubScale.Enabled":!0,"Scale.SecondSubScale.ShowCaption":!0,"Scale.MajorTicks.Color":"#000","Scale.MajorTicks.Width":2,"Scale.MinorTicks.Color":"#000","Scale.MinorTicks.Width":2,"Pointer.Height":6},this._init=function(){this.prop({Name:"SimpleGauge",Width:302.36,Height:75.59,"Border.Lines":"All"}),this.attr({"Scale.Font.Name":"Arial","Scale.Font.Size":"8pt","Scale.Font.Bold":!1,"Scale.Font.Italic":!1,"Scale.Font.Underline":!1,"Scale.Font.Strikeout":!1})},this.fillMap=function(){this._super.fillMap.apply(this,arguments),this.fieldMap.append(["Appearance:Pointer","Appearance:Scale","Data:Expression","Layout:Maximum","Layout:Minimum","Layout:Value"]),this.mainFields=[["Design:Name"],["Data:Expression"]]},this.getRange=function(){return this.prop("Maximum")-this.prop("Minimum")},this.getPace=function(){return Math.floor(this.getRange()/(n-1))},this.appendPointer=function(){var n=this.prop("Pointer.Height"),r=this.prop("Width"),i=this.prop("Height"),u=this.prop("Value"),a,f=this.getRange(),l=u*100/f,c=r-s*2,h=i-o*2;this.$pointer||(this.$pointerContainer=e(t.createNS("g")),this.$pointer=e(t.createNS("rect"))),this.$pointer.css({stroke:this.prop("Pointer.BorderColor"),fill:this.prop("Pointer.Color")}),this.$pointerContainer.append(this.$pointer),this.$contentGroup.append(this.$pointerContainer),this.attr("isHorizontal")?(a=this.prop("Pointer.Width",c*l/100),this.$pointer.attr({width:a,height:n}),t.attr(this.$pointerContainer[0],"transform","translate("+s+", "+(i/2-n/2)+")")):(a=this.prop("Pointer.Width",h*l/100),this.$pointer.attr({width:n,height:a}),t.attr(this.$pointerContainer[0],"transform","translate("+(r/2-n/2)+", "+(i-o-a)+")"))},this.createHorz=function(){var u,a,f=s,l,c=this.prop("Width"),h=this.prop("Height"),p=this.getPace(),d=this.prop("Minimum"),v=c-s*2,m=v/(n-1),g=parseInt(this.attr("Scale.Font.Size"),10),y=h-o*2-i,b=y*50/100,w=b/2,E=function(t,n){n.text(d),this.applyFontStyles(n,"Scale."),n.css({"font-size":g+(e.isNumeric(this.attr("Scale.Font.Size"))?"pt":""),fill:"#000","font-family":this.attr("Scale.Font.Name"),"text-anchor":"middle"})}.bind(this);if(!this.paces||this.attr("isVertical"))this.$contentGroup.empty(),this.paces=[];for(u=0;u<n;u+=1){this.paces[u]||(this.paces[u]={$self:e(t.createNS("g")),$minorTicksTop:[],$majorTickTop:e(t.createNS("line")),$paceTextTop:e(t.createNS("text")),$majorTickBottom:e(t.createNS("line")),$minorTicksBottom:[],$paceTextBottom:e(t.createNS("text"))},this.paces[u].$self.append(this.paces[u].$majorTickTop,this.paces[u].$paceTextTop,this.paces[u].$majorTickBottom,this.paces[u].$paceTextBottom),this.$contentGroup.append(this.paces[u].$self)),this.paces[u].$majorTickTop.css({"stroke-width":this.prop("Scale.MajorTicks.Width"),stroke:this.prop("Scale.MajorTicks.Color")}),this.paces[u].$majorTickBottom.css({"stroke-width":this.prop("Scale.MajorTicks.Width"),stroke:this.prop("Scale.MajorTicks.Color")}),this.paces[u].$majorTickTop.attr({x1:0,y1:1,x2:0,y2:b}),this.paces[u].$majorTickBottom.attr({x1:0,y1:b+i,x2:0,y2:b+i+b}),e.each([this.paces[u].$paceTextTop,this.paces[u].$paceTextBottom],E),t.attr(this.paces[u].$paceTextBottom[0],"transform","translate(0, "+(y+o+2)+")"),t.attr(this.paces[u].$self[0],"transform","translate("+f+", "+o+")"),f+=m;if(u+1!==n)for(a=0,l=0;a<r;a+=1)this.paces[u].$minorTicksTop[a]||(this.paces[u].$minorTicksTop[a]=e(t.createNS("line")),this.paces[u].$self.append(this.paces[u].$minorTicksTop[a])),this.paces[u].$minorTicksBottom[a]||(this.paces[u].$minorTicksBottom[a]=e(t.createNS("line")),this.paces[u].$self.append(this.paces[u].$minorTicksBottom[a])),this.paces[u].$minorTicksTop[a].css({"stroke-width":this.prop("Scale.MinorTicks.Width"),stroke:this.prop("Scale.MinorTicks.Color")}),this.paces[u].$minorTicksBottom[a].css({"stroke-width":this.prop("Scale.MinorTicks.Width"),stroke:this.prop("Scale.MinorTicks.Color")}),this.paces[u].$minorTicksTop[a].attr({x1:0,y1:0,x2:0,y2:w}),this.paces[u].$minorTicksBottom[a].attr({x1:0,y1:w+b+i,x2:0,y2:w+b+i+w}),l+=m/(r+1),t.attr(this.paces[u].$minorTicksTop[a][0],"transform","translate("+l+", "+w+")"),t.attr(this.paces[u].$minorTicksBottom[a][0],"transform","translate("+l+", "+ -w+")");d+=p}},this.createVert=function(){var u,a,f=o,l,c=this.prop("Width"),h=this.prop("Height"),p=this.getPace(),d=this.prop("Minimum"),v=h-o*2,m=v/(n-1),g=parseInt(this.attr("Scale.Font.Size"),10),y=c-s*2-i,b=y*50/100,w=b/2,E=function(t,n){n.text(d),this.applyFontStyles(n,"Scale."),n.css({"font-size":g+(e.isNumeric(this.attr("Scale.Font.Size"))?"pt":""),fill:"#000","font-family":this.attr("Scale.Font.Name"),"text-anchor":"middle"})}.bind(this);f+=v;if(!this.paces||this.attr("isHorizontal"))this.$contentGroup.empty(),this.paces=[];for(u=0;u<n;u+=1){this.paces[u]||(this.paces[u]={$self:e(t.createNS("g")),$minorTicksLeft:[],$majorTickLeft:e(t.createNS("line")),$paceTextLeft:e(t.createNS("text")),$majorTickRight:e(t.createNS("line")),$minorTicksRight:[],$paceTextRight:e(t.createNS("text"))},this.paces[u].$self.append(this.paces[u].$majorTickLeft,this.paces[u].$paceTextLeft,this.paces[u].$majorTickRight,this.paces[u].$paceTextRight),this.$contentGroup.append(this.paces[u].$self)),this.paces[u].$majorTickLeft.css({"stroke-width":this.prop("Scale.MajorTicks.Width"),stroke:this.prop("Scale.MajorTicks.Color")}),this.paces[u].$majorTickRight.css({"stroke-width":this.prop("Scale.MajorTicks.Width"),stroke:this.prop("Scale.MajorTicks.Color")}),this.paces[u].$majorTickLeft.attr({x1:1,y1:0,x2:b,y2:0}),this.paces[u].$majorTickRight.attr({x1:b+i,y1:0,x2:b+i+b,y2:0}),e.each([this.paces[u].$paceTextLeft,this.paces[u].$paceTextRight],E),t.attr(this.paces[u].$paceTextRight[0],"transform","translate("+(y+s)+", 0)"),t.attr(this.paces[u].$self[0],"transform","translate("+s+", "+f+")"),f-=m;if(u>0)for(a=0,l=0;a<r;a+=1)this.paces[u].$minorTicksLeft[a]||(this.paces[u].$minorTicksLeft[a]=e(t.createNS("line")),this.paces[u].$self.append(this.paces[u].$minorTicksLeft[a])),this.paces[u].$minorTicksRight[a]||(this.paces[u].$minorTicksRight[a]=e(t.createNS("line")),this.paces[u].$self.append(this.paces[u].$minorTicksRight[a])),this.paces[u].$minorTicksLeft[a].css({"stroke-width":this.prop("Scale.MinorTicks.Width"),stroke:this.prop("Scale.MinorTicks.Color")}),this.paces[u].$minorTicksRight[a].css({"stroke-width":this.prop("Scale.MinorTicks.Width"),stroke:this.prop("Scale.MinorTicks.Color")}),this.paces[u].$minorTicksLeft[a].attr({x1:0,y1:0,x2:w,y2:0}),this.paces[u].$minorTicksRight[a].attr({x1:w+b+i,y1:0,x2:w+b+i+w,y2:0}),l+=m/(r+1),t.attr(this.paces[u].$minorTicksLeft[a][0],"transform","translate("+w+", "+l+")"),t.attr(this.paces[u].$minorTicksRight[a][0],"transform","translate("+ -w+", "+l+")");d+=p}},this.render=function(){return this._super.render.apply(this,arguments),this.prop("Width")>this.prop("Height")?(this.createHorz(),this.attr("isHorizontal",!0),this.attr("isVertical",!1)):(this.createVert(),this.attr("isVertical",!0),this.attr("isHorizontal",!1)),this.appendPointer(),this.$g},this.fillProps=function(e){return this._super.fillProps.apply(this,arguments),this.fillFont(e,"Scale."),this},this.toXML=function(){var t=e(this._super.toXML.apply(this,arguments));return this.bindFontView(t,"Scale."),t[0]}};return t.extend(a,u),a}),define("components/MatrixObject",["jquery","utils","l10n","queue","baseComponent","baseEvents"],function(e,t,n,r,i,s){var o={title:"MatrixObject",info:"MatrixObject info",icon:"icon-142"},u=function(n,r){var i=this.getTable(),s=i.prop("Left"),o=i.prop("Top")+i.collection.container.prop("Top"),u=r.x-(s+this.prop("Left")),a=s+this.attr("right")-r.x,f=r.y-(o+this.prop("Top")),l=o+this.attr("bottom")-r.y,c,h=this.prop("Width"),p=this.prop("Height"),d=this.attr("droppable-dir");this.$droppableBorder||(this.$droppableBorder=e(t.createNS("polyline",{"class":"droppable-border"})),this.$g.append(this.$droppableBorder)),this.$droppableBorder.hide(),t.removeClass(this.$moveBlock[0],"drop-in-left"),t.removeClass(this.$moveBlock[0],"drop-in-right"),t.removeClass(this.$moveBlock[0],"drop-in-top"),t.removeClass(this.$moveBlock[0],"drop-in-bottom");if(!d)return;u<a&&u<f&&u<l&&d[0]==="1"&&(c="0,0 0,"+p,this.$droppableBorder.attr("points",c),t.addClass(this.$droppableBorder[0],"drop-in-left")),a<u&&a<f&&a<l&&d[2]==="1"&&(c=h+",0 "+h+","+p,this.$droppableBorder.attr("points",c),t.addClass(this.$droppableBorder[0],"drop-in-right")),f<u&&f<a&&f<l&&d[1]==="1"&&(c="0,0 "+h+",0",this.$droppableBorder.attr("points",c),t.addClass(this.$droppableBorder[0],"drop-in-top")),l<u&&l<a&&l<f&&d[3]==="1"&&(c="0,"+p+" "+h+","+p,this.$droppableBorder.attr("points",c),t.addClass(this.$droppableBorder[0],"drop-in-bottom")),this.$droppableBorder.show()},a=function(){this.$droppableBorder&&(this.$droppableBorder.remove(),this.$droppableBorder=null)},f=function(t,n,r){var i;if(!this.expr)t.push(n);else{i=t.indexOf(this.expr);if(i===-1)t.push(n);else{if(!r||e.inArray(r,[1,2])===-1)i+=1;t.splice(i,0,n)}}},l=function(e){return e.$droppableBorder.is(".drop-in-left")?1:e.$droppableBorder.is(".drop-in-top")?2:e.$droppableBorder.is(".drop-in-right")?3:e.$droppableBorder.is(".drop-in-bottom")?4:0},c=function(e,t,n){var r=this.attr("m-type"),i=this.getTable(),o={Expression:n},u=l(this),a=i.attr("MatrixRows"),c=i.attr("MatrixColumns"),h=i.attr("MatrixCells"),p=require("currentReport").pullDataSourceByView(n);p&&!i.prop("DataSource")&&(i.prop("DataSource",p.prop("Name")),s.trigger("update-properties-panel",i));switch(r){case 1:f.call(this,a,o,u),i.droppedOnRow(this,u,o);break;case 0:f.call(this,c,o,u),i.droppedOnColumn(this,u,o);break;case 2:f.call(this,h,o,u),i.droppedOnCell(this,u,o)}this.deleteComponentOver(),s.trigger("balance-band",i.collection.container)},h=function(e){var t,r;if(!this.expr)return;return t=function(e){this.onChangeCM(e,this.expr)}.bind(this),r=require("currentReport").res.createContextMenu(this.toString()+": "+this.prop("Text"),[{name:n.tr("Sort"),type:"list",items:[{name:n.tr("Ascending"),type:"checkbox",prop:"Sort",curVal:this.expr.Sort==="Ascending"||this.expr.Sort===undefined?!0:!1,val:"Ascending",onChange:t,closeAfter:!0},{name:n.tr("Descending"),type:"checkbox",prop:"Sort",curVal:this.expr.Sort==="Descending"?!0:!1,val:"Descending",onChange:t,closeAfter:!0},{name:n.tr("Do not sort"),type:"checkbox",prop:"Sort",curVal:this.expr.Sort==="None"?!0:!1,val:"None",onChange:t,closeAfter:!0}]},{name:n.tr("Totals"),type:"checkbox",curVal:this.expr.Totals===undefined||this.expr.Totals!==!1?!0:!1,prop:"Totals",onChange:function(e){function s(e,t,r){for(var i=e;i<e+t;i+=1)n[r](i)}var n=this.getTable(),r,i=n.attr("MatrixCells");t(e),e.curVal===!1?this.attr("m-type")===1?(r=this.under(),r&&s(r.getPosInColumn(),r.prop("RowSpan"),"removeRow")):(r=this.next(),r&&s(r.getPosInRow(),r.prop("ColSpan"),"removeColumn")):this.attr("m-type")===1?s(this.getPosInColumn()+1,i.vert&&i.length||1,"appendRow"):s(this.getPosInRow()+1,i.horz&&i.length||1,"appendColumn"),n.adjust(),n.update(),n.rebuildTree()}.bind(this)},{name:n.tr("Start New Page"),type:"checkbox",curVal:this.expr.PageBreak,prop:"PageBreak",onChange:t},{name:n.tr("Suppress Totals"),type:"checkbox",curVal:this.expr.SuppressTotals,prop:"SuppressTotals",onChange:t},{name:n.tr("Totals First"),type:"checkbox",curVal:this.expr.TotalsFirst,prop:"TotalsFirst",onChange:t}]),r.css({left:e.pageX,top:e.pageY}),require("head").put(r),!1},p=function(t,n,r,i){n&&e.isPlainObject(n)&&e.each(n,function(e,n){t.prop(e,n)}),t.attr("droppable-dir",r),t.attr("m-type",i),t.creatingComponentOver=u.bind(t),t.deleteComponentOver=a,t.creatingComponentEnd=c,t.attr("droppable-component",!0),t.attr("droppable-view",!0),i!==2&&(t.rightClick=h),t.render()},d=function(){this.type="MatrixObject",this.to=i.create("TableObject",!0),this.to.matrix=this,this.rows=this.to.rows,this.columns=this.to.columns,this.attr=this.to.attr,this.update=this.to.update,this.appendRow=this.to.appendRow,this.removeRow=this.to.removeRow,this.appendColumn=this.to.appendColumn,this.removeColumn=this.to.removeColumn,this._eachRow=this.to._eachRow,this._eachColumn=this.to._eachColumn,this._eachCell=this.to._eachCell,this._percentage=this.to._percentage,this._recalculate=this.to._recalculate,this._processSpanCell=this.to._processSpanCell,this._generate=this.to._generate,this.appendEdges=this.to.appendEdges,this.getCell=this.to.getCell,this.toXML=this.to.toXML,this.buildTree=this.to.buildTree,this.render=this.to.render,this.createCell=function(e){var t=this.to.createCell.call(this,e);return t.attr("droppable-view",!1),t},this.showResizingComponents=function(){this.prop("AutoSize")?this.hideResizingComponents():this._super.showResizingComponents.apply(this,arguments)},this.clone=function(){var e=this.to.clone.apply(this,arguments),n=this.attr("MatrixColumns"),r=this.attr("MatrixRows"),i=this.attr("MatrixCells"),s=[],o=[],u=[],a,f;for(a=0,f=n.length;a<f;a+=1)s.push(t.extend({},n[a]));for(a=0,f=r.length;a<f;a+=1)o.push(t.extend({},r[a]));for(a=0,f=i.length;a<f;a+=1)u.push(t.extend({},i[a]));return e.attr("MatrixColumns",s),e.attr("MatrixRows",o),e.attr("MatrixCells",u),e.bindEvents(),e},this.defaultValues={Layout:"AcrossThenDown",WrappedGap:0,AdjustSpannedCellsWidth:!1,RepeatHeaders:!0,AutoSize:!1,CellsSideBySide:!1,KeepCellsSideBySide:!1,MatrixEventStylePriority:"Rows",ShowTitle:!1,Style:"No style"},this._init=function(){this.prop({Name:"Matrix"}),this.attr({RowCount:2,ColumnCount:2,MatrixColumns:[],MatrixRows:[],MatrixCells:[],Styles:{"No style":{cr:"transparent",cells:"transparent",bc:"#C0C0C0"},White:{cr:"#FFFFFF",cells:"#FFFFFF",bc:"#C0C0C0"},Gray:{cr:"#DCDCDC",cells:"#F5F5F5",bc:"#FFFFFF"},Orange:{cr:"#FFDA46",cells:"#FFEB9B",bc:"#FFFFFF"},Green:{cr:"#7BA400",cells:"#9ED200",bc:"#FFFFFF"},"Green and Orange":{cr:"#98CC00",cells:"#FFCC00",bc:"#FFFFFF"},Blue:{cr:"#97BDFD",cells:"#BAD3FE",bc:"#FFFFFF"},"Blue and White":{cr:"#97BDFD",cells:"#FFFFFF",bc:"#FFFFFF"},"Gray and Orange":{cr:"#808080",cells:"#FFCC00",bc:"#FFFFFF"},"Blue and Orange":{cr:"#97BDFD",cells:"#FFCF6A",bc:"#FFFFFF"},"Orange and White":{cr:"#FFCC00",cells:"#FFFFFF",bc:"#FFFFFF"}}})},this.fillMap=function(){this._super.fillMap.apply(this,arguments),this.eventMap.append(["Build:ManualBuildEvent","Build:ModifyResult"]),this.fieldMap.rebuild(["Appearance:Fill",{prop:"Behavior:AdjustSpannedCellsWidth",type:"checkbox"},{prop:"Behavior:AutoSize",afterSetValue:function(){this.showResizingComponents()}},{prop:"Behavior:CellsSideBySide",type:"checkbox"},{prop:"Behavior:KeepCellsSideBySide",type:"checkbox"},"Behavior:Layout",{prop:"Behavior:MatrixEventStylePriority",type:"select",collection:["Rows","Columns"]},{prop:"Behavior:RepeatHeaders",type:"checkbox"},{prop:"Behavior:ShowTitle",type:"checkbox",afterSetValue:this.onShowTitleChange},{prop:"Behavior:WrappedGap",type:"unit"},"Data:DataSource","Data:Filter"],["Behavior:CanGrow","Behavior:CanShrink","Behavior:GrowToBottom"]),this.mainFields=[["Design:Name"],["Data:DataSource"]]},this.rightClick=function(t){var r,i=this.onChangeCM.bind(this);return r=require("currentReport").res.createContextMenu(this.toString(),[{name:n.tr("Show Title"),type:"checkbox",curVal:this.prop("ShowTitle"),prop:"ShowTitle",onChange:function(e){i(e),this.onShowTitleChange(e.prop,e.curVal)}.bind(this)},{name:n.tr("Repeat Headers"),type:"checkbox",curVal:this.prop("RepeatHeaders"),prop:"RepeatHeaders",onChange:i},{name:n.tr("Cells Side By Side"),type:"checkbox",curVal:this.prop("CellsSideBySide"),prop:"CellsSideBySide",onChange:i},{type:"separator"},{name:n.tr("Style"),type:"list",items:function(){var t=[],r=this.prop("Style"),s=function(e){i(e),this.colorize()}.bind(this);return e.each(this.attr("Styles"),function(e){t.push({name:n.tr(e),type:"checkbox",prop:"Style",curVal:r===e?!0:!1,val:e,closeAfter:!0,onChange:s})}),t}.bind(this)}]),r.css({left:t.pageX,top:t.pageY}),require("head").put(r),!1},this.getCurStyle=function(){return this.attr("Styles")[this.prop("Style")]},this._setDefaultCellValues=function(e,t,n){var r=t;r&&(r=r.match(/.([^.]+)\]$/),r&&r[1]?(r=r[1],n||(r="["+r+"]")):r=t),e.prop("Text",r||n||""),e.prop("TextFill.Color",e.defaultValues["TextFill.Color"]),e.prop("Fill.Color",e.defaultValues["Fill.Color"]),e.prop("HorzAlign","Center"),e.prop("VertAlign","Center")},this.colorize=function(e){var t,n=this.getCurStyle(),r=function(e){this._setDefaultCellValues(e,null,e.prop("Text")),e.getPosInRow()<t[0]||e.getPosInColumn()<t[1]?e.prop("Fill.Color",n.cr):e.prop("Fill.Color",n.cells),e.prop("Border.Lines","All"),e.prop("Border.Width",1),e.prop("Border.Style","Solid"),e.prop("Border.Color",n.bc||e.prop("Border.Color")),e.render()}.bind(this);t=this.getFirstCellPos(),e?r(e):this._eachCell(function(e,t){r(t)})},this.onShowTitleChange=function(e,t){if(t&&!this.attr("hasTitle")){var n=this.appendRow(0),r=0,i=n.cells.length;this.attr("hasTitle",!0);for(;r<i;r+=1)this.colorize(n.cells[r])}else!t&&this.attr("hasTitle")&&(this.removeRow(0),this.attr("hasTitle",!1));this.adjustTitle(),this.update()},this.afterAlign=function(){var e=this.rows[0].cells[1],t=this.rows[1].cells[0],r=this.rows[1].cells[1];p(e,{Text:n.tr("Drag data here to create a new column"),"TextFill.Color":"gray"},null,0),p(t,{Text:n.tr("Drag data here to create a new row"),"TextFill.Color":"gray"},null,1),p(r,{Text:n.tr("Drag data here to create a new cell"),"TextFill.Color":"gray"},null,2)},this._eachCR=function(e,t){var r,i,s,o,u,a,f=this.attr("MatrixCells"),l,c,h,p;t==="ColSpan"?(u="horz",o="RowSpan",a="next"):(u="vert",o="ColSpan",a="under");for(l=e.length-1;l>=0;l-=1){h=e[l].cell,s=f[u]&&f.length?f.length:1,i=(i||0)+s,p=h[a]();for(c=i-1;c>0;c-=1){if(!p)continue;p.prop("ColSpan",1),p.prop("RowSpan",1),this._setDefaultCellValues(p),p=p[a]()}h.prop(t,i),r=h[a](),e[l].Totals!==!1?r&&(r.prop(o,e.length-l),r.prop(t,s),this._setDefaultCellValues(r,n.tr("Total"))):i-=1,this._setDefaultCellValues(h,e[l].Expression)}},this.adjust=function(){this.adjustCells(),this._eachCR(this.attr("MatrixColumns"),"ColSpan"),this._eachCR(this.attr("MatrixRows"),"RowSpan"),this.adjustTitle(),this.colorize()},this.adjustTitle=function(){var e=this.attr("MatrixRows").length,t=this.rows[0].cells[0],n=1;if(!this.prop("ShowTitle"))return;e&&(n=e,this.attr("MatrixCells").vert&&(n+=1),t.prop("ColSpan",n)),t=this.rows[0].cells[n],n=this.attr("ColumnCount")-t.getPosInRow(),t.prop("ColSpan",n)},this.getFirstCellPos=function(){var e=this.attr("MatrixColumns"),t=this.attr("MatrixRows"),n=this.attr("MatrixCells"),r=[1,1];return t.length?r[0]=t[t.length-1].cell.getPosInRow()+(n.vert&&n.length>1?2:1):n.vert&&(r[0]+=1),e.length?r[1]=e[e.length-1].cell.getPosInColumn()+(n.horz&&n.length>1?2:1):(this.prop("ShowTitle")&&(r[1]+=1),n.horz&&(r[1]+=1)),r},this.adjustCells=function(){var t=this.getFirstCellPos(),n=this.attr("MatrixColumns"),r=this.attr("MatrixRows"),i=this.attr("MatrixCells"),s,o,u,a=[],f,l;o=this.rows[t[1]].cells[t[0]],s=o;if(i.horz){f=n.length*i.length+i.length||1;for(l=n.length-1;l>=0;l-=1)n[l].Totals===!1&&(f-=i.length);s.afterInRow().length<f&&(this.attr("ColumnCount",s.getPosInRow()+f),this.update())}else if(i.vert){f=r.length*i.length+i.length||1;for(l=r.length-1;l>=0;l-=1)r[l].Totals===!1&&(f-=i.length);s.afterInColumn().length<f&&(this.attr("RowCount",s.getPosInColumn()+f),this.update())}for(l=0;l<i.length;l+=1)i[l].cell=s,s.expr=i[l],this._setDefaultCellValues(s,i[l].Expression),i.horz?(p(s,null,"1010",2),s=s.next()):i.vert&&(p(s,null,"0101",2),s=s.under());if(s&&i.horz)a=s.afterInRow(!0),s=o.over(),u="next";else{if(!s||!i.vert)return;a=s.afterInColumn(!0),s=o.prev(),u="under"}a.length>1&&e.each(a,function(e,t){this._setDefaultCellValues(t,"")}.bind(this)),l=0;while(s)this._setDefaultCellValues(s,i[l%i.length].Expression,!0),s=s[u](),l+=1},this.droppedOnColumn=function(e,t,n){this.attr("MatrixColumns").length===1?this.appendColumn(this.attr("ColumnCount")):t===2?(this.appendColumn(e.getPosInRow()+2),this.appendRow(e.getPosInColumn()+0),e=e.over()):(this.appendColumn(e.getPosInRow()+1),this.appendRow(e.getPosInColumn()+1),e=e.under()),n.cell=e,e.expr=n,p(e,null,"0101",0),this.adjust(),this.update(),this.rebuildTree()},this.droppedOnRow=function(e,t,n){this.attr("MatrixRows").length===1?this.appendRow(this.attr("RowCount")):t===1?(this.appendRow(e.getPosInColumn()+2),this.appendColumn(e.getPosInRow()+0),e=e.prev()):(this.appendRow(e.getPosInColumn()+1),this.appendColumn(e.getPosInRow()+1),e=e.next()),n.cell=e,e.expr=n,p(e,null,"1010",1),this.adjust(),this.update(),this.rebuildTree()},this.droppedOnCell=function(e,t){var n=this.attr("MatrixCells");n.length>1?n.length===2&&(t===1||t===3?(n.horz=!0,this.appendRow(e.getPosInColumn())):(n.vert=!0,this.appendColumn(e.getPosInRow()))):p(e,null,"1111",2),this.adjust(),this.update(),this.rebuildTree()},this.bindEvents=function(){var e=this.attr("MatrixCells"),t=this.attr("MatrixRows"),n=this.attr("MatrixColumns"),r=t.length||1,i=e.length||1,s=n.length||1,o,u,a=[0,1],f=[1,0],l=[0,0];i===1?(a=[0,r],f=[s,0]):i>0&&(this.attr("RowCount")>this.attr("ColumnCount")?(e.vert=!0,a=[0,r+1],f=[s,0],l[1]=1):(e.horz=!0,a=[0,r],f=[s+1,0],l[0]=1)),this.prop("ShowTitle")&&(this.attr("hasTitle",!0),a[0]+=1,f[0]+=1),u=this.rows[a[0]].cells[a[1]],o=0;while(u&&o<s)n[o]&&(n[o].cell=u,u.expr=n[o]),p(u,null,"0101",0),u=u.under(),o+=1;l[0]+=u.getPosInColumn(),u=this.rows[f[0]].cells[f[1]],o=0;while(u&&o<r)t[o]&&(t[o].cell=u,u.expr=t[o]),p(u,null,"1010",1),u=u.next(),o+=1;l[1]+=u.getPosInRow(),u=this.rows[l[0]].cells[l[1]],o=0;while(u&&o<i)e.horz?(p(u,null,"1010",2),u=u.next()):e.vert?(p(u,null,"0101",2),u=u.under()):(p(u,null,"1111",2),u=u.next()),o+=1},this.fillProps=function(t){var n=this.attr("MatrixCells"),r=this.attr("MatrixRows"),i=this.attr("MatrixColumns"),s;this.to.fillProps.apply(this,arguments),s=function(n,r){var i,s;t.find(n).each(function(t,n){i={},e.each(n.attributes,function(e,t){s=t.value==="false"?!1:t.value==="true"?!0:t.value,i[t.name]=s}),r.push(i)}.bind(this))}.bind(this),s("MatrixColumns >",i),s("MatrixRows >",r),s("MatrixCells >",n),this.bindEvents()},this.toXML=function(t){var n=e(this.to.toXML.apply(this,arguments)),r=e(t.ownerDocument.createElement("MatrixColumns")),i=e(t.ownerDocument.createElement("MatrixRows")),s=e(t.ownerDocument.createElement("MatrixCells")),o=this.attr("MatrixColumns"),u=this.attr("MatrixRows"),a=this.attr("MatrixCells"),f;return e.each(o,function(){f=e(t.ownerDocument.createElement("Header")),e.each(this,function(e,t){if(typeof t=="object")return;f.attr(e,t)}),r.append(f)}),e.each(u,function(){f=e(t.ownerDocument.createElement("Header")),e.each(this,function(e,t){if(typeof t=="object")return;f.attr(e,t)}),i.append(f)}),e.each(a,function(){f=e(t.ownerDocument.createElement("Cell")),e.each(this,function(e,t){if(typeof t=="object")return;f.attr(e,t)}),s.append(f)}),n.prepend(s),n.prepend(i),n.prepend(r),n[0]}};return t.extend(d,o),d}),define("components/ZipCodeObject",["jquery","utils"],function(e,t){var n={title:"ZipCodeObject",info:"ZipCodeObject info",icon:"icon-zip_code",disabled:!0},r=function(){this.type="ZipCodeObject",this._init=function(){this.prop({Name:"ZipCode"})},this.fillMap=function(){this._super.fillMap.apply(this,arguments)},this.render=function(){return this._super.render.apply(this,arguments),this.$g}};return t.extend(r,n),r}),requirejs.config({baseUrl:"scripts",paths:{jquery:"../bower_components/jQuery/dist/jquery.min",jsrender:"../bower_components/jsrender/jsrender.min",cm:"../bower_components/codemirror","jquery-ui":"../bower_components/jquery-ui/ui",spectrum:"../bower_components/spectrum/spectrum",baseUtils:"base/baseUtils",config:"base/config",utils:"modules/utils",baseEvents:"modules/events",StateMachine:"modules/StateMachine",baseController:"base/Controller",baseEntity:"base/Entity",baseBand:"base/Band",baseComponent:"base/Component",Code:"base/Code",properties:"modules/properties",facProperties:"modules/properties/properties",facEvents:"modules/properties/events",baseCollection:"collections/collection",bandCollection:"collections/bandCollection",componentCollection:"collections/componentCollection",dataSourceCollection:"collections/dataSourceCollection",parameterCollection:"collections/parameterCollection",UIRes:"modules/UIRes",queue:"modules/queue",units:"modules/units",spinner:"modules/spinner",notification:"modules/notification",expression:"modules/expression",l10n:"modules/l10n","field-properties":"customization-res/base-properties/fields"},map:{"jquery-private":{jquery:"jquery"},"*":{jquery:"jquery-private"}}}),require(["App","jquery","l10n","page-types/Standard","bands/ChildBand","bands/ColumnFooterBand","bands/ColumnHeaderBand","bands/DataBand","bands/DataFooterBand","bands/DataHeaderBand","bands/GroupFooterBand","bands/GroupHeaderBand","bands/OverlayBand","bands/PageFooterBand","bands/PageHeaderBand","bands/ReportSummaryBand","bands/ReportTitleBand","components/CellularTextObject","components/CheckBoxObject","components/LineObject","components/PictureObject","components/RichObject","components/ShapeObject","components/SubreportObject","components/TableObject","components/TextObject","components/BarcodeObject","components/SparklineObject","components/LinearGauge","components/SimpleGauge","components/MatrixObject","components/ZipCodeObject"],function(e,t,n){n.isReady().done(function(){define("app",[],function(){return new e}),require(["app","initialized"],function(e,t){e.isReady().done(t)})})}),define("main",function(){});